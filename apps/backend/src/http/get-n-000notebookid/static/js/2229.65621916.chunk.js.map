{"version":3,"file":"static/js/2229.65621916.chunk.js","mappings":"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","sources":["../../../apps/frontend/src/notebooks/notebook/hooks/animateMutations.ts","../../../apps/frontend/src/notebooks/notebook/hooks/useAnimateMutations.ts","../../ui/src/atoms/Divider/Divider.tsx","../../ui/src/atoms/Placeholder/Placeholder.tsx","../../ui/src/atoms/placeholders/ParagraphPlaceholder/ParagraphPlaceholder.tsx","../../ui/src/atoms/placeholders/EditorPlaceholder/EditorPlaceholder.tsx","../../ui/src/atoms/placeholders/NotebookIconPlaceholder/NotebookIconPlaceholder.tsx","../../ui/src/pages/NotebookPage/NotebookPage.tsx"],"sourcesContent":["import { cssVar } from '@decipad/ui';\n\nconst isHtmlElement = (node: Node): node is HTMLElement => {\n  return node instanceof HTMLElement && !(node instanceof Text);\n};\n\nlet initialized = false;\nlet animating = false;\nlet observer: MutationObserver;\n\nconst animatingNodes = new WeakSet<Node>();\n\nconst animate = (node: Node) => {\n  if (isHtmlElement(node)) {\n    if (animatingNodes.has(node) || node.getAttribute('data-no-animate')) {\n      return;\n    }\n    animatingNodes.add(node);\n    const beforeStyle = node.getAttribute('style');\n    node.setAttribute(\n      'style',\n      `background-color: ${cssVar(\n        'mutationAnimationColor'\n      )}; transition: background-color 0.5s ease-in-out`\n    );\n    setTimeout(() => {\n      node.setAttribute(\n        'style',\n        'background-color: transparent; transition: background-color 0.5s ease-in-out'\n      );\n      setTimeout(() => {\n        if (beforeStyle != null) {\n          node.setAttribute('style', beforeStyle);\n        } else {\n          node.removeAttribute('style');\n        }\n        animatingNodes.delete(node);\n      }, 1000);\n    }, 2000);\n  }\n};\n\nconst shouldRecurse = (node: Element): boolean =>\n  node.getAttribute('data-stop-animate-query') === null;\n\nconst shouldAnimate = (node: Node): boolean => {\n  if (!isHtmlElement(node)) {\n    return false;\n  }\n  return (\n    node.getAttribute('data-highlight-changes') === 'true' ||\n    (node.parentElement != null &&\n      shouldRecurse(node.parentElement) &&\n      shouldAnimate(node.parentElement))\n  );\n};\n\nconst animateParentNode = (node: Node) => {\n  // if (isHtmlElement(node)) {\n  if (shouldAnimate(node) && node.parentElement) {\n    animate(node.parentElement);\n  }\n  // }\n};\n\nconst onMutation: MutationCallback = (mutations: MutationRecord[]) => {\n  if (animating) {\n    return;\n  }\n  animating = true;\n  requestAnimationFrame(() => {\n    try {\n      for (const mutation of mutations) {\n        if (mutation.target.parentElement) {\n          animateParentNode(mutation.target.parentElement);\n        }\n      }\n    } catch (err) {\n      console.error('Error animating mutation:', err);\n    } finally {\n      animating = false;\n    }\n  });\n};\n\nconst observe = (root: Node) => {\n  observer = new MutationObserver(onMutation);\n  observer.observe(root, {\n    subtree: true,\n    // childList: true,\n    attributes: false,\n    characterData: true,\n    // attributeFilter: ['data-slate-node'],\n  });\n\n  initialized = true;\n};\n\nconst schedule = () => {\n  setTimeout(() => {\n    const editor = document.querySelector('[data-slate-editor=\"true\"]');\n    if (!editor) {\n      schedule();\n    } else {\n      observe(editor);\n    }\n  }, 1000);\n};\n\nexport const animateMutations = () => {\n  if (process.env.NODE_ENV === 'production') {\n    if (initialized) {\n      return;\n    }\n    schedule();\n    initialized = true;\n  }\n};\n\nexport const stopAnimatingMutations = () => {\n  if (observer) {\n    observer.disconnect();\n  }\n  initialized = false;\n};\n","import { useEffect } from 'react';\nimport { animateMutations, stopAnimatingMutations } from './animateMutations';\n\nexport const useAnimateMutations = () => {\n  useEffect(() => {\n    animateMutations();\n    return stopAnimatingMutations;\n  }, []);\n};\n","import { css } from '@emotion/react';\nimport { cssVar } from '../../primitives';\n\nconst styles = css({\n  border: 'none',\n  boxShadow: `0 0 0 0.5px ${cssVar('strongHighlightColor')}`,\n});\n\nexport const Divider = (): ReturnType<React.FC> => <hr css={styles} />;\n","import { css } from '@emotion/react';\nimport { cssVar } from '../../primitives';\n\nconst styles = css({\n  display: 'flex',\n  minHeight: '8px',\n\n  backgroundColor: cssVar('highlightColor'),\n  borderRadius: '4px',\n});\nconst lessRoundStyles = css({\n  borderRadius: '2px',\n});\n\ninterface PlaceholderProps {\n  lessRound?: boolean;\n}\n\nexport const Placeholder = ({\n  lessRound = false,\n}: PlaceholderProps): ReturnType<React.FC> => {\n  return (\n    <div role=\"presentation\" css={[styles, lessRound && lessRoundStyles]} />\n  );\n};\n","import { css } from '@emotion/react';\nimport { FC, useEffect, useState } from 'react';\nimport { Placeholder } from '../../index';\n\nconst paragraphWrapperStyles = css({\n  display: 'grid',\n  gap: '12px',\n  gridAutoRows: '28px',\n});\n\nexport const ParagraphPlaceholder = (): ReturnType<FC> => {\n  const [sizes, setSizes] = useState<number[]>([]);\n\n  useEffect(() => {\n    const randomWidth = () => Math.random() * (100 - 85) + 85;\n    setSizes(Array.from({ length: 6 }, () => randomWidth()));\n  }, []);\n\n  return (\n    <div css={paragraphWrapperStyles}>\n      {sizes.map((size, i) => (\n        <div\n          key={`${size}-${i}`}\n          css={{ display: 'grid', maxWidth: `${size}%` }}\n        >\n          <Placeholder />\n        </div>\n      ))}\n    </div>\n  );\n};\n","import { css } from '@emotion/react';\nimport { FC } from 'react';\nimport { slimBlockWidth } from '../../../styles/editor-layout';\nimport { Divider } from '../../Divider/Divider';\nimport { Placeholder } from '../../Placeholder/Placeholder';\nimport { ParagraphPlaceholder } from '../ParagraphPlaceholder/ParagraphPlaceholder';\n\nconst wrapperStyles = css({\n  paddingTop: '24px',\n  minWidth: `${slimBlockWidth}px`,\n  margin: '0 auto',\n});\n\nconst titleStyles = css({\n  display: 'grid',\n  height: '40px',\n  marginBottom: '24px',\n  maxWidth: '300px',\n});\n\nexport const EditorPlaceholder = (): ReturnType<FC> => {\n  return (\n    <div css={wrapperStyles}>\n      <div css={titleStyles}>\n        <Placeholder />\n      </div>\n      <div role=\"presentation\" css={{ marginBottom: '12px', display: 'grid' }}>\n        <Divider />\n      </div>\n      <ParagraphPlaceholder />\n    </div>\n  );\n};\n","import React from 'react';\nimport { css } from '@emotion/react';\nimport { cssVar, shortAnimationDuration } from '../../../primitives';\nimport { editorLayout } from '../../../styles';\n\nconst blockStyles = css({\n  display: 'grid',\n  gridTemplateRows: '32px',\n  gridTemplateColumns: `min(100%, ${editorLayout.slimBlockWidth}px)`,\n  justifyContent: 'center',\n  alignItems: 'center',\n\n  borderRadius: '6px',\n});\n\nconst iconWrapperStyles = css({\n  width: '32px',\n  height: '32px',\n  display: 'grid',\n  placeItems: 'center',\n  borderRadius: '6px',\n  backgroundColor: `${cssVar('highlightColor')}`,\n  transition: `background-color ${shortAnimationDuration} ease-out`,\n});\n\nexport const NotebookIconPlaceholder: React.FC = () => (\n  <div css={blockStyles}>\n    <div css={iconWrapperStyles} />\n  </div>\n);\n","import { css } from '@emotion/react';\nimport { ReactNode } from 'react';\nimport { mobileQuery, smallScreenQuery } from '../../primitives';\nimport { editorLayout } from '../../styles';\n\nconst styles = css({\n  padding: '0 32px',\n  display: 'grid',\n  gridTemplateColumns: '100%',\n  alignContent: 'start',\n\n  [mobileQuery]: {\n    padding: '0 24px',\n  },\n});\n\nconst notebookStyles = css({\n  order: 2,\n\n  paddingTop: '72px',\n  paddingBottom: '200px',\n\n  display: 'grid',\n  gridTemplateColumns: `minmax(100%, ${editorLayout.wideBlockWidth}px)`,\n  justifyContent: 'center',\n  [smallScreenQuery]: {\n    paddingTop: '24px',\n  },\n});\n\nconst headerStyles = css({\n  zIndex: 2,\n  [smallScreenQuery]: {\n    margin: '0 -4px',\n  },\n});\n\ninterface NotebookPageProps {\n  readonly topbar?: ReactNode;\n  readonly notebookIcon: ReactNode;\n  readonly notebook: ReactNode;\n}\n\nexport const NotebookPage: React.FC<NotebookPageProps> = ({\n  topbar,\n  notebookIcon,\n  notebook,\n}) => {\n  return (\n    <article css={styles}>\n      <main css={notebookStyles}>\n        {notebookIcon}\n        {notebook}\n      </main>\n      {topbar && <header css={headerStyles}>{topbar}</header>}\n    </article>\n  );\n};\n"],"names":["isHtmlElement","node","HTMLElement","Text","observer","initialized","animating","animatingNodes","WeakSet","shouldAnimate","getAttribute","parentElement","shouldRecurse","animateParentNode","has","add","beforeStyle","setAttribute","cssVar","setTimeout","removeAttribute","delete","animate","onMutation","mutations","requestAnimationFrame","mutation","target","err","console","error","schedule","editor","document","querySelector","root","MutationObserver","observe","subtree","attributes","characterData","stopAnimatingMutations","disconnect","useAnimateMutations","useEffect","styles","css","border","boxShadow","Divider","display","minHeight","backgroundColor","borderRadius","lessRoundStyles","Placeholder","lessRound","role","paragraphWrapperStyles","ParagraphPlaceholder","sizes","setSizes","useState","Array","from","length","Math","random","map","size","i","maxWidth","wrapperStyles","paddingTop","minWidth","slimBlockWidth","margin","titleStyles","EditorPlaceholder","blockStyles","gridTemplateRows","gridTemplateColumns","editorLayout","justifyContent","alignItems","iconWrapperStyles","width","height","placeItems","transition","shortAnimationDuration","NotebookIconPlaceholder","padding","alignContent","mobileQuery","notebookStyles","order","paddingBottom","smallScreenQuery","headerStyles","zIndex","NotebookPage","topbar","notebookIcon","notebook"],"sourceRoot":""}