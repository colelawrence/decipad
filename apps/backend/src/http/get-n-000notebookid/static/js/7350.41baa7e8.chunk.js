"use strict";exports.id=7350,exports.ids=[7350],exports.modules={35213:function(e,t){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(r,n,o){var i=e.call(this,"Error #"+r+": "+n)||this;return i.code=r,i.message=n,i.path=o,Object.setPrototypeOf(i,t.prototype),i}return r(t,e),t.prototype.toReplyError=function(){return{code:this.code,message:this.message,path:this.path}},t}(Error);t.RPCError=n},18737:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.lastSequentialCall=-1,this.queue=[]}return e.prototype.reset=function(e){this.lastSequentialCall=e-1,this.queue=[]},e.prototype.append=function(e){if(e.counter<=this.lastSequentialCall+1){var t=[e];return this.lastSequentialCall=e.counter,this.replayQueue(t),t}for(var r=0;r<this.queue.length;r++)if(this.queue[r].counter>e.counter)return this.queue.splice(r,0,e),[];return this.queue.push(e),[]},e.prototype.replayQueue=function(e){for(;this.queue.length;){var t=this.queue[0];if(t.counter>this.lastSequentialCall+1)return;e.push(this.queue.shift()),this.lastSequentialCall=t.counter}},e}();t.Reorder=r},97350:function(e,t,r){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(71344),i=r(35213),s=r(18737),c=r(11091);var a=function(e){function t(t){var r=e.call(this)||this;return r.options=t,r.calls=Object.create(null),r.callCounter=0,r.reorder=new s.Reorder,r.listener=function(e){if(!r.options.origin||"*"===r.options.origin||e.origin===r.options.origin){var t;try{t=JSON.parse(e.data)}catch(a){return}if(c.isRPCMessage(t)&&t.serviceID===r.options.serviceId){if(r.isReadySignal(t)){var n="method"===t.type?t.params:t.result;n&&n.protocolVersion?r.remoteProtocolVersion=n.protocolVersion:r.remoteProtocolVersion=r.remoteProtocolVersion,r.callCounter=0,r.reorder.reset(t.counter),r.emit("isReady",!0)}for(var o=0,i=r.reorder.append(t);o<i.length;o++){var s=i[o];r.emit("recvData",s),r.dispatchIncoming(s)}}}},r.unsubscribeCallback=(t.receiver||c.defaultRecievable).readMessages(r.listener),r.isReady=new Promise((function(e){var n={protocolVersion:t.protocolVersion||"1.0"};r.expose("ready",(function(){return e(),n})),r.call("ready",n).then(e).catch(e)})),r}return n(t,e),t.prototype.create=function(e){var r=new t(e);return r.isReady.then((function(){return r}))},t.prototype.expose=function(e,t){var r=this;return this.on(e,(function(e){e.discard?t(e.params):new Promise((function(r){return r(t(e.params))})).then((function(t){return{type:"reply",serviceID:r.options.serviceId,id:e.id,result:t}})).catch((function(t){return{type:"reply",serviceID:r.options.serviceId,id:e.id,error:t instanceof i.RPCError?t.toReplyError():{code:0,message:t.stack||t.message}}})).then((function(e){r.emit("sendReply",e),r.post(e)}))})),this},t.prototype.call=function(e,t,r){var n=this;void 0===r&&(r=!0);var o="ready"===e?-1:this.callCounter,i={type:"method",serviceID:this.options.serviceId,id:o,params:t,method:e,discard:!r};if(this.emit("sendMethod",i),this.post(i),r)return new Promise((function(e,t){n.calls[o]=function(r,n){r?t(r):e(n)}}))},t.prototype.destroy=function(){this.emit("destroy"),this.unsubscribeCallback()},t.prototype.remoteVersion=function(){return this.remoteProtocolVersion},t.prototype.handleReply=function(e){var t,r=this.calls[e.id];r&&(e.error?r((t=e.error,new i.RPCError(t.code,t.message,t.path)),null):r(null,e.result),delete this.calls[e.id])},t.prototype.post=function(e){e.counter=this.callCounter++,this.options.target.postMessage(JSON.stringify(e),this.options.origin||"*")},t.prototype.isReadySignal=function(e){return"method"===e.type&&"ready"===e.method||"reply"===e.type&&-1===e.id},t.prototype.dispatchIncoming=function(e){switch(e.type){case"method":if(this.emit("recvMethod",e),this.listeners(e.method).length>0)return void this.emit(e.method,e);this.post({type:"reply",serviceID:this.options.serviceId,id:e.id,error:{code:4003,message:'Unknown method name "'+e.method+'"'},result:null});break;case"reply":this.emit("recvReply",e),this.handleReply(e)}},t}(o.EventEmitter);t.RPC=a},11091:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRPCMessage=function(e){return("method"===e.type||"reply"===e.type)&&"number"===typeof e.counter},t.defaultRecievable={readMessages:function(e){return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}}},71344:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var c=new o(n,i||e,s),a=r?r+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],c]:e._events[a].push(c):(e._events[a]=c,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function c(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),c.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,o,i,s){var c=r?r+e:e;if(!this._events[c])return!1;var a,u,p=this._events[c],l=arguments.length;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),l){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,n),!0;case 4:return p.fn.call(p.context,t,n,o),!0;case 5:return p.fn.call(p.context,t,n,o,i),!0;case 6:return p.fn.call(p.context,t,n,o,i,s),!0}for(u=1,a=new Array(l-1);u<l;u++)a[u-1]=arguments[u];p.fn.apply(p.context,a)}else{var h,f=p.length;for(u=0;u<f;u++)switch(p[u].once&&this.removeListener(e,p[u].fn,void 0,!0),l){case 1:p[u].fn.call(p[u].context);break;case 2:p[u].fn.call(p[u].context,t);break;case 3:p[u].fn.call(p[u].context,t,n);break;case 4:p[u].fn.call(p[u].context,t,n,o);break;default:if(!a)for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];p[u].fn.apply(p[u].context,a)}}return!0},c.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==t||o&&!c.once||n&&c.context!==n||s(this,i);else{for(var a=0,u=[],p=c.length;a<p;a++)(c[a].fn!==t||o&&!c[a].once||n&&c[a].context!==n)&&u.push(c[a]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c}};
//# sourceMappingURL=7350.41baa7e8.chunk.js.map