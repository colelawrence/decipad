"use strict";exports.id=6259,exports.ids=[6259],exports.modules={65020:(e,o,t)=>{t.d(o,{D:()=>l});var a=t(50470),r=t(74029);function l(e){const o=null===e||void 0===e?void 0:e.replace(" ","").split("-");if(o){if(2!==o.length)return console.error("Cannot parse notebook icon ".concat(e)),{ok:!1};const t=o[0],l=o[1];return a.x.includes(t)&&r.kV.includes(l)?{icon:t,iconColor:l,ok:!0}:{ok:!1}}return"string"===typeof e&&console.error("bad parameter for iconIdentifier ".concat(e)),{ok:!1}}},17337:(e,o,t)=>{t.r(o),t.d(o,{default:()=>be,loadNotebooks:()=>pe});var a=t(1943),r=t(68825),l=t(30969),i=t(426),s=t(66840),n=t(5594);const d={name:"1jchuht--DashboardSidebarPlaceholder--containerStyle",styles:"width:100%;display:flex;flex-direction:column;row-gap:20px;padding:calc(8px + 0.625vmax) 24px 56px;label:-DashboardSidebarPlaceholder--containerStyle;"},c=(0,i.css)({height:"24px",width:"24px",borderRadius:"8px",marginTop:"8px",marginBottom:"8px",backgroundColor:"".concat((0,s.g)("highlightColor"))},";label:-DashboardSidebarPlaceholder--avatarPlaceholderStyles;"),h=(0,i.css)({height:"35.59px",borderRadius:"8px",backgroundColor:"".concat((0,s.g)("highlightColor"))},";label:-DashboardSidebarPlaceholder--buttonPlaceholderStyles;"),p=()=>(0,n.BX)("div",{css:d,children:[(0,n.tZ)("div",{css:c}),(0,n.tZ)("div",{css:h})]});var b=t(25859),u=t(20758),m=t(9067);const{gridStyles:v}=m,g=(0,i.css)(v,{alignItems:"end",padding:"".concat(3,"px 0")},";label:-NotebookListItemPlaceholder--styles;"),k=(0,i.css)({margin:"".concat(-3,"px 0"),height:"38px",display:"grid"},";label:-NotebookListItemPlaceholder--iconStyles;"),y=(0,i.css)({height:"12px",maxWidth:"".concat(12400/506,"%"),display:"grid"},";label:-NotebookListItemPlaceholder--titleStyles;"),w=(0,i.css)({height:"12px",maxWidth:"".concat(44e3/506,"%"),display:"grid"},";label:-NotebookListItemPlaceholder--descriptionStyles;"),P={name:"1xgu8z0--NotebookListItemPlaceholder--middleAndRightStyles",styles:"height:12px;max-width:64px;display:grid;label:-NotebookListItemPlaceholder--middleAndRightStyles;"},x=()=>(0,n.BX)("div",{role:"presentation",css:g,children:[(0,n.tZ)("div",{css:[k,"grid-area:icon;;label:-NotebookListItemPlaceholder--NotebookListItemPlaceholder;"],children:(0,n.tZ)(u.V,{})}),(0,n.tZ)("div",{css:[y,"grid-area:title;;label:-NotebookListItemPlaceholder--NotebookListItemPlaceholder;"],children:(0,n.tZ)(u.V,{})}),(0,n.tZ)("div",{css:[w,"grid-area:description;;label:-NotebookListItemPlaceholder--NotebookListItemPlaceholder;"],children:(0,n.tZ)(u.V,{})}),(0,n.tZ)("div",{css:[P,"grid-area:updated;;label:-NotebookListItemPlaceholder--NotebookListItemPlaceholder;"],children:(0,n.tZ)(u.V,{})}),(0,n.tZ)("div",{css:[P,"grid-area:tags;;label:-NotebookListItemPlaceholder--NotebookListItemPlaceholder;"],children:(0,n.tZ)(u.V,{})})]});const Z=(0,i.css)({height:"100%",overflow:"hidden",padding:"".concat(m.verticalPadding," ").concat(m.horizontalPadding),display:"grid",gridTemplateRows:"auto 1fr",rowGap:"28px"},";label:-NotebookListPlaceholder--styles;"),{gridStyles:f}=m,S=(0,i.css)(f,";label:-NotebookListPlaceholder--headerStyles;"),N={name:"7b5hzn--NotebookListPlaceholder--bodyStyles",styles:"display:grid;align-content:start;row-gap:32px;overflow:hidden;label:-NotebookListPlaceholder--bodyStyles;"};var C={name:"1olzvv7--NotebookListPlaceholder--NotebookListPlaceholder",styles:"grid-area:icon;max-width:32px;label:-NotebookListPlaceholder--NotebookListPlaceholder;"},I={name:"lzvxtm--NotebookListPlaceholder--NotebookListPlaceholder",styles:"grid-area:title;max-width:32px;label:-NotebookListPlaceholder--NotebookListPlaceholder;"},L={name:"urnpar--NotebookListPlaceholder--NotebookListPlaceholder",styles:"grid-area:tags;max-width:32px;label:-NotebookListPlaceholder--NotebookListPlaceholder;"};const F=()=>(0,n.BX)("div",{"aria-label":"Notebook list loading",css:Z,children:[(0,n.BX)("div",{css:S,children:[(0,n.tZ)("div",{css:C,children:(0,n.tZ)(u.V,{lessRound:!0})}),(0,n.tZ)("div",{css:I,children:(0,n.tZ)(u.V,{lessRound:!0})}),(0,n.tZ)("div",{css:L,children:(0,n.tZ)(u.V,{lessRound:!0})})]}),(0,n.tZ)("div",{css:N,children:Array(10).fill(null).map(((e,o)=>(0,n.tZ)(x,{},o)))})]});var D=t(70115),R=t(49939);const W="@media (min-width: ".concat(R.cP.portrait.width,"px)"),B=(0,i.css)({height:0,minHeight:"100%",position:"relative",display:"grid",gridTemplate:'\n    "sidebar      " max-content\n    "topbar       " max-content\n    "notebook-list" minmax(200px, auto)\n    /1fr\n  ',[W]:{gridTemplate:'\n      "sidebar topbar       " auto\n      "sidebar notebook-list" 1fr\n      /347px   1fr\n    '},"> *":{display:"grid"}},";label:-Dashboard--styles;"),E=(0,i.css)({[W]:{borderRight:"1px solid ".concat((0,s.g)("borderColor"))}},";label:-Dashboard--sidebarStyles;");var T={name:"1xdfm97--Dashboard--Dashboard",styles:"grid-area:notebook-list;overflow-y:auto;label:-Dashboard--Dashboard;"},A={name:"a67qwj--Dashboard--Dashboard",styles:"grid-area:topbar;label:-Dashboard--Dashboard;"};const H=e=>{let{sidebar:o,topbar:t,notebookList:a}=e;return(0,n.BX)("div",{css:B,"data-testid":"dashboard",children:[(0,n.tZ)("main",{css:T,children:a}),(0,n.tZ)("header",{css:A,children:t}),(0,n.tZ)("aside",{css:["grid-area:sidebar;",E,";label:-Dashboard--Dashboard;"],children:o})]})};var M=t(50576),z=t(68160),O=t(54309),X=t(28493),j=t(62861),U=t(56513),V=t(60569),$=t(78819);const G=(e,o)=>{var t;const a=window.URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.setAttribute("download",e),document.body.appendChild(r),r.click(),null===(t=r.parentNode)||void 0===t||t.removeChild(r)},Q=e=>async()=>{const o=await(0,$.y)(e),t=await(async(e,o)=>(await fetch("/api/pads/".concat(encodeURIComponent(e),"/export"),{method:"POST",body:o})).blob())(e,o);G("".concat(e,".json"),t)},Y=e=>async()=>{const o=await(async e=>(await fetch("/api/pads/".concat(encodeURIComponent(e),"/backups/export"),{method:"GET"})).blob())(e);G("".concat(e,".zip"),o)};var q=t(65020);const K=e=>{const{icon:o="Rocket",iconColor:t="Catskill"}=(0,q.D)(null===e||void 0===e?void 0:e.icon),a=(null===e||void 0===e?void 0:e.status)||"draft";return{...e,icon:o,iconColor:t,status:a,onExport:Q(e.id),onExportBackups:Y(e.id),creationDate:new Date(e.createdAt)}},J="workspace-cta-dismiss",_=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Server error, please contact support";const t=(0,r.p)();return async a=>{try{const r=await e(a);if(null==r)return console.error("No response"),void t("No response to mutation request. Please contact support","error");const{data:l,error:i}=r;return null!=i?(console.error(i),void t(o,"error")):null==l?(console.error("No data on response"),void t("No data on mutation response. Please contact support","error")):l}catch(r){console.error(r),t(o,"error")}}},ee=()=>Promise.all([t.e(1980),t.e(992)]).then(t.bind(t,76383)),oe=(0,l.lazy)(ee),te=()=>Promise.all([t.e(247),t.e(1980),t.e(3133),t.e(4541)]).then(t.bind(t,99454)),ae=(0,l.lazy)(te),re=()=>Promise.all([t.e(5151),t.e(5195),t.e(3688),t.e(1980),t.e(9540)]).then(t.bind(t,45518)),le=(0,l.lazy)(re),ie=()=>Promise.all([t.e(3133),t.e(5983)]).then(t.bind(t,20953)),se=(0,l.lazy)(ie),ne=()=>Promise.all([t.e(3133),t.e(5877)]).then(t.bind(t,875)),de=(0,l.lazy)(ne),ce=()=>Promise.all([t.e(3133),t.e(4293)]).then(t.bind(t,93869)),he=(0,l.lazy)(ce),pe=()=>Promise.all([t.e(4791),t.e(2229),t.e(3909)]).then(t.bind(t,23503));ee().then(re).then(te);const be=()=>{var e,o,t,i,s,d,c,h,u;const{show:m,showNewMessage:v}=(0,j.o)(),g=(0,l.useCallback)((()=>{m(),v()}),[m,v]),{workspaceId:k}=(0,a.ZX)((0,a.wZ)({}).workspace),y=(0,a.wZ)({}).workspace({workspaceId:k}),w=(0,O.s0)(),{"*":P}=(0,O.UO)(),{params:x}=P&&(0,X.LX)(y.section.templateWithQuery,"/".concat(P))||{params:{sectionId:null}},Z=null===x||void 0===x?void 0:x.sectionId,f="archived"===P,S="shared"===P,{data:N}=(0,z.useSession)(),{data:C}=(0,U.bT)()[0],I=(0,r.p)(),[L,R]=(0,l.useState)(!1),[W,B]=(0,l.useState)((null===C||void 0===C||null===(e=C.self)||void 0===e?void 0:e.name)||""),[E,T]=(0,l.useState)((null===C||void 0===C||null===(o=C.self)||void 0===o?void 0:o.username)||""),[A,$]=(0,l.useState)((null===C||void 0===C||null===(t=C.self)||void 0===t?void 0:t.description)||""),[G,Q]=(0,U.d7)({requestPolicy:"network-only"}),Y=_((0,U.GR)()[1],"Failed to create notebook"),q=_((0,U.mh)()[1],"Failed to remove notebook"),ee=_((0,U.bD)()[1],"Failed to remove notebook"),te=_((0,U.bP)()[1],"Failed to duplicate notebook"),re=_((0,U.d2)()[1],"Failed to move notebook to workspace."),ce=_((0,U.as)()[1],"Failed to import notebook."),be=_((0,U.P)()[1],"Failed to create workspace"),ue=_((0,U.G3)()[1],"Failed to rename workspace"),me=_((0,U.BK)()[1],"Failed to remove workspace"),ve=_((0,U.nS)()[1]),ge=_((0,U.kD)()[1],"Failed to save user"),ke=_((0,U.FE)()[1],"Could not change your username"),ye=_((0,U.sO)()[1]),we=_((0,U.OU)()[1],"Failed to create section"),Pe=_((0,U.R0)()[1],"Failed to remove section"),xe=_((0,U.IO)()[1],"Failed to save section"),Ze=_((0,U.qW)()[1],"Failed to move notebook to section"),fe=(0,l.useCallback)((()=>{(0,z.signOut)({redirect:!1}).then((()=>{window.location.pathname="/"}))}),[]),[Se,Ne]=(0,l.useState)((()=>"1"===global.localStorage.getItem(J))),Ce=(0,l.useCallback)((()=>{global.localStorage.setItem(J,"1"),Ne(!0)}),[]),{data:Ie}=G,Le=(0,l.useMemo)((()=>null===Ie||void 0===Ie?void 0:Ie.workspaces.find((e=>e.id===k))),[null===Ie||void 0===Ie?void 0:Ie.workspaces,k]),Fe=(0,l.useMemo)((()=>{const e=(null===Le||void 0===Le?void 0:Le.sections)||[];return f?{type:"archived",sections:e}:S?{type:"shared",sections:e}:{type:Z?"section":"workspace",sections:e}}),[f,S,Z,Le]),De=(0,l.useMemo)((()=>(e=>{let{page:o}=e;return e=>{const t="archived"===o;return(!!t||!0!==e.archived)&&(!t||!0===e.archived)}})({page:Fe.type})),[Fe]);(0,l.useEffect)((()=>{S&&Q()}),[Q,S]);const Re=(0,l.useMemo)((()=>{var e,o;return null===Le||void 0===Le||null===(e=Le.sections.find((e=>e.id===Z)))||void 0===e||null===(o=e.pads)||void 0===o?void 0:o.filter(De).map(K)}),[null===Le||void 0===Le?void 0:Le.sections,De,Z]),We=(0,l.useMemo)((()=>{var e;return(0,M.sortBy)(null===Le||void 0===Le||null===(e=Le.pads)||void 0===e?void 0:e.items,(e=>-Date.parse(e.createdAt))).filter(De).map(K)}),[null===Le||void 0===Le||null===(i=Le.pads)||void 0===i?void 0:i.items,De]),Be=(0,l.useMemo)((()=>{var e;return(0,M.sortBy)(null===Ie||void 0===Ie||null===(e=Ie.padsSharedWithMe)||void 0===e?void 0:e.items,(e=>-Date.parse(e.createdAt))).map(K)}),[null===Ie||void 0===Ie||null===(s=Ie.padsSharedWithMe)||void 0===s?void 0:s.items]),Ee=(0,l.useMemo)((()=>S?Be:Z?Re&&Re.length>0?Re:[]:We),[We,Re,Be,S,Z]);if(!Le||!N)return(0,n.tZ)(V.mf,{Heading:"h1",wellKnown:"404"});const Te=async()=>{const e={workspaceId:k,sectionId:Z,name:"My notebook title"},o=await Y(e);null!=o&&w((0,a.Fb)({}).notebook({notebook:o.createPad}).$)},Ae=null!==(d=null===Ie||void 0===Ie||null===(c=Ie.workspaces)||void 0===c?void 0:c.map((e=>({...e,href:(0,a.wZ)({}).workspace({workspaceId:e.id}).$,numberOfMembers:1}))))&&void 0!==d?d:[],He=(0,n.tZ)(V.RQ,{Heading:"h1",title:null,suspenseFallback:(0,n.tZ)(p,{}),children:(0,n.tZ)(ae,{showFeedback:g,Heading:"h1",name:(null===C||void 0===C||null===(h=C.self)||void 0===h?void 0:h.name)||"Me",email:N.user.email||"me@example.com",onLogout:fe,activeWorkspace:{...Le,numberOfMembers:1},allWorkspaces:Ae,onCreateWorkspace:()=>w(y.createNew({}).$),onEditWorkspace:e=>{w((0,a.wZ)({}).workspace({workspaceId:e}).edit({}).$)},onClickWorkspace:e=>{w((0,a.wZ)({}).workspace({workspaceId:e}).$)},onCreateSection:we,onUpdateSection:xe,onDeleteSection:e=>{Pe({workspaceId:k,sectionId:e}).then((e=>{e&&I("Section removed","success")})).catch((e=>{console.error("Failed to remove section. Error:",e),I("Failed to remove section.","error")}))},onPointerEnter:()=>ne().then(ie),onOpenSettings:R})}),Me=(0,n.tZ)(V.RQ,{Heading:"h1",title:null,suspenseFallback:(0,n.tZ)(b.D,{}),children:(0,n.tZ)(oe,{onCreateNotebook:Te,onPointerEnter:pe})}),ze=(0,n.tZ)(V.RQ,{Heading:"h1",title:null,suspenseFallback:(0,n.tZ)(F,{}),children:(0,n.tZ)(le,{Heading:"h1",notebooks:Ee,page:Fe,mainWorkspaceRoute:!P,onCreateNotebook:Te,otherWorkspaces:Ae.filter((e=>e.id!==Le.id)),onMoveToSection:(e,o)=>Ze({sectionId:o,notebookId:e}).catch((e=>{console.error("Failed to add notebook to section. Error:",e),I("Failed to add notebook to section","error")})),onDelete:e=>("archived"===Fe.type?ee:q)({id:e}).catch((e=>{console.error("Failed to ".concat("archived"===Fe.type?"delete":"archive"," notebook. Error:"),e),I("Failed to ".concat("archived"===Fe.type?"delete":"archive"," notebook"),"error")})),onDuplicate:e=>te({id:e,targetWorkspace:k}).catch((e=>{console.error("Failed to duplicate notebook. Error:",e),I("Failed to duplicate notebook.","error")})),onMoveToWorkspace:async(e,o)=>{await re({id:e,workspaceId:o})},onChangeStatus:(e,o)=>{D.bj.includes(o)?ve({id:e,status:o}).catch((e=>{console.error("Failed to change status. Error:",e),I("Failed to change notebook status","error")})):(console.error("Bad status. Error: ".concat(o," is not valid ").concat(JSON.stringify(D.bj,null,2))),I("Failed to change notebook status","error"))},onImport:e=>ce({workspaceId:k,source:e}).catch((e=>{console.error("Failed to import notebook. Error:",e),I("Failed to import notebook.","error")})),onUnarchive:e=>ye({id:e}).catch((e=>{console.error("Failed to un-archive notebook. Error:",e),I("Failed to move notebook to all notebooks.","error")})),onCTADismiss:Ce,showCTA:!Se,onPointerEnter:pe})});return(0,n.BX)(n.HY,{children:[(0,n.BX)(O.Z5,{children:[(0,n.BX)(O.AW,{path:"/",element:(0,n.BX)(V.zL,{title:Le.name,children:[(0,n.tZ)(H,{sidebar:He,topbar:Me,notebookList:ze}),(0,n.tZ)(O.j3,{})]}),children:[(0,n.tZ)(O.AW,{path:y.section.templateWithQuery,element:(0,n.tZ)(n.HY,{})}),(0,n.tZ)(O.AW,{path:y.archived.template,element:(0,n.tZ)(n.HY,{})}),(0,n.tZ)(O.AW,{path:y.shared.template,element:(0,n.tZ)(n.HY,{})}),(0,n.tZ)(O.AW,{path:y.createNew.template,element:(0,n.tZ)(se,{Heading:"h2",closeHref:y.$,onCreate:async e=>{const o=await be({name:e});o&&w((0,a.wZ)({}).workspace({workspaceId:o.createWorkspace.id}).$)}})}),(0,n.tZ)(O.AW,{path:y.edit.template,element:(0,n.tZ)(de,{Heading:"h1",name:Le.name,allowDelete:(null===Ie||void 0===Ie?void 0:Ie.workspaces)&&(null===Ie||void 0===Ie||null===(u=Ie.workspaces)||void 0===u?void 0:u.length)>1,closeHref:y.$,onRename:async e=>{await ue({id:Le.id,name:e})&&w(y.$)},onDelete:async()=>{w((0,a.wZ)({}).$);await me({id:Le.id})&&(I("Workspace deleted.","success"),w("/"))}})})]}),(0,n.tZ)(O.AW,{path:"*",element:(0,n.tZ)(V.mf,{Heading:"h1",wellKnown:"404"})})]}),(0,n.tZ)("div",{style:{display:L?"block":"none"},children:(0,n.tZ)(he,{name:W,username:E,description:A,onClose:()=>R(!1),onChangeName:e=>{B(e),ge({props:{name:e}}).catch((e=>{console.error("Failed to update user. Error:",e),I("Could not change your name","error")}))},onChangeUsername:async e=>{const o=await ke({props:{username:e}});if(o){const{setUsername:t}=o;t?(I("You are now ".concat(e),"success"),T(e)):I("Username ".concat(e," is already taken"),"error")}},onChangeDescription:async e=>{await ge({props:{description:e}})&&$(e)}})})]})}},20758:(e,o,t)=>{t.d(o,{V:()=>n});var a=t(426),r=t(66840),l=t(5594);const i=(0,a.css)({display:"flex",minHeight:"8px",backgroundColor:(0,r.g)("highlightColor"),borderRadius:"4px"},";label:-Placeholder--styles;"),s={name:"123hcgt--Placeholder--lessRoundStyles",styles:"border-radius:2px;label:-Placeholder--lessRoundStyles;"},n=e=>{let{lessRound:o=!1}=e;return(0,l.tZ)("div",{role:"presentation",css:[i,o&&s,";label:-Placeholder--Placeholder;"]})}},25859:(e,o,t)=>{t.d(o,{D:()=>h});t(30969);var a=t(426),r=t(66840),l=t(5594);const i=(0,a.css)({width:"100%",display:"flex",padding:"16px 0",borderBottom:"1px solid",borderColor:"".concat((0,r.g)("highlightColor")),justifyContent:"space-between"},";label:-TopbarPlaceholder--containerStyle;"),s=(0,a.css)({height:"32px",width:"32px",borderRadius:"32px",backgroundColor:"".concat((0,r.g)("highlightColor"))},";label:-TopbarPlaceholder--backButtonStyles;"),n={name:"avzwxf--TopbarPlaceholder--rightPanel",styles:"display:flex;flex-direction:row;align-items:center;gap:16px;margin-right:-1rem;label:-TopbarPlaceholder--rightPanel;"},d=(0,a.css)({height:"24px",width:"24px",borderRadius:"24px",backgroundColor:"".concat((0,r.g)("highlightColor"))},";label:-TopbarPlaceholder--avatarPlaceholderStyles;"),c=(0,a.css)({height:"33.68px",width:"64px",borderRadius:"6px",backgroundColor:"".concat((0,r.g)("highlightColor"))},";label:-TopbarPlaceholder--shareButtonPlaceholderStyles;"),h=()=>(0,l.BX)("div",{css:i,children:[(0,l.tZ)("div",{css:s}),(0,l.BX)("div",{css:n,children:[(0,l.tZ)("div",{css:d}),(0,l.tZ)("div",{css:c})]})]})},9067:(e,o,t)=>{t.r(o),t.d(o,{gridStyles:()=>i,horizontalPadding:()=>r,verticalPadding:()=>l});var a=t(49939);const r=(0,t(83051).W)(a.G4,20,a.cP,28,"px","vw"),l="26px",i={width:"100%",display:"grid",gridTemplateColumns:"[icon] 42px [title] min-content [tags] 1fr [actions] 28px",alignItems:"center"}},70115:(e,o,t)=>{t.d(o,{Bh:()=>i,bj:()=>l,im:()=>s,ns:()=>r});var a=t(74029);const r={draft:"Draft",review:"Review",approval:"Approval",done:"Done"},l=Object.keys(r),i={draft:a.wy.Malibu,review:a.wy.Perfume,approval:a.wy.Grapefruit,done:a.wy.Sulu},s=Object.keys(i)}};
//# sourceMappingURL=workspace.41f6e689.chunk.js.map