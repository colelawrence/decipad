exports.id=8112,exports.ids=[8112],exports.modules={91048:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});const r={REACT_APP_SENTRY_DSN:"",REACT_APP_GOOGLE_SHEETS_API_KEY:"AIzaSyC1rl_w_G-RMx6hJJZRJ9rSbyD00POLIEM"};function o(e){return r[e]}},36192:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(20548),o=n(91048);const l=(0,r.IHq)((()=>{return{googleSheets:{apiKey:(e="REACT_APP_GOOGLE_SHEETS_API_KEY",t||(0,o.S)(e))}};var e,t}))},94866:(e,t,n)=>{"use strict";n.d(t,{Tp:()=>H,oG:()=>Q,V6:()=>ul,d8:()=>Ul,UW:()=>xl,EK:()=>ql,EH:()=>je,Hl:()=>Zt,wo:()=>Nt,WK:()=>Rt,Fh:()=>Ve,iL:()=>We,sS:()=>$t,iz:()=>kl,vL:()=>$,hG:()=>Vr,nL:()=>Tl,XJ:()=>Rl,y$:()=>zl,Ee:()=>fo,bb:()=>rn,RB:()=>Ml,Jj:()=>fr,Tx:()=>Ql,rU:()=>Ll,HC:()=>Al,Ek:()=>Hl,zL:()=>ha,mp:()=>wo,HE:()=>ol,GS:()=>Ia,nv:()=>Pa,o_:()=>ya,nY:()=>xa,DH:()=>he,Dx:()=>Xa,v6:()=>wa,QI:()=>Ya,w2:()=>pe,Q:()=>mr,EJ:()=>ue,QZ:()=>xe,$u:()=>fe});var r=n(86789),o=n(85663),l=n(82623),a=n(25555),i=n(74673),s=n(50576),c=n(13986);const d=e=>t=>{switch(t.type){case o.qu:!function(e,t){t.children[0].children[0].text=e.getAvailableIdentifier("".concat((0,i.qcw)(t.children[0]),"Copy"),1)}(e,t);break;case o.Zv:!function(e,t){const n=(0,i.qcw)(t),r=(0,c.fh)(n);if(!r.error&&r.solution&&"assign"===r.solution.type){const o=r.solution.args[0].args[0],l=e.getAvailableIdentifier("".concat(o,"Copy"),1);t.children[0].text=n.replace(o,l)}}(e,t);break;case o.l7:case o.tW:!function(e,t){t.children[0].children[0].text=e.getAvailableIdentifier("".concat((0,i.qcw)(t.children[0]),"Copy"),1)}(e,t);break;case o.L7:!function(e,t){const n=t.children[0].children[0],r=(0,i.qcw)(n);t.children[0].children[0].children[0].text=e.getAvailableIdentifier("".concat(r,"Copy"),1)}(e,t)}return t};const u=e=>{const t=d(e),n=e=>{if((0,i.GsE)(e))return(0,s.cloneDeep)(e);if(function(e){return o.jN.includes(e.type)}(e)){const r=t((e=>{var t;return null!=(t=e)&&"id"in t&&"string"===typeof t.id&&(e.id=(0,a.x0)()),e})((0,s.cloneDeep)(e)));return Array.isArray(r.children)&&(r.children=r.children.map(n)),r}return e};return n};var p=n(64967),h=n(17525),g=n(47578),m=n(1146),b=n(72080),y=n(96770),v=n(77683),f=n(34760),x=n.n(f),C=n(30969),k=n(96742),w=n(13713),E=n(426),S=n(19088),T=n(49939),Z=n(79820),I=n(66840),D=n(71799),R=n(5594);const N={name:"d9ftgd--ErrorBlock--centeredFlex",styles:"display:flex;justify-content:center;align-items:center;label:-ErrorBlock--centeredFlex;"},L=(0,E.css)(N,{padding:"16px 24px 16px 24px",gap:8,borderRadius:8,width:D.cR,[T.a$]:{minWidth:"360px",maxWidth:D.cR,width:"100%"}},";label:-ErrorBlock--errorBlock;"),M=(0,E.css)(N,"flex-direction:column;gap:12px;;label:-ErrorBlock--errorBlockWrapperStyles;"),B=(0,E.css)(Z.sK,{color:(0,I.g)("errorBlockColor")},";label:-ErrorBlock--errorMessageStypes;"),O=(0,E.css)(N,"flex-direction:row;gap:8px;;label:-ErrorBlock--errorBlockRowStyles;"),A={name:"1evvonh--ErrorBlock--buttonRow",styles:"width:100%;display:flex;justify-content:end;align-items:center;gap:16px;label:-ErrorBlock--buttonRow;"},_=e=>{let{type:t,onDelete:n=(()=>{}),onUndo:r=(()=>{})}=e;return(0,R.tZ)("div",{css:["warning"===t?{backgroundColor:(0,I.g)("errorBlockWarning")}:{backgroundColor:(0,I.g)("errorBlockError")},L,";label:-ErrorBlock--ErrorBlock;"],contentEditable:!1,children:(0,R.BX)("div",{css:M,children:[(0,R.tZ)("div",{css:O,children:(0,R.BX)("span",{css:B,children:["Oops something is broken, and that's on us. The rest of your notebook should be fine.","error"===t?"Delete this block or contact support. We've been notified of the error! What now?":"warning"===t?"Undo, delete this block or contact support. We've been notified of the error! What now?":""]})}),(0,R.tZ)("div",{css:A,children:(0,R.tZ)("div",{css:N,children:"error"===t?(0,R.tZ)(S.z,{type:"darkDanger",onClick:n,children:"Delete this block"}):"warning"===t?(0,R.BX)(R.HY,{children:[(0,R.tZ)(S.z,{type:"darkWarningText",onClick:n,children:"Delete this block"}),(0,R.tZ)(S.z,{type:"darkWarning",onClick:r,children:"Undo"})]}):(0,R.tZ)(R.HY,{})})})]})})};var P=n(96294);const V=e=>{var t,n;let{error:r,element:l,resetError:a}=e;console.error(r);const s=(0,o.l3)(),c=(0,P.m)(l);return void 0===c?(0,R.tZ)(_,{type:"complete-error"}):(0,R.tZ)(_,{type:null!==(t=s.undoManager)&&void 0!==t&&null!==(n=t.canUndo)&&void 0!==n&&n.call(t)?"warning":"error",onDelete:()=>{(0,i.r4l)(s,{at:[c[0]]}),a()},onUndo:()=>{s.undo(),a()}})};function H(e){let{children:t,element:n}=e;return(0,R.tZ)(w.SV,{fallback:e=>(0,R.tZ)(V,{...e,element:n}),showDialog:!1,children:t})}var W=n(17395);const K=e=>{let{element:t,children:n}=e;return(0,W.nW)({element:t,children:n,selectedColor:"rgb(219 234 254)"})};var U=n(26805);const X=(e,t,n)=>{const r=(0,i.O$c)(e,t);r&&("function"===typeof n?n():(()=>{if(r&&((0,i.r4l)(e,{at:r}),(0,i.uEZ)(e,r))){const t=(0,i.plg)(e,r);(0,i.Z5U)(e,{anchor:t,focus:t})}})())},$=(0,C.forwardRef)(((e,t)=>{let{children:n,element:c,onDelete:d,onceDeleted:f=s.noop,accept:w,getAxis:E,onDrop:S,hasPreviousSibling:T,isCentered:Z,dependencyId:I,...D}=e;const[N,L]=(0,C.useState)(!1),M=(0,o.l3)(),B=(0,m.VY)(),O=(0,m.Iy)(),A=Array.isArray(I)?I:"string"===typeof I?[I]:[],_=O.blocksInUse$.use(...A),P=(0,k.vt)(),V=(0,l.Z)(M,c,"isHidden"),W=(0,C.useRef)(null),$=(0,C.useRef)(null),{dragRef:j,dropLine:G,isDragging:F}=(0,U.iM)({accept:w,element:c,getAxis:E,onDrop:S,previewRef:$,nodeRef:W});(0,C.useEffect)((()=>{F||m.YS.draggingId("")}),[F]);const z=U.yW.use.draggingIds(),Y=(0,b.Y)(W,t),J=(0,C.useContext)(r.K),Q=(0,C.useCallback)((()=>{J({type:"action",action:"block deleted",props:{blockType:c.type}}),L(!0),X(M,c,d),f()}),[M,c,d,J,f]),ee=(0,C.useCallback)((()=>{const e=(0,i.O$c)(M,c);if(e){const t=u(O)(c);(0,i.VcW)(M,t,{at:(0,p.Nj)(M,e)}),J({type:"action",action:"block duplicated",props:{blockType:t.type}})}}),[O,M,c,J]),te=(0,C.useCallback)((()=>{const e=(0,i.O$c)(M,c);if(void 0===e)return;const t=(0,i.Y_H)(M,{at:e}),[n]=t||[];(0,h.s)(M,{id:(0,a.x0)(),type:n&&n.type===i.Zvw?i.Zvw:o.JB,children:[{text:""}]},{at:e}),(0,i.Ys)(M,e)}),[M,c]),ne=(0,C.useCallback)((()=>{q(M,c),J({type:"action",action:"click +",props:{blockType:c.type}})}),[M,c,J]),re=(0,C.useCallback)((()=>{const e=new URL(window.location.toString());e.hash=c.id,x()(e.toString()),J({type:"action",action:"copy block href",props:{blockType:c.type}})}),[c.id,c.type,J]),oe=(0,C.useCallback)((e=>{"show"===e?(V(!1),J({type:"action",action:"show block",props:{blockType:c.type}})):(V(!0),J({type:"action",action:"hide block",props:{blockType:c.type}}))}),[c.type,J,V]),le=(0,C.useCallback)((()=>{c.type===o.L7&&m.YS.draggingId(c.id)}),[c.id,c.type]),ae=(0,i.O$c)(M,c),ie=ae&&1===ae.length&&!(2===M.children.length&&""===M.children[1].children[0].text);return N||B&&c.isHidden?null:B?(0,R.tZ)(y.V,{...D,ref:Y,contentEditable:!B||o.VH.includes(c.type),suppressContentEditableWarning:!0,children:(0,R.tZ)(H,{element:c,children:n})}):(0,R.tZ)(v.v,{...D,isHidden:c.isHidden,isSelected:P,dragSource:j,blockRef:Y,previewRef:$,dropLine:G||void 0,isBeingDragged:F||z.has(c.id),onMouseDown:le,onDelete:Q,dependenciesForBlock:_,onDuplicate:ee,onShowHide:oe,onAdd:te,onPlus:ne,onCopyHref:(0,g.J8)("COPY_HREF")?re:void 0,showLine:ie,isCentered:Z,hasPreviousSibling:T,children:(0,R.tZ)(K,{element:c,children:(0,R.tZ)(H,{element:c,children:n})})})})),q=(e,t)=>{var n;const r=null===(n=e.selection)||void 0===n?void 0:n.anchor.path[0],l=r?(0,i.MkB)(e,[r]):null;if("/"===(l?(0,i.qcw)(l):null)&&r)return(0,i.Ys)(e,(0,i.ZJ1)(e,[r])),void(0,i.$Rk)(e);const s=(0,i.O$c)(e,t),c=(0,i.qcw)(t),d=t.type===o.JB;if(!s)return;if("/"===c)return;if(c||!d){const t=(0,i.PoD)(e,{at:s}),[,n]=t||[];if(!n)return;(0,h.s)(e,{id:(0,a.x0)(),type:o.JB,children:[{text:"/"}]},{at:n}),(0,i.Ys)(e,(0,i.ZJ1)(e,n)),(0,i.$Rk)(e)}else(0,i.OmN)(e,"/",{at:s}),(0,i.Ys)(e,(0,i.ZJ1)(e,s)),(0,i.$Rk)(e)};var j=n(89203),G=n(55013),F=n(79568),z=n(60046);const Y={variableNameColumn:0,resultColumn:0},J=new Set([o.l7,o.tW]);const Q=e=>{let{editor:t,children:n}=e;const r=(0,C.useRef)(new Map),[o,l]=(0,C.useState)((()=>new Map)),[a]=(0,C.useState)((()=>new z.Subject)),i=(0,C.useContext)(m._d);(0,C.useEffect)((()=>{const e=i.pipe((0,z.debounceTime)(100),(0,z.mergeWith)((0,z.of)(void 0)),(0,z.map)((()=>function(e){const t=[];let n=!1;for(const r of e)J.has(r.type)?n?t[t.length-1].memberIds.push(r.id):(n=!0,t.push({memberIds:[r.id]})):n=!1;return t}(t.children))),(0,z.distinctUntilChanged)(((e,t)=>(0,F.J)(e,t))),(0,z.combineLatestWith)(a),(0,z.map)((e=>{let[t]=e;return function(e,t){const n=new Map;for(const{memberIds:r}of e){const e={...Y};for(const n of Object.keys(e)){const o=r.flatMap((e=>{var r,o;return null!==(r=null===(o=t.get(e))||void 0===o?void 0:o[n])&&void 0!==r?r:[]}));e[n]=Math.max(...o)}for(const t of r)n.set(t,e)}return n}(t,r.current)}))).subscribe(l);return()=>e.unsubscribe()}),[t,i,a]);const s=(0,C.useCallback)(((e,t,n)=>{!function(e,t,n,r){if(null!=r){var o;const l=null!==(o=e.get(t))&&void 0!==o?o:{};l[n]=r,e.set(t,l)}else{var l;const r=null!==(l=e.get(t))&&void 0!==l?l:{};delete r[n],0===Object.keys(r).length&&e.delete(t)}}(r.current,t,e,n),a.next(void 0)}),[a]),c=(0,C.useMemo)((()=>({targetWidths:o,setMeasuredLength:s})),[o,s]);return(0,R.tZ)(ee.Provider,{value:c,children:n})},ee=(0,j.oS)({targetWidths:new Map,setMeasuredLength:G.ZT});var te={name:"15cne2n--BlockLengthSynchronizationReceiver--BlockLengthSynchronizationReceiver",styles:"white-space:nowrap;label:-BlockLengthSynchronizationReceiver--BlockLengthSynchronizationReceiver;"};const ne=e=>{let{syncGroupName:t,topLevelBlockId:n,children:r,alignment:o="start"}=e;const{minWidth:l,setMeasuredLength:a}=(0,j.UC)(ee,(e=>{var r;let{targetWidths:o,...l}=e;return{minWidth:n&&(null===(r=o.get(n))||void 0===r?void 0:r[t]),...l}})),i=(0,C.useRef)(null);return(0,C.useEffect)((()=>{if(!i.current||!n)return;const e=()=>{var e,r;const o=null===(e=i.current)||void 0===e||null===(r=e.getBoundingClientRect())||void 0===r?void 0:r.width;a(t,n,null!==o&&void 0!==o?o:0)};e();const r=new ResizeObserver(e);return r.observe(i.current),()=>{a(t,n,void 0),r.disconnect()}}),[t,n,a,r]),(0,R.tZ)("span",{css:(0,E.css)({display:"flex",..."end"===o&&{justifyContent:"end"}},";label:-BlockLengthSynchronizationReceiver--BlockLengthSynchronizationReceiver;"),style:{minWidth:l},children:(0,R.tZ)("span",{css:te,ref:i,children:r})})};var re=n(24568);const oe=(e,t)=>{const{selection:n}=e;if(!n||t){const t=[0],n={anchor:{path:t,offset:0},focus:{path:t,offset:0}};e.selection=n}};var le=n(68243);const ae=e=>{var t,n,r,o,l,a,i,s;if("set_selection"!==e.type)return null;const c=null===(t=e.newProperties)||void 0===t||null===(n=t.focus)||void 0===n?void 0:n.path[0],d=null===(r=e.newProperties)||void 0===r||null===(o=r.anchor)||void 0===o?void 0:o.path[0],u=null===(l=e.properties)||void 0===l||null===(a=l.focus)||void 0===a?void 0:a.path[0],p=null===(i=e.properties)||void 0===i||null===(s=i.anchor)||void 0===s?void 0:s.path[0];return null==(c&&d&&u&&p)||u===p&&u===c&&p===d},ie=e=>"set_selection"!==e.type?e:e.properties&&e.newProperties?{...e,newProperties:e.properties}:e,se=()=>{const e={arrowKeyUsed:!1,unsubscribe:()=>{document.removeEventListener("keydown",t,!0)}},t=t=>{t.key.startsWith("Arrow")&&(e.arrowKeyUsed=!0,setTimeout((()=>{e.arrowKeyUsed=!1}),50))};return document.addEventListener("keydown",t,!0),e};var ce;!function(e){e.Focusing="focusing",e.Focused="focused",e.None="none"}(ce||(ce={}));const de=(e,t)=>{const[n,r]=(0,C.useState)(ce.None);return{focusState:n,useWatchTeleported:(l,a)=>{var s,c;const d=(0,o.l3)(),u=(0,le.c)(),p=(0,k.vt)(),h=l===(null===e||void 0===e?void 0:e.codeLineId),g=h&&n===ce.None,m=null===u||void 0===u||null===(s=u.anchor)||void 0===s?void 0:s.path[0],b=null===u||void 0===u||null===(c=u.focus)||void 0===c?void 0:c.path[0],y=p&&h&&m===b,v=!y&&n===ce.Focused&&l===(null===e||void 0===e?void 0:e.codeLineId),f=h&&n===ce.Focused,x=h&&y;((e,t)=>{(0,C.useEffect)((()=>{if(!t)return;const{apply:n}=e,r=se();return e.apply=e=>"set_selection"===e.type&&r.arrowKeyUsed&&!ae(e)?n(ie(e)):n(e),()=>{e.apply=n,r.unsubscribe()}}),[e,t])})(d,f),((e,t)=>{let n=!1;const r=(0,le.c)(),o=(0,i.zbr)(r);if(r&&o){const o=0===r.anchor.path[1]&&0===r.anchor.offset;n=o&&e,null===t||void 0===t||t()}(0,C.useEffect)((()=>{if(!n)return;const e=e=>{"Backspace"===e.key&&(e.preventDefault(),e.stopPropagation())};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}}),[n])})(x),(0,C.useEffect)((()=>{h||r(ce.None)}),[h]),(0,C.useEffect)((()=>{if(!g)return;const e=(0,i.O$c)(d,a);e&&(r(ce.Focusing),oe(d,!0),(0,re.Y)(d,e))}),[g,d,a]),(0,C.useEffect)((()=>{y&&r(ce.Focused)}),[y]),(0,C.useEffect)((()=>{v&&(r(ce.None),null===t||void 0===t||t(l))}),[l,v])}}},ue=new z.Subject,pe=new z.Subject,he=e=>{let{children:t,editor:n}=e;const[o,l]=(0,C.useState)(),[a,s]=(0,C.useState)(),c=(0,C.useContext)(r.K),d=(0,C.useCallback)((()=>{const e=null===a||void 0===a?void 0:a.numberNode,t=e?(0,i.O$c)(n,e):null;t&&(0,re.Y)(n,t)}),[n,null===a||void 0===a?void 0:a.numberNode]),u=(0,C.useCallback)((()=>{const e=null===a||void 0===a?void 0:a.codeLineNode,t=e?(0,i.O$c)(n,e):null;t&&(oe(n,!0),(0,re.Y)(n,t))}),[n,null===a||void 0===a?void 0:a.codeLineNode]),p=(0,C.useCallback)(((e,t)=>s((n=>{const r=null==e,o=(null===n||void 0===n?void 0:n.codeLineId)===e;if(!r&&!o)return c({type:"action",action:"code line teleported back"}),n;null===t||void 0===t||t()}))),[s,c]),h=(0,C.useCallback)((()=>p()),[p]),{useWatchTeleported:g}=de(a,p),b=(0,C.useCallback)((e=>{s(e),c({type:"action",action:"code line teleported"})}),[s,c]);(0,C.useEffect)((()=>{const e=ue.subscribe((e=>b(e)));return()=>e.unsubscribe()}),[b]),(0,C.useEffect)((()=>{const e=pe.subscribe((e=>c(e)));return()=>e.unsubscribe()}),[c]);const y=(0,C.useMemo)((()=>({portal:o,editing:a,setPortal:l,focusNumber:d,focusCodeLine:u,closeEditor:p,openEditor:b,useWatchTeleported:g})),[o,a,l,d,u,p,b,g]);return(0,R.tZ)(m.Zu.Provider,{value:y,children:(0,R.tZ)("span",{onBlur:h,children:t})})};var ge=n(24217);const me=(e,t)=>{const[n,r]=(0,C.useState)((()=>(0,i.qcw)(e)));return(0,m.Ab)((e=>{(0,F.J)(n,e)||r(e)}),(()=>(0,i.qcw)(e)),t),n},be=["60 km/h * Time","Revenue - Cost","10 minutes per kilometer in miles per hour","Salary * 3 months","sum(Budget.Costs)"];var ye=n(91920),ve=n(85996);const fe=e=>{const t=(0,m.Iy)(),[n,r]=(0,C.useState)((()=>({kind:"anything"}))),o=(0,C.useCallback)((t=>{const n=(0,i.O$c)(t,e);if(n){const e=(0,i.MkB)(t,[...n,1]);if(e)return(0,i.qcw)(e)}}),[e]),l=(0,C.useCallback)((e=>{(async()=>{if(null!=e){const{type:o}=await(0,ve.O3)(t,e);(0,F.J)(o,n)||r(o)}})()}),[t,n]);return(0,m.Ab)(l,o),n},xe=(e,t,n)=>{const r=(0,k.vt)();(0,C.useEffect)((()=>{const o=n||t;if(!r){const t=(0,i.O$c)(e,o);t&&e.normalizeNode([o,t])}}),[r,e,t,n])};var Ce=n(15749),ke=n(57481);var we={name:"1ngualt--CodeLineFloat--CodeLineFloat",styles:";label:-CodeLineFloat--CodeLineFloat;"},Ee={name:"176snvc--CodeLineFloat--CodeLineFloat",styles:"width:1.5rem;label:-CodeLineFloat--CodeLineFloat;"};const Se=e=>{let{children:t,offsetTop:n}=e;const[r,o]=(0,C.useState)(Ze);return(0,C.useEffect)((()=>o(we)),[]),(0,R.BX)("div",{css:[Te(n),r,";label:-CodeLineFloat--CodeLineFloat;"],onClick:e=>{e.stopPropagation()},children:[(0,R.tZ)("div",{"data-testid":"code-line-float",css:Ie,children:t}),(0,R.BX)("div",{css:De,children:[(0,R.tZ)("div",{css:Ee}),(0,R.tZ)("div",{children:"Close with ESC or ENTER"})]})]})},Te=e=>(0,E.css)({position:"absolute",left:0,top:"".concat(e,"px"),width:"100%",zIndex:10,marginTop:"2px",cursor:"initial",transition:"opacity 60ms ease-in, transform 60ms ease-in",borderRadius:"12px",backgroundColor:(0,I.g)("backgroundColor"),boxShadow:"0px 3px 24px -4px ".concat(ke.ip.rgba)},";label:-CodeLineFloat--wrapperStyle;"),Ze={name:"12x1e5r--CodeLineFloat--appearStyle",styles:"opacity:0;transform:translateY(32px);label:-CodeLineFloat--appearStyle;"},Ie={name:"3fiyb8--CodeLineFloat--codeLineStyle",styles:"pointer-events:all;label:-CodeLineFloat--codeLineStyle;"},De={name:"1y7p0kx--CodeLineFloat--instructionsStyle",styles:"height:36px;font-size:12px;font-weight:500;display:flex;align-items:center;justify-content:space-between;padding:0 12px;label:-CodeLineFloat--instructionsStyle;"};const Re=e=>{let{height:t,onBringBack:n}=e;return(0,R.BX)("div",{contentEditable:!1,css:[Ne,{height:"".concat(t,"px")},";label:-CodeLinePlaceholder--CodeLinePlaceholder;"],children:["This calculation is currently displayed elsewhere."," ",(0,R.tZ)("button",{css:Le,onMouseDown:n,children:"Bring it back."})]})},Ne=(0,E.css)([Z.rC,{opacity:.6,borderRadius:"10px",padding:"6px 12px",border:"1px solid ".concat((0,I.g)("borderColor")),backgroundColor:(0,I.g)("highlightColor"),display:"flex",alignItems:"center",cursor:"default",userSelect:"none"}],";label:-CodeLinePlaceholder--wrapperStyle;"),Le={name:"8nntb--CodeLinePlaceholder--linkStyle",styles:"cursor:pointer;text-decoration:underline;label:-CodeLinePlaceholder--linkStyle;"},Me=["Escape","Enter"],Be=e=>{var t;let{codeLine:n,children:r,onDismiss:o=s.noop,onTeleport:l=s.noop,onBringBack:a=s.noop}=e;const i=null===n||void 0===n?void 0:n.element,c=null!=n&&null!=i,d=(0,C.useRef)(null);d.current=l,(0,C.useEffect)((()=>{var e;c&&(null===(e=d.current)||void 0===e||e.call(d))}),[c,d]),(0,j.mR)("keydown",(e=>{c&&Me.includes(e.key)&&(e.stopPropagation(),e.preventDefault(),o())}),!0);const[u,p]=(0,C.useState)(0),h=(0,C.useRef)(null),g=(null===(t=h.current)||void 0===t?void 0:t.offsetHeight)||0;(0,C.useEffect)((()=>{c||0!==g&&p(g)}),[c,g,p]);const m=(0,j.DK)();if(!c)return(0,R.tZ)("span",{ref:h,children:r});const b=(0,R.tZ)(Se,{offsetTop:n.offsetY,children:r});return(0,R.BX)(R.HY,{children:[(0,R.tZ)(Re,{height:u,onBringBack:a}),m&&(0,Ce.createPortal)(b,i)]})};var Oe=n(1943);const Ae=e=>{const t=null===e||void 0===e?void 0:e.error;if(t)return(0,c.vq)(t)?{...t,line:null!=t.line?t.line:1,column:null!=t.column?t.column:1,url:"".concat((0,Oe.rx)({}).page({name:"errors"}).$,"#syntax-error")}:(0,c.Tj)(t.bracketError)?{message:"Bracket error",bracketError:t.bracketError,url:"".concat((0,Oe.rx)({}).page({name:"errors"}).$,"#syntax-error")}:{message:t.message,url:(0,Oe.rx)({}).page({name:"errors"}).$}};var _e=n(9727),Pe=n(5216);const Ve="inline-result",He=(e,t)=>{let{element:n,asText:r="",computer:o,result:l}=t;return t=>{(0,g.J8)("EXPR_REFS")?(0,_e.u4)(e)({element:n,asText:r,result:l,computer:o})(t):(e.dragging=Ve,(0,Pe.o)(t.dataTransfer,[n]),e.setFragmentData(t.dataTransfer,"drag"))}},We="table-cell-result",Ke=(e,t)=>{let{computer:n}=t;return(t,r)=>{let{previewRef:o,result:l}=r;return r=>{var a;if(e.dragging=We,(0,Pe.o)(r.dataTransfer,[t]),e.setFragmentData(r.dataTransfer,"drag"),null!==(a=e.previewRef)&&void 0!==a&&a.current&&null!==o&&void 0!==o&&o.current){const t=n.formatNumber(l.type,l.value);m.YS.previewText(t.asString),r.dataTransfer.setDragImage(e.previewRef.current,0,0)}r.dataTransfer.dropEffect="copy"}}},Ue=(e,t,n)=>{const r=(0,m.Iy)();(0,C.useEffect)((()=>{}),[e,t,n,r])};var Xe=n(1138);const $e=(e,t,n)=>{const r=(0,o.l3)(),l=t.getSymbolDefinedInBlock$.use(n),a=t.getParseableTypeInBlock$.use(n);return{onTurnInto:(0,C.useCallback)((t=>{const s=(0,i.O$c)(r,e);if(!s||!l||!a)return;const c="toggle"===t?"boolean":"expression"===t?"number":t,d="date"===a.kind?a.dateGranularity:"day",u="date"===a.kind?a.dateStr:(e=>{var t,n;return e.type===o.l7?(0,i.qcw)(e.children[1]):null!==(t=null===(n=(0,i.qcw)(e).split("=")[1])||void 0===n?void 0:n.trim())&&void 0!==t?t:(0,i.qcw)(e)})(e);(0,i.kRc)(r,(()=>{(0,h.s)(r,{id:n,type:o.qu,variant:t,coerceToType:{kind:c,date:d},children:[{type:o.Oo,children:[{text:l}]},{type:o.oN,children:[{text:u}]}]},{at:(0,p.Nj)(r,s)}),(0,i.r4l)(r,{at:s}),(0,i.$Rk)(r)}))}),[r,e,a,l,n]),turnInto:(0,C.useMemo)((()=>{if(l&&a)return qe(a)}),[a,l])}},qe=e=>{switch(null===e||void 0===e?void 0:e.kind){case"boolean":return[{title:"Toggle Widget",value:"toggle"}];case"date":return[{title:"Date Widget",value:"date"}];case"number":case"string":return[{title:"Input Widget",value:"expression"}];default:return}},je=e=>{var t;let{attributes:n,children:r,element:l}=e;(0,ge.I)(l,o.Zv);const s=(0,k.vt)(),c=null!==(t=me(l,{debounceTimeMs:0}))&&void 0!==t?t:"",d=!c.trim()&&l.children.length<=1,u=(e=>(0,m.Dz)((t=>{const n=k.F3.findPath(t,e),r=(e,t)=>(0,i.kKo)(e)&&e.type===o.Zv&&(Xe.y$.equals(Xe.y$.next(n),t)||Xe.y$.equals(Xe.y$.previous(n),t));return{hasNext:!!(0,i.PoD)(t,{at:n,match:r}),hasPrevious:!!(0,i.Y_H)(t,{at:n,match:r})}}),{hasNext:!1,hasPrevious:!1}))(l),p=(0,o.l3)();Ue(p,s,c),xe(p,l);const g=(0,m.Iy)(),{id:b}=l,[y,v]=g.getBlockIdResult$.useWithSelector((e=>[Ae(e),null===e||void 0===e?void 0:e.result]),b),f=(0,C.useCallback)((e=>{if("number"!==e.type.kind&&"date"!==e.type.kind&&"string"!==e.type.kind&&"boolean"!==e.type.kind)return;const t=(0,i.O$c)(p,l);if(!t)return;const n={id:(0,a.x0)(),type:o.g0,blockId:l.id,children:[{text:""}]};(0,h.s)(p,n,{at:[t[0]+1]})}),[p,l]),x=(0,m.VY)(),w=(0,C.useMemo)((()=>x?void 0:Ke(p,{computer:g})),[g,p,x]),E=(0,C.useMemo)((()=>x?void 0:He(p,{element:l,computer:g,result:v})),[g,p,l,x,v]),S=(0,U.GH)(),{closeEditor:T,focusNumber:Z,focusCodeLine:I,portal:D,editing:N,useWatchTeleported:L}=(0,m.EL)();L(b,l);const M=(null===N||void 0===N?void 0:N.codeLineId)===l.id?D:void 0,B=$e(l,g,b),O=(0,C.useCallback)((()=>{T(l.id,Z)}),[Z,T,l.id]),[A]=(0,C.useState)(be[Math.floor(Math.random()*be.length)]);return(0,R.tZ)($,{blockKind:"codeLine",element:l,...B,...n,dependencyId:b,id:b,hasPreviousSibling:null===u||void 0===u?void 0:u.hasPrevious,children:(0,R.tZ)(Be,{codeLine:M,onDismiss:O,onBringBack:I,children:(0,R.tZ)(ye.E,{highlight:s,result:v,placeholder:A,syntaxError:y,isEmpty:d,onDragStartInlineResult:E,onDragStartCell:w,onDragEnd:S,onClickedResult:x?void 0:f,hasNextSibling:!M&&(null===u||void 0===u?void 0:u.hasNext),hasPreviousSibling:!M&&(null===u||void 0===u?void 0:u.hasPrevious),children:r})})})},Ge=[o.tW,o.l7];function Fe(e){return(0,i.kKo)(e)&&Ge.includes(e.type)}var ze=n(86928);const Ye=(0,E.css)({position:"relative",display:"grid",gridTemplate:'\n    "fadeline-top-left top-border     fadeline-top-right" 0\n    ".                 children       .                 " auto\n    "fadeline-bot-left bot-border     fadeline-bot-right" 0\n    /0                 1fr            0\n  '},";label:-styles--structuredInputContainerStyles;"),Je={name:"u4gnxa--styles--childrenStyles",styles:"grid-area:children;label:-styles--childrenStyles;"},Qe=e=>(0,E.css)({gridArea:"".concat(e,"-border"),pointerEvents:"none",position:"absolute",left:0,right:0,borderTop:"1px solid ".concat((0,I.g)("borderColor"))},";label:-styles--borderStyles;"),et=Qe("top"),tt=Qe("bot"),nt=(e,t)=>(0,E.css)({gridArea:"fadeline-".concat(e,"-").concat(t),pointerEvents:"none",position:"absolute",left:"right"===t?0:void 0,right:"left"===t?0:void 0,width:64,borderTop:"1px solid ".concat((0,I.g)("borderColor")),maskImage:"right"===t?"linear-gradient(to right, fuchsia, transparent)":"linear-gradient(to left, fuchsia, transparent)"},";label:-styles--fadeLineStyles;"),rt=nt("top","left"),ot=nt("top","right"),lt=nt("bot","left"),at=nt("bot","right"),it=e=>{let{children:t}=e;return(0,R.BX)("div",{css:Ye,children:[(0,R.tZ)("span",{css:rt,contentEditable:!1}),(0,R.tZ)("span",{css:et,contentEditable:!1}),(0,R.tZ)("span",{css:ot,contentEditable:!1}),(0,R.tZ)("div",{css:Je,children:t}),(0,R.tZ)("span",{css:lt,contentEditable:!1}),(0,R.tZ)("span",{css:tt,contentEditable:!1}),(0,R.tZ)("span",{css:at,contentEditable:!1})]})};var st=n(57219),ct=n(30879);const{lineHeight:dt}=ct,ut={borderColor:(0,I.g)("borderHighlightColor")},pt=(0,E.css)({":hover":ut,display:"grid",gridTemplate:'\n    "varname                   code            inline-res    " 1fr\n    "mobile-varname            mobile-varname  mobile-varname" auto\n    "mobile-code               mobile-code     mobile-code   " auto\n    "expanded-res              expanded-res    expanded-res  " auto\n    /minmax(max-content, auto) minmax(0, 66%)  1fr\n  ',[T.a$]:{gridTemplate:'\n      "varname         " auto\n      "code            " auto\n      "inline-res      " auto\n      "expanded-res    " auto\n      /1fr\n    '}},";label:-styles--codeLineStyles;"),ht={name:"1icdvr0--styles--inlineStyles",styles:"grid-area:inline-res;max-width:100%;display:flex;justify-self:end;align-self:flex-start;padding:5px 0;user-select:all;label:-styles--inlineStyles;"},gt={name:"kv56rc--styles--variableNameContainerStyles",styles:"grid-area:varname;display:flex;align-items:center;padding:4px 6px 4px 0;label:-styles--variableNameContainerStyles;"},mt=(0,E.css)(Z.TU,{gridArea:"code",...(0,I.m)("currentTextColor",(0,I.g)("strongTextColor")),lineHeight:dt,[T.a$]:{borderLeft:"none"}},";label:-styles--codeContainerStyles;"),bt=(0,E.css)({cursor:"grab",":hover":{animation:"".concat(st.EY," 0.5s ease-in-out")},":hover:after":{backgroundColor:"blue",animation:"".concat(st.xg," 0.5s ease-in-out")}},";label:-styles--canGrabStyles;"),yt={name:"108zpth--styles--grabbingStyles",styles:"cursor:grabbing;label:-styles--grabbingStyles;"},vt=e=>{let{highlight:t=!1,result:n,syntaxError:r,onDragStartInlineResult:o,onDragStartCell:l,onDragEnd:a,onClickedResult:i,variableNameChild:s,codeChild:c}=e;const[d,u]=(0,C.useState)(!1),p=(0,ye.q)({result:n,syntaxError:r,onDragStartCell:l,onClickedResult:i,variant:"inline"}),{inline:h,expanded:g}=(0,j.tp)(p,!0===p.errored);return(0,R.tZ)(it,{children:(0,R.BX)("div",{css:[pt,t&&ut,";label:-CodeLineStructured--CodeLineStructured;"],spellCheck:!1,children:[(0,R.tZ)("code",{contentEditable:!0,css:gt,children:s}),(0,R.BX)("code",{"data-testid":"codeline-code",contentEditable:!0,css:mt,children:[(0,R.BX)("div",{contentEditable:!1,css:(0,E.css)({color:ke.eC.rgb,display:"inline"},";label:-CodeLineStructured--getEquals;"),children:["="," "]}),c]}),(0,R.tZ)("div",{css:[ht,(o||l||i)&&bt,d&&yt,";label:-CodeLineStructured--CodeLineStructured;"],contentEditable:!1,draggable:!0,onDragStart:e=>{null===o||void 0===o||o(e),u(!0)},onDragEnd:e=>{null===a||void 0===a||a(e),u(!1)},children:h}),g]})})};var ft=n(68861),xt=n(55099),Ct=n(69656);const kt=e=>(0,E.css)(ct.structuredVariableStyles,{padding:"4px 8px",borderRadius:"6px",background:"formula"===e?(0,I.g)("structuredCalculationVariableColor"):(0,I.g)("structuredCalculationSimpleColor"),display:"flex",alignItems:"center",width:"fit-content"},";label:-CodeVariableDefinition--varStyles;"),wt={name:"1k2pvmh--CodeVariableDefinition--iconStyles",styles:"display:inline-flex;vertical-align:text-top;height:16px;width:16px;margin-right:4px;pointer-events:none;user-select:none;label:-CodeVariableDefinition--iconStyles;"},Et={name:"1rz744u--CodeVariableDefinition--emptyStyles",styles:'::after{display:inline;content:" ";}br{display:none;};label:-CodeVariableDefinition--emptyStyles;'},St={name:"1lynpkv--CodeVariableDefinition--formulaIconStyles",styles:"position:absolute;left:-18px;width:16px;height:100%;display:flex;align-items:center;label:-CodeVariableDefinition--formulaIconStyles;"},Tt=e=>{let{isValue:t=!0,empty:n,children:r,type:o}=e;const l=(0,C.useMemo)((()=>o&&(0,xt.aX)(o)),[o]);return(0,R.BX)("span",{css:[kt(t?"simple":"formula"),n&&Et,";label:-CodeVariableDefinition--CodeVariableDefinition;"],children:[!t&&(0,R.tZ)("span",{css:St,children:(0,R.tZ)(Ct.S,{})}),(0,R.tZ)("span",{css:l&&wt,contentEditable:!1,children:l&&(0,R.tZ)(l,{})}),(0,R.tZ)("span",{children:r})]})},Zt=e=>{var t;let{attributes:n,children:r,element:l}=e;(0,ge.I)(l,o.l7);const s=(0,i.qcw)(l.children[1]),d=(0,C.useRef)(new z.Subject),[u,p]=(0,C.useState)((0,c.wh)(s));(0,C.useEffect)((()=>{try{(0,c.s$)(s),d.current.next((0,c.wh)(s))}catch(e){}}),[s]),(0,C.useEffect)((()=>{d.current.pipe((0,z.debounceTime)(0),(0,z.distinctUntilChanged)(F.J)).subscribe(p)}),[]);const g=(0,k.vt)(),b=null!==(t=me(l,{debounceTimeMs:0}))&&void 0!==t?t:"",y=(0,o.l3)();Ue(y,g,b),xe(y,l);const v=(0,m.Iy)(),{id:f}=l,[x,w]=v.getBlockIdResult$.useWithSelector((e=>[Ae(e),e]),f),E=(0,C.useCallback)((e=>{if("number"!==e.type.kind&&"date"!==e.type.kind&&"string"!==e.type.kind&&"boolean"!==e.type.kind)return;const t=(0,i.O$c)(y,l);if(!t)return;const n={id:(0,a.x0)(),type:o.g0,blockId:l.id,children:[{text:""}]};(0,h.s)(y,n,{at:[t[0]+1]})}),[y,l]),S=(0,m.VY)(),T=(0,C.useMemo)((()=>S?void 0:Ke(y,{computer:v})),[v,y,S]),Z=(0,C.useMemo)((()=>S?void 0:He(y,{element:l,computer:v,result:w})),[v,y,l,S,w]),{closeEditor:I,focusNumber:D,focusCodeLine:N,portal:L,editing:M,useWatchTeleported:B}=(0,m.EL)();B(f,l);const O=(null===M||void 0===M?void 0:M.codeLineId)===l.id?L:void 0,A=$e(l,v,f),_=(0,C.useCallback)((()=>{I(l.id,D)}),[D,I,l.id]),P=C.Children.toArray(r);if(2!==P.length)throw new Error("panic: expected only 2 children");const V=(0,i.O$c)(y,l),H=(0,i.Y_H)(y,{at:V});return(0,R.tZ)($,{blockKind:"structured",element:l,...A,...n,dependencyId:f,id:f,isCentered:!0,hasPreviousSibling:Fe(null===H||void 0===H?void 0:H[0]),children:(0,R.tZ)(Be,{codeLine:O,onDismiss:_,onBringBack:N,children:(0,R.tZ)(vt,{highlight:g,result:null===w||void 0===w?void 0:w.result,syntaxError:x,onDragStartInlineResult:Z,onDragStartCell:T,onClickedResult:S?void 0:E,variableNameChild:(0,R.tZ)(Dt.Provider,{value:u,children:(0,R.tZ)(It.Provider,{value:w,children:P[0]})}),codeChild:P[1]})})})},It=(0,C.createContext)(void 0),Dt=(0,C.createContext)(!0),Rt=e=>{(0,ge.I)(e.element,o.qG);const t=(0,C.useContext)(It),n=(0,C.useContext)(Dt),r=(0,ze.xe)(e.element,null===t||void 0===t?void 0:t.id),l=""===(0,i.qcw)(e.element).trim();return(0,R.tZ)(ft.u,{trigger:(0,R.tZ)("span",{...e.attributes,"data-testid":"codeline-varname",spellCheck:!1,children:(0,R.tZ)(ne,{syncGroupName:"variableNameColumn",topLevelBlockId:null===t||void 0===t?void 0:t.id,children:(0,R.tZ)(Tt,{empty:l,type:"identified-error"===(null===t||void 0===t?void 0:t.type)?{kind:"number",unit:null}:null===t||void 0===t?void 0:t.result.type,isValue:n,children:e.children})})}),open:null!=r,children:r})},Nt=e=>{let{element:t,attributes:n,children:r}=e;(0,ge.I)(t,o.$);const l=(0,o.l3)();return xe(l,t),(0,R.tZ)("span",{...n,children:r})};var Lt=n(37753),Mt=n(53393),Bt=n(12093),Ot=n(66165),At=n(3039);const _t={name:"co15e0--DisplayWidget--wrapperStyles",styles:"display:flex;align-items:center;gap:4px;position:relative;label:-DisplayWidget--wrapperStyles;"},Pt=(e,t)=>(0,E.css)({width:"100%",borderRadius:8,padding:"0px 6px 0px 8px",fontSize:24,minHeight:44,height:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease-in-out",...t&&{backgroundColor:(0,I.g)("highlightColor")},...!e&&{border:"1px solid ".concat((0,I.g)("borderColor")),":hover":{backgroundColor:(0,I.g)("highlightColor")},cursor:"pointer"}},";label:-DisplayWidget--triggerStyles;"),Vt={name:"1g8r6x7--DisplayWidget--textWrapperStyles",styles:"display:flex;flex-wrap:wrap;gap:2px;label:-DisplayWidget--textWrapperStyles;"},Ht={name:"p91xzy--DisplayWidget--iconStyles",styles:"display:grid;justify-content:center;align-items:center;> svg{height:24px;width:24px;};label:-DisplayWidget--iconStyles;"};var Wt={name:"ax70lu--DisplayWidget--DisplayWidget",styles:"width:20px;height:20px;label:-DisplayWidget--DisplayWidget;"};const Kt=e=>{var t;let{dropdownContent:n,openMenu:r,onChangeOpen:o,setSelectedId:l,lineResult:a,result:i,readOnly:s,children:c}=e;return(0,R.BX)(R.HY,{children:[(0,R.BX)("div",{css:_t,children:[(0,R.tZ)("div",{css:Ht,children:(0,R.tZ)(Bt.n,{})}),(0,R.tZ)("div",{css:Vt,children:(0,R.tZ)("span",{css:[Z.rC,{color:(0,I.g)("weakTextColor")},";label:-DisplayWidget--DisplayWidget;"],children:"Result: ".concat(null!==i&&void 0!==i?i:"Name")})})]}),c,(0,R.BX)("div",{css:Pt(s,r),onClick:()=>!s&&o(!r),"data-testid":"result-widget",children:[(0,R.tZ)("span",{css:[Z.Vb,!(null!==a&&void 0!==a&&a.result)&&{color:(0,I.g)("weakerTextColor")},";label:-DisplayWidget--DisplayWidget;"],children:"type-error"!==(null===a||void 0===a||null===(t=a.result)||void 0===t?void 0:t.type.kind)&&null!==a&&void 0!==a&&a.result?(0,R.tZ)(Mt.X,{...a.result}):"0"}),!s&&(0,R.tZ)("div",{css:Wt,children:(0,R.tZ)(Ot.F,{variant:r?"up":"down",color:"normal"})})]}),r&&!s&&(0,R.tZ)(At.D,{top:!1,result:i,identifiers:n.map((e=>({kind:"variable",identifier:e.text,type:e.id}))),onExecuteItem:e=>{l(e.type)}})]})};var Ut=n(17300),Xt=n(76132);const $t=e=>{let{attributes:t,element:n,children:a}=e;if((null===n||void 0===n?void 0:n.type)!==o.g0)throw new Error("Expression is meant to render expression elements");const[s,c]=(0,C.useState)(!1),[d,u]=(0,C.useState)(!1),[p,h]=(0,C.useState)(!1),g=(0,k.vt)(),b=(0,k.UE)(),y=(0,C.useContext)(r.K),v=(0,m.VY)();(0,C.useEffect)((()=>{g&&b||c(!1)}),[g,b]);const f=(0,o.l3)(),w=(0,l.Z)(f,n,"blockId"),E=(0,l.Z)(f,n,"varName"),S=(0,m.pc)(n.blockId),T=(0,m.Iy)(),Z=(0,C.useCallback)((()=>{const e=(0,i.O$c)(f,n);e&&(u(!0),(0,Ut.k)(f,e))}),[f,n]),I=(0,C.useCallback)((()=>{x()((0,i.agy)(f,{nodes:[n]}),{format:"text/html"})}),[f,n]),D=T.getNamesDefined$.useWithSelector((e=>Object.values(e).map((e=>{if(!s&&p)return;const{kind:t}=e.type;return"string"!==t&&"number"!==t&&"boolean"!==t&&"type-error"!==t||"variable"!==e.kind?void 0:{type:"var",text:e.name,id:e.blockId||""}})))).filter((e=>void 0!==e)),N=f.children.filter((e=>e.type===i.Zvw)).filter((e=>!T.getSymbolDefinedInBlock(e.id))).filter((e=>{var t;(0,ge.I)(e,i.Zvw);const n=T.getBlockIdResult$.get(e.id),r=null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t.type.kind;return("string"===r||"number"===r||"boolean"===r)&&"identified-error"!==(null===n||void 0===n?void 0:n.type)})).map((e=>{(0,ge.I)(e,i.Zvw);let t="";for(const n of e.children){if("smart-ref"===(null===n||void 0===n?void 0:n.type)){(0,ge.I)(n,o.bM);const e=T.getSymbolDefinedInBlock(n.blockId);if(!e)return;t+=e}t+=(0,i.qcw)(n)}return{type:"calc",text:t,id:e.id}})).filter((e=>void 0!==e)),L=(0,C.useMemo)((()=>[...D,...N]),[D,N]),M=(0,P.m)(n),B=!d&&M&&(0,Xt.d3)(f,M),O=(0,C.useCallback)(((e,t)=>({horizontal:t.getItemType()===o.qu||t.getItemType()===o.g0,vertical:!B})),[B]),A=(0,C.useCallback)(((e,t,r)=>{if(!M||"left"!==r&&"right"!==r)return(0,U.I5)(f,e,n.id,r);Xe.ML.withoutNormalizing(f,(()=>{var t;const n=null===(t=(0,i.DYv)(f,{at:[],match:{id:e.id}}))||void 0===t?void 0:t[1];let o=[];B?("left"===r&&(o=M),"right"===r&&(o=Xe.y$.next(M))):(o=[...M,"left"===r?0:1],(0,Xt.ZX)(f,M)),(0,i.$45)(f,{at:n,to:o})}))}),[f,n.id,B,M]),_=(0,C.useCallback)((e=>{const t=L.find((t=>t.id===e));E((null===t||void 0===t?void 0:t.text)||""),w(e),c(!1),y({type:"action",action:"widget value updated",props:{variant:"display",isReadOnly:v}})}),[w,E,L,v,y]);return(0,C.useEffect)((()=>{L.length>0&&!p&&(_(n.blockId),h(!0))}),[_,n.blockId,L.length,p]),d?(0,R.tZ)(R.HY,{}):(0,R.tZ)("div",{...t,contentEditable:!1,id:n.id,children:(0,R.tZ)($,{blockKind:"interactive",element:n,accept:B?[o.qu,o.g0]:void 0,getAxis:O,onDrop:A,children:(0,R.tZ)(Lt.h,{variant:"display",onCopy:I,onDelete:Z,readOnly:v,element:n,children:(0,R.tZ)(Kt,{dropdownContent:L,openMenu:s&&b&&g,onChangeOpen:c,selectedId:n.blockId,setSelectedId:_,lineResult:S,result:n.varName||"Name",readOnly:v,children:a})})})})};var qt=n(38643),jt=n(28438);const Gt={name:"1o8ujvl--Import--importWrapperStyles",styles:"padding-top:20px;label:-Import--importWrapperStyles;"},Ft=e=>{let{fetching:t,error:n}=e;return(0,R.BX)("div",{contentEditable:!1,css:Gt,children:[t&&(0,R.tZ)(qt.$,{}),n&&(0,R.tZ)(jt.s,{message:n,url:"/docs"})]})};var zt=n(76885),Yt=n(37114),Jt=n(25151);const Qt=e=>{const{type:t,value:n}=e;if(null==n||"symbol"===typeof n)return"";if("string"===t.kind)return n.toString();if("date"===t.kind){let e;switch(t.date){case"year":e="yyyy";break;case"month":e="yyyy/MM";break;case"day":e="yyyy/MM/dd";break;case"hour":e="yyyy/MM/dd HH";break;case"minute":e="yyyy/MM/dd HH:mm";break;case"second":case"millisecond":e="yyyy/MM/dd HH:mm:ss"}if("bigint"!==typeof n)return"";const r=new Date(Number(n));return(0,Jt.Z)(r,e)}return n.toString()},en=e=>{switch(e.kind){case"anything":case"type-error":return{kind:"string"};case"boolean":case"date":case"number":case"string":return e;default:throw new Error("Don't know how to convert cell of type ".concat(e.kind))}},tn=e=>{let t=-1;const n=[],{columnTypes:r}=e.type;let l=!0;for(;l;){t+=1;const i=e.value.map(((e,n)=>{e.length<t&&(l=!1);const i=Qt({type:r[n],value:e[t]});return{type:o.Cv,id:(0,a.x0)(),children:[{text:i}]}}));l&&n.push({type:o.Rt,id:(0,a.x0)(),children:i})}return n},nn=e=>{let{editor:t,insertPath:n,result:r,computer:l}=e;const i=r.result;if("table"===i.type.kind){const e=((e,t,n)=>({id:(0,a.x0)(),type:o.L7,children:[{type:o.Kl,id:(0,a.x0)(),children:[{id:(0,a.x0)(),type:o.rN,children:[{text:null!==n&&void 0!==n&&n.title?(0,G.pG)(n.title):e.getAvailableIdentifier("ImportedTable",1)}]}]},{type:o.Rt,id:(0,a.x0)(),children:t.type.columnNames.map(((e,n)=>({type:o.Vx,id:(0,a.x0)(),cellType:en(t.type.columnTypes[n]),children:[{text:e}]})))},...tn(t)]}))(l,i,r.meta);(0,h.s)(t,e,{at:n})}},rn=e=>{let{attributes:t,element:n}=e;(0,ge.I)(n,o.cR);const r=(0,o.l3)(),l=(0,m.Iy)(),[a,s]=(0,C.useState)(!1),[c,d]=(0,C.useState)(!1),[u,h]=(0,C.useState)(),[g,b]=(0,C.useState)(),y=(0,P.m)(n);return(0,C.useEffect)((()=>{(async()=>{if(!a&&!c){d(!0);try{const e=await(0,zt.ZC)(l,new URL(n.url),n.source,{maxCellCount:300});e.length>0?(h(void 0),b(e[0])):h("Could not load from ".concat(n.url));const t=e[0];b(t)}catch(e){console.error("Error caught while importing",e),h(e.message)}finally{s(!0),d(!1)}}})()}),[l,n.source,n.url,a,c]),(0,C.useEffect)((()=>{if(g){const t=g.result;if("type-error"===(null===t||void 0===t?void 0:t.type.kind))h((0,Yt.Z)("en-US",t.type.errorCause));else if("table"!==(null===t||void 0===t?void 0:t.type.kind))return void h("Expected result to be a table");if(y&&t&&"table"===t.type.kind)try{const e=(0,p.Nj)(r,y);(0,i.kRc)(r,(()=>{nn({editor:r,computer:l,insertPath:e,result:g}),(0,i.r4l)(r,{at:y})}))}catch(e){console.error(e),h(e.message)}}}),[l,r,n,y,g]),(0,R.tZ)($,{blockKind:"paragraph",element:n,...t,children:(0,R.tZ)(Ft,{url:n.url,fetching:c,error:u})})};var on=n(21821),ln=n(46569),an=n(5520),sn=n(11722),cn=n(51487),dn=n(19427),un=n(96866),pn=n(46836),hn=n(74689),gn=n(90402),mn=n(72915),bn=n(5475),yn=n(49900),vn=n(26788),fn=n(39102),xn=n(63740),Cn=n(72063),kn=n(78226);const wn=(0,E.css)({display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",columnGap:"12px",clipPath:"inset(-8px -8px -8px -8px round 8px)",':hover, &[data-focused="true"]':{backgroundColor:(0,I.g)("highlightColor"),boxShadow:"0px 0px 0px 8px ".concat((0,I.g)("highlightColor"))}},";label:-InlineMenuItem--styles;"),En=(0,E.css)({width:"40px",height:"40px",display:"grid",backgroundColor:(0,I.g)("iconBackgroundColor"),borderRadius:"6px"},";label:-InlineMenuItem--iconStyles;"),Sn={name:"kinl7q--InlineMenuItem--textStyles",styles:"display:grid;text-align:start;row-gap:6px;label:-InlineMenuItem--textStyles;"},Tn=(0,E.css)(Z.v5,{padding:"2px 4px",borderRadius:"3px",backgroundColor:(0,I.g)("strongHighlightColor"),height:"14px"},";label:-InlineMenuItem--soonStyles;"),Zn={name:"14cezqg--InlineMenuItem--inlineStyles",styles:"display:flex;gap:8px;label:-InlineMenuItem--inlineStyles;"},In=(0,E.css)(Z.yw,(0,I.m)("currentTextColor","strongTextColor"),";label:-InlineMenuItem--titleStyles;"),Dn=(0,E.css)(Z.vf,";label:-InlineMenuItem--descriptionStyles;"),Rn=(0,E.css)((0,I.m)("currentTextColor",(0,I.g)("weakerTextColor")),";label:-InlineMenuItem--disabledStyles;"),Nn=(0,E.css)((0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),";label:-InlineMenuItem--enabledStyles;"),Ln=(0,E.css)((0,I.m)("currentTextColor",(0,I.g)("strongTextColor")),";label:-InlineMenuItem--blackFontStyles;");var Mn={name:"149cffj--InlineMenuItem--InlineMenuItem",styles:"opacity:0.5;label:-InlineMenuItem--InlineMenuItem;"};const Bn=e=>{let{icon:t,title:n,description:r,enabled:o,focused:l,onExecute:a=G.ZT,"data-testid":i}=e;const s=(0,C.useRef)(null),c=(0,C.useCallback)((e=>{l&&"Enter"===e.key&&!e.shiftKey&&(o&&a(),e.stopPropagation(),e.preventDefault())}),[a,l,o]);var d;((0,j.mR)("keydown",c,!0),l)&&(null===(d=s.current)||void 0===d||d.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}));return(0,R.BX)("button",{role:"menuitem","data-testid":i,css:wn,onMouseDown:e=>{o&&a(),e.stopPropagation(),e.preventDefault()},"data-focused":l,ref:s,children:[(0,R.tZ)("span",{css:[En,!o&&Mn,";label:-InlineMenuItem--InlineMenuItem;"],children:t}),(0,R.BX)("div",{css:Sn,children:[(0,R.BX)("div",{css:Zn,children:[(0,R.tZ)("strong",{css:[In,o?Ln:Rn,";label:-InlineMenuItem--InlineMenuItem;"],children:n}),!o&&(0,R.tZ)("span",{css:Tn,children:"SOON"})]}),(0,R.tZ)("span",{css:[Dn,o?Nn:Rn,";label:-InlineMenuItem--InlineMenuItem;"],children:r})]})]})};var On=n(9479);const An=(0,E.css)(Z.t5,(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),"padding:4px 2px;;label:-InlineMenuGroup--titleStyles;"),_n={name:"h4txr0--InlineMenuGroup--itemsStyles",styles:"padding:8px 4px;display:grid;row-gap:16px;label:-InlineMenuGroup--itemsStyles;"},Pn=e=>{let{title:t,children:n}=e;return(0,R.BX)("div",{role:"group",children:[t&&(0,R.tZ)("div",{css:An,children:t}),(0,R.tZ)("div",{css:_n,children:C.Children.map(n,(e=>{if(null==e)return null;if((0,On.isElement)(e)&&e.type===Bn)return e;throw console.error("Received child that is not a slash commands menu item",e),new Error("Expected all children to be slash commands menu items")}))})]})},Vn=(0,E.css)({maxWidth:"80vw",maxHeight:"40vh",overflowX:"hidden",overflowY:"scroll",display:"grid",gridTemplateColumns:"fit-content(75vw)",padding:"12px",backgroundColor:(0,I.g)("backgroundColor"),border:"1px solid ".concat((0,I.g)("borderColor")),borderRadius:"8px",boxShadow:"0px 2px 24px -4px ".concat((0,ke.KZ)(ke.lz,.08).rgba),":empty::before":{...Z.rC,...(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),content:'"No matching items found"'}},";label:-InlineMenu--styles;"),Hn=e=>{let{groups:t,onExecute:n=G.ZT,search:r=""}=e;const o=t.map((e=>{var t;let{items:n,...o}=e;const l=(null===(t=o.title)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))?n:n.filter((e=>{let{command:t,title:n,description:o,extraSearchTerms:l}=e;return[t,n,o,...l].some((e=>e.toLowerCase().includes(r.toLowerCase())))}));return{...o,matchingItems:l}})),l=o.flatMap((e=>{let{matchingItems:t}=e;return t})).map((e=>{let{command:t}=e;return t})),[a,i]=(0,C.useState)(),s=l[0];(0,C.useEffect)((()=>{i(s)}),[s]);const c=(0,C.useCallback)((e=>{var t,n;switch(!0){case"ArrowDown"===e.key&&!e.shiftKey:case"Tab"===e.key&&!e.shiftKey:i(null!==(t=l[(a?l.indexOf(a):-1)+1])&&void 0!==t?t:l[0]),e.stopPropagation(),e.preventDefault();break;case"ArrowUp"===e.key&&!e.shiftKey:case"Tab"===e.key&&e.shiftKey:i(null!==(n=l[(a?l.indexOf(a):l.length)-1])&&void 0!==n?n:l.slice(-1)[0]),e.stopPropagation(),e.preventDefault();break;case"Enter"===e.key&&void 0===a:i(l[0]),e.stopPropagation(),e.preventDefault()}}),[a,l]);return(0,j.mR)("keydown",c,!0),(0,R.tZ)("div",{role:"menu","aria-orientation":"vertical",css:Vn,children:o.map(((e,t)=>{let{matchingItems:r,...o}=e;return r.length?(0,R.tZ)(Pn,{...o,children:r.map((e=>{let{command:t,extraSearchTerms:r,...o}=e;return(0,E.createElement)(Bn,{...o,"data-testid":"menu-item-".concat(t),key:t,focused:a===t,onExecute:()=>n(t)})}))},t):null}))})},Wn=e=>{const t=(0,C.useMemo)((()=>[{title:"Numbers",items:[{command:"structured-code-line",title:"Formula",description:"Establish relationships between numbers using basic formulas",icon:(0,R.tZ)(on.c,{}),enabled:(0,g.J8)("CODE_LINE_NAME_SEPARATED"),extraSearchTerms:["formula","calculation"]},{command:"calculation-block",title:"Advanced formula",description:"Derive insights using Decipad's full language capabilities",icon:(0,R.tZ)(ln.Q,{}),enabled:!0,extraSearchTerms:["decipad","calculation","language","formula"]},{command:"table",title:"Table",description:"Organize data in a table. Input data into models using table format",icon:(0,R.tZ)(an.u,{}),enabled:!0,extraSearchTerms:[]},{command:"data-view",title:"Data view",description:"Pivot table for data analysis, filtering, and grouping",icon:(0,R.tZ)(sn.V,{}),enabled:!0,extraSearchTerms:["group","sort","analyze","pivot","data","view","filter","analytic"]},{command:"plot",title:"Chart",description:"Visualize data with charts, plot data using charts",icon:(0,R.tZ)(cn.k,{}),enabled:!0,extraSearchTerms:["chart","visualisation","plot"]}]},{title:"Widgets",items:[{command:"input",title:"Input",description:"Enter a value that others can interact with",icon:(0,R.tZ)(dn.I,{}),enabled:!0,extraSearchTerms:["input","number","units","string"]},{command:"toggle",title:"Toggle",description:"Choose between yes/no options using a switch",icon:(0,R.tZ)(un.Z,{}),enabled:!0,extraSearchTerms:["switch","toggle","boolean","yes","no"]},{command:"datepicker",title:"Date",description:"Pick a date from a calendar",icon:(0,R.tZ)(pn.M,{}),enabled:!0,extraSearchTerms:["input","date","calendar","pick"]},{command:"slider",title:"Slider",description:"Slide to adjust a number and share it with others",icon:(0,R.tZ)(hn.i,{}),enabled:!0,extraSearchTerms:["input","number","slider","adjust"]},{command:"display",title:"Result",description:"Highlight important results in a story",icon:(0,R.tZ)(gn.x,{}),enabled:!0,extraSearchTerms:["display","result","show"]},{command:"dropdown",title:"Dropdown",description:"Choose from a list of specified options",icon:(0,R.tZ)(mn.L,{}),enabled:!0,extraSearchTerms:["dropdown","list","select","options"]},{command:"eval",title:"Javascript",icon:(0,R.tZ)(bn.d,{}),description:"Allow users to run JavaScript code",enabled:(0,g.J8)("UNSAFE_JS_EVAL"),extraSearchTerms:["eval","javascript","js","code","python"]}]},{title:"Writing",items:[{command:"heading1",title:"Heading",description:"Main text heading",icon:(0,R.tZ)(yn.n,{}),enabled:!0,extraSearchTerms:["h1"]},{command:"heading2",title:"Sub-heading",description:"Secondary text heading",icon:(0,R.tZ)(vn.X,{}),enabled:!0,extraSearchTerms:["h2"]},{command:"callout",title:"Callout",description:"Grabs the readers attention",icon:(0,R.tZ)(fn.U,{}),enabled:!0,extraSearchTerms:["highlight","pop","hero"]},{command:"blockquote",title:"Quote",description:"Quote something, or someone.",icon:(0,R.tZ)(xn.V,{}),enabled:!0,extraSearchTerms:[">","quote","blockquote"]},{command:"divider",title:"Divider",description:"A separator between your text",icon:(0,R.tZ)(Cn.i,{}),enabled:!0,extraSearchTerms:["hr","divider","-"]},{command:"sketch",title:"Sketch",icon:(0,R.tZ)(kn.v,{}),description:"Express yourself with a drawing",enabled:(0,g.J8)("SKETCH"),extraSearchTerms:["draw","paint"]}]}]),[]);return(0,R.tZ)(Hn,{...e,groups:t})};var Kn=n(74125),Un=n.n(Kn),Xn=n(17679),$n=n(95723),qn=n(39535),jn=n(84490);const Gn={decipad:"Decipad notebook",csv:"CSV",gsheets:"Google Sheets",json:"a JSON API",arrow:"an Arrow file"},Fn=e=>{const t=e?Gn[e]:"unknown source",n=Un().singular(t).toLocaleLowerCase();return[{items:["gsheets"===e&&{command:"connect-islands",title:"Connect to table ranges",description:"Tries to find tables in your google sheets and create a live connection",icon:(0,R.tZ)(Xn.V,{}),enabled:!0,extraSearchTerms:["connect","live"]},{command:"connect-all",title:"Connect to ".concat(n),description:"Connect to live data from this ".concat(n),icon:(0,R.tZ)($n.j,{}),enabled:!0,extraSearchTerms:["connect","live"]},"gsheets"===e&&{command:"import-islands",title:"Import table ranges",description:"Tries to find tables in your google sheets and import them",icon:(0,R.tZ)(qn.c,{}),enabled:!0,extraSearchTerms:["import","google","sheets"]},{command:"import-all",title:"Import from ".concat(n),description:"Import all data in this ".concat(n),icon:(0,R.tZ)(jn.w,{}),enabled:!0,extraSearchTerms:["import","google","sheets"]}].filter(Boolean)}]},zn=e=>{let{source:t,...n}=e;return(0,R.tZ)(Hn,{...n,groups:Fn(t)})};var Yn=n(72603),Jn=n(84951),Qn=n(99034);const er=()=>({type:o.cl,id:(0,a.x0)(),points:[],pressures:[],__dummy:!0,children:[{text:""}],x:364.55470275878906,y:92.64584350585938,width:118.0859375,height:116.72393798828125,angle:0,strokeColor:"#000000",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[]}),tr=(e,t)=>{(0,i.kRc)(e,(()=>{const n=Xe.y$.next(t);(0,i.Z5U)(e,{focus:{path:n,offset:0},anchor:{path:n,offset:0}}),(0,h.s)(e,{id:(0,a.x0)(),type:o.if,children:[er()]},{at:(0,p.Nj)(e,t)})}))},nr=(e,t,n,r)=>{const[l,s]=(e=>"boolean"===e?["toggle","false"]:"date"===e?["date","2022-11-03"]:["expression","100$"])(n),c=(e=>{let{caption:t="",value:n="",variant:r="expression",kind:l="number"}=e;return{id:(0,a.x0)(),type:o.qu,variant:r,...l&&{coerceToType:{kind:l,date:"day"}},children:[{id:(0,a.x0)(),type:o.Oo,children:[{text:t}]},{id:(0,a.x0)(),type:o.oN,children:[{text:n}]}]}})({kind:n,caption:r("Input",1),value:s,variant:l}),d=(0,p.Nj)(e,t);(0,h.s)(e,c,{at:d});const u=[...d,1],g=(0,i.ZJ1)(e,u),m=(0,i.plg)(e,u);(0,i.Z5U)(e,{anchor:m,focus:g})},rr=(e,t,n)=>{const r={id:(0,a.x0)(),type:o.qu,variant:"slider",children:[{id:(0,a.x0)(),type:o.Oo,children:[{text:""}]},{id:(0,a.x0)(),type:o.oN,children:[{text:""}]},{id:(0,a.x0)(),type:o.TJ,max:"10",min:"0",step:"1",value:"0",children:[{text:""}]}]};r.children[0].children[0].text=n("Slider",1),(0,h.s)(e,r,{at:(0,p.Nj)(e,t)})},or=(e,t)=>{const n={id:(0,a.x0)(),blockId:"",type:o.g0,children:[{text:""}]};(0,h.s)(e,n,{at:(0,p.Nj)(e,t)})},lr=(e,t,n)=>{const r={id:(0,a.x0)(),type:o.qu,variant:"dropdown",coerceToType:{kind:"string"},children:[{id:(0,a.x0)(),type:o.Oo,children:[{text:"Dropdown"}]},{id:(0,a.x0)(),type:o.Ws,options:[],children:[{text:"Select"}]}]};r.children[0].children[0].text=n("Dropdown",1),(0,h.s)(e,r,{at:(0,p.Nj)(e,t)})},ar=(e,t)=>{(0,h.s)(e,{id:(0,a.x0)(),type:o.QC,title:"Chart",sourceVarName:"",xColumnName:"",yColumnName:"",markType:"bar",thetaColumnName:"",sizeColumnName:"",colorColumnName:"",children:[{text:""}]},{at:(0,p.Nj)(e,t)})},ir=(e,t,n)=>{const r={id:(0,a.x0)(),type:o.L7,children:[{id:(0,a.x0)(),type:o.Kl,children:[{id:(0,a.x0)(),type:o.rN,children:[{text:""}]}]},{id:(0,a.x0)(),type:o.Rt,children:[{id:(0,a.x0)(),type:o.Vx,cellType:{kind:"anything"},children:[{text:"Property1"}]},{id:(0,a.x0)(),type:o.Vx,cellType:{kind:"anything"},children:[{text:"Property2"}]},{id:(0,a.x0)(),type:o.Vx,cellType:{kind:"anything"},children:[{text:"Property3"}]}]},{id:(0,a.x0)(),type:o.Rt,children:[{id:(0,a.x0)(),type:o.Cv,children:[{text:""}]}]},{id:(0,a.x0)(),type:o.Rt,children:[{id:(0,a.x0)(),type:o.Cv,children:[{text:""}]}]},{id:(0,a.x0)(),type:o.Rt,children:[{id:(0,a.x0)(),type:o.Cv,children:[{text:""}]}]}]};r.children[0].children[0].children[0].text=n("Table",1),(0,h.s)(e,r,{at:(0,p.Nj)(e,t)})},sr=(e,t)=>{var n;const r=dr(e,t),o=cr(e);return{isInline:null!=r,search:null!==(n=null===r||void 0===r?void 0:r.command)&&void 0!==n?n:o,deleteFragment:null===r||void 0===r?void 0:r.selection}},cr=e=>{var t;return null===(t=/^\/([a-z ]*)$/i.exec(e))||void 0===t?void 0:t[1]},dr=(e,t)=>{if(!t)return;if(!(0,i.zbr)(t))return;if(e.startsWith("/"))return;const{offset:n}=t.anchor,r=e.slice(0,n).split("/").slice(1).at(-1);if(null==r)return;if(r.match(/\s/))return;return{command:r,selection:{anchor:{offset:n-r.length-1,path:t.anchor.path},focus:{offset:n,path:t.anchor.path}}}};var ur=n(68825),pr=n(87947);var hr=n(41580);const gr=async e=>{let{editor:t,source:n,url:r}=e;if("decipad"===n&&r){const{docId:e}=(e=>{const t=new URL(e),n=(0,G.m0)(t.pathname.match(/^\/n\/(.*)/),"Could not find notebook id from URL".concat(t)),r=t.hash.slice(1);let o=decodeURIComponent((0,G.m0)(n[1],"no doc id on URL ".concat(t)));return o.indexOf(":")>=0&&(o=o.slice(o.indexOf(":")+1)),{docId:o,blockId:r}})(r),{hasAccess:t,exists:n,isPublic:o}=await(async e=>{const t=await(0,hr.h)("/api/pads/".concat(encodeURIComponent(e)));if(403===t.status)return{hasAccess:!1,exists:!0,isPublic:!1};if(404===t.status)return{hasAccess:!1,exists:!1,isPublic:!1};const n=await t.json();return n?{exists:!0,hasAccess:!0,isPublic:!!n.isPublic}:{exists:!1,hasAccess:!1,isPublic:!1}})(e),l=n?t?o?void 0:"You can only create live connections to public notebooks":"You don't have access to this notebook":"Notebook does not exist";if(l)throw new Error(l)}const l=(0,G.m0)(t.selection),i={id:(0,a.x0)(),type:o.cL,url:(0,G.m0)(r),source:n,isFirstRowHeaderRow:!1,columnTypeCoercions:[],children:[{id:(0,a.x0)(),type:o.YA,children:[{text:""}]}]};(0,h.s)(t,i,{at:(0,p.Nj)(t,l.anchor.path)})},mr=async e=>{const{editor:t,source:n,url:r}=e,{selection:l}=t;if((0,i.zbr)(l)&&null!==l&&void 0!==l&&l.anchor&&r)return"gsheets"!==n?gr(e):(async e=>{let{computer:t,editor:n,source:r,url:l,identifyIslands:s}=e,c=[(0,G.m0)(n.selection).anchor.path[0]];const d=()=>(c=(e=>{const[t,...n]=e;return[t+1,...n]})(c),c),u=(0,G.m0)(l,"undefined url"),p=await(0,zt.ZC)(t,new URL(u),r,{identifyIslands:s});return Promise.all(p.map((async e=>{var t,l,s;const c={id:(0,a.x0)(),type:o.cL,url:null!==(t=null===(l=e.meta)||void 0===l||null===(s=l.sourceUrl)||void 0===s?void 0:s.toString())&&void 0!==t?t:(0,G.m0)(u),source:r,isFirstRowHeaderRow:!1,columnTypeCoercions:[],children:[{id:(0,a.x0)(),type:o.YA,children:[{text:""}]}]},p={id:(0,a.x0)(),type:o.JB,children:[{text:"Add your explanation here",italic:!0}]};(0,i.kRc)(n,(()=>{(0,h.s)(n,p,{at:d()}),(0,h.s)(n,c,{at:d()})})),await(0,G.Vs)(2e3)}))).then(G.ZT)})(e)},br=e=>{const t=(0,o.l3)(),[n,r]=(0,C.useState)(!1),l=(0,m.c1)("pasted-link"),s=(0,pr.m)((()=>l)),c=(0,k.vt)(),d=(0,m.wr)(),[u,g]=(0,C.useState)();(0,C.useEffect)((()=>{(0,m.cT)(s,"pasted-link")&&c&&!n&&(g(s),r(!0),d.next({type:"consumed"})),n&&!c&&r(!1)}),[s,d,c,n]);const b=(0,C.useCallback)((n=>{if(n&&"pasted-link"===n.type){const r=(0,i.O$c)(t,e);if(r){const e=(0,i.DYv)(t,{at:r,match:e=>(0,i.GsE)(e)&&(0,i.qcw)(e).includes(n.url)});if(e){const[r,o]=e,l=(0,i.qcw)(r).replace(n.url,"");l?(0,i.OmN)(t,l,{at:o}):(0,i.r4l)(t,{at:o})}}}}),[t,e]),y=(0,m.Iy)(),v=(0,ur.p)(),f=(0,C.useCallback)((async e=>{switch(r(!1),e){case"import-all":case"import-islands":(0,m.cT)(u,"pasted-link")&&(await(async e=>{let{computer:t,editor:n,source:r,url:l,identifyIslands:s}=e;const{selection:c}=n;if((0,i.zbr)(c)&&null!==c&&void 0!==c&&c.anchor&&l){const e=await(0,zt.ZC)(t,new URL(l),r,{identifyIslands:s}),d=(0,p.Nj)(n,c.anchor.path),u=c;(0,i.kRc)(n,(()=>{for(const i of e){var t,s,c;const e={id:(0,a.x0)(),type:o.cR,url:null!==(t=null===(s=i.meta)||void 0===s||null===(c=s.sourceUrl)||void 0===c?void 0:c.toString())&&void 0!==t?t:l,source:r,children:[{text:""}]};(0,h.s)(n,e,{at:d})}(0,i.Z5U)(n,u)}))}})({computer:y,editor:t,source:u.source,url:u.url,identifyIslands:"import-islands"===e}),g(void 0));break;case"connect-all":case"connect-islands":if((0,m.cT)(u,"pasted-link")){try{await mr({computer:y,editor:t,source:u.source,url:u.url,identifyIslands:"connect-islands"===e})}catch(n){v(n.message,"error")}g(void 0)}}b(u)}),[b,y,t,u,v]),x=(0,C.useCallback)((e=>{if(n&&!e.shiftKey&&"Escape"===e.key)r(!1),e.stopPropagation(),e.preventDefault()}),[n]);return(0,j.mR)("keydown",x,!0),{showInteractionMenu:n,onInteractionMenuExecute:f,source:"pasted-link"===(null===u||void 0===u?void 0:u.type)?u.source:void 0}};var yr={name:"bzz3cl--InteractiveParagraph--InteractiveParagraph",styles:"position:absolute;z-index:2;user-select:none;label:-InteractiveParagraph--InteractiveParagraph;"},vr={name:"bzz3cl--InteractiveParagraph--InteractiveParagraph",styles:"position:absolute;z-index:2;user-select:none;label:-InteractiveParagraph--InteractiveParagraph;"};const fr=e=>t=>{let{children:n,...l}=t;const a=l.element;(0,ge.I)(a,o.JB);const s=(0,o.l3)(),c=(0,C.useContext)(r.K),{showSlashCommands:d,menuRef:u,elementPath:h,deleteFragment:g,search:m}=(e=>{const t=(0,le.c)(),n=(0,k.vt)(),r=(0,k.UE)(),l=(0,i.qcw)(e),a=(0,P.m)(e),[s,c]=(0,C.useState)(!0);(0,C.useEffect)((()=>{n&&c(!1)}),[l]),(0,C.useEffect)((()=>{n||c(!0)}),[n]);const{search:d,isInline:u,deleteFragment:p}=sr(l,t),h=n&&r&&!s&&null!=d,g=(0,C.useRef)(null);(0,C.useEffect)((()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({block:"nearest"})}),[h,d]);const m=(0,C.useCallback)((e=>{h&&!e.shiftKey&&"Escape"===e.key&&(c(!0),e.stopPropagation(),e.preventDefault())}),[h]);(0,j.mR)("keydown",m,!0);const b=(0,o.l3)(),y=null===t||void 0===t?void 0:t.focus,v=!u&&h&&a&&(0,i.zbr)(t);return(0,C.useEffect)((()=>{if(v){const e=(0,i.ZJ1)(b,a);(0,F.J)(y,e)||(0,i.Z5U)(b,{focus:e,anchor:e})}}),[b,a,y,v]),{showSlashCommands:h,menuRef:g,elementPath:a,deleteFragment:p,search:d}})(a),{showInteractionMenu:b,onInteractionMenuExecute:y,source:v}=br(a);return d?(0,R.BX)(Pa,{...l,children:[n,(0,R.tZ)("div",{ref:u,contentEditable:!1,css:yr,children:(0,R.tZ)(Wn,{onExecute:t=>{h&&(e=>{let{command:t,editor:n,path:r,getAvailableIdentifier:l,deleteFragment:a}=e;switch(t){case"structured-code-line":(0,Yn.Ah)(n,r,!1,l);break;case"calculation-block":(0,Yn.sN)(n,r,!1);break;case"input":nr(n,r,"number",l);break;case"toggle":nr(n,r,"boolean",l);break;case"datepicker":nr(n,r,"date",l);break;case"slider":rr(n,r,l);break;case"display":or(n,r);break;case"dropdown":lr(n,r,l);break;case"table":ir(n,r,l);break;case"data-view":(0,Qn.o)(n,r);break;case"plot":ar(n,r);break;case"import":(0,Jn.Hu)(n,r,o.aY);break;case"heading1":(0,Jn.Hu)(n,r,o.oG);break;case"heading2":(0,Jn.Hu)(n,r,o.o3);break;case"divider":(0,Jn.SE)(n,r,o.cI);break;case"callout":(0,Jn.Hu)(n,r,o.SD);break;case"blockquote":(0,Jn.Hu)(n,r,o.ah);break;case"eval":(0,Jn.Hu)(n,r,o.ZH);break;case"sketch":tr(n,r)}if(a){const e=[r[0]+1,0];(0,re.Y)(n,e),(0,i.nXd)(n,{at:a})}else(0,i.nXd)(n,{at:(0,p.sK)(n,r)})})({editor:s,path:h,deleteFragment:g,command:t,getAvailableIdentifier:e.getAvailableIdentifier.bind(e)}),c({type:"action",action:"slash command",props:{command:t}})},search:m})})]}):(0,R.tZ)(Pa,{...l,children:(0,R.BX)(R.HY,{children:[n,b&&(0,R.tZ)("div",{ref:u,contentEditable:!1,css:vr,children:(0,R.tZ)(zn,{source:v,onExecute:y})})]})})};var xr=n(96374),Cr=n(28361);const kr={name:"5efwqb--Draw--drawStyles",styles:"display:block;width:100%;max-width:100%;cursor:pointer;border-radius:8px;border:0;label:-Draw--drawStyles;"},wr=(0,E.css)({"& > div > div":{height:"400px"},".excalidraw":{"--color-primary":ke.p5.rgb,"--icon-fill-color":(0,I.g)("normalTextColor"),"--button-gray-1":(0,I.g)("highlightColor"),"--button-gray-2":ke.$m.rgb,"--theme-filter":"none"},".excalidraw.theme--dark":{"--theme-filter":"invert(1) hue-rotate(180deg)",canvas:{mixBlendMode:"screen"}}},";label:-Draw--excalidrawContainerStyles;"),Er={name:"wttcr--Draw--excalidrawReadOnlyStyles",styles:".excalidraw{pointer-events:none;};label:-Draw--excalidrawReadOnlyStyles;"},Sr=Cr.qC,Tr=e=>{let{draggableBlock:t,excalidrawRef:n,readOnly:r,elements:o,onChange:l=G.ZT,onInteractingChange:a=G.ZT,...i}=e;const{attributes:s,children:c,element:d}=i,u=(0,C.useRef)({}),p=(0,C.useCallback)(((e,t)=>{u.current=t,l(e),a((e=>!!e.draggingElement||!!e.editingElement||!!e.editingLinearElement||!!e.resizingElement)(t))}),[l,a]),[h]=(0,m.yt)(),g=(0,C.useCallback)((e=>{e.stopPropagation()}),[]);return(0,R.BX)(t,{blockKind:"draw",element:d,draggableCss:kr,...s,children:[(0,R.tZ)("div",{onClick:g,children:(0,R.tZ)(Sr,{css:[wr,r&&Er,";label:-Draw--Draw;"],excalidrawProps:{ref:n,onChange:r?G.ZT:p,gridModeEnabled:!r,zenModeEnabled:!0,viewModeEnabled:r,initialData:{elements:o,appState:u.current},theme:h?xr.THEME.DARK:xr.THEME.LIGHT,UIOptions:{canvasActions:{export:!1,clearCanvas:!1,loadScene:!1,saveToActiveFile:!1,saveAsImage:!1,changeViewBackgroundColor:!1,theme:!h}}},...i})}),c]})},Zr=e=>!e.isDeleted,Ir=e=>{if(e.hasOwnProperty("__text")){const{__text:t,...n}=e;return{...n,text:t}}return e},Dr=e=>{let t=e;if(t.hasOwnProperty("text")){const{text:e,children:n,...r}=t;t={...r,__text:e}}return Array.isArray(t.children)||(t={...t,children:[{text:""}]}),t};var Rr=n(33058);const Nr=(e,t)=>{const n=[];for(const r of[...e].reverse()){if(r.__dummy)continue;const e=t.find((e=>e.id===r.id));(!e||e.isDeleted)&&n.push(r.id)}return n},Lr=(e,t)=>{const n=[];for(const r of t)r.isDeleted||e.find((e=>e.id===r.id))||n.push(r);return n},Mr=(e,t)=>{if(null!=e.version&&null!=t.version&&e.version>t.version)return{};const n={};(0,Rr.Z)(t.id===e.id,"expected both elements to have the same id");for(const[r,o]of Object.entries(e)){const e=t[r];(0,F.J)(o,e)||(n[r]=e)}for(const[r,o]of Object.entries(t))e.hasOwnProperty(r)||(n[r]=o);return n},Br=(e,t)=>{const n=[];for(const r of e){if(r.__dummy)continue;const e=t.find((e=>e.id===r.id));if(e){const t=Mr(r,e);if(0===Object.keys(t).length)continue;n.push({...t,id:r.id})}}return n},Or=(e,t)=>({added:Lr(e,t),removed:Nr(e,t),modified:Br(e,t)});var Ar=n(20034);const _r=(e,t,n)=>{(0,i.kRc)(e,(()=>{((e,t)=>{for(const n of t){if(0===Object.keys(n).length||n.__dummy)continue;const t=(0,i.DYv)(e,{match:{id:n.id},voids:!0});t&&(0,i.fLV)(e,Dr(n),{at:t[1],voids:!0})}})(e,n.modified),((e,t,n)=>{for(const r of n){const n=[...t[1],t[0].children.length];(0,h.s)(e,[Dr(r)],{at:n})}})(e,t,n.added),((e,t,n)=>{let r=t[0].children.length;for(const o of[...n].reverse()){const n=(0,i.DYv)(e,{at:t[1],match:{id:o},voids:!0});n&&((0,i.nXd)(e,{at:n[1],unit:"block",voids:!0}),r-=1)}0===r&&(0,h.s)(e,[er()],{at:[...t[1],0],voids:!0})})(e,t,n.removed)}))},Pr=e=>{let{editor:t,element:n,updateScene:r,updating:o,isInteracting:l}=e;const a=(0,C.useRef)(n);a.current=n;const c=(0,C.useRef)(!1),d=(0,Ar.y1)((0,C.useCallback)((e=>{o.current=!1;const d=(0,i.O$c)(t,n);if(d){const o=(e=>e.map(Dr))(e),i=Or(a.current.children,o);_r(t,[n,d],i);const u=(0,s.cloneDeep)(o);c.current&&!l&&(c.current=!1,r(u))}}),[t,n,l,c,r,o]),500),u=(0,C.useRef)();return{onUserChange:(0,C.useCallback)((e=>{o.current=!0,u.current=(0,s.cloneDeep)(e),d(e)}),[d,o])}},Vr=e=>{let{element:t,attributes:n}=e;(0,ge.I)(t,o.if);const r=(0,o.l3)(),l=(0,m.VY)(),[a,c]=(0,C.useState)(!1);(0,C.useRef)(t).current=t;const d=(0,C.useRef)(!1),u=(0,C.useRef)((0,s.cloneDeep)(t.children)),p=(0,C.useCallback)((e=>{const t=h.current;if(t&&!(0,F.J)(u.current,e)){t.updateScene({elements:(n=(0,s.cloneDeep)(e),n.filter(Zr).map(Ir))}),u.current=(0,s.cloneDeep)(e)}var n}),[]),h=(0,C.useRef)(),{onUserChange:g}=Pr({editor:r,element:t,updating:d,isInteracting:a,updateScene:p});return((e,t)=>{const n=(0,C.useRef)(e.children),r=(0,C.useCallback)((e=>{const r=(0,s.cloneDeep)(n.current);for(const t of e.added)r.push(t);for(const t of e.modified){const e=r.find((e=>e.id===t.id));e&&(0,s.extend)(e,t)}t(r.filter((t=>!e.removed.includes(t.id))))}),[t]);(0,m.Ab)((0,C.useCallback)((e=>{if(e){const t=Or(n.current,e.children);r(t),n.current=e.children}}),[r]),(t=>{const n=(0,i.O$c)(t,e);var r;if(n)return null!==(r=(0,i.MkB)(t,n))&&void 0!==r?r:void 0}))})(t,p),(0,R.tZ)(Tr,{excalidrawRef:h,draggableBlock:$,readOnly:l,elements:(0,s.cloneDeep)(u.current),onChange:g,onInteractingChange:c,element:t,attributes:n,editor:r})};const Hr=n.p+"static/media/image-load.a3d040c446117305c2b7d2241fd11fdb.svg",Wr=e=>({...e,width:"100%",maxWidth:e.width}),Kr=(0,C.forwardRef)(((e,t)=>{let{style:n,...r}=e;return(0,R.tZ)("div",{style:Wr(n),ref:t,...r})})),Ur=(0,C.forwardRef)(((e,t)=>{let{style:n,...r}=e;return(0,R.tZ)("figcaption",{style:Wr(n),ref:t,...r})}));const Xr=(0,E.css)("display:inline-flex;position:relative;text-align:center;justify-content:center;align-items:center;max-width:100%;font-weight:500;border-width:0;cursor:pointer;background-color:",(0,I.g)("backgroundColor"),";:hover{background-color:",(0,I.g)("highlightColor"),";}:hover{background-color:",(0,I.g)("strongHighlightColor"),";}padding:4px 10px;font-family:inherit;font-size:14px;border-radius:3px;color:inherit;:active{color:inherit;}:visited{color:inherit;};label:-floating--plateButtonCss;"),$r=(0,E.css)("background-color:",(0,I.g)("backgroundColor"),";width:auto;z-index:10;border-radius:4px;box-shadow:rgb(15 15 15 / 5%) 0 0 0 1px,rgb(15 15 15 / 10%) 0 3px 6px,rgb(15 15 15 / 20%) 0 9px 24px;;label:-floating--floatingRootCss;"),qr={name:"c6m1ky--floating--floatingRowCss",styles:"display:flex;padding:4px 8px;flex-direction:row;align-items:center;label:-floating--floatingRowCss;"},jr=(0,E.css)([Xr,{name:"1ivf3cd--floating--floatingButtonCss",styles:"padding:0 4px;label:-floating--floatingButtonCss;"}],";label:-floating--floatingButtonCss;"),Gr={name:"10mzbzc--floating--floatingInputCss",styles:"padding:0;background-color:transparent;flex-grow:1;height:2rem;border-style:none;:focus{outline:none;}line-height:20px;label:-floating--floatingInputCss;"};var Fr=n(22690);const zr=(0,Fr.Z)("div",{target:"epa50ri0",label:"-FloatingVerticalDivider--FloatingVerticalDivider"})("margin-left:8px;margin-right:8px;background-color:",(0,I.g)("strongHighlightColor"),";width:1px;height:20px;");var Yr={name:"mtqffc--RemoveNodeButton--RemoveNodeButton",styles:"padding:4px 0;width:24px;height:24px;label:-RemoveNodeButton--RemoveNodeButton;"};const Jr=e=>{let{element:t,...n}=e;const r=(0,i.CET)();return(0,R.tZ)(i.zxk,{css:(0,E.css)([Xr,Yr],";label:-RemoveNodeButton--RemoveNodeButton;"),onClick:()=>{const e=(0,i.O$c)(r,t);(0,i.r4l)(r,{at:e}),(0,i.$Rk)(r,r.selection)},...n,children:(0,R.tZ)(i.pJl,{})})};const Qr=(0,Fr.Z)("div",{target:"e3wjl1v0",label:"-FloatingInputWrapper--FloatingInputWrapper"})({name:"1uom66h",styles:"display:flex;padding-top:4px;padding-bottom:4px;padding-right:8px;align-items:center"}),eo=(0,Fr.Z)("div",{target:"e17imi5f0",label:"-FloatingIconWrapper--FloatingIconWrapper"})("display:flex;padding:0 4px;color:",(0,I.g)("weakerTextColor"),";align-items:center;");var to={name:"e6gyey--FloatingMedia--FloatingMedia",styles:"display:flex;flex-direction:column;width:330px;label:-FloatingMedia--FloatingMedia;"};const no=e=>{let{pluginKey:t}=e;const n=(0,i.VMf)().isEditing(),r=(0,i.YP0)();return(0,R.tZ)("div",{css:$r,children:n?(0,R.tZ)("div",{css:to,children:(0,R.BX)(Qr,{children:[(0,R.tZ)(eo,{children:(0,R.tZ)(i.xPt,{width:18})}),(0,R.tZ)(i.YzH.UrlInput,{css:Gr,placeholder:"Paste the embed link...",pluginKey:t})]})}):(0,R.BX)("div",{css:qr,children:[(0,R.tZ)(i.YzH.EditButton,{css:Xr,children:"Edit link"}),(0,R.tZ)(zr,{}),(0,R.tZ)(Jr,{element:r,css:jr})]})})};const ro={name:"wgozlx--styles--rootStyles",styles:"padding:10px 10px;label:-styles--rootStyles;"},oo={name:"133zcs7--styles--resizableStyles",styles:"height:auto !important;padding:8px;border-radius:8px;label:-styles--resizableStyles;"},lo=(0,E.css)({background:(0,I.g)("tableSelectionBackgroundColor")},";label:-styles--resizableSelectedStyles;"),ao={name:"crbz3r--styles--figureStyles",styles:"margin:0;position:relative;label:-styles--figureStyles;"},io={name:"1bbn7nb--styles--captionStyles",styles:"cursor:text;label:-styles--captionStyles;"},so=(0,E.css)({...Z.rC,padding:"0",marginTop:8,width:"100%",borderStyle:"none",resize:"none",color:"inherit",overflowY:"hidden",backgroundColor:"inherit",textAlign:"center",":focus":{"::placeholder":{opacity:0}}},";label:-styles--captionTextareaStyles;"),co={name:"6ynbed--styles--handleStyles",styles:"display:flex;position:absolute;top:0;z-index:10;flex-direction:column;justify-content:center;width:1.5rem;height:100%;user-select:none;::after{display:flex;opacity:0;content:' ';width:3px;height:64px;border-radius:6px;};label:-styles--handleStyles;"},uo={name:"o18iai--styles--handleSelectedStyles",styles:"::after{opacity:1;};label:-styles--handleSelectedStyles;"},po=(0,E.css)([co,{left:-12,paddingLeft:12,marginLeft:-12}],";label:-styles--handleLeftStyles;"),ho=(0,E.css)([co,{right:-12,paddingRight:12,marginRight:-12,alignItems:"flex-end"}],";label:-styles--handleRightStyles;"),go={name:"1mfbzee--styles--draggableStyles",styles:"padding-top:8px;label:-styles--draggableStyles;"};const mo={name:"kyso0s--Image--imgStyles",styles:"display:block;padding-left:0;padding-right:0;width:100%;max-width:100%;cursor:pointer;object-fit:cover;border-radius:8px;border:0;label:-Image--imgStyles;"},bo=(0,E.css)({background:"\n  url(".concat(Hr,") no-repeat center,\n  radial-gradient(\n    ellipse at center,\n    ").concat((0,I.g)("tintedBackgroundColor")," 0%,\n    transparent 100%\n  ),\n  linear-gradient(\n    180deg, ").concat((0,I.g)("highlightColor")," 30.41%, ").concat((0,I.g)("tintedBackgroundColor")," 100%\n  )\n")},";label:-Image--imagePlaceholderStyles;"),yo=(0,E.css)({background:"\n  url(".concat(Hr,") no-repeat center ").concat((0,I.g)("tableSelectionBackgroundColor"))},";label:-Image--resizableImagePlaceholderStyles;"),vo=e=>{let{draggableBlock:t,readOnly:n,pluginKey:r,...o}=e;const{children:l,element:a}=o,s=(0,k.UE)(),c=(0,k.vt)(),d=!n&&s&&c;return(0,R.tZ)(i.E2X,{content:!n&&(0,R.tZ)(no,{pluginKey:r}),floatingOptions:i.xMK,children:(0,R.tZ)(i.pUJ.Root,{...o,children:(0,R.BX)(t,{blockKind:"media",element:a,draggableCss:go,children:[(0,R.BX)("figure",{css:ao,contentEditable:!1,children:[(0,R.tZ)(i.ezf,{css:[oo,bo,d&&yo,";label:-Image--Image;"],handleComponent:{left:(0,R.tZ)(i.xuv,{css:[po,d&&uo,";label:-Image--left;"]}),right:(0,R.tZ)(i.xuv,{css:[ho,d&&uo,";label:-Image--right;"]})},readOnly:n,minWidth:200,minHeight:200,as:Kr,children:(0,R.tZ)(i.Eep,{css:mo,onError:e=>{e.target.style.display="none"}})}),(0,R.tZ)(i.YSn.Root,{css:io,readOnly:n,as:Ur,children:(0,R.tZ)(i.YSn.Textarea,{readOnly:n,css:[so,";label:-Image--Image;"],placeholder:"Description of your image..."})})]}),l]})})})},fo=e=>{const t=(0,m.VY)();return(0,R.tZ)(vo,{draggableBlock:$,readOnly:t,pluginKey:o.IV,...e})};var xo={name:"1q7uu6q--MediaEmbed--MediaEmbed",styles:"position:absolute;top:0;left:0;width:100%;height:100%;border-radius:3px;label:-MediaEmbed--MediaEmbed;"},Co={name:"fhe7bo--MediaEmbed--MediaEmbed",styles:".twitter-tweet{margin:0 auto!important;padding:2px;};label:-MediaEmbed--MediaEmbed;"};const ko=e=>{let{draggableBlock:t,readOnly:n,pluginKey:r,...o}=e;const{children:l,element:a}=o,s=(0,k.UE)(),c=(0,k.vt)(),{provider:d}=(0,i.ZzJ)().get.urlData(),u="twitter"!==d?d&&{youtube:"56.2061%",vimeo:"75%",youku:"56.25%",dailymotion:"56.0417%",coub:"51.25%"}[d]||"56.0417%":void 0,p=!n&&s&&c;return(0,R.tZ)(i.E2X,{content:!n&&(0,R.tZ)(no,{pluginKey:r}),floatingOptions:i.xMK,children:(0,R.tZ)(i.pUJ.Root,{css:ro,...o,children:(0,R.BX)(t,{blockKind:"media",element:a,draggableCss:go,children:[(0,R.BX)("figure",{css:[ao,"twitter"===d&&Co,";label:-MediaEmbed--MediaEmbed;"],contentEditable:!1,children:[(0,R.tZ)(i.ezf,{css:[oo,p&&lo,";label:-MediaEmbed--MediaEmbed;"],maxWidth:"twitter"===d?550:"100%",minWidth:"twitter"===d?330:150,handleComponent:{left:(0,R.tZ)(i.xuv,{css:[po,p&&uo,";label:-MediaEmbed--left;"]}),right:(0,R.tZ)(i.xuv,{css:[ho,p&&uo,";label:-MediaEmbed--right;"]})},readOnly:n,as:Kr,children:(0,R.tZ)("div",{css:(0,E.css)("padding-bottom:",u,";;label:-MediaEmbed--MediaEmbed;"),children:(0,R.tZ)(i.mpR,{css:xo})})}),(0,R.tZ)(i.YSn.Root,{css:io,readOnly:n,as:Ur,children:(0,R.tZ)(i.YSn.Textarea,{readOnly:n,css:so,placeholder:"Your description..."})})]}),l]})})})},wo=e=>{(0,ge.I)(e.element,o.vd);const t=(0,m.VY)();return(0,R.tZ)(H,{element:e.element,children:(0,R.tZ)(ko,{draggableBlock:$,readOnly:t,pluginKey:o.vd,...e})})},Eo=(e,t,n)=>(0,E.css)({padding:"4px 6px",aspectRatio:"1 / 1",background:e?"string"===typeof e?e:(0,ke.KZ)(e,t?ke.j7:ke.mV).rgba:(0,ke.KZ)(n?ke.Sn:ke.ix,ke.j7).rgba,color:(0,ke.KZ)(n?ke.ix:ke.Sn,t?ke.j7:ke.L9).rgba,borderRadius:"6px"},";label:-Counter--counterWrapperStyles;"),So=e=>{let{n:t,color:n,variant:r=!1}=e;const[o]=(0,m.yt)();return(0,R.tZ)("span",{css:Eo(n,r,o),children:t})};var To=n(57258),Zo=n(74029),Io=n(76673);var Do={name:"1ipbvii--NumberCatalogHeading--NumberCatalogHeading",styles:"position:relative;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;min-width:0;label:-NumberCatalogHeading--NumberCatalogHeading;"},Ro={name:"118ugi3--NumberCatalogHeading--NumberCatalogHeading",styles:"display:inline-flex;gap:6px;align-items:center;svg{width:16px;height:16px;};label:-NumberCatalogHeading--NumberCatalogHeading;"};const No=e=>{let{headingLevel:t,blockId:n,name:r}=e;const[o]=(0,m.yt)();return(0,R.tZ)("a",{href:"#".concat(n),children:(0,R.BX)("span",{css:Lo(o),children:[(0,R.BX)("span",{css:Ro,children:[(0,R.tZ)("span",{children:2===t?(0,R.tZ)(yn.n,{}):(0,R.tZ)(vn.X,{})}),(0,R.tZ)("span",{css:Do,children:r})]}),(0,R.tZ)("span",{children:(0,R.tZ)("span",{css:(0,E.css)({opacity:0,borderRadius:"4px",padding:"4px",height:"20px",width:"20px",display:"inline-flex",backgroundColor:(0,ke.KZ)(o?ke.ix:ke.Sn,ke.mV).rgba,color:"black",svg:{width:"12px",height:"12px"}},";label:-NumberCatalogHeading--NumberCatalogHeading;"),children:(0,R.tZ)(Io.R,{})})})]})})},Lo=e=>(0,E.css)(Z.yw,{padding:"11px 0px 9px 15px",display:"grid",gridTemplateColumns:"minmax(0, 1fr) 24px",alignItems:"center",gap:"8px",cursor:"grab",minWidth:0,minHeight:0,"*:hover > &":{backgroundColor:(0,ke.KZ)(e?ke.Sn:ke.ix,.5).rgba,"span:last-child span:last-child":{opacity:1,cursor:"pointer"}}},";label:-NumberCatalogHeading--numberCatalogListStyles;");var Mo=n(39011),Bo=n(33062);var Oo={name:"vhtdi1--NumberCatalogItem--NumberCatalogItem",styles:"display:inline-flex;gap:6px;align-items:center;svg{width:16px;height:16px;};label:-NumberCatalogItem--NumberCatalogItem;"};const Ao=e=>{let{name:t,blockId:n,color:r,onDragStart:o,onDragEnd:l}=e;const a=(0,m.Iy)(),i=a.getBlockIdResult$.use(n),s=(0,j.tp)(i,null==(null===i||void 0===i?void 0:i.result)),[c]=(0,m.yt)(),d=(0,Zo.VT)(c);if(null===s||void 0===s||!s.result)return null;const u=(0,Yt.jP)(s.result);return(0,R.tZ)("div",{children:(0,R.BX)("div",{draggable:!0,onDragStart:o({blockId:n,asText:u,computer:a,result:s.result}),onDragEnd:l,css:Po(c),children:[(0,R.BX)("span",{css:Oo,children:[(0,R.tZ)("span",{css:(0,E.css)({svg:{transform:"translateY(-4px)"},"svg > path":{stroke:d[r].rgb}},";label:-NumberCatalogItem--NumberCatalogItem;"),children:(0,R.tZ)(Mo.e,{})}),(0,R.BX)("span",{css:(0,E.css)(Z.yw,"position:relative;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;min-width:0;display:inherit;;label:-NumberCatalogItem--NumberCatalogItem;"),children:[t,(0,R.tZ)("span",{css:(0,E.css)(Z.KY,{marginLeft:"8px",alignSelf:"center",color:(0,I.g)("weakTextColor")},";label:-NumberCatalogItem--NumberCatalogItem;"),children:"table"===s.result.type.kind?"Table":(0,R.tZ)(Mt.X,{...s.result})})]})]}),(0,R.tZ)("span",{"data-drag-handle":!0,css:_o,children:(0,R.tZ)(Bo.D,{})})]})})},_o=(0,E.css)({opacity:0,borderRadius:"4px",padding:"5px",height:"20px",width:"20px",display:"inline-flex",backgroundColor:(0,ke.KZ)(ke.Sn,ke.mV).rgba,color:"black",svg:{width:"10px",height:"10px"},"svg > path":{fill:(0,I.g)("weakTextColor")}},";label:-NumberCatalogItem--dragHandleStyles;"),Po=e=>(0,E.css)(Z.yw,{padding:"11px 0px 9px 15px",display:"grid",gridTemplateColumns:"minmax(0, 1fr) 24px",alignItems:"center",gap:"8px",cursor:"grab",minWidth:0,minHeight:0,"*:hover > &":{backgroundColor:(0,ke.KZ)(e?ke.Sn:ke.ix,.5).rgba,"span:last-child":{opacity:1},span:{color:(0,ke.KZ)(e?ke.ix:ke.Sn,ke.kw).rgba},"span:last-child span":{mixBlendMode:"initial",color:(0,I.g)("magicNumberTextColor")}}},";label:-NumberCatalogItem--numberCatalogListItemStyles;");var Vo={name:"q0kz1o--NumberCatalog--NumberCatalog",styles:"display:none;label:-NumberCatalog--NumberCatalog;"},Ho={name:"1d4xuid--NumberCatalog--NumberCatalog",styles:"margin-left:6px;label:-NumberCatalog--NumberCatalog;"},Wo={name:"zc8teo--NumberCatalog--NumberCatalog",styles:"right:-12px;label:-NumberCatalog--NumberCatalog;"},Ko={name:"xhwrfy--NumberCatalog--NumberCatalog",styles:"left:32px;label:-NumberCatalog--NumberCatalog;"};const Uo=e=>{let{onDragStart:t,onDragEnd:n,items:r=[],alignment:o="left",startCollapsed:l=!0}=e;const[a,i]=(0,C.useState)(l),{color:s}=(0,m.xc)(),[c]=(0,m.yt)(),d=(0,Zo.VT)(c);if(!r.length)return null;return(0,R.tZ)("div",{css:[Xo,D.XS,"left"===o?Ko:Wo,";label:-NumberCatalog--NumberCatalog;"],children:(0,R.BX)("div",{css:jo(s,d),children:[(0,R.BX)("div",{css:[qo,a?(0,E.css)({borderBottomLeftRadius:$o,borderBottomRightRadius:$o},";label:-NumberCatalog--NumberCatalog;"):null,";label:-NumberCatalog--NumberCatalog;"],onClick:()=>{i(!a)},children:[(0,R.BX)("div",{css:Go,children:[(0,R.tZ)("span",{css:zo(c),children:"Numbers"}),(0,R.tZ)("span",{css:Ho,children:(0,R.tZ)(So,{variant:!0,n:r.filter((e=>"var"===e.type)).length})})]}),(0,R.tZ)("div",{css:[Fo,{"svg > path":{stroke:d[s].rgb,fill:d[s].rgb}},";label:-NumberCatalog--NumberCatalog;"],children:(0,R.tZ)(To.T,{type:a?"expand":"collapse"})})]}),(0,R.tZ)("div",{css:[Yo(c),a?Vo:null,";label:-NumberCatalog--NumberCatalog;"],children:r.map((e=>function(e){switch(e.type){case"h2":return(0,R.tZ)(No,{...e,headingLevel:2},e.blockId);case"h3":return(0,R.tZ)(No,{...e,headingLevel:3},e.blockId);case"var":return(0,R.tZ)(Ao,{name:e.name,color:s,blockId:e.blockId,onDragStart:t,onDragEnd:n},e.blockId)}}(e)))})]})})},Xo=(0,E.css)({position:"fixed",width:"300px",top:"80px",display:"block",alignItems:"center",["@media (max-width: ".concat(T.cP.landscape.width,"px)")]:{display:"none"},zIndex:2},";label:-NumberCatalog--floatyStyles;"),$o="16px",qo={name:"1960ill--NumberCatalog--gridHeaderNumberCatStyles",styles:"display:grid;grid-template-columns:auto 32px;grid-column-gap:16px;label:-NumberCatalog--gridHeaderNumberCatStyles;"},jo=(e,t)=>(0,E.css)({borderRadius:$o,backgroundColor:(0,ke.KZ)(t[e],.4).rgba,padding:"8px",width:"300px",userSelect:"none"},";label:-NumberCatalog--numberCatalogMenuStyles;"),Go=(0,E.css)({...Z.M9,padding:"11px 15px 9px",borderRadius:$o,borderBottomLeftRadius:0,borderBottomRightRadius:0},";label:-NumberCatalog--menuHeaderStyles;"),Fo={name:"u49l12--NumberCatalog--menuHeaderChevronStyles",styles:"padding:14.5px 12px;label:-NumberCatalog--menuHeaderChevronStyles;"},zo=e=>(0,E.css)({color:(0,ke.KZ)(e?ke.ix:ke.Sn,ke.j7).rgba},";label:-NumberCatalog--numberFontStyles;"),Yo=e=>(0,E.css)({backgroundColor:(0,ke.KZ)(e?ke.Sn:ke.ix,e?ke.j7:ke.L9).rgba,borderRadius:"10px",maxHeight:"54vh",minHeight:"40px",overflowY:"auto",overflowX:"hidden"},";label:-NumberCatalog--menuBodyStyles;"),Jo=new Set(["boolean","date","number","string","range","table"]),Qo=e=>e.filter((e=>{let{kind:t,type:n,name:r,blockId:o}=e;return"variable"===t&&r&&o&&Jo.has(n.kind)})),el=new Set([i.oGK,i.o3Y]),tl=(e,t)=>{const[n,r]=t;if(r.length>1){const t=(0,i.Ow4)(e,r);if(t)return tl(e,t)}if(el.has(n.type))return t;const o=r[r.length-1]-1;if(o>=0){const t=[...r.slice(0,-1),o],n=(0,i.DYv)(e,{at:t,block:!0});if(n)return tl(e,n)}},nl=e=>(t,n)=>{const r=(0,i.DYv)(e,{at:[],match:{id:n.blockId}});if(!r)return[...t,n];const o=tl(e,r);if(!o)return[...t,n];const[l,a]=o,s=t.findIndex((e=>e.blockId===l.id));if(s<0)return((e,t,n)=>{let r=-1,o=!1;for(;r<e.length&&!o;){r+=1;const n=e[r];(!n||"var"!==n.type&&Xe.y$.isAfter(n.path,t.path))&&(o=!0)}for(;"var"===(null===(l=e[r])||void 0===l?void 0:l.type);){var l;r+=1}return[...e.slice(0,r),t,n,...e.slice(r)]})(t,{type:l.type,blockId:l.id,name:(0,i.qcw)(l),path:a},n);let c=s+1;for(;"var"===(null===(d=t[c])||void 0===d?void 0:d.type);){var d;c+=1}return[...t.slice(0,c),n,...t.slice(c)]},rl=e=>({type:"var",name:e.name,blockId:(0,G.m0)(e.blockId)});function ol(){const e=(0,o.l3)(),t=(0,C.useMemo)((()=>(0,_e.u4)(e)),[e]),n=(0,U.GH)(),r=(0,m.Iy)(),[l,a]=(0,C.useState)([]),i=(0,C.useContext)(m._d);return(0,C.useEffect)((()=>{const t=(e=>t=>t.reduce(nl(e),[]))(e),n=(0,z.concat)((0,z.of)(void 0),i).pipe((0,z.combineLatestWith)((0,z.concat)((0,z.of)(void 0),r.getNamesDefined$.observeWithSelector(Qo))),(0,z.debounceTime)(1e3),(0,z.map)((e=>{let[,t]=e;return Array.isArray(t)&&t.map(rl)})),(0,z.filter)(Boolean),(0,z.map)(t),(0,z.distinctUntilChanged)(((e,t)=>(0,F.J)(e,t)))).subscribe(a);return()=>n.unsubscribe()}),[r,e,i]),(0,R.tZ)(Uo,{items:l,onDragStart:t,onDragEnd:n})}var ll=n(168);const al=(0,E.css)(ll.blockquote.typography,(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),{padding:"".concat("6px"," 30px ").concat("6px"," 12px"),borderLeft:"4px solid ".concat((0,I.g)("highlightColor")),wordBreak:"break-word"},";label:-Blockquote--styles;"),il=(0,E.css)({backgroundColor:(0,I.g)("highlightColor"),boxShadow:"0px 0px 0px 100vmin ".concat((0,I.g)("highlightColor")),clipPath:"inset(0 -8px 0 -8px round 8px)"},";label:-Blockquote--activeStyles;"),sl=e=>{let{children:t}=e;const n=(0,m.bJ)();return(0,R.tZ)("blockquote",{css:[al,n&&il,";label:-Blockquote--Blockquote;"],children:t})},cl=[{title:"Calculation",value:o.Zv},{title:"Callout",value:o.SD},{title:"Heading",value:o.oG},{title:"Sub-heading",value:o.o3},{title:"Paragraph",value:o.JB},{title:"Quote",value:o.ah}],dl=e=>{const t=(0,o.l3)(),n=(0,C.useMemo)((()=>((e,t)=>n=>{(0,i.fLV)(e,{type:n},{at:t}),(0,i.$Rk)(e)})(t,(0,i.O$c)(t,e))),[t,e]),r=(0,C.useMemo)((()=>cl.filter((t=>{let{value:n}=t;return n!==e.type}))),[e]);return{onTurnInto:n,turnInto:r}},ul=e=>{let{attributes:t,children:n,element:r}=e;(0,ge.I)(r,"blockquote");const o=dl(r);return(0,R.tZ)($,{blockKind:"blockquote",element:r,...o,...t,children:(0,R.tZ)(sl,{children:n})})};var pl,hl,gl=n(47591),ml=n(89663);const{callout:bl}=ll,yl=(0,E.css)(bl.typography,(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),{borderRadius:"12px",display:"grid",gridTemplateColumns:"16px 1fr",gridGap:"16px",margin:"0",padding:"".concat("12px"," 16px")},";label:-Callout--styles;"),vl=(0,E.css)({...(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),alignItems:"center",display:"grid",height:"calc(".concat(null===(pl=bl.typography)||void 0===pl?void 0:pl.fontSize," * ").concat(null===(hl=bl.typography)||void 0===hl?void 0:hl.lineHeight,")"),width:"16px",mixBlendMode:"luminosity"},";label:-Callout--iconWrapperStyles;"),fl=e=>{let{children:t,icon:n="Announcement",color:r="Malibu",saveIcon:o=G.ZT,saveColor:l=G.ZT}=e;const a=gl[n],[i]=(0,m.yt)();return(0,R.BX)("p",{css:[yl,{backgroundColor:(0,ke.KZ)((0,Zo.VT)(i)[r],.4).rgba,color:(0,I.g)("weakTextColor")},";label:-Callout--Callout;"],children:[(0,m.VY)()?(0,R.tZ)("span",{css:vl,children:(0,R.tZ)(a,{})}):(0,R.tZ)(ml.e,{color:r,trigger:(0,R.tZ)("button",{css:vl,children:(0,R.tZ)(a,{})}),onChangeColor:l,onChangeIcon:o}),(0,R.tZ)("em",{children:t})]})},xl=e=>{var t;let{attributes:n,children:r,element:a}=e;(0,ge.I)(a,o.SD);const i=(0,o.l3)(),s=(0,l.Z)(i,a,"icon"),c=(0,l.Z)(i,a,"color"),{color:d}=(0,m.xc)(),u=dl(a);return(0,R.tZ)($,{blockKind:"callout",element:a,...u,...n,children:(0,R.tZ)(fl,{icon:a.icon,color:null!==(t=a.color)&&void 0!==t?t:d,saveIcon:s,saveColor:c,children:r})})};var Cl=n(59399);const kl=e=>{let{attributes:t,element:n,children:r}=e;if(!n)throw new Error("Divider is not a leaf");return(0,R.BX)($,{blockKind:"divider",element:n,contentEditable:!1,...t,children:[r,(0,R.tZ)(Cl.i,{})]})},wl=(0,E.css)(ll.heading1.typography,"word-break:break-word;;label:-Heading1--styles;"),El=(0,E.css)({backgroundColor:(0,I.g)("highlightColor"),boxShadow:"0px 0px 0px 100vmin ".concat((0,I.g)("highlightColor")),clipPath:"inset(0 -8px 0 -8px round 8px)"},";label:-Heading1--activeStyles;"),Sl=e=>{let{children:t,Heading:n,id:r}=e;const o=(0,m.bJ)();return(0,R.tZ)(n,{id:r,css:[wl,o&&El,";label:-Heading1--Heading1;"],children:t})},Tl=e=>{let{attributes:t,children:n,element:r}=e;if(!r)throw new Error("Heading1 is not a leaf");const o=dl(r);return(0,R.tZ)($,{blockKind:"heading1",element:r,...o,...t,children:(0,R.tZ)(Sl,{id:r.id,Heading:"h2",children:n})})},Zl=(0,E.css)(ll.heading2.typography,"word-break:break-word;;label:-Heading2--styles;"),Il=(0,E.css)({backgroundColor:(0,I.g)("highlightColor"),boxShadow:"0px 0px 0px 100vmin ".concat((0,I.g)("highlightColor")),clipPath:"inset(0 -8px 0 -8px round 8px)"},";label:-Heading2--activeStyles;"),Dl=e=>{let{children:t,Heading:n,id:r}=e;const o=(0,m.bJ)();return(0,R.tZ)(n,{id:r,css:[Zl,o&&Il,";label:-Heading2--Heading2;"],children:t})},Rl=e=>{let{attributes:t,children:n,element:r}=e;if(!r)throw new Error("Heading2 is not a leaf");const o=dl(r);return(0,R.tZ)($,{blockKind:"heading2",element:r,...o,...t,children:(0,R.tZ)(Dl,{id:r.id,Heading:"h3",children:n})})};var Nl=n(63571);const Ll=e=>{const{children:t,element:n}=e;(0,ge.I)(n,o.uJ);const r=(0,m.VY)(),l=(0,i.nBu)({...e,onClick:e=>!r&&e.preventDefault()});return(0,R.tZ)(Nl.r,{...l,children:t})},Ml=e=>{let{attributes:t,children:n,...r}=e;const o=(0,G.m0)(null===r||void 0===r?void 0:r.element),l=o.id,a=t.ref,i=o.blockId||"",s=(0,m.Iy)().getBlockIdResult$.use(i),c=(0,k.vt)(),d=(0,m.vN)(o.id),{editSource:u}=d,p=(0,C.useCallback)((()=>{u(i,o)}),[u,o,i]);return(0,R.BX)(R.HY,{children:[(0,R.BX)("span",{...t,id:l,"data-highlight-changes":!0,onClick:p,css:(0,E.css)(Bl,[c&&Ol,d.isEditing&&{cursor:"pointer"}],";label:-InlineNumber--InlineNumber;"),"data-testid":"inline-number-element",ref:(0,b.Y)(d.numberRef,a),children:[null!==s&&void 0!==s&&s.result?(0,R.tZ)("span",{contentEditable:!1,children:(0,R.tZ)(Mt.X,{...s.result,element:o})}):"...",n]}),d.portal]})},Bl=(0,E.css)({borderRadius:"9px",color:ke.xK.rgb,paddingLeft:"6px",paddingRight:"6px"},";label:-InlineNumber--containerStyle;"),Ol=(0,E.css)({backgroundColor:"".concat((0,I.g)("highlightColor"))},";label:-InlineNumber--selectedStyle;"),Al=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("div",{...t,children:n})},_l=(0,E.css)(ll.list.typography,";label:-ListItemContent--styles;"),Pl=(0,E.css)({backgroundColor:(0,I.g)("highlightColor"),boxShadow:"0px 0px 0px 100vmin ".concat((0,I.g)("highlightColor")),clipPath:"inset(-2px -8px -2px -8px round 8px)"},";label:-ListItemContent--activeStyles;"),Vl=e=>{let{children:t}=e;const n=(0,m.bJ)();return(0,R.tZ)("div",{css:[_l,n&&Pl,";label:-ListItemContent--ListItemContent;"],children:t})},Hl=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("div",{...t,children:(0,R.tZ)(Vl,{children:n})})},Wl=(0,E.css)(Z.ak,"font-style:inherit;;label:-Bold--styles;"),Kl=e=>{let{children:t}=e;return(0,R.tZ)("span",{css:Wl,children:t})},Ul=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("span",{...t,children:(0,R.tZ)(Kl,{children:n})})},Xl=(0,E.css)(ct.variableStyles,{padding:"4px",borderRadius:"4px"},";label:-InlineCode--styles;"),$l=e=>{let{children:t}=e;return(0,R.tZ)("code",{css:Xl,children:t})},ql=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("span",{...t,children:(0,R.tZ)($l,{children:n})})},jl={...(0,I.m)("currentTextColor",(0,I.g)("strongTextColor"))},Gl=(e,t)=>(0,E.css)(jl,{borderRadius:"0.9em 0.3em",margin:"0 -0.45em",padding:"0.15em 0.45em",background:"transparent",boxDecorationBreak:"clone",webkitBoxDecorationBreak:"clone",backgroundImage:"linear-gradient(\n    to right,\n    ".concat((0,ke.KZ)(t[e],ke.mV).rgba,",\n    ").concat((0,ke.KZ)(t[e],ke.L9).rgba," 5%,\n    ").concat((0,ke.KZ)(t[e],ke.j7).rgba,"\n  )")},";label:-Highlight--styles;"),Fl=e=>{let{children:t,color:n="Sun"}=e;const[r]=(0,m.yt)(),o=(0,Zo.VT)(r);return(0,R.tZ)("span",{css:Gl(n,o),children:t})},zl=e=>{let{attributes:t,children:n}=e;const{color:r}=(0,m.xc)();return(0,R.tZ)("span",{...t,children:(0,R.tZ)(Fl,{color:r,children:n})})};const Yl={name:"230pcq--Italic--styles",styles:"font-style:italic;label:-Italic--styles;"},Jl=e=>{let{children:t}=e;return(0,R.tZ)("span",{css:Yl,children:t})},Ql=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("span",{...t,children:(0,R.tZ)(Jl,{children:n})})};var ea=n(27629),ta=n(11389),na=n(46011);const ra={name:"1ep9819--MagicNumber--wrapperStyles",styles:"display:inline-flex;cursor:pointer;label:-MagicNumber--wrapperStyles;"},oa=(0,E.css)(ta.z,{display:"inline-block",color:(0,I.g)("magicNumberTextColor"),padding:"1px 6px 0px 6px",lineHeight:"1.3","@media print":{color:"unset"}},";label:-MagicNumber--highlightStyles;"),la={name:"9sgngx--MagicNumber--formulaHeaderStyles",styles:"text-align:center;label:-MagicNumber--formulaHeaderStyles;"},aa={name:"1u4f3j0--MagicNumber--expressionStyles",styles:"text-align:center;label:-MagicNumber--expressionStyles;"},ia=e=>{let{expression:t,readOnly:n,children:r}=e;return(0,R.tZ)(ft.u,{trigger:(0,R.tZ)("span",{children:r}),children:null!==t&&void 0!==t&&t.startsWith("exprRef_")&&!n?(0,R.tZ)("p",{children:"Click to edit"}):n?"Live Result":(0,R.BX)("span",{children:[(0,R.tZ)("h2",{css:la,children:"Formula:"}),(0,R.tZ)("code",{css:aa,children:t})]})})};var sa={name:"17cq8u6--MagicNumber--MagicNumber",styles:"padding-top:3px;min-height:19px;display:inline-block;margin:auto;> svg{height:16px;display:block;margin:0 auto;};label:-MagicNumber--MagicNumber;"};const ca=e=>{var t;let{tempId:n,result:r,loadingState:o=!1,readOnly:l=!1,onClick:a=G.ZT,expression:i,element:s}=e;const c=!!r&&!o,d=(0,na.G)(a);return(0,R.tZ)("span",{onClick:l?G.ZT:d,css:[ra,";label:-MagicNumber--MagicNumber;"],"data-number-id":n,id:n,"data-testid":"magic-number",children:(0,R.tZ)("span",{title:r?null===(t=r.value)||void 0===t?void 0:t.toString():"Loading",contentEditable:!1,children:(0,R.tZ)(ia,{expression:i,readOnly:l,children:c?(0,R.tZ)("span",{css:oa,children:(0,R.tZ)(Mt.X,{tooltip:!1,variant:"inline",...r,element:s})}):(0,R.tZ)("span",{css:sa,children:(0,R.tZ)(ea.g,{})})})})})};var da=n(76261),ua=n(98672);var pa={name:"3731n8--MagicNumber--MagicNumber",styles:"display:none;label:-MagicNumber--MagicNumber;"};const ha=e=>{var t,n,r,o,l;let{attributes:a,element:s,text:c,children:d}=e;const u=(0,m.Iy)(),p=(0,m.VY)(),h=(0,G.m0)(c),b=(0,i.qcw)(h),y=function(e){return(0,m.LU)((t=>{const n=(0,i.O$c)(t,e);if(!n)return"";const r=(0,da.m)(t,{at:n,match:e=>Xe.W_.isElement(e)});return r?(0,ua.b)(r[0],n[n.length-1]):""}))}(h),v=null===(t=(0,m.pc)(y))||void 0===t?void 0:t.result,f=(0,m.vN)(y),x="type-error"===(null===v||void 0===v||null===(n=v.type)||void 0===n?void 0:n.kind)||"number"===(null===v||void 0===v||null===(r=v.type)||void 0===r?void 0:r.kind)&&(null===v||void 0===v||null===(o=v.type)||void 0===o||null===(l=o.unit)||void 0===l?void 0:l[0].unit)===b,{editSource:k}=f,w=(0,C.useCallback)((()=>{const e=u.getVarBlockId$.get(b);if("string"===typeof e)if((0,g.J8)("SHADOW_CODE_LINES"))k(e,h);else{const t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"}),null===t||void 0===t||t.focus()}}),[u,b,h,k]);return(0,R.BX)("span",{...a,children:[(0,R.BX)("span",{ref:f.numberRef,children:[(0,R.tZ)(ca,{tempId:y,loadingState:x,result:v,expression:b,onClick:w,readOnly:p,element:s}),f.portal]}),(0,R.tZ)("span",{contentEditable:!1,css:pa,children:d})]})};const ga=(0,E.css)({backgroundColor:(0,I.g)("spoilerColor"),color:"transparent",textShadow:"0 0 0 ".concat((0,I.g)("spoilerColor")),borderRadius:"2px",cursor:"pointer"},";label:-Spoiler--spoilerStyles;"),ma=(0,E.css)({backgroundColor:(0,I.g)("strongHighlightColor"),color:(0,I.g)("normalTextColor"),cursor:"text"},";label:-Spoiler--milkIsSpoiledStyles;"),ba=e=>{let{children:t}=e;const[n,r]=(0,C.useState)(!1);return(0,R.tZ)("span",{css:[ga,n&&ma,";label:-Spoiler--Spoiler;"],onClick:()=>{n||r(!0)},children:t})},ya=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("span",{...t,children:(0,R.tZ)(ba,{children:n})})};const va={name:"1y2c2y5--Strikethrough--styles",styles:"text-decoration:line-through;label:-Strikethrough--styles;"},fa=e=>{let{children:t}=e;return(0,R.tZ)("span",{css:va,children:t})},xa=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("span",{...t,children:(0,R.tZ)(fa,{children:n})})};const Ca={name:"s9u0j8--Underline--styles",styles:"text-decoration:underline;label:-Underline--styles;"},ka=e=>{let{children:t}=e;return(0,R.tZ)("span",{css:Ca,children:t})},wa=e=>{let{attributes:t,children:n}=e;return(0,R.tZ)("span",{...t,children:(0,R.tZ)(ka,{children:n})})};var Ea=n(49758);const Sa=(0,E.css)({display:"grid",gridTemplateColumns:"minmax(24px, auto) 1fr 0px",gridAutoFlow:"row",rowGap:"6px",columnGap:"8px",counterReset:Ea.u,counterIncrement:Ea.u,wordBreak:"break-word"},";label:-OrderedList--styles;"),Ta=(0,E.css)({display:"contents","::before":{...Z.sK,...(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),textAlign:"center",content:"counter(".concat(Ea.u,') "."')},"::after":{counterIncrement:Ea.u,content:'" "'}},";label:-OrderedList--itemStyles;"),Za=e=>{let{children:t}=e;return(0,R.tZ)("ol",{css:Sa,children:C.Children.map(t,(e=>(0,R.tZ)("li",{css:Ta,children:e})))})},Ia=e=>{let{attributes:t,children:n,element:r}=e;if(!r)throw new Error("UnorderedList is not a leaf");return(0,R.tZ)($,{blockKind:"list",element:r,...t,children:(0,R.tZ)(Za,{children:n})})},Da=(0,E.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"24px",width:"24px",borderRadius:"6px",border:"1px ".concat((0,I.g)("strongerHighlightColor")," solid")},";label:-ParagraphPlaceholder--hotKeyStyle;"),Ra=(0,R.tZ)("span",{css:Da,children:"/"}),Na=(0,R.tZ)("span",{css:Da,children:"="}),La=()=>(0,R.BX)(R.HY,{children:["Type ",Ra," for new blocks ",Na," to start calculation"]}),Ma=(0,E.css)({cursor:"text",display:"grid","> span, label":{gridArea:"1 / 1"},label:{...Z.sK,...(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),pointerEvents:"none",userSelect:"none"}},";label:-Paragraph--placeholderStyles;"),Ba=(0,E.css)(ll.paragraph.typography,Ma,"word-break:break-word;;label:-Paragraph--styles;"),Oa=(0,E.css)({backgroundColor:(0,I.g)("highlightColor"),boxShadow:"0px 0px 0px 100vmin ".concat((0,I.g)("highlightColor")),clipPath:"inset(0 -8px 0 -8px round 8px)"},";label:-Paragraph--activeStyles;"),Aa=e=>{let{children:t,placeholder:n}=e;const r=(0,m.bJ)();return(0,R.BX)("div",{css:[Ba,r&&Oa,";label:-Paragraph--Paragraph;"],"data-testid":"paragraph-wrapper",children:[(0,R.tZ)("label",{"data-testid":"paragraph-placeholder",contentEditable:!1,children:n}),(0,R.tZ)("span",{"data-testid":"paragraph-content",children:t})]})},_a=(e,t)=>{if(!e.selection)return!1;const n=k.F3.findPath(e,t);if(!n)return!1;const r=((e,t)=>{try{return(0,i.rxh)(e,t)}catch(n){}})(e,n);return!(!r||!Xe.e6.intersection(r,e.selection))},Pa=e=>{let{attributes:t,children:n,element:r}=e;if(!r)throw new Error("Paragraph is not a leaf");const o=(0,m.VY)(),l=(0,m.Dz)((e=>2===e.children.length&&(0,i.np2)(e,r)||(0,i.np2)(e,r)&&_a(e,r)&&!(0,i.sCb)(e)),!1,{debounceTimeMs:0}),a=o||!l?void 0:(0,R.tZ)(La,{}),s=dl(r);return(0,R.tZ)($,{blockKind:"paragraph",element:r,...s,...t,children:(0,R.tZ)(Aa,{placeholder:a,children:n})})},Va=(0,E.css)({cursor:"text",display:"grid","> span, ::before":{gridArea:"1 / 1"},"::before":{...Z.jf,...(0,I.m)("currentTextColor",(0,I.g)("weakTextColor")),pointerEvents:"none",content:"attr(aria-placeholder)"}},";label:-Display--placeholderStyles;"),Ha=(0,E.css)(Z.jf,Va,"word-break:break-word;;label:-Display--styles;"),Wa=e=>{let{children:t,Heading:n,placeholder:r}=e;return(0,R.tZ)(n,{"aria-placeholder":r,css:Ha,children:(0,R.tZ)("span",{children:t})})};var Ka={name:"1gij86t--EditorTitle--EditorTitle",styles:"display:grid;row-gap:24px;label:-EditorTitle--EditorTitle;"};const Ua=e=>(0,R.BX)("div",{css:Ka,children:[(0,R.tZ)("div",{children:(0,R.tZ)(Wa,{...e})}),(0,R.tZ)("div",{contentEditable:!1,children:(0,R.tZ)(Cl.i,{})})]}),Xa=e=>{let{attributes:t,children:n,element:r}=e;(0,ge.I)(r,o.GD);const l=(0,o.l3)(),a=(0,m.VY)();return(0,R.tZ)(y.V,{blockKind:"title",...t,contentEditable:!a&&void 0,children:(0,R.tZ)(Ua,{Heading:"h1",placeholder:(0,i.np2)(l,r)&&!a?"My notebook title":void 0,children:n})})};var $a=n(45027);const qa=(0,C.createContext)(0),ja={name:"miav6x--UnorderedList--styles",styles:"display:grid;grid-template-columns:24px 1fr;grid-auto-flow:row;row-gap:6px;column-gap:8px;word-break:break-word;label:-UnorderedList--styles;"},Ga={name:"1c65t4e--UnorderedList--itemStyles",styles:"display:contents;label:-UnorderedList--itemStyles;"},Fa=(0,E.css)({justifySelf:"center",alignSelf:"start",width:"6px",height:"calc(".concat(Z.sK.lineHeight," * ").concat(Z.sK.fontSize,")"),display:"grid",alignContent:"center",...(0,I.m)("currentTextColor",(0,I.g)("strongTextColor"))},";label:-UnorderedList--bulletStyles;"),za=e=>{let{children:t}=e;const n=(0,C.useContext)(qa)+1;return(0,R.tZ)("ul",{css:ja,children:(0,R.tZ)(qa.Provider,{value:n,children:C.Children.map(t,(e=>(0,R.BX)("li",{css:Ga,children:[(0,R.tZ)("span",{role:"presentation",contentEditable:!1,css:Fa,children:(0,R.tZ)($a.g,{depth:n})}),e]})))})})},Ya=e=>{let{attributes:t,children:n,element:r}=e;if(!r)throw new Error("UnorderedList is not a leaf");return(0,R.tZ)($,{blockKind:"list",element:r,...t,children:(0,R.tZ)(za,{children:n})})}},99034:(e,t,n)=>{"use strict";n.d(t,{o:()=>d});var r=n(85663),o=n(64967),l=n(17525),a=n(74673),i=n(50576),s=n(25555),c=n(1138);const d=(e,t,n,d)=>{const u=(0,i.clone)(((e,t)=>({id:(0,s.x0)(),type:r.u8,expandedGroups:[],varName:e,children:[{id:(0,s.x0)(),type:r.ro,children:[{id:(0,s.x0)(),type:r.wB,children:[{text:"Data view".concat(t?" for ".concat(t):"")}]}]},{id:(0,s.x0)(),type:r.CN,children:[]}]}))(n,d)),p=(0,o.Nj)(e,t);(0,l.s)(e,u,{at:p}),setTimeout((()=>{const t=[...p,0];(0,a.DYv)(e,{at:t,block:!0,match:(e,n)=>c.y$.equals(t,n)})&&(0,a.$Rk)(e,{path:t,offset:0})}),0)}},26805:(e,t,n)=>{"use strict";n.d(t,{GH:()=>f,I5:()=>b,iM:()=>g,yW:()=>h});var r=n(85663),o=n(74673),l=n(30969),a=n(53559),i=n(1138),s=n(17395),c=n(96742),d=n(86789),u=n(82302);const p={horizontal:!1,vertical:!0},h=(0,o.MTn)("dnd")({draggingIds:new Set}),g=e=>{let{accept:t=r.uG,nodeRef:n,element:o,previewRef:i=n,getAxis:d=(()=>p),onDrop:g}=e;const{id:b,type:f}=o,x=(0,r.l3)(),C=(0,l.useRef)(o);C.current=o;const[k,w]=(0,l.useState)(),[{isDragging:E},S,T]=(0,u.cV)(x,{id:b,type:f,item:()=>{const e=s.yw.selectedIds();return s.yw.isSelecting()&&!e.has(b)&&s.oA.unselect(),{id:b,type:f,selectedIds:e,getPath:()=>c.F3.findPath(x,C.current)}}});(0,l.useEffect)((()=>{E?h.set.draggingIds(s.yw.selectedIds()):h.set.draggingIds(new Set)}),[E]);const[{canDrop:Z,isOver:I},D]=(0,a.L)({accept:t,drop:(e,t)=>{m(x,{id:b,dragItem:e,monitor:t,onDrop:g,direction:v({dragItem:e,monitor:t,nodeRef:n,id:b,axis:d(e,t)})})},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver()}),hover:(e,t)=>{y({nodeRef:n,id:b,dropLine:k,onChangeDropLine:w,dragItem:e,monitor:t,axis:d(e,t)})},canDrop:(e,t)=>!!v({dragItem:e,monitor:t,nodeRef:n,id:b,axis:d(e,t)})},[d,b,g,f]);return i?(D(n),T(i)):T(D(n)),!I&&k&&w(void 0),{canDrop:Z,isDragging:E,isOver:I,dropLine:k,dragRef:S}},m=(e,t)=>{var n;let{id:r,dragItem:l,monitor:a,onDrop:i,direction:s}=t;s&&!a.didDrop()&&((0,o.$Rk)(e),null!==(n=null===i||void 0===i?void 0:i(l,a,s))&&void 0!==n||b(e,l,r,s))},b=(e,t,n,r)=>{const{selectedIds:l,id:a}=t;let s=n;const c=[];if(l.has(a)){[...(0,o.tVv)(e,{match:e=>(0,o.kKo)(e)&&l.has(e.id),at:[]})].forEach((t=>{let[,n]=t;c.push((0,o.WR7)(e,n))}))}else{const t=(0,o.DYv)(e,{at:[],match:{id:a}});if(!t)return;const[,n]=t;c.push((0,o.WR7)(e,n))}(0,o.kRc)(e,(()=>{let t;c.forEach((n=>{const l=n.unref();if(!l)return;const a=(0,o.MkB)(e,l);if(!a)return;if("bottom"===r){var c;if(t=null===(c=(0,o.DYv)(e,{at:[],match:{id:s}}))||void 0===c?void 0:c[1],!t)return;if(i.y$.equals(l,i.y$.next(t))){const t=(0,o.MkB)(e,l);if(!t)return;return void(s=t.id)}s=a.id}if("top"===r){var u;const n=null===(u=(0,o.DYv)(e,{at:[],match:{id:s}}))||void 0===u?void 0:u[1];if(!n)return;if(t=[...n.slice(0,-1),n[n.length-1]-1],i.y$.equals(l,t))return}if(!t)return;const p=i.y$.isBefore(l,t)&&i.y$.isSibling(l,t)?t:i.y$.next(t);(0,o.$45)(e,{at:l,to:p});const h=(0,d.I)();h&&h.track("move block")}))}))},y=e=>{let{axis:t,dragItem:n,dropLine:r,monitor:o,onChangeDropLine:l,id:a,nodeRef:i}=e;const s=o.isOver({shallow:!0});if(!o.canDrop())return l(void 0),void(s&&(n.direction=void 0));const c=v({dragItem:n,monitor:o,nodeRef:i,id:a,axis:t});c!==r&&l(c),!s&&n.direction&&l(void 0),s&&(n.direction=c)},v=e=>{var t;let{dragItem:n,id:r,monitor:o,nodeRef:l,axis:a}=e;if(!l.current)return;if(n.id===r)return;const i=null===(t=l.current)||void 0===t?void 0:t.getBoundingClientRect(),s=(i.bottom-i.top)/2,c=o.getClientOffset();if(!c)return;const d=c.y-i.top,u=c.x-i.left,p=i.right-c.x;return a.horizontal&&u<20?"left":a.horizontal&&p<20?"right":a.vertical&&d<s?"top":a.vertical&&d>=s?"bottom":void 0},f=()=>(0,l.useCallback)((()=>u.yW.set.isDragging(!1)),[])},64753:(e,t,n)=>{"use strict";n.d(t,{Gr:()=>fr,BU:()=>xr});var r=n(30969),o=n(86789),l=n(85663),a=n(74673),i=n(25200),s=n(46011),c=n(55013),d=n(426),u=n(66840),p=n(5594);const h={name:"qm863--DataViewTableHeader--dataViewTableHeaderStyles",styles:"text-align:left;label:-DataViewTableHeader--dataViewTableHeaderStyles;"},g={name:"14w0o6u--DataViewTableHeader--alignRightStyles",styles:"text-align:right;label:-DataViewTableHeader--alignRightStyles;"},m=(0,d.css)({color:(0,u.g)("weakTextColor"),backgroundColor:(0,u.g)("highlightColor")},";label:-DataViewTableHeader--globalStyles;"),b=e=>{let{rowSpan:t,colSpan:n,children:o,onHover:l=c.ZT,alignRight:a=!1,global:i=!1}=e;const s=(0,r.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),l(!0)}),[l]),d=(0,r.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),l(!1)}),[l]);return(0,p.tZ)("th",{rowSpan:t,colSpan:n,onMouseOver:s,onMouseOut:d,css:[h,a&&g,i&&m,";label:-DataViewTableHeader--DataViewTableHeader;"],children:o})};var y=n(53393),v=n(66791),f=n(21127);const x={name:"yl1zby--DataViewTableHeader--iconStyles",styles:"height:24px;width:24px;label:-DataViewTableHeader--iconStyles;"};var C={name:"15dh864--DataViewTableHeader--resultWrapperStyles",styles:"display:inline-flex;flex-direction:row;align-items:center;font-weight:700;justify-content:inherit;cursor:pointer;&:hover{opacity:0.5;};label:-DataViewTableHeader--resultWrapperStyles;"};const k=e=>{let{type:t,value:n,rowSpan:o=1,colSpan:i=1,onHover:c,hover:d,alignRight:u,expandedGroups:h=[],onChangeExpandedGroups:g,groupId:m,collapsible:k,global:w,element:E}=e;const S=(0,l.l3)(),T=(0,s.G)((0,r.useCallback)((()=>{const{selection:e}=S;e&&(0,a._Hq)(S);const t=h.indexOf(m);return g(-1!==t?h.filter((e=>e!==m)):[...h,m])}),[h,S,m,g]));if(null==t||null==n)return null;const Z=!k||h.includes(m),I=C;return(0,p.tZ)(b,{hover:d,rowSpan:o,colSpan:Z?i:1,onHover:c,alignRight:u,global:w,children:k?(0,p.tZ)("div",{onClick:T,css:I,children:(0,p.BX)(p.HY,{children:[null!=n&&(0,p.tZ)(y.X,{value:n,variant:"inline",type:t,element:E}),(0,p.tZ)("span",{css:x,children:Z?(0,p.tZ)(v.P,{}):(0,p.tZ)(f.g,{})})]})}):(0,p.tZ)(y.X,{value:n,variant:"inline",type:t,element:E})})};var w=n(94866),E=n(24217),S=n(82623),T=n(1146),Z=n(55575),I=n(79820),D=n(71799);const R=(0,d.css)(I.KY,";label:-VariableNameSelector--selectFontStyles;"),N=(0,d.css)({backgroundColor:(0,u.g)("strongHighlightColor")},";label:-VariableNameSelector--hoveredStyles;"),L=(0,d.css)({backgroundColor:(0,u.g)("highlightColor"),fontWeight:"bold",":hover":{...N}},";label:-VariableNameSelector--selectStyles;"),M=(0,d.css)({color:(0,u.g)("evenStrongerHighlightColor")},";label:-VariableNameSelector--unselectedValueStyles;"),B=e=>{let{labelText:t,children:n,value:o,setValue:l}=e;const[a,i]=(0,r.useState)(!1);return(0,p.tZ)(Z._,{onHover:i,renderContent:e=>(0,p.tZ)("select",{css:[R,L,!o&&M,a&&N,";label:-VariableNameSelector--SelectInput;"],id:e,onChange:e=>{l(e.target.value)},value:o,children:n}),children:(0,p.BX)("span",{css:R,children:[t,":"]})})},O=e=>{let{label:t="Variable name",variableNames:n,selectedVariableName:r,onChangeVariableName:o}=e;return(0,p.tZ)("div",{css:D.XS,contentEditable:!1,children:(0,p.BX)(B,{labelText:t,value:r,setValue:o,children:[(0,p.tZ)("option",{value:"",children:"Choose..."},"empty"),n.map((e=>(0,p.tZ)("option",{value:e.blockId,children:e.name},e.blockId)))]})})};var A=n(49939),_=n(55099);const P={name:"1fqirif--DataView--dataViewWrapperStyles",styles:"display:flex;flex-direction:column;label:-DataView--dataViewWrapperStyles;"},V={name:"pf7qfl--DataView--dataViewControlsStyles",styles:"display:flex;flex-flow:row wrap;label:-DataView--dataViewControlsStyles;"},H="".concat(Math.round(D.cR/2),"px"),W="".concat(D.wW-D.cR,"px"),K="60px",U="calc(".concat("50vw"," - ").concat(H," - ").concat(W,")"),X="calc(".concat("100vw"," - ").concat(U," - ").concat(K," - ").concat(K,")"),$=(0,d.css)({maxWidth:X,display:"inline-block",[A.a$]:{maxWidth:"calc(100vw - ".concat(K,")"),minWidth:"0"}},";label:-DataView--tableCaptionWrapperStyles;"),q=(0,d.css)(I.rC,"table-layout:auto;th, td{padding:8px;};label:-DataView--dataViewTableStyles;"),j=(0,d.css)({transform:"translateX(calc((((100vw - 580px) / 2)) * -1 ))",width:"100vw",minWidth:D.cR,overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none",paddingBottom:"12px",position:"relative",whiteSpace:"nowrap",display:"flex","&:hover":{scrollbarWidth:"inherit",msOverflowStyle:"inherit","&::-webkit-scrollbar-thumb":{backgroundColor:(0,u.g)("highlightColor")}},"&::-webkit-scrollbar":{width:"100px",height:"8px"},"&::-webkit-scrollbar-thumb":{width:"3px",height:"3px",backgroundColor:"transparent",borderRadius:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent",height:"3px"},"&::-webkit-scrollbar-button":{width:"calc((100vw - 580px)/4)"},"&::-ms-scrollbar-thumb":{width:"3px",height:"3px",backgroundColor:(0,u.g)("highlightColor"),borderRadius:"8px"},"&::-ms-scrollbar-track":{backgroundColor:"transparent",height:"3px"},"&::-ms-scrollbar-button":{width:"calc((100vw - 580px)/4)"},[A.a$]:{maxWidth:"calc(100vw - ".concat(K,")"),minWidth:"0",transform:"translateX(0)"}},";label:-DataView--dataViewTableWrapperStyles;"),G=(0,d.css)({display:"flex",flexDirection:"row",marginLeft:"60px",paddingRight:"calc(".concat("(((100vw - 1055px) / 2) + 200px)",")"),[A.a$]:{paddingRight:"0px",marginLeft:"0px"}},";label:-DataView--tableScroll;"),F=(0,d.css)({display:"inline-block",height:"20px",minWidth:"calc((100vw - 700px) / 2)"},";label:-DataView--dataViewTableOverflowStyles;"),z=e=>{let{availableVariableNames:t,variableName:n,icon:o,color:l,onChangeVariableName:a=c.ZT,onChangeIcon:i=c.ZT,onChangeColor:s=c.ZT,data:d,children:u}=e;const[h,g,m]=r.Children.toArray(u),b=(0,T.VY)();return(0,p.tZ)(_.dg.Provider,{value:{icon:o,color:l,setIcon:i,setColor:s,hideAddDataViewButton:!0},children:(0,p.BX)("div",{css:P,"aria-roledescription":"data view",children:[(0,p.BX)("div",{css:V,children:[(0,p.tZ)("div",{css:$,children:h}),!b&&(0,p.tZ)(O,{label:"Source",variableNames:t,selectedVariableName:n,onChangeVariableName:a})]}),(0,p.BX)("div",{css:j,contentEditable:!1,children:[(0,p.tZ)("div",{css:F,contentEditable:!1}),(0,p.BX)("div",{css:G,children:[(0,p.BX)("table",{css:q,contentEditable:!1,children:[(0,p.tZ)("thead",{children:g}),(0,p.tZ)("tbody",{"aria-roledescription":"data view data",children:d})]}),n&&m]})]})]})})},Y=e=>{let{children:t}=e;const n=(0,s.G)(c.ZT);return(0,p.tZ)("div",{contentEditable:!1,onClick:n,onPointerDown:n,onMouseDown:n,onDrop:n,onKeyDown:n,children:t})};var J=n(8243),Q=n(27012),ee=n(91745);const te={name:"vn2sf6--DataViewMenu--dataViewMenuWrapperStyles",styles:"margin:8px;label:-DataViewMenu--dataViewMenuWrapperStyles;"},ne=(0,d.css)({backgroundColor:"".concat((0,u.g)("highlightColor")),width:"36px",height:"36px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center","& svg":{width:"1rem",height:"1rem"}},";label:-DataViewMenu--menuButtonStyles;"),re={name:"1aqh9jj--DataViewMenu--iconTypeStyles",styles:"display:inline-block;margin-right:10px;vertical-align:middle;svg{width:16px;height:16px;};label:-DataViewMenu--iconTypeStyles;"},oe=e=>{let{availableColumns:t,onInsertColumn:n}=e;const[o,l]=(0,r.useState)(!1),a=(0,T.VY)();return(0,p.BX)("div",{children:[!a&&(o?null:(0,p.tZ)("button",{"data-testid":"add-data-view-column-button","aria-roledescription":"Add column",onClick:()=>{l(!o)},css:[ne,D.XS,";label:-DataViewMenu--DataViewMenu;"],children:(0,p.tZ)(Q.m,{})})),(0,p.tZ)("div",{css:te,children:(0,p.tZ)(ee.q,{root:!0,trigger:(0,p.tZ)("div",{}),open:o,onChangeOpen:l,dropdown:!0,children:t&&t.map(((e,t)=>{const r=(0,_.aX)(e.type);return(0,p.BX)(J.s,{testid:"data-view-menu-item-".concat(e.name),onSelect:()=>{var t;return n(null!==(t=e.blockId)&&void 0!==t?t:e.name,e.type)},children:["anything"!==e.type.kind&&(0,p.BX)("div",{css:re,children:[" ",(0,p.tZ)(r,{})]}),e.name]},t)}))})})]})},le=e=>(0,p.tZ)(mt,{...e});var ae=n(67203),ie=n(17525),se=n(25555),ce=n(60046);const de=(e,t)=>{const n=(0,r.useCallback)((()=>{(0,ae.d)(e,t,(t=>{(0,a.nXd)(e,{at:t})}))}),[e,t]),o=(0,r.useMemo)((()=>new ce.Subject),[e,t]),i=(0,r.useCallback)((n=>{const r=null===t||void 0===t?void 0:t.children[1];if(!(r&&(0,a.O$c)(e,r)))return;const o=r.children.filter((e=>!(0,a.GsE)(e)));(0,a.kRc)(e,(()=>{const t=()=>{if(o)for(const t of o){const r=n.find((e=>null!=e.blockId?e.blockId===t.name:e.name===t.name)),o=(0,a.O$c)(e,t);r&&o&&(0,a.uEZ)(e,o)&&"anything"!==r.type.kind&&"type-error"!==r.type.kind&&t.cellType.kind!==r.type.kind&&(0,a.fLV)(e,{cellType:r.type,aggregation:void 0},{at:o})}};e.withoutCapturingUndo?e.withoutCapturingUndo(t):t()}))}),[e,null===t||void 0===t?void 0:t.children]),s=(0,S.Z)(e,t,"varName"),d=(0,r.useCallback)((()=>{(0,c.m0)(e.withoutCapturingUndo)((()=>{(0,a.kRc)(e,(()=>{const n=null===t||void 0===t?void 0:t.children[1];if(!(n&&(0,a.O$c)(e,n)))return;const r=n.children.filter((e=>!(0,a.GsE)(e)));if(r)for(const t of r){const n=(0,a.O$c)(e,t);n&&(0,a.uEZ)(e,n)&&(0,a.r4l)(e,{at:n})}}))}))}),[e,null===t||void 0===t?void 0:t.children]);return{onDelete:n,onVariableNameChange:(0,r.useCallback)((t=>{(0,a.kRc)(e,(()=>{d(),s(t)}))}),[d,e,s]),setDataColumns:i,onMoveColumn:(0,r.useCallback)(((n,r)=>{if(n===r)return;const l=null===t||void 0===t?void 0:t.children[1],i=l&&(0,a.O$c)(e,l);if(i){const t=[...i,n],l=[...i,r];(0,a.uEZ)(e,t)&&(0,a.uEZ)(e,l)&&((0,a.kRc)(e,(()=>{(0,a.$45)(e,{at:t,to:l})})),o.next(void 0))}}),[o,e,null===t||void 0===t?void 0:t.children]),onInsertColumn:(0,r.useCallback)(((n,r)=>{const o=null===t||void 0===t?void 0:t.children[1],i=o&&(0,a.O$c)(e,o);if(i){const t=()=>{const t=[...i,0],n=(0,a.MkB)(e,t);return!(!n||!(0,a.GsE)(n))&&((0,a.r4l)(e,{at:t}),!0)};(0,a.kRc)(e,(()=>{let a=o.children.length;t()&&(a-=1);const s=[...i,a];(0,ie.s)(e,{id:(0,se.x0)(),type:l.Ph,cellType:r,name:n,children:[{text:""}]},{at:s})}))}}),[e,null===t||void 0===t?void 0:t.children]),onDeleteColumn:(0,r.useCallback)((t=>{(0,a.r4l)(e,{at:t})}),[e]),columnChanges$:(0,r.useMemo)((()=>o.asObservable()),[o])}};var ue=n(61150);var pe=n(53559),he=n(57292);var ge=n(79568),me=n(61138);const be=e=>e.name.indexOf(".")<0,ye=e=>"table"===e.type.kind,ve=()=>{const e=(0,T.Iy)(),[t,n]=(0,r.useState)([]);return(0,r.useEffect)((()=>{const t=e.getNamesDefined$.observeWithSelector((e=>e.filter(ye).filter(be))).subscribe(n);return()=>t.unsubscribe()}),[e.getNamesDefined$]),t},fe=e=>e>=0,xe=e=>{var t;let{editor:n,element:o}=e;const{onDelete:i,onInsertColumn:s,onDeleteColumn:c,onVariableNameChange:d,setDataColumns:u,columnChanges$:p}=de(n,o),h=(0,T.Iy)(),g=o.varName||"",m=h.getSymbolDefinedInBlock$.use(g),b=(e=>{const t=(0,T.Iy)(),[n,o]=(0,r.useState)();return(0,r.useEffect)((()=>{const n=t.getAllColumns$.observe(e).pipe((0,me.UI)((e=>e.map((e=>{return{name:e.columnName,blockId:e.blockId,type:(t=e.result.type,"column"===t.kind?t.cellType:t),value:e.result.value};var t})))),(0,me.bh)(500),(0,me.xb)(((e,t)=>(0,ge.J)(e,t)))).subscribe(o);return()=>{n.unsubscribe()}}),[e,t.getAllColumns$]),n})(null!==(t=o.varName)&&void 0!==t?t:""),[y,v]=(0,r.useState)(),f=Te({sortedColumns:y,setSortedColumns:v,availableColumns:b}),x=(0,r.useCallback)((()=>{if(!b)return;const e=(0,a.O$c)(n,o);if(e){const r=(0,a.DYv)(n,{at:e,match:(t=l.CN,e=>(0,a.kKo)(e)&&e.type===t)});if(r){const[e]=r;(0,E.I)(e,l.CN);return e.children.map((e=>b.findIndex((t=>null!=t.blockId?t.blockId===e.name:t.name===e.name)))).filter(fe)}}var t}),[b,n,o]);(0,r.useEffect)((()=>{f(x())}),[x,f]),(0,T.Ab)(f,x,{injectObservable:p});const C=(0,T.LU)((0,r.useCallback)((()=>{var e,t;return null===(e=o.children[1])||void 0===e||null===(t=e.children)||void 0===t?void 0:t.map((e=>e.aggregation))}),[o.children]));return(0,r.useEffect)((()=>{b&&u(b)}),[b,u]),{variableNames:ve(),tableName:m,onDelete:i,onInsertColumn:s,onDeleteColumn:c,onVariableNameChange:d,sortedColumns:y,availableColumns:b,selectedAggregationTypes:C}};var Ce=n(13986);const ke=e=>{let{columns:t,columnIndex:n,aggregationTypes:r,previousColumns:o,parentHighlight$:l,global:a=!1}=e;const[i,...s]=t;return{elementType:"smartrow",children:s.length>0?[ke({columns:s,columnIndex:n+1,aggregationTypes:r,previousColumns:o,parentHighlight$:l,global:a})]:[],column:i,columnIndex:n,previousColumns:o,parentHighlight$:l,global:a}},{ResultTransforms:we}=Ce.x4,Ee=async e=>{let{columns:t,aggregationTypes:n,expandedGroups:r=[],columnIndex:o,previousColumns:l,parentHighlight$:a,parentGroupId:i}=e;if(t.length<1)return[];const[s,...c]=t,d=we.sortMap(s.value),u=we.applyMap(s.value,d),p=c.map((e=>({...e,value:we.applyMap(e.value,d)}))),h=we.contiguousSlices(u),g=e=>Ee({...e,aggregationTypes:n,expandedGroups:r}),m=e=>ke({...e,aggregationTypes:n}),b=h.map((async e=>{let[t,c]=e;const d=u.atIndex(t),h=await async function(e){const t=(new TextEncoder).encode(e);if("crypto"in global){const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return t.toString()}(d),b=i?"".concat(i,"/").concat(h):h,y=r.includes(b),v=p.map((e=>({...e,value:we.slice(e.value,t,c+1)}))),f=!n||0===n.filter(Boolean).length,x=[...l,{...s,value:d}];return(async e=>{let{isExpanded:t,value:n,type:r,columns:o,hideSmartRow:l,groupId:a,columnIndex:i,parentHighlight$:s,previousColumns:c,generateGroups:d,generateSmartRow:u}=e;const p=new ce.BehaviorSubject(!1),h=await d({columns:o,columnIndex:i+1,previousColumns:c,parentHighlight$:p,parentGroupId:a}),g=h.length>1;return{elementType:"group",id:a,value:n,type:r,children:[!l&&g&&u({columns:o,columnIndex:i+1,previousColumns:c,parentHighlight$:s})||null,...t||!g?h:[]].filter(Boolean),collapsible:g,selfHighlight$:p,parentHighlight$:s,columnIndex:i}})({isExpanded:y,value:d,type:s.type,columns:v,groupId:b,columnIndex:o,hideSmartRow:f,parentHighlight$:a,previousColumns:x,generateGroups:g,generateSmartRow:m})}));return Promise.all(b)},Se=async(e,t,n)=>{const r=await Ee({columns:e,aggregationTypes:t,expandedGroups:n,columnIndex:0,previousColumns:[]}),o=(e=>{let{columns:t,aggregationTypes:n}=e;if(n.slice(1).some(Boolean))return{elementType:"group",id:"total",type:{kind:"string"},value:"Total",children:[ke({columns:t.slice(1),columnIndex:1,aggregationTypes:n.slice(1),previousColumns:[],global:!0})],collapsible:!1,columnIndex:-1,global:!0}})({columns:e,aggregationTypes:t});return Promise.all([...r,...null!=o?[o]:[]])},Te=e=>{let{sortedColumns:t,setSortedColumns:n,availableColumns:o}=e;return(0,r.useCallback)((e=>{if(!e||!o)return void n(void 0);const r=Ce.x4.ResultTransforms.applyMap(Ce.x4.Column.fromValues(o),e).getData().filter(Boolean);(0,ge.J)(t,r)||n(r)}),[o,n,t])};var Ze=n(89105),Ie=n(99034);var De=n(96294),Re=n(50576),Ne=n(72209),Le=n(72080),Me=n(33062),Be=n(66165),Oe=n(73768),Ae=n(32321);const _e={name:"wx6rax--DataViewColumnHeader--dragHandleStyles",styles:"width:8px;height:9px;transform:translateY(50%);display:block;margin:auto 0;cursor:grab;pointer-events:all;margin-top:0;mix-blend-mode:luminosity;svg > rect{fill:transparent;};label:-DataViewColumnHeader--dragHandleStyles;"},Pe=()=>(0,p.tZ)("button",{css:_e,contentEditable:!1,children:(0,p.tZ)(Me.D,{})}),Ve=(0,d.css)({"&::before, &::after":{display:"block",content:" attr(aria-placeholder)",width:"1px",background:"transparent",height:"calc(100% - 12px)",position:"absolute",top:0},borderBottom:"1px solid",borderBottomColor:(0,u.g)("evenStrongerHighlightColor")},";label:-DataViewColumnHeader--dataViewColumnHeaderStyles;"),He={name:"s3w40w--DataViewColumnHeader--triggerStyles",styles:"display:grid;align-items:center;width:16px;label:-DataViewColumnHeader--triggerStyles;"},We={name:"ftih01--DataViewColumnHeader--borderLeftStyles",styles:"&::before{background:blue;translate:-8px;};label:-DataViewColumnHeader--borderLeftStyles;"},Ke={name:"1b0wkwz--DataViewColumnHeader--dataViewColumnHeaderSelectWrapperStyles",styles:"display:flex;align-items:center;gap:8px;label:-DataViewColumnHeader--dataViewColumnHeaderSelectWrapperStyles;"},Ue={name:"93m75a--DataViewColumnHeader--alignRightStyles",styles:"justify-content:flex-end;label:-DataViewColumnHeader--alignRightStyles;"},Xe={color:(0,u.g)("weakTextColor"),backgroundColor:(0,u.g)("highlightColor")},$e=(0,r.forwardRef)((function(e,t){let{name:n,attributes:o,children:l,availableAggregations:a,selectedAggregation:i,onAggregationChange:c,onDeleteColumn:u,connectDragSource:h,connectDropTarget:g,hoverDirection:m,isOverCurrent:b,alignRight:y=!1,global:v=!1}=e;const[f,x]=(0,r.useState)(!1),C=(0,s.G)((0,r.useCallback)((()=>{x(!f)}),[f])),k=(0,Le.Y)(t,h,g),w=(0,d.css)({"&::after":{background:"blue",translate:"function"!==typeof t&&t&&t.current?t.current.offsetWidth-8:0}},";label:-DataViewColumnHeader--borderRightStyles;"),E=(0,T.VY)();return(0,p.tZ)("th",{...o,css:[Ve,b&&"left"===m&&We,b&&"right"===m&&w,v&&Xe,";label:-DataViewColumnHeader--DataViewColumnHeaderWithoutRef;"],contentEditable:!1,ref:k,children:(0,p.BX)("div",{css:[Ke,y?Ue:null,";label:-DataViewColumnHeader--DataViewColumnHeaderWithoutRef;"],contentEditable:!1,children:[!E&&(0,p.tZ)(Pe,{}),(0,p.tZ)("span",{children:n}),!E&&(0,p.BX)(ee.q,{root:!0,dropdown:!0,open:f,onChangeOpen:x,trigger:(0,p.tZ)("button",{css:He,onClick:C,children:(0,p.tZ)(Be.F,{color:"normal",variant:"down"})}),children:[(0,p.tZ)(J.s,{onSelect:()=>u(),icon:(0,p.tZ)(Oe.r,{}),children:"Remove column"}),a.length>0?(0,p.BX)(ee.q,{itemTrigger:(0,p.tZ)(Ne.e,{icon:(0,p.tZ)(Ae.E,{}),children:"Aggregate"}),children:[(0,p.tZ)(J.s,{onSelect:()=>c(void 0),selected:void 0===i,children:"None"}),a.map(((e,t)=>(0,p.tZ)(J.s,{onSelect:()=>c(e),selected:e===i,children:(0,Re.capitalize)(e)},t)))]}):null]}),(0,p.tZ)("div",{contentEditable:!1,children:l})]})})}));var qe=n(1138);const je=e=>{let{attributes:t,children:n}=e;return(0,p.tZ)("tr",{...t,contentEditable:!1,children:n})},Ge=(0,d.css)({borderBottom:"1px solid ".concat((0,u.g)("borderColor")),"&:last-of-type":{borderBottomColor:(0,u.g)("normalTextColor")}},";label:-DataViewRow--dataViewRowStyles;"),Fe=(0,d.css)({color:(0,u.g)("weakTextColor"),backgroundColor:(0,u.g)("highlightColor")},";label:-DataViewRow--dataViewRowGlobalStyles;"),ze=e=>{let{attributes:t,children:n,global:r=!1}=e;return(0,p.tZ)("tr",{...t,css:[Ge,r&&Fe,";label:-DataViewRow--DataViewRow;"],children:n})};function Ye(e){return e.tempChildren&&e.tempChildren.length>0||!1}function Je(e){if(!(e.children.length>0))return{...e,rowspan:1,depth:1,tempChildren:[]};const t={...e,rowspan:0,depth:0,tempChildren:[]};for(const n of e.children){const e=Je(n);(0,c.Nh)(t.tempChildren),t.tempChildren.push(e),t.rowspan=(t.rowspan||0)+(e.rowspan||0),t.depth=Math.max(t.depth||0,(e.depth||0)+1)}return t}function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;(e.colspan=t?t-(e.depth||0):1,Ye(e))&&(null===(n=e.tempChildren)||void 0===n||n.forEach(((t,n)=>{(0,c.Nh)(e.tempChildren),e.tempChildren[n]=Qe(t,e.depth||0)})));return e}function et(e){return function(e){const t=[],n=function(e,r){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){for(let n=0;n<(e.rowspan||0);n+=1){const e=r+n;t[e]||(t[e]=[])}t[r].push(e)}Ye(e)&&((0,c.Nh)(e.tempChildren),e.tempChildren.forEach(((t,o)=>{n(t,r,!0),(0,c.Nh)(e.tempChildren),r+=e.tempChildren[o].rowspan||0})))};return n(e,0),t}(Qe(Je(e)))}var tt=n(28209);const nt=e=>{var t;let{tableName:n,element:o,Header:l,SmartCell:a,aggregationType:i,isFullWidthRow:s,expandedGroups:c,onChangeExpandedGroups:d,groupLength:u,index:h}=e;const[g,m]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{let e;return o.parentHighlight$&&(e=o.parentHighlight$.subscribe(m)),()=>{e&&e.unsubscribe()}}),[o.parentHighlight$]),(0,r.useEffect)((()=>{var e;null===(e=o.selfHighlight$)||void 0===e||e.next(g||b)}),[o.selfHighlight$,g,b]);const v=(0,r.useCallback)((e=>{y(e),o.selfHighlight$&&o.selfHighlight$.next(b)}),[o.selfHighlight$,b]);return"group"===o.elementType?(0,p.tZ)(l,{type:o.type,value:o.value,rowSpan:o.rowspan,colSpan:o.colspan,collapsible:o.collapsible,onHover:v,hover:g||b,alignRight:(0,tt.L1)(o.type),isFullWidthRow:s,expandedGroups:c,onChangeExpandedGroups:d,groupId:o.id||"",groupLength:u,index:h,global:o.global}):(0,p.tZ)(a,{tableName:n,rowSpan:o.rowspan,colSpan:o.colspan,column:o.column,aggregationType:i,onHover:v,hover:g||b,alignRight:(0,tt.L1)(null===(t=o.column)||void 0===t?void 0:t.type),previousColumns:o.previousColumns,global:o.global})};const rt=(0,d.css)(I.yw,"position:relative;white-space:nowrap;text-align:left;font-weight:700;;label:-SmartCell--smartCellStyles;"),ot=(0,d.css)({backgroundColor:(0,u.g)("highlightColor")},";label:-SmartCell--hoverCellStyles;"),lt=(0,d.css)(I.KY,{color:(0,u.g)("weakerTextColor")},";label:-SmartCell--labelStyles;"),at={name:"kegwom--SmartCell--alignRightStyles",styles:"text-align:right;label:-SmartCell--alignRightStyles;"},it=(0,d.css)({color:(0,u.g)("weakTextColor"),backgroundColor:(0,u.g)("highlightColor"),fontWeight:"bold"},";label:-SmartCell--globalStyles;"),st={name:"3jw8j4--SmartCell--draggableStyles",styles:"cursor:grab;:active{cursor:grabbing;};label:-SmartCell--draggableStyles;"};function ct(e){let{result:t,aggregationType:n,onDragStart:o,onDragEnd:l,rowSpan:a=1,colSpan:i=1,onHover:s=c.ZT,hover:d=!1,alignRight:u=!1,global:h=!1,element:g}=e;const m=(0,r.useCallback)((()=>s(!0)),[s]),b=(0,r.useCallback)((()=>s(!1)),[s]),v=(0,T.VY)();return(0,p.BX)("td",{css:[rt,!v&&o&&st,d&&ot,u&&at,h&&it,";label:-SmartCell--SmartCell;"],rowSpan:a,colSpan:i,draggable:!0,onDragStart:o,onDragEnd:l,onMouseOver:m,onMouseOut:b,children:[(0,p.tZ)("span",{css:lt,children:n&&"".concat(n,": ")||null}),t?(0,p.tZ)(y.X,{variant:"inline",...t,element:g}):null]})}var dt=n(85996);var ut=n(5216);var pt=n(26805);const ht={name:"1q6lczl--SmartCell--emptyCellStyles",styles:"border-bottom:0;label:-SmartCell--emptyCellStyles;"},gt=e=>{let{column:t,tableName:n,aggregationType:o,rowSpan:a,colSpan:s,onHover:c,hover:d,alignRight:u,previousColumns:h,global:g=!1}=e;const m=(0,T.Iy)(),b=(0,l.l3)(),[y,v]=(0,r.useState)(null),f=(0,r.useMemo)((()=>t&&h.reduce(((e,t)=>{const r=(0,dt.zI)({type:t.type,value:t.value});return""===e?"filter(".concat(n,", ").concat(n,".").concat(t.name," == ").concat(r,")"):"filter(".concat(e,", ").concat(e,".").concat(t.name," == ").concat(r,")")}),"")||n),[t,h,n]),x=(0,r.useMemo)((()=>t&&f&&((e,t,n,r)=>{try{if(!n)return;const o=(0,he.Dm)(t).find((e=>e.name===n));if(!o)throw new Error("No aggregator named ".concat(n," for column type ").concat(t.kind," found"));return o.expression(e,r)}catch(o){return o}})("".concat(f,".").concat(t.name),t.type,o,{sum:"sum(".concat(n,".").concat(t.name,")")})),[o,t,f,n]);(0,r.useEffect)((()=>{const e=("string"===typeof x&&x&&m.expressionResultFromText$(x).pipe((0,ce.debounceTime)(500))||ce.EMPTY).subscribe(v);return()=>e.unsubscribe()}),[m,x]);const C=(0,r.useCallback)((e=>{x&&y&&"string"===typeof x&&(e=>t=>{let{computer:n,expression:r,result:o}=t;return t=>{var l;if(e.dragging=i.hj,(0,ut.o)(t.dataTransfer,[r]),null!==(l=e.previewRef)&&void 0!==l&&l.current){const r=n.formatNumber(o.type,o.value);T.YS.previewText(r.asString),t.dataTransfer.setDragImage(e.previewRef.current,0,0)}e.setFragmentData(t.dataTransfer,"drag"),t.dataTransfer.dropEffect="copy"}})(b)({computer:m,expression:x,result:y})(e)}),[m,b,x,y]),k=(0,pt.GH)();return null==y||null==o?(0,p.tZ)("td",{css:ht}):(0,p.tZ)(ct,{aggregationType:o,result:y,rowSpan:a,colSpan:s,onHover:c,hover:d,alignRight:u,global:g,onDragStart:C,onDragEnd:k})},mt=e=>{let{tableName:t,columns:n,aggregationTypes:o,expandedGroups:l=[],onChangeExpandedGroups:a}=e;const i=((e,t,n)=>{const o=(0,r.useMemo)((()=>Se(e.map((e=>({...e,value:Ce.x4.Column.fromValues(e.value)}))),t,n)),[t,e,n]),[l,a]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{a(await o)})()}),[o]),l})(n,o,l),s=(0,r.useMemo)((()=>et({elementType:"group",children:i,columnIndex:-1})),[i]),c=(0,r.useMemo)((()=>s.map((e=>e.reduce(((e,t)=>e+(t&&t.colspan?t.colspan:0)),0)))),[s]),d=Math.max(...c);return(0,p.tZ)(p.HY,{children:s.map(((e,n)=>(0,p.tZ)(ze,{isFullWidth:e.length===d,isBeforeFullWidthRow:s[n+1]&&s[n+1].length===d,global:e.some((e=>e.global)),children:e.map(((r,i)=>(0,p.tZ)(nt,{index:n,tableName:t,element:r,aggregationType:o[r.columnIndex],Header:k,SmartCell:gt,isFullWidthRow:e.length===d,expandedGroups:l,onChangeExpandedGroups:a,groupLength:e.length},"".concat(s.indexOf(e),"-").concat(n,"-").concat(i,"}"))))},"".concat(s.indexOf(e),"-").concat(n,"}"))))})},bt=e=>t=>{const[n]=t;return(0,E.I)(n,l.u8),((e,t)=>{var n;const[r,o]=t;return r.children?r.children.length<1?((0,ie.s)(e,[{id:(0,se.x0)(),type:l.ro,children:[{id:(0,se.x0)(),type:l.wB,children:[{text:""}]}]}],{at:[...o,0]}),!0):r.children.length<2?((0,ie.s)(e,[{id:(0,se.x0)(),type:l.CN,children:[]}],{at:[...o,1]}),!0):r.children[0].type!==l.ro?((0,a.fLV)(e,{type:l.ro},{at:[...o,0]}),!0):r.children[0].children.length<1?((0,ie.s)(e,{id:(0,se.x0)(),type:l.wB,children:[{text:""}]},{at:[...o,0,0]}),!0):(null===(n=r.children[0].children[0])||void 0===n?void 0:n.type)!==l.wB?((0,a.GsE)(r.children[0].children[0])?(0,a.qEX)(e,{id:(0,se.x0)(),type:l.wB,children:[]},{at:[...o,0,0]}):(0,a.fLV)(e,{type:l.wB},{at:[...o,0,0]}),!0):r.children[1].type!==l.CN&&((0,a.r4l)(e,{at:[...o,1]}),!0):((0,a.fLV)(e,{children:[{text:""}]},{at:o}),!0)})(e,t)||((e,t)=>{const[n,r]=t;if(!n.children[1].children)return(0,a.fLV)(e,{children:[]},{at:r}),!0;for(const[s,c]of(0,a.Ga5)([n.children[1],[...r,1]])){var o,i;const t=null!==(o=(0,a.DYv)(e,{match:{id:s.name}}))&&void 0!==o?o:[];if((null===(i=t[0])||void 0===i?void 0:i.type)===l.We)return(0,a.fLV)(e,{name:t[0].columnId},{at:c}),!0}return!1})(e,t)},yt=(0,a.xje)({key:l.u8,isElement:!0,component:e=>{var t,n;let{attributes:o,children:a,element:i}=e;(0,E.I)(i,l.u8);const[s,c]=(0,r.useState)(!1),d=(0,l.l3)(),u=(0,S.Z)(d,i,"icon"),h=(0,S.Z)(d,i,"color"),g=(0,S.Z)(d,i,"expandedGroups"),{variableNames:m,tableName:b,onDelete:y,onVariableNameChange:v,sortedColumns:f,selectedAggregationTypes:x,onInsertColumn:C,availableColumns:k}=xe({editor:d,element:i}),Z=((null===f||void 0===f?void 0:f.length)||0)>=5,{color:I}=(0,T.xc)(),D=(0,r.useCallback)((()=>{c(!0),y()}),[y]);return s?null:(0,p.tZ)(w.vL,{element:i,blockKind:Z?"editorWideTable":"editorTable",onDelete:D,...o,children:(0,p.BX)(z,{availableVariableNames:m,variableName:i.varName||"",onChangeVariableName:v,onChangeIcon:u,onChangeColor:h,icon:null!==(t=i.icon)&&void 0!==t?t:"Table",color:null!==(n=i.color)&&void 0!==n?n:I,data:f&&b&&(0,p.tZ)(le,{tableName:b,columns:f,aggregationTypes:x,expandedGroups:i.expandedGroups,onChangeExpandedGroups:g})||null,children:[a,(0,p.tZ)(Y,{children:(0,p.tZ)(oe,{availableColumns:k,onInsertColumn:C})})]})})},plugins:[{key:l.ro,isElement:!0,component:e=>{let{element:t,attributes:n,children:o}=e;const i=(0,T.VY)();(0,E.I)(t,l.ro);const s=(0,l.l3)(),c=(0,a.O$c)(s,t),d=(0,a.Zg$)(s,{at:c,match:e=>(0,a.kKo)(e)&&e.type===l.L7}),u=(0,r.useCallback)((()=>{if(!d)return;const[e,n]=d;return c&&(0,Ie.o)(s,n,e.id,(0,a.qcw)((0,a.PfL)(t,0)))}),[s,t,d,c]);return(0,p.tZ)("div",{...n,children:(0,p.tZ)(Ze.w,{readOnly:i,empty:0===(0,a.qcw)(t.children[0]).length,onAddDataViewButtonPress:u,showToggleCollapsedButton:!!d,children:o})})}},{key:l.CN,isElement:!0,isVoid:!1,component:e=>{let{attributes:t,children:n,element:r}=e;return(0,E.I)(r,l.CN),(0,p.tZ)(je,{attributes:t,children:n})}},{key:l.Ph,isElement:!0,component:e=>{let{attributes:t,children:n,element:o}=e;(0,E.I)(o,l.Ph);const i=(0,l.l3)(),[,s,c]=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TableColumn";return(0,ue.c)((()=>({type:n,item:()=>({id:t}),collect:e=>({isDragging:e.isDragging()}),end:()=>{}})),[])}(i,o.id,"DataViewColumn"),d=(0,De.m)(o),u=(0,r.useMemo)((()=>{var e;const t=d&&qe.y$.parent(qe.y$.parent(d));return t&&(null===(e=(0,a.pj6)(i,t))||void 0===e?void 0:e[0])}),[i,d]),h=(0,r.useRef)(null),[{isOverCurrent:g},m,b]=function(e,t,n,o){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"TableColumn";const{onMoveColumn:a}=de(e,t),[i,s]=(0,r.useState)(void 0),c=t&&{editor:e,table:t,column:n};return[...(0,pe.L)({accept:l,collect:t=>({isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),overDirection:(0,he.nJ)(e,{monitor:t,element:n,ref:o})||void 0}),hover:(t,r)=>{s((0,he.nJ)(e,{monitor:r,element:n,ref:o}))},drop:(e,t)=>{const n=c&&(0,he.pl)(c,e,t,i);n&&a(...n)}}),i]}(i,u,o,h,"DataViewColumn"),y=(0,r.useMemo)((()=>!d||(0,a.scZ)(d)?[]:(0,he.Dm)(o.cellType).map((e=>e.name))),[o.cellType,d]),v=(0,S.Z)(i,o,"aggregation"),{onDeleteColumn:f}=de(i,u),x=(0,r.useCallback)((()=>{d&&f(d)}),[f,d]),C=(0,T.Iy)().getColumnNameDefinedInBlock$.use(o.name)||o.name;return C?(0,p.tZ)($e,{name:C,type:o.cellType,attributes:t,selectedAggregation:o.aggregation,availableAggregations:y,onAggregationChange:v,onDeleteColumn:x,connectDragSource:s,connectDragPreview:c,connectDropTarget:m,hoverDirection:b,isOverCurrent:g,alignRight:(0,he.L1)(o.cellType),ref:h,children:n}):null}},(0,i.Kz)({name:"PLUGIN_NORMALIZE_DATA_VIEW",elementType:l.u8,acceptableElementProperties:["expandedGroups","varName","color","icon"],acceptableSubElements:[l.Kl,l.CN],plugin:bt}),(0,i.NM)({name:"INTERCEPT_DATA_VIEW",elementTypes:[l.u8],interceptor:()=>!0})()]}),vt=()=>Promise.resolve();var ft=n(31052);const xt="dec_exp";var Ct=n(17300),kt=n(40580),wt=n.n(kt);const Et=(e,t)=>{let n=0;for(const r of(0,a.Ga5)(e)){const[e,o]=r;if(!(0,a.GsE)(e))throw new Error("direct children should be text only nodes");if(n+e.text.length>=t){return{path:o,offset:t-n}}n+=e.text.length}},St=(e,t)=>{const n=r=>{const o=(0,a.MkB)(e,t);o&&(0,a.kRc)(e,(()=>{const l=(0,a.qcw)(o),i=wt()(l,r);let s=0;for(const c of i)switch(c[0]){case wt().EQUAL:s+=c[1].length;break;case wt().DELETE:return(0,a.nXd)(e,{at:Et([o,t],s),distance:c[1].length}),n(r);case wt().INSERT:return(0,a.OmN)(e,c[1],{at:Et([o,t],s)}),n(r)}}))};return n};var Tt=n(76132),Zt=n(37753),It=n(34760),Dt=n.n(It),Rt=n(48881);const Nt=[{title:"Input",value:"expression"},{title:"Toggle",value:"toggle"},{title:"Date",value:"date"},{title:"Slider",value:"slider"},{title:"Dropdown",value:"dropdown"}],Lt=e=>{const t=(0,l.l3)(),n=(0,T.Iy)().getBlockIdResult$.useWithSelector((e=>null===e||void 0===e?void 0:e.result),e.id),o=(0,r.useMemo)((()=>((e,t,n)=>r=>{if(!t)return;if("calculation"===r&&n){let r;try{r=(0,dt.zI)(n)}catch{return}const[o]=(0,a.pj6)(e,t),{id:l,children:[i]}=o,s=(0,a.qcw)(i);(0,a.r4l)(e,{at:t}),(0,ie.s)(e,(0,Rt.V)({id:l,varName:s,code:r}),{at:t})}const o="toggle"===r?"boolean":"date"===r?"date":"dropdown"===r?"string":"number";(0,a.fLV)(e,{variant:r,coerceToType:{kind:o,date:"day"}},{at:t}),(0,a.$Rk)(e)})(t,(0,a.O$c)(t,e),n)),[t,e,n]),i=(0,r.useMemo)((()=>[...n?[{title:"Calculation",value:"calculation"}]:[],...Nt.filter((t=>{let{value:n}=t;return n!==e.variant}))]),[e,n]);return{onTurnInto:o,turnInto:i}},Mt=(0,r.createContext)({}),Bt=()=>(0,r.useContext)(Mt),Ot=Mt.Provider,At=e=>{var t,n,i,s;let{attributes:c,element:d,children:u}=e;(0,E.I)(d,l.qu);const[h,g]=(0,r.useState)(!1),m=(0,l.l3)(),b=(0,T.VY)(),y=(0,r.useContext)(o.K),v=(0,r.useCallback)((()=>{const e=(0,a.O$c)(m,d);e&&(g(!0),(0,Ct.k)(m,e))}),[m,d]),f=(0,r.useCallback)((()=>{Dt()((0,a.agy)(m,{nodes:[d]}),{format:"text/html"})}),[m,d]),x=(0,S.Z)(m,d.children[2],"max"),C=(0,S.Z)(m,d.children[2],"min"),k=(0,S.Z)(m,d.children[2],"step"),Z=(0,S.Z)(m,d.children[1],"smartSelection"),I=(0,w.$u)(d),D=(0,S.Z)(m,d,"coerceToType"),R=(0,r.useCallback)((e=>{y({type:"action",action:"widget type changed",props:{variant:d.variant,..."date"===d.variant&&"smart-selection"!==e&&"date"===(null===e||void 0===e?void 0:e.kind)&&{subVar:e.date},isReadOnly:b,newType:"smart-selection"===e?"smart-selection":(null===e||void 0===e?void 0:e.kind)||""}}),"smart-selection"===e?(Z(!d.children[1].smartSelection),D({kind:"number",unit:null})):("dropdown"===d.variant&&Z(!1),D(e))}),[D,Z,d,y,b]),N=(0,r.useCallback)((e=>{const t=(0,a.O$c)(m,d.children[1]);var n;t&&St(m,t)(null!==(n=null===e||void 0===e?void 0:e.toString())&&void 0!==n?n:"")}),[m,d]),L=(0,De.m)(d),M=!h&&L&&(0,Tt.d3)(m,L),B=(0,r.useCallback)(((e,t)=>({horizontal:t.getItemType()===l.qu||t.getItemType()===l.g0,vertical:!M})),[M]),O=(0,r.useCallback)(((e,t,n)=>{if(!L||"left"!==n&&"right"!==n)return(0,pt.I5)(m,e,d.id,n);qe.ML.withoutNormalizing(m,(()=>{var t;const r=null===(t=(0,a.DYv)(m,{at:[],match:{id:e.id}}))||void 0===t?void 0:t[1];let o=[];M?("left"===n&&(o=L),"right"===n&&(o=qe.y$.next(L))):(o=[...L,"left"===n?0:1],(0,Tt.ZX)(m,L)),(0,a.$45)(m,{at:r,to:o})}))}),[m,d.id,M,L]),{color:A}=(0,T.xc)(),_=Lt(d);if(h)return(0,p.tZ)(p.HY,{});const{color:P=A}=d.children[0];return(0,p.tZ)(w.vL,{blockKind:"interactive",element:d,accept:M?[l.qu,l.g0]:void 0,getAxis:B,onDrop:O,contentEditable:!0,suppressContentEditableWarning:!0,id:d.id,dependencyId:d.id,..._,...c,children:(0,p.tZ)(Ot,{value:{color:P},children:(0,p.tZ)(Zt.h,{variant:d.variant,onDelete:v,onCopy:f,onChangeMax:x,onChangeMin:C,onChangeStep:k,max:"slider"===d.variant?null===(t=d.children[2])||void 0===t?void 0:t.max:void 0,min:"slider"===d.variant?null===(n=d.children[2])||void 0===n?void 0:n.min:void 0,step:"slider"===d.variant?null===(i=d.children[2])||void 0===i?void 0:i.step:void 0,color:P,readOnly:b,type:null!==(s=d.coerceToType)&&void 0!==s?s:I,onChangeType:R,value:(0,a.qcw)(d.children[1]),onChangeValue:N,smartSelection:"dropdown"===d.variant&&d.children[1].smartSelection,element:d,children:u})})})};var _t=n(47591),Pt=n(89663);const Vt={name:"1p7vqsx--Caption--nameWrapperStyles",styles:"align-items:center;display:flex;gap:4px;label:-Caption--nameWrapperStyles;"},Ht=(0,d.css)((0,u.m)("currentTextColor",(0,u.g)("weakTextColor")),{display:"grid",height:"20px",width:"20px",flexShrink:0,[A.a$]:{height:"16px",width:"16px"}},";label:-Caption--iconWrapperStyles;"),Wt=(0,d.css)(I.sK,{display:"grid",overflow:"hidden",whiteSpace:"nowrap",width:"100%","> span, ::before":{gridArea:"1 / 1"},"::before":{...I.jf,...I.sK,...(0,u.m)("currentTextColor",(0,u.g)("weakTextColor")),pointerEvents:"none",content:"attr(aria-placeholder)",opacity:A.RR,[A.a$]:I.LO},[A.a$]:I.LO},";label:-Caption--placeholderStyles;"),Kt=e=>{let{empty:t=!1,children:n,color:r="Sulu",icon:o="Frame",onChangeColor:l=c.ZT,onChangeIcon:a=c.ZT}=e;const i=_t[o];return(0,p.BX)("div",{css:Vt,children:[(0,T.VY)()?(0,p.tZ)("span",{contentEditable:!1,css:Ht,children:(0,p.tZ)(i,{})}):(0,p.tZ)(Pt.e,{onChangeColor:l,onChangeIcon:a,color:r,trigger:(0,p.tZ)("button",{contentEditable:!1,css:Ht,children:(0,p.tZ)(i,{})})}),(0,p.tZ)("div",{css:Wt,"aria-placeholder":t?"Name your input":"",spellCheck:!1,"data-testid":"input-widget-name",children:(0,p.tZ)("span",{children:(0,p.tZ)("span",{children:n})})})]})};var Ut=n(68861),Xt=n(86928),$t=n(96742);const qt=e=>{let{attributes:t,element:n,children:i}=e;if((null===n||void 0===n?void 0:n.type)!==l.Oo)throw new Error("Caption is meant to render caption elements");const s=(0,l.l3)(),c=(0,$t.UE)(),d=(0,r.useContext)(o.K),u=(0,S.Z)(s,n,"icon"),h=(0,S.Z)(s,n,"color"),g=!(0,T.VY)(),{color:m}=Bt(),b=(0,a.O$c)(s,n),y=(0,a.Zg$)(s,{at:b,match:e=>(0,a.kKo)(e)&&e.type===l.qu}),v=(0,Xt.xe)(n,null===y||void 0===y?void 0:y[0].id),f=(0,a.qcw)(n),x=(0,r.useRef)(f);f===x.current||c||(x.current=(0,a.qcw)(n),d({type:"action",action:"widget renamed",props:{variant:(null===y||void 0===y?void 0:y[0].variant)||"expression"}}));const C=(0,p.tZ)("div",{...t,contentEditable:g,suppressContentEditableWarning:!0,children:(0,p.tZ)(Kt,{color:m,onChangeIcon:u,onChangeColor:h,icon:n.icon,empty:0===(0,a.qcw)(n).length,children:i})});return v?(0,p.tZ)(Ut.u,{side:"left",hoverOnly:!0,open:!0,trigger:C,children:v}):C};var jt=n(28438);const Gt={name:"uvwwi6--Expression--baseWrapperStyles",styles:"width:100%;display:grid;overflow:hidden;label:-Expression--baseWrapperStyles;"},Ft=(0,d.css)({color:(0,u.g)("strongTextColor"),borderRadius:"8px",minWidth:0,padding:"0 8px",":hover":{backgroundColor:(0,u.g)("highlightColor")}},";label:-Expression--expressionInputStyles;"),zt=(0,d.css)({backgroundColor:(0,u.g)("highlightColor")},";label:-Expression--focusedExpressionInputStyles;"),Yt=(0,d.css)({cursor:"text",display:"grid","> span, ::before":{gridArea:"1 / 1"},"::before":{...I.jf,...I.Vb,...(0,u.m)("currentTextColor",(0,u.g)("weakTextColor")),pointerEvents:"none",content:"attr(aria-placeholder)",opacity:.4,[A.a$]:I.tN},[A.a$]:I.tN},";label:-Expression--placeholderStyles;"),Jt={name:"1709yir--Expression--lineStyles",styles:"white-space:pre;overflow:hidden;scroll-snap-align:start;font-variant-numeric:tabular-nums;label:-Expression--lineStyles;"},Qt={name:"13slbob--Expression--errorContainerStyles",styles:"align-self:center;justify-self:center;label:-Expression--errorContainerStyles;"},en=e=>{let{type:t,error:n,focused:o=!1,placeholder:l="",children:a}=e;const i=(0,r.useRef)(null);return(0,r.useEffect)((()=>{i.current&&!o&&(i.current.scrollLeft=0)}),[o]),(0,p.BX)("div",{css:[Gt,{gridTemplateColumns:n?"1fr 24px":"1fr"},";label:-Expression--Expression;"],children:[(0,p.tZ)("div",{css:["date"!==(null===t||void 0===t?void 0:t.kind)?I.Vb:I.tN,Ft,Yt,o&&zt,";label:-Expression--Expression;"],"aria-placeholder":l,children:(0,p.tZ)("span",{css:Jt,ref:i,children:a})}),n&&(0,p.tZ)("div",{contentEditable:!1,css:Qt,children:(0,p.tZ)(jt.s,{...n})})]})};var tn=n(37114),nn=n(1943),rn=n(89203);const on=e=>{if(!e)return"1 km";switch(e.kind){case"string":return"Type here...";case"date":switch(e.date){case"hour":return"2001-11-27 17:01";case"day":return"2001-11-27";case"month":return"2001-11";case"year":return"2001";default:return"date"}}return"1 km"},ln=e=>{let{attributes:t,element:n,children:i}=e;if((null===n||void 0===n?void 0:n.type)!==l.oN)throw new Error("Expression is meant to render expression elements");const s=(0,De.m)(n),c=(0,l.l3)(),d=(0,r.useMemo)((()=>{var e;return s&&(null===(e=(0,a.Ow4)(c,s))||void 0===e?void 0:e[0])}),[c,s]),u=(0,r.useContext)(o.K),h=(0,T.VY)(),g=(0,T.Iy)(),[m,b]=g.getBlockIdResult$.useWithSelector((e=>{var t;return[null===e||void 0===e?void 0:e.result,null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message]}),(null===d||void 0===d?void 0:d.id)||""),y=(0,rn.k5)(Boolean(b)),v=b&&y?{message:b,url:(0,nn.rx)({}).page({name:"errors"}).$}:"type-error"===(null===m||void 0===m?void 0:m.type.kind)?{message:(0,tn.Z)("en-US",m.type.errorCause),url:(0,nn.rx)({}).page({name:"errors"}).$}:void 0,f=(0,$t.vt)(),x=(0,a.qcw)(n),C=(0,r.useRef)(x);return(0,r.useEffect)((()=>{x===C.current||f||(C.current=x,d&&"slider"!==d.variant&&u({type:"action",action:"widget value updated",props:{variant:d.variant,isReadOnly:h}}))}),[f,h,x,d,u]),(0,p.tZ)("div",{...t,children:(0,p.tZ)(en,{type:null===m||void 0===m?void 0:m.type,error:v,focused:f,placeholder:(0,a.qcw)(n)?"":m?on(null===m||void 0===m?void 0:m.type):"",children:i})})},an={number:(0,d.css)(I.Vb,{...(0,u.m)("currentTextColor",(0,u.g)("strongTextColor")),[A.a$]:I.tN},";label:-CodeSyntax--number;"),identifier:(0,d.css)(I.Vb,{...(0,u.m)("currentTextColor",(0,u.g)("weakTextColor")),[A.a$]:I.tN},";label:-CodeSyntax--identifier;"),ws:void 0},sn=e=>{let{variant:t,children:n}=e;const r=an[t];return(0,p.tZ)("span",{css:r,children:n})},cn=e=>{let{attributes:t,children:n,leaf:r}=e;return(0,p.tZ)("span",{...t,children:(0,p.tZ)(sn,{variant:r.tokenType,children:n})})};var dn=n(63929),un=n(57481),pn=n(74029);const hn=(0,d.css)({padding:"calc(".concat(20,"px / 2 - ").concat(4,"px / 2) 7px"),width:"100%"},";label:-Slider--sliderWrapperStyles;"),gn={name:"s4hbzd--Slider--sliderStyles",styles:"position:relative;display:flex;align-items:center;user-select:none;touch-action:none;width:280;label:-Slider--sliderStyles;"},mn=(0,d.css)({backgroundColor:(0,u.g)("highlightColor"),position:"relative",flexGrow:1,borderRadius:"9999px",height:4},";label:-Slider--trackStyles;"),bn=(0,d.css)({position:"absolute",backgroundColor:un.Su.rgb,borderRadius:"9999px",height:"100%"},";label:-Slider--rangeStyles;"),yn=(0,d.css)({all:"unset",boxShadow:"0px 2px 20px ".concat((0,un.KZ)(un.ou,.04),",\n  0px 2px 8px ").concat((0,un.KZ)(un.lz,.02)),border:"".concat(1,"px solid ").concat((0,u.g)("borderColor")),borderRadius:"8px",height:"".concat(20,"px"),width:"".concat(20,"px"),backgroundColor:(0,u.g)("iconColorLight"),cursor:"pointer",display:"block"},";label:-Slider--thumbStyles;"),vn=e=>{let{onChange:t=c.ZT,onFocus:n=c.ZT,onCommit:r=c.ZT,max:o=10,min:l=0,step:a=1,value:i=0,color:s}=e;const[d]=(0,T.yt)(),u=(0,pn.VT)(d)[s||"Sulu"];return(0,p.tZ)("div",{css:hn,children:(0,p.BX)(dn.fC,{css:gn,value:[Number(i)],onValueChange:e=>e.map(t),onFocus:n,min:l,max:Math.max(Number(o),Number(i)),step:a,onValueCommit:r,children:[(0,p.tZ)(dn.fQ,{css:mn,children:(0,p.tZ)(dn.e6,{css:[bn,u&&{backgroundColor:u.rgb},";label:-Slider--Slider;"]})}),(0,p.tZ)(dn.bU,{css:yn})]})})},fn=e=>{let{attributes:t,element:n,children:i}=e;if((null===n||void 0===n?void 0:n.type)!==l.TJ)throw new Error("Slider is meant to render slider elements");const s=(0,l.Bs)(),c=(0,r.useCallback)((()=>{const e={path:$t.F3.findPath(s,n),offset:0};(0,a.Z5U)(s,{anchor:e,focus:e})}),[s,n]),d=(0,S.Z)(s,n,"value",c),u=(0,r.useCallback)((e=>{d(e.toString())}),[d]),h=(0,r.useContext)(o.K),g=(0,T.VY)(),m=(0,r.useCallback)((()=>{h({type:"action",action:"widget value updated",props:{variant:"slider",isReadOnly:g}})}),[g,h]),{color:b}=Bt();return(0,p.BX)("div",{...t,contentEditable:!1,children:[i,(0,p.tZ)(vn,{...n,min:Number(n.min),max:Number(n.max),step:Number(n.step),onChange:u,value:Number(n.value),onFocus:c,color:b,onCommit:m})]})};var xn=n(61294);const Cn=new Set(["expression","slider","toggle","date","dropdown"]),kn=(0,i.ot)({name:"NORMALIZE_VARIABLE_DEF_PLUGIN",elementType:l.qu,acceptableSubElements:[l.Oo,l.oN,l.TJ,l.Ws],acceptableElementProperties:["variant","max","min","step","value","coerceToType"],plugin:e=>t=>{let[n,r]=t;if(!(0,xn.M)(n,l.qu))return!1;if(!("variant"in n)||!Cn.has(n.variant))return(0,a.fLV)(e,{variant:"expression"},{at:r}),!0;if(n.children.length<1)return(0,ie.s)(e,{id:(0,se.x0)(),type:l.Oo,children:[{text:""}]},{at:[...r,0]}),!0;if(n.children[0].type!==l.Oo)return(0,a.r4l)(e,{at:[...r,0]}),!0;if(n.children.length<2)return"dropdown"===n.variant?(0,ie.s)(e,{id:(0,se.x0)(),type:l.Ws,children:[{text:""}],options:[]},{at:[...r,1]}):(0,ie.s)(e,{id:(0,se.x0)(),type:l.oN,children:[{text:""}]},{at:[...r,1]}),!0;if(n.children[1].type!==l.oN&&"dropdown"!==n.variant||n.children[1].type!==l.Ws&&"dropdown"===n.variant)return(0,a.r4l)(e,{at:[...r,1]}),!0;if(n.children[1].type===l.Ws){const t=[];let o=!1;if(!("options"in n.children[1])||!n.children[1].options)return(0,a.fLV)(e,{options:[]},{at:[...r,1]}),!0;for(const e of n.children[1].options)"string"!==typeof e?t.push(e):(t.push({id:(0,se.x0)(),value:e}),o=!0);if(o)return(0,a.fLV)(e,{options:t},{at:[...r,1]}),!0}if("slider"===n.variant){if(n.children.length<3)return(0,ie.s)(e,{id:(0,se.x0)(),type:l.TJ,max:"10",min:"0",step:"0.1",value:"0",children:[{text:""}]},{at:[...r,2]}),!0;if(n.children[2].type!==l.TJ)return(0,a.r4l)(e,{at:[...r,2]}),!0}const o="slider"===n.variant?3:2;return n.children.length>o&&setTimeout((()=>{(0,a.r4l)(e,{at:[...r,n.children.length-1]})})),!1}}),wn=(0,i.ot)({name:"MIGRATE_ELEMENT_INPUT_TO_VARIABLE_DEF_PLUGIN",elementType:l.ji,acceptableElementProperties:["variableName","value"],plugin:e=>t=>{let[n,r]=t;const o={id:(i=n).id,type:l.qu,variant:"expression",children:[{id:(0,se.x0)(),type:l.Oo,children:[{text:i.variableName||""}],icon:i.icon,color:i.color},{id:(0,se.x0)(),type:l.oN,children:[{text:i.value||""}]}]};var i;return(0,a.nXd)(e,{at:r}),(0,ie.s)(e,o,{at:r}),!0}});var En=n(89347),Sn=n(26929),Tn=n(96124);const Zn=e=>{let[t,n]=e;if((0,a.kKo)(t)&&t.type===l.oN){const e=[],r=(e=>t=>{if(t.type){const n=t.offset,r=n+t.text.length;return{anchor:{path:e,offset:n},focus:{path:e,offset:r},tokenType:t.type,[xt]:!0}}})([...n,0]);for(const n of(0,Ce.wS)((0,a.qcw)(t))){const t=r(n);t&&e.push(t)}return e}},In=e=>{let[t,n]=e;if((0,a.kKo)(t)&&t.type===l.oN){const e=(0,a.qcw)(t),{error:r}=(e=>{const{solution:t,error:n}=(0,Ce.fh)(e);return{expression:t&&(0,Ce.UT)(t)?t:void 0,error:n,source:e}})(e);return r?(0,En.K)(n,r):[]}},Dn=(0,i.ot)({name:"NORMALIZE_SLIDER_PLUGIN",elementType:l.TJ,acceptableElementProperties:["max","min","step","value"],plugin:e=>t=>{const[n,r]=t;return(!(0,a.kKo)(n)||n.type===l.TJ)&&((0,a.kKo)(n)?"string"!==typeof n.max||isNaN(Number(n.max))?((0,a.fLV)(e,{max:"10"},{at:r}),!0):"string"!==typeof n.min||isNaN(Number(n.min))?((0,a.fLV)(e,{min:"0"},{at:r}),!0):"string"!==typeof n.step||isNaN(Number(n.step))?((0,a.fLV)(e,{step:"1"},{at:r}),!0):!("string"===typeof n.value&&!isNaN(Number(n.value)))&&((0,a.fLV)(e,{value:"5"},{at:r}),!0):((0,a.LKm)(e,{at:r}),!0))}}),Rn=e=>(0,a.kKo)(e)&&e.type===l.TJ,Nn=(0,i.F5)({name:"SLIDER_EXPRESSION_SYNC_PLUGIN",plugin:(e,t)=>n=>{if(t(n),"set_node"!==n.type&&"insert_text"!==n.type&&"remove_text"!==n.type)return;const r=(0,a.GsE)((0,a.MkB)(e,n.path))?(0,a.Ow4)(e,n.path):(0,a.pj6)(e,n.path);if(!r)return;const[o,i]=r;if("set_node"===n.type&&o.type===l.TJ&&"value"in n.newProperties){var s,c;const[t,n]=r,o=(0,a.Y_H)(e,{at:n,match:(e,t)=>(e=>(0,a.kKo)(e)&&e.type===l.oN)(e)&&qe.y$.isSibling(i,t)});if(!o)return;const[d,u]=o,p=(0,a.qcw)(d),[h,g]=null!==(s=(0,Ce.$Q)(p))&&void 0!==s?s:[];if(Number(t.value)===h)return;St(e,u)("".concat(t.value).concat(null!==(c=null!==g&&void 0!==g?g:p)&&void 0!==c?c:""))}if(("insert_text"===n.type||"remove_text"===n.type)&&o.type===l.oN){var d;const[t,n]=r,o=(0,a.PoD)(e,{at:n,match:(e,t)=>Rn(e)&&qe.y$.isSibling(i,t)});if(!o)return;const[l,s]=o,[c]=null!==(d=(0,Ce.$Q)((0,a.qcw)(t)))&&void 0!==d?d:[];if(null==c||Number(l.value)===c)return;(0,a.fLV)(e,{value:c.toString()},{at:s,match:Rn})}}});var Ln=n(12548);const Mn=(e,t)=>(0,d.css)({width:"100%",maxWidth:"244px",borderRadius:8,padding:"0px 6px 0px 8px",fontSize:24,minHeight:44,height:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease-in-out",...t&&{backgroundColor:(0,u.g)("highlightColor")},...!e&&{border:"1px solid ".concat((0,u.g)("borderColor")),":hover":{backgroundColor:(0,u.g)("highlightColor")},cursor:"pointer"}},";label:-WidgetDisplay--mainStyles;"),Bn={name:"2zlq6p--WidgetDisplay--lineStyles",styles:"overflow:hidden;white-space:nowrap;scroll-snap-align:start;font-variant-numeric:tabular-nums;label:-WidgetDisplay--lineStyles;"};var On={name:"18x8ykj--WidgetDisplay--WidgetDisplay",styles:"width:20px;label:-WidgetDisplay--WidgetDisplay;"},An={name:"9owv6n--WidgetDisplay--WidgetDisplay",styles:"width:20px;height:20px;label:-WidgetDisplay--WidgetDisplay;"};const _n=e=>{let{openMenu:t,setOpenMenu:n,readOnly:r,allowOpen:o,children:l,result:a}=e;const i=!r||o;return(0,p.BX)("div",{css:Mn(!o&&r,t),onClick:()=>i&&n(!t),children:[a?(0,p.tZ)("span",{css:Bn,children:(0,p.tZ)(y.X,{value:a.value,type:a.type})}):(0,p.tZ)("span",{css:Bn,children:l}),i&&(0,p.tZ)("div",{css:On,children:(0,p.tZ)("div",{css:An,children:(0,p.tZ)(Be.F,{variant:t?"up":"down",color:"normal"})})})]})};var Pn=n(48760);const Vn=e=>{let{attributes:t,element:n,children:i}=e;(0,E.I)(n,l.Ws);const[s,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)([]),h=(0,a.qcw)(n),g=(0,T.Iy)(),m=(0,r.useContext)(T._d);(0,r.useEffect)((()=>{if(!s||!n.smartSelection)return void u([]);const e=(0,ce.concat)((0,ce.of)(void 0),m),t=(0,ce.concat)((0,ce.of)([]),g.getAllColumns$.observe()),r=e.pipe((0,ce.combineLatestWith)(t),(0,ce.map)((e=>{let[,t]=e;return t})),(0,ce.distinctUntilChanged)(((e,t)=>(0,ge.J)(e,t)))).subscribe(u);return()=>{r.unsubscribe()}}),[g.getAllColumns$,m,s,n.smartSelection]);const b=(0,r.useMemo)((()=>n.options.map((e=>({item:e.value,focused:e.value===h})))),[n,h]),y=(0,l.Bs)(),v=(0,De.m)(n),f=(0,T.VY)(),x=(0,r.useContext)(o.K),C=(0,S.Z)(y,n,"options"),k=(0,S.Z)(y,n,"selectedColumn"),w=(0,r.useCallback)((e=>{C([...n.options,{id:(0,a.x0q)(),value:e}])}),[n.options,C]),Z=(0,r.useCallback)((e=>{(0,a.OmN)(y,e,{at:v})}),[y,v]),I=(0,r.useCallback)((e=>{C(n.options.filter((t=>t.value!==e))),e===h&&(0,a.OmN)(y,"Select",{at:v})}),[n.options,C,y,v,h]),D=(0,r.useCallback)(((e,t)=>{if(e===t)return!0;if(n.options.some((e=>e.value===t)))return!1;const r=n.options.map((n=>n.value===e?{id:n.id,value:t}:n));return e===h&&Z(t),C(r),!0}),[n.options,C,Z,h]),R=(0,r.useCallback)(((e,t)=>{"column"===t?k(n.selectedColumn===e?void 0:e):(Z(h===e?"Select":e),x({type:"action",action:"widget value updated",props:{variant:"dropdown",isReadOnly:f}}),c(!1))}),[Z,h,k,n.selectedColumn,x,f]),N=(0,r.useMemo)((()=>{const e=d.find((e=>e.blockId?e.blockId===n.selectedColumn:"".concat(e.tableName,".").concat(e.columnName)===n.selectedColumn));return[{title:"Table category",items:d.map((e=>({item:"".concat(e.tableName,".").concat(e.columnName),blockId:e.blockId,type:"column",focused:n.selectedColumn===e.columnName,icon:(0,p.tZ)(Pn.i,{})})))},...e?[{title:"Values",items:e.result.value.map((t=>({item:(0,tn.jP)({value:t,type:e.result.type.cellType})})))}]:[]]}),[d,n.selectedColumn]);return(0,p.tZ)("div",{...t,contentEditable:!1,id:n.id,"aria-roledescription":"dropdown-open",children:(0,p.tZ)(Ln.h,{open:s,setOpen:c,isReadOnly:f,items:n.smartSelection?[]:b,otherItems:n.smartSelection?N:[],addOption:w,onRemoveOption:I,onEditOption:D,onExecute:R,children:(0,p.tZ)(_n,{allowOpen:!0,openMenu:s,setOpenMenu:c,readOnly:f,children:i})})})};var Hn=n(18021);const Wn=(0,i.ot)({name:"NORMALIZE_CAPTION_PLUGIN",elementType:l.Oo,acceptableElementProperties:["icon","color"],plugin:e=>t=>{const[n,r]=t;if((0,a.kKo)(n)&&n.type!==l.Oo)return!1;if(!(0,a.kKo)(n))return(0,a.LKm)(e,{at:r}),!0;if(n.children.length>1)return(0,a.nXd)(e,{at:[...r,1]}),!0;if(!(0,a.GsE)(n.children[0]))return(0,a.nXd)(e,{at:[...r,0]}),!0;if(n.children.length<1)return(0,a.OmN)(e,"",{at:r}),!0;const[o]=(0,a.Ga5)(t);return(0,Hn.y)(e,o)}}),Kn=(0,i.ot)({name:"NORMALIZE_EXPRESSION_PLUGIN",elementType:l.oN,acceptableElementProperties:[],plugin:e=>t=>{let[n,r]=t;return(null===n||void 0===n?void 0:n.type)===l.oN&&((0,a.kKo)(n)?n.children.length>1?((0,a.nXd)(e,{at:[...r,1]}),!0):(0,a.GsE)(n.children[0])?n.children.length<1&&((0,a.OmN)(e,"",{at:r}),!0):((0,a.nXd)(e,{at:[...r,0]}),!0):((0,a.LKm)(e,{at:r}),!0))}}),Un=()=>({key:l.qu,isElement:!0,component:At,deserializeHtml:{rules:[{validNodeName:"div",validAttribute:{"data-type":"var-".concat(l.qu)}}],getNode:e=>({type:l.qu,variant:e.getAttribute("data-variant"),children:e.children})},serializeHtml:e=>{let{element:t,children:n}=e;if(!(0,a.kKo)(t))throw new Error("expected element");if(t.type!==l.qu)throw new Error("expected variable definition element");return(0,p.tZ)("div",{"data-type":"var-".concat(l.qu),"data-variant":t.variant,children:n})},plugins:[wn(),kn(),Wn(),Kn(),{key:l.Oo,isElement:!0,component:qt,deserializeHtml:{rules:[{validAttribute:{"data-type":"caption"}}]},serializeHtml:e=>(0,p.tZ)("div",{"data-type":"caption",children:e.children})},{key:l.oN,isElement:!0,component:ln,deserializeHtml:{rules:[{validNodeName:"caption",validAttribute:{"data-type":"expression"}}]},serializeHtml:e=>(0,p.tZ)("div",{"data-type":"expression",children:e.children})},{key:l.Ws,isElement:!0,component:Vn,deserializeHtml:{rules:[{validNodeName:"caption",validAttribute:{"data-type":"expression"}}]},serializeHtml:e=>(0,p.tZ)("div",{"data-type":"expression",children:e.children})},{key:xt,type:xt,isLeaf:!0,decorate:(e,t)=>(e=>(0,Sn.B)((0,Tn.n)((()=>e=>{const t=Zn(e),n=In(e);if(t||n)return(t||[]).concat(n||[])})),(t=>{let[n,r]=t;if(n.type===l.oN){var o;const t=(0,a.Ow4)(e,r),n=null===t||void 0===t||null===(o=t[0].coerceToType)||void 0===o?void 0:o.kind;return"date"!==n&&"string"!==n}return!1})))(e)(e,t),component:cn},{key:l.TJ,isVoid:!0,isElement:!0,component:fn,deserializeHtml:{rules:[{validNodeName:"div",validAttribute:{"data-type":l.TJ}}]},serializeHtml:e=>(0,p.tZ)("div",{"data-type":l.TJ,children:e.children})},Dn(),Nn(),(0,i.NM)({name:"INTERCEPT_VAR_DEF",elementTypes:[l.qu,l.Oo,l.oN,l.Ws],interceptor:(e,t,n)=>("on-enter"!==n.type||t[0].type!==l.Ws)&&("on-enter"!==n.type||t[0].type===l.qu||(0,ft.x)(e,t),!0)})()]});var Xn=n(82881),$n=n(82302),qn=n(63312),jn=n(84951),Gn=n(72603);const Fn=e=>(0,jn.CX)(e,(0,qn.aV)(e)),zn=e=>[{mode:"block",type:l.oG,match:"# ",query:Fn},{mode:"block",type:l.o3,match:"## ",query:Fn},{mode:"block",type:l.ah,match:"> ",query:Fn},{mode:"block",type:l.cI,match:["---","\u2014-","~~~"],query:Fn,format:e=>{const{path:t}=(0,qn.U3)(e);(0,jn.SE)(e,t,l.cI),(0,a.nXd)(e,{at:qe.y$.parent(t),unit:"block"})}},{mode:"block",type:l.SD,match:">! ",query:Fn},{mode:"block",type:l.Zv,match:"```",query:Fn,triggerAtBlockStart:!1,format:t=>(0,Gn.PK)(t,(0,qn.U3)(t).path,!0,e.getAvailableIdentifier.bind(e))}];var Yn=n(20548),Jn=n(36743),Qn=n.n(Jn),er=n(978),tr=n.n(er),nr=n(29129),rr=n.n(nr);const or=e=>{let t=null;const n=tr()().use(Qn()).parse(e);return rr()(n,"image",(n=>{const r=n.position.start.offset;return n.position.end.offset!==e.length?rr().CONTINUE:(t={startOffset:r,url:n.url,alt:n.alt||void 0},rr().EXIT)})),t},lr=(e,t)=>(0,a.eNq)(e,{anchor:{path:t.path,offset:0},focus:{path:t.path,offset:t.offset}})+")",ar=[{mode:"block",type:l.IV,triggerAtBlockStart:!1,match:")",query:(0,Yn.sv4)([Fn,e=>null!==or(lr(e,(0,qn.U3)(e)))]),format:e=>{const t=(0,qn.U3)(e),n=or(lr(e,t));if(null===n)throw new Error("Trigger does not complete a image given the preceding text. Check doesTriggerCompleteImage first.");const{path:r}=t;(0,a.qEX)(e,{type:l.IV,url:n.url,children:[n.alt]},{at:{anchor:{path:r,offset:n.startOffset},focus:{path:r,offset:t.offset}},split:!0,match:a.GsE}),(0,a.nXd)(e,{unit:"character",distance:n.startOffset}),(0,jn.tN)(e,r,n.url,n.alt)}}],ir=e=>{let t=null;const n=tr()().use(Qn()).parse(e);return rr()(n,"link",(n=>{var r,o,l,a,i,s;const c=n.position.start.offset;if(n.position.end.offset!==e.length)return rr().CONTINUE;const d=null!==(r=null===(o=n.children[0])||void 0===o||null===(l=o.position)||void 0===l?void 0:l.start.offset)&&void 0!==r?r:1,u=null!==(a=null===(i=n.children.slice(-1)[0])||void 0===i||null===(s=i.position)||void 0===s?void 0:s.end.offset)&&void 0!==a?a:1;return t={startOffset:c,url:n.url,text:e.substring(d,u)},rr().EXIT})),t},sr=(e,t)=>(0,a.eNq)(e,{anchor:{path:t.path,offset:0},focus:{path:t.path,offset:t.offset}})+")",cr=[{mode:"block",type:l.uJ,triggerAtBlockStart:!1,match:")",query:(0,Yn.sv4)([Fn,e=>null!==ir(sr(e,(0,qn.U3)(e)))]),format:e=>{const t=(0,qn.U3)(e),n=ir(sr(e,t));if(null===n)throw new Error("Trigger does not complete a link given the preceding text. Check doesTriggerCompleteLink first.");let{path:r}=t;(0,a.qEX)(e,{type:l.uJ,url:n.url,children:[]},{at:{anchor:{path:r,offset:n.startOffset},focus:{path:r,offset:t.offset}},split:!0,match:a.GsE});let o=(0,a.MkB)(e,r);if((0,a.kKo)(o)&&o.type===l.uJ||(r=qe.y$.next(r)),o=(0,a.MkB)(e,r),!(0,a.kKo)(o)||o.type!==l.uJ)throw console.error("Cannot find created link after split. Editor children:",e.children,". Searched path",r,"and the previous path"),new Error("Cannot find created link after split");(0,a.OmN)(e,n.text,{at:[...r,0]})}}],dr=[{mode:"block",type:l.f8,match:["* ","- "],query:Fn,format:e=>(0,a.kQP)(e,{type:l.Ht})},{mode:"block",type:l.f8,match:["0. ","0) ","1. ","1) "],query:Fn,format:e=>(0,a.kQP)(e,{type:l.kN})}],ur=[{mode:"mark",type:[l.Qp,l.mZ],match:"***",query:Fn},{mode:"mark",type:[l.Sh,l.mZ],match:"__*",query:Fn},{mode:"mark",type:[l.Sh,l.Qp],match:"__**",query:Fn},{mode:"mark",type:[l.Sh,l.Qp,l.mZ],match:"___***",query:Fn},{mode:"mark",type:l.Qp,match:"**",query:Fn},{mode:"mark",type:l.Sh,match:"__",query:Fn},{mode:"mark",type:l.mZ,match:"*",query:Fn},{mode:"mark",type:l.mZ,match:"_",query:Fn},{mode:"mark",type:l.Vj,match:"~~",query:Fn},{mode:"mark",type:l.QM,match:"`",query:Fn},{mode:"mark",type:l.Kp,match:"==",query:Fn},{mode:"mark",type:l.Ee,match:"%",query:Fn},{mode:"mark",type:l.PO,match:"||",query:Fn}];function pr(e){return!(0,a.zwG)(e,{match:{type:l.Zv}})&&!(0,a.zwG)(e,{match:{type:l.$}})}const hr=[...a.IeX,...a.cDC].map((e=>({...e,query:pr}))),gr=e=>[...zn(e),...dr,...ur,...cr,...ar,...hr],mr=e=>({[l.GD]:w.Dx,[l.oG]:w.nL,[l.o3]:w.XJ,[l.JB]:(0,w.Jj)(e),[l.ah]:w.V6,[l.SD]:w.UW,[l.cI]:w.iz,[l.IV]:w.Ee,[l.vd]:w.mp,[l.Ht]:w.QI,[l.kN]:w.GS,[l.f8]:w.HC,[l.wl]:w.Ek,[l.uJ]:w.rU,[l.g0]:w.sS,[l.Qp]:w.d8,[l.Sh]:w.v6,[l.Vj]:w.nY,[l.mZ]:w.Tx,[l.QM]:w.EK,[l.Kp]:w.y$}),br={rules:[{hotkey:"mod+enter"},{hotkey:"mod+shift+enter",before:!0},{hotkey:"enter",query:{start:!0,end:!0,allow:[l.GD,l.oG,l.o3,l.JB,l.Zv,l.SD,l.ah]}},{hotkey:"enter",query:{allow:[l.We]}}]},yr={types:[l.ah,l.SD],defaultType:l.JB},vr={rules:[{...yr,hotkey:"Enter",predicate:a.ptC},{...yr,hotkey:"Backspace",predicate:a._YE}]},fr=e=>{let{computer:t,events:n=vt,readOnly:r,notebookTitle:o,onNotebookTitleChange:s,interactions:c}=e;return(0,a.ZUk)([(0,a.ZZF)(),(0,a.DLO)(),(0,a.DRt)({options:{levels:3}}),(0,a.V8Y)(),(0,i.YV)(),(0,i.qU)(),(0,i.cV)(),(0,i.Rh)({readOnly:r,notebookTitle:o,onNotebookTitleChange:s}),(0,i.E4)(),(0,i.h_)(),(0,i.OL)(),(0,i.Sh)(),(0,i.t4)(),(0,i.tv)(),(0,i.zS)(t),(0,i.Jj)(),(0,i.Tw)(),(0,i.dQ)(),(0,i.LR)(),(0,i.zW)(),(0,i.rJ)(),(0,i.JS)(),(0,i.tD)(),(0,i.vG)(t),(0,i.z$)({options:br}),(0,i.kj)(),(0,a.gH_)({options:vr}),(0,$n.EK)({options:{enableScroller:!0,scrollerProps:{strengthMultiplier:30}}}),(0,i.pm)(),(0,i.VY)(),(0,a.cB2)({options:{query:{allow:[l.IV,l.vd,l.if]}}}),...(0,i.Jw)(),(0,i.Tv)(),(0,i.w4)(),(0,i.fS)(),(0,l.Kt)({options:{rules:gr(t)}}),(0,i.lh)(t)(),(0,i.iV)(c),(0,i.HR)(),(0,i.Bj)(),(0,i.e8)(),(0,i.mj)(),(0,i.c_)(t),(0,i.L2)(),(0,i.Rr)(),...(0,i.kX)(t),(0,i.eF)(t),(0,i.s3)(t),(0,i.$u)(t),Un(),(0,i.Az)(r),(0,he.SN)(t),yt(),(0,i.rB)(),(0,i.m7)(),(0,i.Wg)(),(0,a.SnU)(),(0,Xn.T)({}),(0,i.Hf)(),(0,i.fj)(n),(0,i.JS)(),(0,i.ar)(),(0,i.f2)(),(0,i.WZ)(),(0,i.le)(),(0,i.yz)(),(0,i.S$)(),(0,i.GQ)()],{components:mr(t)})},xr=e=>{let{readOnly:t=!1,computer:n,notebookTitle:l,onNotebookTitleChange:a,interactions:i}=e;const s=(0,r.useContext)(o.K),c=(0,r.useRef)(l);return(0,r.useEffect)((()=>{c.current!==l&&(c.current=l)}),[l]),(0,r.useMemo)((()=>n?fr({readOnly:t,computer:n,events:s,interactions:i,notebookTitle:c.current,onNotebookTitleChange:a}):void 0),[n,s,i,a,t])}},25200:(e,t,n)=>{"use strict";n.d(t,{hj:()=>ne,e8:()=>f,lh:()=>_,c_:()=>H,VY:()=>K,YV:()=>G,eF:()=>he,s3:()=>Te,Bj:()=>Ie,zW:()=>so,cV:()=>Fr,qU:()=>Re,vG:()=>Oe,pm:()=>Pe,le:()=>qe,m7:()=>Ge,kX:()=>lt,S$:()=>st,NM:()=>I,z$:()=>Jr,w4:()=>Cn,iV:()=>wt,E4:()=>It,Tv:()=>Wt,HR:()=>ln,Jw:()=>xn,fS:()=>wn,GQ:()=>En,L2:()=>Xr,tv:()=>Pn,zS:()=>ke,tD:()=>Vn,h_:()=>Hn,LR:()=>Un,dQ:()=>Xn,Tw:()=>$n,Jj:()=>qn,t4:()=>Gn,Sh:()=>zn,rJ:()=>Yn,OL:()=>nr,Kz:()=>N,ot:()=>L,Rh:()=>or,_L:()=>M,Wg:()=>ar,F5:()=>B,WZ:()=>sr,rB:()=>ur,Az:()=>Lr,yz:()=>no,f2:()=>eo,ar:()=>Mr,Rr:()=>Pr,kj:()=>Hr,_k:()=>lo,mj:()=>Ur,JS:()=>zr,$u:()=>qr,fj:()=>Gr,Hf:()=>jr,dX:()=>_e,bN:()=>cr});var r=n(74673);var o=n(13986),l=n(85663),a=n(1146),i=n(89203),s=n(3039),c=n(30969),d=n(96742),u=n(1138);const p=e=>![""," ","(",")","[","]","{","}"].includes(e),h=(e,t)=>(0,r.eNq)(e,{anchor:u.ML.start(e,t.path),focus:{path:t.path,offset:t.offset}}).slice(-1);var g=n(5594);const m=(e,t)=>(e.isLocal?1:0)-(t.isLocal?1:0),b=e=>e.sort(m),y=e=>[...b(e),...(0,o.bV)()].map((e=>({kind:"variable"===e.kind?"variable":"function",identifier:"function"===e.kind?"".concat(e.name,"("):e.name,type:e.type.kind,blockId:e.blockId}))),v=e=>{let{blockId:t,search:n,onExecuteItem:r}=e;const o=(0,a.Iy)().getNamesDefined$.useWithSelector(y,t);return o.length?(0,g.tZ)(s.D,{search:n,identifiers:o,onExecuteItem:r}):null},f=(0,r.xje)({key:"decorate_auto_complete_menu",isLeaf:!0,component:e=>{let{attributes:t,children:n,leaf:{variableInfo:o}}=e;const a=o.variableName,s=(0,d.vt)(),m=(0,d.UE)(),b=(0,l.l3)(),[y,f]=(0,c.useState)(!1),x=s&&m&&a&&!y,C=(0,c.useCallback)((e=>{if(x&&!e.shiftKey&&"Escape"===e.key)f(!0),e.stopPropagation(),e.preventDefault()}),[x]);(0,i.mR)("keydown",C,!0);const k=(0,c.useCallback)((e=>{x&&o&&((e,t,n)=>{const o=h(e,u.e6.start(t));u.YR.select(e,t),u.YR.delete(e),p(o)&&(0,r.OmN)(e," "),(0,r.OmN)(e,n.identifier),"function"!==n.kind&&(0,r.OmN)(e," ")})(b,o,e)}),[b,x,o]);var w;return x?(0,g.BX)("span",{...t,children:[(0,g.tZ)(v,{search:a,blockId:null!==(w=null===o||void 0===o?void 0:o.blockId)&&void 0!==w?w:"",onExecuteItem:k}),n]}):(0,g.tZ)("span",{...t,children:n})}});var x=n(85510),C=n(48881),k=n(17525),w=n(76261),E=n(61294),S=n(94866),T=n(47578),Z=n(86789);const I=e=>{let{name:t,elementTypes:n,interceptor:r}=e;return(0,l.p6)({key:t,withOverrides:e=>{var t;const o=null!==(t=e.interceptEvent)&&void 0!==t?t:()=>!1;return e.interceptEvent=(e,t,l)=>{if(n.includes(null===t||void 0===t?void 0:t[0].type)){if(r(e,t,l))return!0}return o(e,t,l)},e}})},D=["type","id","children","text","isHidden"],R=e=>{let{plugin:t,elementType:n,acceptableElementProperties:o,acceptableSubElements:a}=e;return e=>{const i=(0,l.iM)(e),{normalizeNode:s}=i,c=t&&t(e),d=((e,t,n)=>{const o=t&&new Set([...t].concat(D)),l=n&&new Set(n),a=e=>!(0,r.kKo)(e)||l&&!l.has(e.type)||!1;return t=>{const[n,l]=t,i=[];if(o)for(const e of Object.keys(n))o.has(e)||i.push(e);if(i.length>0)return(0,r.izS)(e,i,{at:l}),!0;if((0,r.kKo)(n)){var s;const t=(null===n||void 0===n||null===(s=n.children)||void 0===s?void 0:s.findIndex(a))||-1;if(t>=0){const n=[...l,t];return(0,r.nXd)(e,{at:n}),!0}}return!1}})(e,o,a),u=null==n||Array.isArray(n)?n:[n];return i.normalizeNode=e=>{const[t]=e;if(!u||(0,r.kKo)(t)){if(u){if(u.indexOf(t.type)<0)return s(e);if(d(e))return}if(c&&c(e))return}return s(e)},e}},N=e=>{let{name:t,...n}=e;return{key:t,withOverrides:R(n)}},L=e=>{let{name:t,...n}=e;return(0,l.p6)({key:t,withOverrides:R(n)})},M=e=>{let{name:t,plugin:n}=e;return(0,l.p6)({key:t,handlers:{onKeyDown:n}})},B=e=>{let{name:t,plugin:n}=e;return(0,l.p6)({key:t,withOverrides:e=>{const{apply:t}=e,r=n(e,t);return e.apply=e=>r(e),e}})};var O=n(79568);const A="AUTO_FORMAT_CODE_LINE_PLUGIN",_=e=>M({name:A,plugin:t=>n=>{const o=(0,x.x)(t,A,(()=>({}))),{lastFormattedBlock:a}=o,i=n.ctrlKey||n.altKey||n.metaKey;if(i||"="!==n.key)if(i||"Backspace"!==n.key)delete o.lastFormattedBlock;else{const e=(0,r.xmC)(t,{match:e=>(0,r.kKo)(e)&&e.type===l.Zv});if(!e)return;const[i,s]=e,c=(0,r.qcw)(i);a&&i.id===a.id&&""===c?(n.preventDefault(),(0,r.fLV)(t,{type:l.JB},{at:s}),(0,r.OmN)(t,a.oldText,{at:s}),delete o.lastFormattedBlock):""===c&&1===i.children.length&&(n.preventDefault(),(0,r.fLV)(t,{type:l.JB},{at:s}))}else{const a=(0,r.xmC)(t);if(!a)return;const{selection:i}=t;if(!i||!(0,r.zbr)(i))return;const[c,d]=a;if(c.type!==l.JB)return;const p=c,h="".concat((0,r.qcw)(p),"="),g="".concat(((e,t)=>(0,r.eNq)(e,{anchor:{path:t.path,offset:0},focus:{path:t.path,offset:t.offset}}))(t,i.focus),"=");if("="===h.trim()){n.preventDefault();const a=(0,Z.I)();if(a&&a.track("convert paragraph to code line because ="),(0,T.J8)("CODE_LINE_NAME_SEPARATED")){const n=e.getAvailableIdentifier("Name",1),r=(0,C.V)({varName:n});(0,k.s)(t,r,{at:d});const o=[...d,1];return void u.YR.select(t,o)}(0,r.fLV)(t,{type:l.Zv}),o.lastFormattedBlock={id:c.id,oldText:h}}else if(g.endsWith(" =")){var s;n.preventDefault();const{path:r}=i.focus,o=(null===(s=t.selection)||void 0===s?void 0:s.focus.offset)||0;P(t,e,{anchor:{path:r,offset:o},focus:{path:r,offset:o}},(e=>{S.EJ.next(e),S.w2.next({type:"action",action:"number created with ="})}))}}}}),P=(e,t,n,a,i)=>{if(!(0,w.m)(e,{at:n,match:e=>(0,E.M)(e,l.JB)}))return;const s=(0,C.V)({id:i,varName:t.getAvailableIdentifier("Name",1)}),c={[l.Ee]:!0,text:(0,o.v5)(s.id)},d=c;(0,k.s)(e,d,{voids:!0,at:n});const u=(0,r.ZJ1)(e,[n.anchor.path[0]]);(0,k.s)(e,s,{at:u}),setTimeout((()=>{const t=(0,r.rwb)(e,c),n=null===t||void 0===t?void 0:t.querySelector("[data-number-id]"),o=null===n||void 0===n?void 0:n.dataset.numberId;o&&a({numberId:o,codeLineId:s.id,numberNode:c,codeLineNode:s})}),100)},V=[{start:"{",end:"}"},{start:"[",end:"]"},{start:"(",end:")"}],H=e=>M({name:"AUTO_PAIR_PLUGIN",plugin:t=>n=>{const{selection:o}=t;if(o){const a=u.e6.start(o),i=(0,r.Ow4)(t,a);if(i){const[o]=i;if((0,E.M)(o,l.Zv)||(0,E.M)(o,l.$)){let o=a.offset;o=(0,r.Ga5)(i).filter((e=>{let[n,r]=e;return u.y$.isBefore(r,t.selection.anchor.path)})).reduce(((t,n)=>{let[o]=n;return(0,E.M)(o,l.bM)?t+(e.getSymbolDefinedInBlock(o.blockId)||"").length:t+(0,r.qcw)(o).length}),0)+o;const s=V.find((e=>e.start===n.key)),c=(0,r.Ga5)(i).reduce(((t,n)=>{let[o]=n;return(0,E.M)(o,l.bM)?t+(e.getSymbolDefinedInBlock(o.blockId)||""):t+(0,r.qcw)(o)}),"");s&&((e,t)=>"\n"===e[t]||void 0===e[t])(c,o)&&(n.preventDefault(),t.insertText(s.start+s.end),(0,r.Y47)(t,{distance:1,unit:"offset",reverse:!0}));const d=V.find((e=>e.end===n.key));if(d&&c[o]===d.end&&(n.preventDefault(),(0,r.Y47)(t,{distance:1,unit:"offset"})),"Backspace"===n.key){const e=V.find((e=>e.start===c[o-1])),n=V.find((e=>e.end===c[o]));e&&n&&e===n&&((0,r.Y47)(t,{unit:"offset",distance:1}),(0,r.nXd)(t,{unit:"character",distance:1,reverse:!0}))}}}}}})();var W=n(17395);const K=()=>(0,W.VY)({renderAboveEditable:e=>{let{children:t}=e;return(0,g.BX)(W.D8,{getBoundaries:()=>["html"],children:[(0,g.tZ)(W.dV,{placement:"left",size:"50vw",style:{top:-104,zIndex:1}}),(0,g.tZ)(W.dV,{placement:"right",size:"50vw",style:{top:-104,zIndex:1}}),t]})},inject:{aboveComponent:null}});var U=n(74029),X=n(50470),$=n(25555);const q=e=>JSON.parse(JSON.stringify(e)),j={rules:[{validNodeName:"DIV",validAttribute:{"data-type":"callout","data-color":U.kV,"data-icon":X.x.map((e=>e))}}],getNode:e=>(e=>{let{text:t,color:n,icon:r}=e;return{id:(0,$.x0)(),type:l.SD,children:[{text:t}],color:n,icon:r}})({text:q(e.innerText),color:e.getAttribute("data-color")||void 0,icon:e.getAttribute("data-icon")||void 0})},G=(0,l.p6)({key:l.SD,isElement:!0,component:S.UW,deserializeHtml:j,serializeHtml:e=>{let{element:t}=e;return(0,g.tZ)("div",{"data-type":"callout","data-color":t.color,"data-icon":t.icon,children:(0,r.qcw)(t)})}});var F=n(60058);const z={rules:[{validNodeName:"CODE"},{validNodeName:"OUTPUT"}],getNode:e=>(0,C.b)({code:"OUTPUT"===e.nodeName.toUpperCase()?"":q(e.innerText)})},Y=e=>{let{element:t}=e;return(0,g.tZ)("code",{children:(0,r.qcw)(t)})};var J=n(45202),Q=n(37247),ee=n(10271),te=n(82302);const ne="smart-cell",re=e=>t=>{(e=>t=>{if(e.dragging===S.Fh){e.dragging=null,te.yW.set.isDragging(!1),t.preventDefault(),t.stopPropagation(),(0,J.v)(e)(t);const n=(0,Q.r)(t.dataTransfer);if(!n)return;const a=[];n.forEach((t=>{if(t.type===l.Zv){var n;const i=(0,r.DYv)(e,{at:[],match:e=>e.id===t.id});if(!i)return;const[,s]=i,c=null!==(n=(0,r.xmC)(e))&&void 0!==n?n:[],[d]=c;if(!d)return;const u=t.id,p=(0,ee.S)((0,r.qcw)(t),s,u).find((e=>e.isDeclaration));if(p&&(0,r.$KD)(p.variableName)&&d.type===l.Zv){const t=e.selection,n=(0,r.T2j)(e,t);n&&(0,r.eNq)(e,{anchor:n,focus:t.focus}).trim().length&&a.push({text:" "}),a.push({text:p.variableName});const o=(0,r.Mxs)(e,t);o&&(0,r.eNq)(e,{anchor:t.focus,focus:o}).trim().length&&a.push({text:" "})}d.type===l.JB&&a.push({text:(0,o.v5)(u),[l.Ee]:!0})}})),e.insertFragment(a),(0,r.KyJ)(e)||(0,r.$Rk)(e)}})(e)(t),(e=>t=>{if(e.dragging===ne){var n;e.dragging=null,te.yW.set.isDragging(!1),t.preventDefault(),t.stopPropagation(),(0,J.v)(e)(t);const o=(0,Q.r)(t.dataTransfer);if(!o)return;const[a]=o,i=null!==(n=(0,r.xmC)(e))&&void 0!==n?n:[],[s]=i;if(!s)return;const c=[];s.type===l.Zv||s.type===l.$?c.push({text:a}):s.type!==l.JB&&s.type!==l.wl||c.push({text:a,[l.Ee]:!0}),c.length&&e.insertFragment(c)}})(e)(t),(e=>t=>{if(e.dragging===S.iL){e.dragging=null,te.yW.set.isDragging(!1),t.preventDefault(),t.stopPropagation(),(0,J.v)(e)(t);const n=(0,Q.r)(t.dataTransfer);if(!n)return;const o=[];n.forEach((t=>{var n;const a=null!==(n=(0,r.xmC)(e))&&void 0!==n?n:[],[i,s]=a;if(!i)return;const c="lookup(".concat(t.tableName,', "').concat(t.cellValue,'").').concat(t.columnName);i.type===l.Zv?o.push({text:c}):((0,r.np2)(e,i)&&(0,r.r4l)(e,{at:s}),(0,k.s)(e,{id:(0,$.x0)(),type:l.Zv,children:[{text:c}]}))})),e.insertFragment(o)}})(e)(t)},oe=S.EH,le=(e,t)=>{(0,r.kKo)(t)&&t.children.forEach((t=>{le(e,t)})),(0,r.GsE)(t)&&t.text.includes("\xa0")&&(t.text=t.text.replaceAll("\xa0"," "))},ae=(e,t)=>{const[,n]=t,o=(n,o)=>{if(!o)return;const l={anchor:n,focus:o};if(!(0,r.jks)(e,{at:l})){const a=(0,r.eNq)(e,{anchor:n,focus:o});/\s/.test(a)&&((0,r.nXd)(e,{at:l}),ae(e,t))}},l=(0,r.plg)(e,n);l&&o(l,(0,r.Mxs)(e,l));const a=(0,r.ZJ1)(e,n);a&&o(a,(0,r.T2j)(e,a))},ie=(e,t)=>{if("set_selection"!==t.type||!t.properties)return;let n;try{n=(0,r.Zg$)(e,{at:t.properties,match:e=>(0,r.kKo)(e)&&e.type===l.Zv})}catch(c){return}if(!n)return;const[,o]=n;let a;try{a=(0,r.zwG)(e,{at:t.newProperties,match:e=>(0,r.kKo)(e)&&e.type===l.Zv})}catch(c){return}if(a)return;const i=Array.from((0,r.Eln)(e,o));let s=-1;for(const l of i){s+=1;const[n,o]=l;if(!s&&(0,r.GsE)(n)){const{text:l}=n,a=l.indexOf("="),i=l.indexOf("==");if(a>0&&a!==i){if(" "!==l[a-1])return(0,r.OmN)(e," ",{at:{offset:a,path:o}}),void ie(e,t);const n=(0,r.Mxs)(e,{offset:a,path:o}),i=l[a+1];if(n&&" "!==i)return(0,r.OmN)(e," ",{at:{offset:a+1,path:o}}),void ie(e,t)}}}ae(e,n)},se=e=>{const{insertText:t,apply:n}=e;return e.insertText=n=>{if("\n"===n&&e.selection&&(0,r.zbr)(e.selection)&&((0,r.zwG)(e,{match:{type:l.Zv}})||(0,r.zwG)(e,{match:{type:l.$}}))){if("{"===(0,r.eNq)(e,(0,r.rxh)(e,e.selection,(0,r.T2j)(e,e.selection))))return t("\n  \n"),void(0,r.Y47)(e,{reverse:!0})}t(n)},e.apply=t=>{"insert_node"!==t.type||(0,r.njR)(e,t.node)||le(e,t.node),ie(e,t),n(t)},e};var ce=n(72603),de=n(24568),ue=n(55013);const pe=e=>t=>n=>{if("Enter"!==n.key)return;const a=(e=>{const t=(0,r.xmC)(e);if(!t)return;const[n]=t;return n.type===l.Zv||n.type===l.$?t:void 0})(t);if(!a)return;const i=a[1];if(n.shiftKey){n.preventDefault(),(0,ce.sN)(t,i,!0);const e=[i[0]+1,0];return void(0,de.Y)(t,e)}const s=(e=>(t,n)=>{var a,i,s,c,d,p;const h=null!==(a=null===(i=e.selection)||void 0===i||null===(s=i.anchor)||void 0===s?void 0:s.offset)&&void 0!==a?a:0,g=null!==(c=null===(d=e.selection)||void 0===d||null===(p=d.focus)||void 0===p?void 0:p.offset)&&void 0!==c?c:0;let m=h<g?h:g;if(null==m||null==(h>g?h:g))return!1;const b=(0,ue.m0)((0,r.xmC)(e,{match:e=>(0,r.kKo)(e)&&(e.type===l.Zv||e.type===l.$)})),y=(0,r.Ga5)(b),v=y.reduce(((e,t)=>{let[o]=t;return(0,r.kKo)(o)&&o.type===l.bM?e+(n.getSymbolDefinedInBlock(o.blockId)||""):e+(0,r.qcw)(o)}),"");m=y.filter((t=>{let[n,r]=t;return u.y$.isBefore(r,e.selection.anchor.path)})).reduce(((e,t)=>{let[o]=t;return(0,r.kKo)(o)&&o.type===l.bM?e+(n.getSymbolDefinedInBlock(o.blockId)||"").length:e+(0,r.qcw)(o).length}),0)+m;const f="".concat(v.slice(0,m),"\n");return!(0,o.wS)(f).some((e=>e.type===o.l1))})(t)(a,e);s?(n.preventDefault(),t.insertText("\n")):(n.preventDefault(),((e,t)=>{var n;if(!(null===(n=e.selection)||void 0===n?void 0:n.focus))return;const o=(0,r.ZJ1)(e,t[1]);(0,r.$Rk)(e,{focus:o,anchor:o})})(t,a))},he=e=>({key:l.Zv,isElement:!0,component:oe,deserializeHtml:z,serializeHtml:Y,decorate:(0,F.S)(l.Zv),withOverrides:se,handlers:{onDrop:re,onKeyDown:pe(e)}});var ge=n(12431),me=n(24217);const be={element:["type","children","id","isHidden"],text:["text"]},ye=e=>(0,r.kKo)(e)?be.element:be.text,ve=e=>{let[t,n]=e;if(!(0,r.kKo)(t)&&!(0,r.GsE)(t))throw console.error("Detected a node",t,"that is neither element nor text - at path",n),new Error("Detected a node that is neither element nor text");if((0,r.kKo)(t)&&(0,r.GsE)(t))throw console.error("Detected a node",t,"that is both element and text - at path",n),new Error("Detected a node that is both element and text")},fe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ve(t);const[o,l]=t,a=Object.keys((0,r.uET)(o)),i=ye(o),s=a.filter((e=>!i.includes(e)&&!n.includes(e)));return(0,r.izS)(e,s,{at:l}),!!s.length},xe=(e,t,n)=>{let[o,a]=n;const i=Array.from((0,r.Eln)(t,a));for(const s of i){const[n,o]=s;if((0,r.GsE)(n)){const{text:e}=n;for(let n=0;n<e.length;n+=1){const l=e[n];if(n<e.length-1){const a=e[n+1];if("{"===l&&(0,r.$KD)(a)&&!["\n","}"].includes(a))return(0,r.OmN)(t,"\n  ",{at:{offset:n+1,path:o}}),!1}if("}"===l){if(!n)return(0,r.OmN)(t,"\n",{at:{offset:n,path:o}}),!1;const l=e[n-1];if((0,r.$KD)(l)&&!["\n","{"].includes(l))return(0,r.OmN)(t,"\n",{at:{offset:n,path:o}}),!1}if("\t"===l)return(0,r.kRc)(t,(()=>{(0,r.nXd)(t,{at:{offset:n,path:o}}),(0,r.OmN)(t,"  ",{at:{offset:n,path:o}})})),!0}}if((0,r.kKo)(n)&&n.type!==l.bM)return(0,r.LKm)(t,{at:o}),!0;if((0,ge.I)(n,o,t,e))return!0;if(!(0,r.kKo)(n)&&fe(t,s))return!0}return!1},Ce=e=>t=>n=>((0,me.I)(n[0],l.Zv),!!xe(e,t,n)),ke=e=>N({name:"NORMALIZE_CODE_LINE_PLUGIN",elementType:l.Zv,plugin:Ce(e)}),we=(e,t)=>{for(const n of t){const[t,o]=n;if((0,r.kKo)(t)){return""===(0,r.qcw)(t)?((0,r.r4l)(e,{at:o}),!0):((0,r.LKm)(e,{at:o}),!0)}if((0,r.GsE)(t)&&fe(e,n))return!0}return!1},Ee=e=>N({name:"NORMALIZE_CODE_LINE_V2_CODE",elementType:l.$,acceptableSubElements:[],plugin:t=>n=>!!(0,E.M)(n[0],l.$)&&xe(e,t,n)}),Se=e=>({key:"CONTAIN_SELECTION_".concat(e),withOverrides:t=>{const n=t.onChange;let o;return t.onChange=()=>{n(),clearTimeout(o),o=setTimeout((()=>{let n,o;t.selection&&!(0,r.zbr)(t.selection)&&!u.y$.equals(t.selection.anchor.path,t.selection.focus.path)&&(n=(0,r.xmC)(t,{at:t.selection.anchor.path}))&&(o=(0,r.xmC)(t,{at:t.selection.focus.path}))&&!u.y$.equals(n[1],o[1])&&(0,E.M)(n[0],e)&&(0,r.Z5U)(t,{anchor:t.selection.anchor,focus:t.selection.anchor})}))},t}}),Te=e=>({key:"CODE_LINE_V2_ROOT",plugins:[{key:l.$,isElement:!0,component:S.wo,decorate:(0,F.S)(l.$)},{key:l.qG,isElement:!0,component:S.WK},{key:l.l7,isElement:!0,component:S.Hl},N({name:"NORMALIZE_CODE_LINE_V2",elementType:l.l7,acceptableSubElements:[l.qG,l.$],plugin:e=>t=>{let[n,o]=t;if((0,E.M)(n,l.l7)){if(!n.children)return(0,r.fLV)(e,{children:[{text:""}]},{at:o}),!0;if(n.children.length<1)return(0,k.s)(e,{type:l.qG,id:(0,$.x0)(),children:[{text:""}]},{at:[...o,0]}),!0;if(n.children[0].type!==l.qG)return(0,r.r4l)(e,{at:[...o,0]}),!0;if(n.children.length<2)return(0,k.s)(e,{type:l.$,id:(0,$.x0)(),children:[{text:""}]},{at:[...o,1]}),!0;if(n.children[1].type!==l.$)return(0,r.r4l)(e,{at:[...o,1]}),!0;if(!(0,E.M)(n.children[0],l.qG))return(0,r.r4l)(e,{at:[...o,0]}),!0;if(!(0,E.M)(n.children[1],l.$))return(0,r.r4l)(e,{at:[...o,1]}),!0;if(n.children.length>2)return(0,r.r4l)(e,{at:[...o,2]}),!0}return!1}}),Ee(e),N({name:"NORMALIZE_CODE_LINE_V2_VARNAME",elementType:l.qG,acceptableSubElements:[],plugin:e=>t=>!(!(0,E.M)(t[0],l.qG)||!we(e,(0,r.Eln)(e,t[1])))}),Se(l.$),Se(l.qG),lo(e.getAvailableIdentifier.bind(e)),I({name:"INTERCEPT_CODE_LINE_V2",elementTypes:[l.l7],interceptor:(e,t,n)=>"Enter"!==n.event.key})()]});var Ze=n(74285);const Ie=(0,l.p6)({key:"decorate_code_variable",isLeaf:!0,component:e=>{let{attributes:t,children:n,leaf:{variableName:o,blockId:i,isDeclaration:s,text:d}}=e;const u=(0,a.Iy)(),p=u.getVarBlockId$.use(o),h=((e,t)=>null!==t&&void 0!==t&&t.local.has(e)?"local":null!==t&&void 0!==t&&t.global.has(e)?"global":"undefined")(o,u.getBlockIdResult$.useWithSelector((e=>null===e||void 0===e?void 0:e.visibleVariables),i)),m="undefined"===h,b=!s&&!m&&"string"===typeof p,y=(0,l.l3)(),v=(0,c.useCallback)((()=>{if(b&&p){const e=document.getElementById(p);if(e){const t=(0,r.vqV)(y,e);if(t){const e=(0,r.O$c)(y,t);if(e){(0,r.$Rk)(y);const t=(0,r.ZJ1)(y,e);(0,r.Z5U)(y,{anchor:t,focus:t})}}}}}),[p,y,b]);return d?(0,g.tZ)("span",{...t,children:(0,g.tZ)(Ze.n,{provideVariableDefLink:b,variableScope:h,variableMissing:m&&!s,defBlockId:p,onGoToDefinition:v,children:n})}):(0,g.tZ)("span",{...t,children:n})}}),De={rules:[{validNodeName:"HR"}],getNode:()=>({id:(0,$.x0)(),type:l.cI,children:[{text:""}]})},Re=(0,l.p6)({key:l.cI,isVoid:!0,isElement:!0,component:S.iz,deserializeHtml:De,serializeHtml:()=>(0,g.tZ)("hr",{})});var Ne=n(9727),Le=n(63312);const Me=(e,t)=>{const n=[[" + "," + "],[" "," + "],[" + "," "]];for(let[r,l]of n)if((0,o.fh)("".concat(e+r,"smartRef").concat(l).concat(t)).solution)return" "===r[0]&&" "===(0,ue.Z$)(e)&&(r=r.slice(1))," "===(0,ue.Z$)(l)&&" "===t[0]&&(l=l.slice(0,-1)),{textBefore:r,textAfter:l};return{textBefore:" ",textAfter:" "}};const Be=e=>t=>n=>{if(t.dragging===Ne.Vj){var a,i;t.dragging=null,te.yW.set.isDragging(!1),n.preventDefault(),n.stopPropagation(),(0,J.v)(t)(n);const s=n.dataTransfer.getData(Ne.w1);if(!s)return;const c=(0,Le.K_)(t);if(!c)return;const[d,p]=null!==(a=(0,r.xmC)(t,{at:c}))&&void 0!==a?a:[];if(!d||!p||!(0,r.kKo)(d))return;if(!e.getBlockIdResult$.get(s))return;const{textBefore:h,textAfter:g}=null!==(i=function(e,t,n){let{path:o,offset:a}=n;const[i]=u.y$.relative(o,t);if(null==i)return;const s=e.children.slice(0,i),c=e.children.slice(i+1),d=e.children[i];if(null==d)return;const p=e=>e.reduce(((e,t)=>e+((0,r.kKo)(t)&&t.type===l.bM?"smartrefplaceholder":(0,r.qcw)(t))),""),h=p(s)+p([d]).slice(0,a),g=p([d]).slice(a)+p(c);return{textBefore:h,textAfter:g}}(d,p,c))&&void 0!==i?i:{};if(null==h||null==g)return;const m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";switch(e){case l.$:case l.Zv:case l.We:{const{textBefore:e,textAfter:o}=Me(n,r);return[{text:e},{id:(0,$.x0)(),type:l.bM,blockId:t,children:[{text:""}]},{text:o}]}case l.wl:case l.JB:return[{text:(0,o.v5)(t),[l.Ee]:!0}];default:return}}(d.type,s,h,g);null!=m&&(0,k.s)(t,m),(0,r.KyJ)(t)||(0,r.$Rk)(t)}};const Oe=e=>({key:Ne.Vj,handlers:{onDrop:Be(e)}});var Ae=n(66840);const _e=(0,r.MTn)("cursor")({cursors:{}}),Pe=()=>({key:"drag-over-cursor",handlers:{onDragOver:e=>t=>{if(e.isDragging)return;const n=(0,r.uZn)(e,t);n&&_e.set.cursors({drag:{key:"drag",data:{style:{backgroundColor:(0,Ae.g)("droplineColor"),width:2}},selection:n}})},onDragLeave:()=>()=>{_e.set.cursors({})},onDragEnd:()=>()=>{_e.set.cursors({})},onDrop:()=>()=>{_e.set.cursors({})}}});var Ve=n(27629);var He={name:"u7vgf3--LoadingIndicator--LoadingIndicator",styles:"display:grid;place-items:center;label:-LoadingIndicator--LoadingIndicator;"},We={name:"o07tky--LoadingIndicator--LoadingIndicator",styles:"width:min(100%, 60px);height:min(100%, 60px);label:-LoadingIndicator--LoadingIndicator;"};const Ke=()=>(0,g.tZ)("div",{css:He,children:(0,g.tZ)("div",{css:We,children:(0,g.tZ)(Ve.g,{})})}),Ue=e=>((0,a.ih)(),(0,g.tZ)("div",{...e.attributes,children:(0,g.BX)("div",{contentEditable:!1,children:[(0,g.tZ)(Ke,{}),e.children]})})),Xe=e=>{const t=(0,c.lazy)(e);return e=>(0,g.tZ)(c.Suspense,{fallback:(0,g.tZ)(Ue,{...e}),children:(0,g.tZ)(t,{...e})})},$e=Xe((()=>n.e(7143).then(n.bind(n,95010)))),qe=(0,l.p6)({key:l.if,isElement:!0,isVoid:!0,component:$e});var je=n(60357);const Ge=B({name:"USE_EDITOR_APPLY_ERROR_REPORTER",plugin:(e,t)=>{const n=[];return r=>{(e=>{n.push(e),n.length>50&&n.shift()})(r);try{t.call(e,r)}catch(o){throw console.error(o),console.error("history:",n),(0,je.Tb)(o,{extra:{"editor.history":n,"editor.children":e.children,"editor.apply.op":r}}),o}}}});var Fe=n(82623),ze=n(426),Ye=n(79820);const Je=e=>(0,g.tZ)("div",{css:Qe,spellCheck:!1,children:e.children}),Qe=(0,ze.css)(Ye.TU,{gridArea:"code",marginTop:"16px",padding:"4px 10px",borderRadius:"10px",border:"1px solid ".concat((0,Ae.g)("borderColor"))},";label:-EvalCodeArea--containerStyles;");var et=n(50576),tt=n.n(et),nt=n(55659);const rt=tt().debounce(nt.X,250),ot={key:l.ZH,isElement:!0,component:e=>{const t=(0,l.l3)(),n=e.element,o=(0,r.qcw)(n),a=(0,Fe.Z)(t,n,"result");return(0,c.useEffect)((()=>{var e;null===(e=rt(o))||void 0===e||e.then((e=>a(e))).catch((e=>console.error(e)))}),[a,o]),(0,g.tZ)(S.vL,{blockKind:"codeLine",element:n,...e.attributes,children:(0,g.tZ)(Je,{children:e.children})})}},lt=e=>(0,T.J8)("UNSAFE_JS_EVAL")?[ot]:[];const at=(e,t)=>{var n;const o=e.selection&&(0,r.zbr)(e.selection)?e.selection.focus.path:void 0;if(!it(e,o)||!o||!e.selection)return!1;const l=u.ML.above(e,{at:o,match:t=>u.ML.isBlock(e,t)});if(null===l||void 0===l||null===(n=l[0])||void 0===n||!n.children)return!1;const[a,i]=u.ML.edges(e,l[1]);return 0===u.E9.compare(e.selection.focus,"end"===t?i:a)},it=(e,t)=>{if(!t)return!1;const n=t&&(0,r.MkB)(e,t);return null!=n&&!(0,r.hzc)(n)&&!(0,r.kKo)(n)&&"text"in n},st=()=>({key:"EVENT_INTERCEPTION_PLUGIN",handlers:{onKeyDownCapture:e=>t=>{const n=e.selection&&(0,r.zbr)(e.selection)&&e.selection.focus.path,o=n&&function(e,t){var n;const o=[...u.ML.levels(e,{match:r.kKo,at:t,reverse:!0})];return null!==(n=o.find((e=>(0,E.M)(e[0],l.VE))))&&void 0!==n?n:(0,ue.Z$)(o)}(e,n);if(!n)return;const a=(0,r.Lfg)(e,n);if(o){var i;const r=u.ML.previous(e,{at:o[1]}),s=u.ML.next(e,{at:o[1]});if("INPUT"===(null===(i=document.activeElement)||void 0===i?void 0:i.tagName)||a.type===l.wl)return;switch(t.key){case"Backspace":if(at(e,"start")){ct(e,{type:"delete-text-start",event:t},n)||null==r||ct(e,{type:"delete-block",event:t},r[1])}return;case"Delete":if(at(e,"end")){ct(e,{type:"delete-text-end",event:t},n)||null==s||ct(e,{type:"delete-block",event:t},s[1])}return;case"Enter":ct(e,{type:"on-enter",event:t},n)}}}}});function ct(e,t,n){const o=[...u.ML.levels(e,{match:r.kKo,reverse:!0,at:n})];for(const r of o){var a;if(r[0].type===l.VE)return!0;if(!0===(null===(a=e.interceptEvent)||void 0===a?void 0:a.call(e,e,r,t)))return t.event.preventDefault(),t.event.stopPropagation(),!0}return!1}var dt,ut=n(38238),pt=n.n(ut),ht=n(37245);(0,ht.Ps)(dt||(dt=pt()(["\n  mutation AttachFileToPad($handle: ID!) {\n    attachFileToPad(handle: $handle) {\n      id\n      fileName\n      fileType\n      fileSize\n      url\n    }\n  }\n"])));var gt;(0,ht.Ps)(gt||(gt=pt()(["\n  mutation CreateExternalDataSource(\n    $name: String!\n    $padId: ID!\n    $provider: ExternalProvider!\n    $externalId: String!\n  ) {\n    createExternalDataSource(\n      dataSource: {\n        name: $name\n        padId: $padId\n        provider: $provider\n        externalId: $externalId\n      }\n    ) {\n      id\n      dataUrl\n      authUrl\n    }\n  }\n"])));var mt;(0,ht.Ps)(mt||(mt=pt()(["\n  mutation RenamePad($padId: ID!, $name: String!) {\n    updatePad(id: $padId, pad: { name: $name }) {\n      id\n      name\n    }\n  }\n"])));var bt;(0,ht.Ps)(bt||(bt=pt()(["\n  query GetCreateAttachmentForm(\n    $padId: ID!\n    $fileName: String!\n    $fileType: String!\n  ) {\n    getCreateAttachmentForm(\n      padId: $padId\n      fileName: $fileName\n      fileType: $fileType\n    ) {\n      url\n      handle\n      fields {\n        key\n        value\n      }\n    }\n  }\n"])));var yt;(0,ht.Ps)(yt||(yt=pt()(["\n  query GetPadById($id: ID!) {\n    getPadById(id: $id) {\n      id\n      name\n      myPermissionType\n      icon\n      isPublic\n      access {\n        users {\n          user {\n            id\n            name\n          }\n          permission\n        }\n        secrets {\n          permission\n          secret\n        }\n      }\n      workspace {\n        id\n        name\n      }\n    }\n  }\n"])));let vt,ft;!function(e){e.googlesheets="googlesheets",e.testdatasource="testdatasource"}(vt||(vt={})),function(e){e.ADMIN="ADMIN",e.READ="READ",e.WRITE="WRITE"}(ft||(ft={}));var xt=n(76885);const Ct=e=>t=>{const{insertData:n}=t;return t.insertData=t=>{(async()=>{const n=t.getData("text/plain"),[r,o]=await(0,xt.e1)(n);r&&(null===e||void 0===e||e.next({type:"pasted-link",url:n,source:o}))})(),n(t)},t},kt=Xe((()=>n.e(4709).then(n.bind(n,5305)))),wt=e=>({key:l.cR,isElement:!0,component:kt,withOverrides:Ct(e)});var Et=n(71799);const St={name:"1hcn7y1--EditorColumns--styles",styles:"display:flex;flex-wrap:wrap;gap:0px 52px;label:-EditorColumns--styles;"},Tt=(0,ze.css)({flexGrow:1,flexBasis:"calc((".concat(Et.cR,"px - 100%) * 999)")},";label:-EditorColumns--itemStyles;"),Zt=e=>{let{children:t}=e;return(0,g.tZ)("ul",{css:St,children:c.Children.map(t,(e=>(0,g.tZ)("li",{css:Tt,children:e})))})},It=(0,l.p6)({key:l.VE,isElement:!0,component:e=>{let{attributes:t,children:n,element:r}=e;if(!r||r.type!==l.VE)throw new Error("Columns is meant to render columns elements");if("data-slate-leaf"in t)throw new Error("Columns is not a leaf");const o=r.children.map((e=>e.id));return(0,g.tZ)(S.vL,{blockKind:"columns",element:r,disableDrag:!0,dependencyId:o,...t,children:(0,g.tZ)(Zt,{children:n})})}});var Dt=n(22690);const Rt=(0,Dt.Z)("div",{target:"exct0en1",label:"-FloatingLink--IconWrapper"})("display:flex;padding-left:8px;padding-right:8px;align-items:center;color:",(0,Ae.g)("weakerTextColor"),";"),Nt=(0,Dt.Z)("div",{target:"exct0en0",label:"-FloatingLink--InputWrapper"})({name:"ytqldz",styles:"display:flex;padding-top:8px;padding-bottom:8px;align-items:center"}),Lt={name:"1pghg6e--FloatingLink--inputCss",styles:"padding:0;background-color:transparent;font-size:14px;margin-right:8px;flex-grow:1;height:32px;border-style:none;line-height:20px;:focus{outline:none;};label:-FloatingLink--inputCss;"},Mt=(0,ze.css)("background:",(0,Ae.g)("backgroundColor"),";z-index:20!important;border-radius:4px;box-shadow:rgb(15 15 15 / 5%) 0 0 0 1px,rgb(15 15 15 / 10%) 0 3px 6px,rgb(15 15 15 / 20%) 0 9px 24px;;label:-FloatingLink--floatingLinkRootCss;"),Bt=()=>(0,g.tZ)("div",{css:(0,ze.css)("margin-left:0.5rem;margin-right:0.5rem;background-color:",(0,Ae.g)("strongHighlightColor"),";width:1px;height:1.25rem;;label:-FloatingLink--VerticalDivider;")}),Ot=(0,ze.css)("display:inline-flex;position:relative;padding:4px 10px;text-align:center;justify-content:center;align-items:center;max-width:100%;font-weight:500;border-width:0;cursor:pointer;background-color:",(0,Ae.g)("backgroundColor"),";:hover{background-color:",(0,Ae.g)("tintedBackgroundColor"),";}:active{background-color:",(0,Ae.g)("tintedBackgroundColor"),";}font-family:inherit;font-size:14px;border-radius:3px;color:inherit;:active{color:inherit;}:visited{color:inherit;};label:-FloatingLink--buttonCss;"),At=[r.eOs,(0,ze.css)("padding:4px;background-color:",(0,Ae.g)("backgroundColor"),";:hover{background-color:",(0,Ae.g)("tintedBackgroundColor"),";}:active{background-color:",(0,Ae.g)("tintedBackgroundColor"),";};label:-FloatingLink--iconButtonCss;")];var _t={name:"kjjq5v--FloatingLink--FloatingLink",styles:"width:auto;label:-FloatingLink--FloatingLink;"},Pt={name:"1o1b1p5--FloatingLink--editContent",styles:"display:flex;padding:4px 8px;flex-direction:row;align-items:center;width:auto;label:-FloatingLink--editContent;"},Vt={name:"16gu10l--FloatingLink--input",styles:"display:flex;flex-direction:column;width:330px;label:-FloatingLink--input;"};const Ht=()=>{const e=(0,r.$Qv)().isEditing(),t=(0,g.BX)("div",{css:Vt,children:[(0,g.BX)(Nt,{children:[(0,g.tZ)(Rt,{children:(0,g.tZ)(r.xPt,{width:18})}),(0,g.tZ)(r.TeP.UrlInput,{css:Lt,placeholder:"Paste link"})]}),(0,g.tZ)("div",{css:(0,ze.css)("background-color:",(0,Ae.g)("strongHighlightColor"),";height:1px;;label:-FloatingLink--input;")}),(0,g.BX)(Nt,{children:[(0,g.tZ)(Rt,{children:(0,g.tZ)(r.TLL,{width:18})}),(0,g.tZ)(r.TeP.TextInput,{css:Lt,placeholder:"Text to display"})]})]}),n=e?t:(0,g.BX)("div",{css:Pt,children:[(0,g.tZ)(r.TeP.EditButton,{css:Ot,children:"Edit"}),(0,g.tZ)(Bt,{}),(0,g.tZ)(r.TeP.UnlinkButton,{css:At,children:"Unlink"}),(0,g.tZ)(Bt,{}),(0,g.tZ)(r.TeP.OpenLinkButton,{css:At,children:"Open"})]});return(0,g.BX)(g.HY,{children:[(0,g.tZ)(r.TeP.InsertRoot,{css:Mt,children:t}),(0,g.tZ)(r.TeP.EditRoot,{css:[Mt,_t,";label:-FloatingLink--FloatingLink;"],children:n})]})},Wt=()=>(0,r.Tvz)({renderAfterEditable:Ht});var Kt=n(96294),Ut=n(86928),Xt=n(68861);const $t=(0,ze.css)(Ye.v5,"position:relative;;label:-Tag--tagStyles;"),qt=e=>{let{children:t,explanation:n}=e;const r=(0,g.tZ)("span",{contentEditable:!1,css:$t,children:t});return(0,g.tZ)(Xt.u,{trigger:r,children:n})};var jt=n(84286),Gt=n(57481);const Ft=(0,ze.css)({maxWidth:"".concat(Et.cR,"px"),marginBottom:"8px"},";label:-EditableLiveDataCaption--editableLiveCaptionStyles;"),zt=(0,ze.css)({alignItems:"center",display:"flex",gap:"9px",lineBreak:"unset",width:"min-content",background:(0,Ae.g)("liveDataBackgroundColor"),borderRadius:"6px",padding:"2px 8px",marginTop:"2.5px"},";label:-EditableLiveDataCaption--tableTitleWrapper;"),Yt={name:"3vxyj5--EditableLiveDataCaption--iconWrapperStyles",styles:"padding:4px;height:16px;width:16px;margin-top:0;transform:translateY(-7%);label:-EditableLiveDataCaption--iconWrapperStyles;"},Jt=(0,ze.css)({"svg > path":{fill:(0,Ae.g)("liveDataBackgroundColor"),stroke:(0,Ae.g)("liveDataTextColor")}},";label:-EditableLiveDataCaption--iconSvgStyles;"),Qt=(0,ze.css)({...Ye.t5,color:(0,Ae.g)("liveDataTextColor"),minWidth:"1rem"},";label:-EditableLiveDataCaption--editableTableCaptionStyles;"),en=(0,ze.css)({"::before":{...(0,Ae.m)("currentTextColor",(0,Ae.g)("weakTextColor")),content:"attr(aria-placeholder)"}},";label:-EditableLiveDataCaption--notSelectedAriaStyles;"),tn=e=>{let{empty:t=!1,source:n,url:r,range:o,children:l}=e;const[a]=c.Children.toArray(l),i=(0,d.vt)();return(0,g.tZ)("div",{css:Ft,children:(0,g.BX)("div",{css:zt,children:[(0,g.tZ)("div",{css:[Yt,Jt,";label:-EditableLiveDataCaption--EditableLiveDataCaption;"],contentEditable:!1,children:(0,g.tZ)(jt.i,{})}),(0,g.tZ)("div",{"aria-placeholder":t?"LiveConnection":"",css:[Qt,!i&&en,";label:-EditableLiveDataCaption--EditableLiveDataCaption;"],children:a}),n&&(0,g.tZ)(qt,{explanation:r&&(0,g.BX)("a",{href:r,rel:"noreferrer",target:"_blank",children:[r,(0,g.tZ)("br",{}),(0,g.tZ)("br",{}),n.trim()]}),children:(0,g.tZ)("span",{css:(0,ze.css)({textTransform:"uppercase",color:"".concat((0,Gt.KZ)(Gt.lz,Gt.j7).rgba)},";label:-EditableLiveDataCaption--EditableLiveDataCaption;"),children:""!==o?"".concat(o):"LIVE"})})]})})};var nn=n(74125),rn=n.n(nn);const on=Xe((()=>n.e(5098).then(n.bind(n,85217)))),ln=(0,l.p6)({key:l.cL,isElement:!0,component:on,plugins:[{key:l.YA,isElement:!0,component:e=>{let{element:t,attributes:n,children:o}=e;(0,me.I)(t,l.YA);const a=(0,Kt.m)(t),i=(0,l.l3)(),s=(0,c.useMemo)((()=>a&&(0,r.Ow4)(i,a)),[i,a]),{sourceName:d,url:u,returnRange:p}=(0,c.useMemo)((()=>{var e;const t=null!==(e=null===s||void 0===s?void 0:s[0].source)&&void 0!==e?e:"",n=null===s||void 0===s?void 0:s[0].url,r=t&&null!=n&&(0,xt.Sj)(t,n)||null!=n&&{userUrl:n}||void 0,{isRange:o,range:l,subsheetName:a,userUrl:i}=r||{},c=(null===l||void 0===l?void 0:l.join(":"))||"",d=a&&"0"!==a?"(".concat(a).concat(o?", ".concat(c):"",")"):"";return{url:i,sourceName:"".concat(rn().singular(t)," ").concat(d),returnRange:a&&"0"!==a?c:""}}),[s]),h=(0,Ut.xe)(t,null===s||void 0===s?void 0:s[0].id),m=(0,g.tZ)("div",{...n,children:(0,g.tZ)(tn,{source:d,url:u,empty:0===(0,r.qcw)(t).length,range:p,children:o})});return h?(0,g.tZ)(Xt.u,{side:"left",hoverOnly:!0,open:!0,trigger:m,children:h}):m}}]});var an=n(84951);const sn=(e,t)=>(0,r.kRc)(e,(()=>{const{trigger:n}=(0,r.MkB)(e,t);(0,r.OmN)(e,n,{at:{path:[...t,0],offset:0}}),(0,r.LKm)(e,{at:t})})),cn=(e,t)=>(0,r.DYv)(e,{...t,voids:!0,mode:"all",match:{type:(0,r.bbC)(e,l.Ee)}}),dn=e=>!!e[l.Ee],un=L({name:"NORMALIZE_MAGIC_NUMBERS_PLUGIN",plugin:e=>t=>{let[n,o]=t;if((0,r.kKo)(n)){const t=Array.from((0,r.Eln)(e,o));if(t.length>=1){const[n]=t[0];if((0,r.GsE)(n)&&dn(n)){const t=[...o,0];return(0,k.s)(e,{text:" "},{at:t}),!0}const[l]=t[t.length-1];if((0,r.GsE)(l)&&dn(l)){const n=[...o,t.length];return(0,k.s)(e,{text:" "},{at:n}),!0}}}return!1}}),pn=(hn="MAGIC_NUMBER_CURSOR_PLUGIN",gn=e=>t=>{if((0,r.zbr)(t)){const n=null===t||void 0===t?void 0:t.focus.path;if(n&&(0,r.uEZ)(e,n)){const[t]=(0,r.pj6)(e,n);if((0,r.GsE)(t)&&dn(t)){const t=(0,r.PoD)(e,{at:n});if(t){const n=(0,r.plg)(e,t[1]);n.offset+=1,(0,r.Z5U)(e,{focus:n,anchor:n})}}}}},(0,l.p6)({key:hn,withOverrides:e=>{const t=gn(e),{onChange:n}=e;return e.onChange=()=>{(0,O.J)(void 0,e.selection)||setTimeout((()=>t(e.selection)),0),n()},e}}));var hn,gn;const mn=M({name:"MAGIC_CURSOR_KEYS_PLUGIN",plugin:e=>t=>{if((0,r.zbr)(e.selection)){if("ArrowLeft"===t.key&&!t.altKey&&!t.ctrlKey){var n;const t=null===(n=e.selection)||void 0===n?void 0:n.focus;if(t){const n=(0,r.T2j)(e,t);if(n&&(0,r.uEZ)(e,n.path)){const[t,o]=(0,r.pj6)(e,n.path);if((0,r.GsE)(t)&&dn(t)){const t=(0,r.T2j)(e,o);if(t)return(0,r.Z5U)(e,{focus:t,anchor:t}),!0}}}}if("Backspace"===t.key){var o;const t=null===(o=e.selection)||void 0===o?void 0:o.focus;if(t){const n=(0,r.T2j)(e,t);if(n&&(0,r.uEZ)(e,n.path)){const t=(0,r.T2j)(e,n);if(t){const[n,o]=(0,r.pj6)(e,t.path);if((0,r.GsE)(n)&&dn(n))return(0,r.r4l)(e,{at:o}),!0}}}}}if("Delete"===t.key){var l;const t=null===(l=e.selection)||void 0===l?void 0:l.focus;if(t){const n=(0,r.Mxs)(e,t);if(n&&(0,r.uEZ)(e,n.path)){const[t,o]=(0,r.pj6)(e,n.path);if((0,r.GsE)(t)&&dn(t))return(0,r.r4l)(e,{at:o}),!0;const l=(0,r.Mxs)(e,n);if(l){const[t,n]=(0,r.pj6)(e,l.path);if((0,r.GsE)(t)&&dn(t))return(0,r.r4l)(e,{at:n}),!0}}}}return!1}}),bn=(0,l.p6)({key:l.Ee,type:l.Ee,isInline:!0,isVoid:!0,isLeaf:!0,withOverrides:e=>{const{deleteBackward:t,deleteForward:n}=e;return e.deleteBackward=n=>{if(e.selection&&(0,r.zbr)(e.selection)){var o;const t=(0,r.T2j)(e,null===(o=e.selection)||void 0===o?void 0:o.focus),n=cn(e,{at:t});if(n)return void sn(e,n[1])}t(n)},e.deleteForward=t=>{if(e.selection&&(0,r.zbr)(e.selection)){var o;const t=(0,r.Mxs)(e,null===(o=e.selection)||void 0===o?void 0:o.focus),n=cn(e,{at:t});if(n)return void sn(e,n[1])}n(t)},e},component:S.zL,plugins:[un(),pn(),mn()]}),yn=(0,l.p6)({key:l.ee,type:l.ee,isInline:!0,isElement:!0,isVoid:!0,component:S.RB}),vn=(0,l.p6)({key:l.PO,type:l.PO,isInline:!0,isVoid:!1,isLeaf:!0,component:S.o_}),fn=e=>({...e,handlers:{onKeyDown:(t,n)=>function(){var r;if(null!==(r=e.handlers)&&void 0!==r&&r.onKeyDown&&(0,an.CX)(t,(0,Le.aV)(t))){for(var o,l,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return null===(o=e.handlers)||void 0===o||null===(l=o.onKeyDown)||void 0===l?void 0:l.call(o,t,n)(...i)}}}}),xn=()=>[fn((0,r.pJg)()),fn((0,r.Td$)()),fn((0,r.wFy)()),fn((0,r.sWz)()),fn((0,r.Hon)()),fn((0,r.oyw)()),fn(bn()),fn(vn()),...(0,T.J8)("INLINE_BUBBLES")?[fn(yn())]:[]],Cn=()=>(0,r.w4y)({options:{disableUploadInsert:!0}}),kn=(e,t)=>{const n={id:(0,$.x0)(),type:(0,r.bbC)(e,l.vd),url:t,children:[{text:""}]};(0,k.s)(e,n)},wn=()=>(0,r.fSR)({withOverrides:(e,t)=>{let{options:n}=t;const{insertData:r}=e;return e.insertData=t=>{const o=t.getData("text/plain"),{rules:l}=n;if(l)for(const n of l){const t=n.parser(o);if(null!==t&&void 0!==t&&t.provider)return void kn(e,t.url)}r(t)},e}}),En=L({name:"MIGRATE_STRUCTURED_IN_TO_CODELINE_V2",elementType:l.tW,plugin:e=>t=>{const[n,o]=t;return!(!(0,r.kKo)(n)||n.type!==l.tW)&&(2!==n.children.length||n.children[0].type!==l.qG||n.children[1].type!==l.DN?((0,r.r4l)(e,{at:o}),!0):((0,r.fLV)(e,{type:l.l7},{at:o}),(0,r.fLV)(e,{type:l.$},{at:[...o,1]}),!0))}});function Sn(e){return(0,r.qcw)(e)}function Tn(e){return[...e.slice(0,e.length-1),e[e.length-1]+1]}function Zn(e){return Array.from(e)}function In(e,t){t&&(0,r.uEZ)(e,t.anchor.path)&&(0,r.Z5U)(e,t)}function Dn(e,t,n){if(u.y$.isDescendant(n.path,t)){const t=function(e,t){const[n]=t;let o=0;const l=(0,r.MkB)(e,[n]);if(l){for(const e of(0,r.Ga5)([l,[n]])){for(const[n,l]of(0,r.Ga5)(e)){if(!(u.y$.compare(l,t)<0))break;o+=(0,r.qcw)(n).length}if(!(u.y$.compare(e[1],t)<0))break;o+=1}return o}}(e,n.path);if(null==t)return;return t+n.offset}}function Rn(e,t,n){const o=(0,r.MkB)(e,t);if(!o)return null;let l=0;for(const a of(0,r.Ga5)([o,t])){for(const[e,t]of(0,r.Ga5)(a)){const o=(0,r.qcw)(e);if(!(l+o.length<n))return{path:t,offset:n-l};l+=o.length}l+=1}return null}function Nn(e,t,n){const r=function(e){return e?{anchor:{path:Zn(e.anchor.path),offset:e.anchor.offset},focus:{path:Zn(e.focus.path),offset:e.focus.offset}}:e}(e.selection);if(!r)return r;if(n.anchor){const o=Rn(e,t,n.anchor);o&&(r.anchor=o)}if(n.focus){const o=Rn(e,t,n.focus);o&&(r.focus=o)}return r}function Ln(e,t,n){const o=Nn(e,t,n);o&&(0,r.Ys)(e,o)}function Mn(e,t,n){const o=(0,r.MkB)(e,t);if(!o)return!1;return Sn(o).length<n.length&&function(e,t,n){const o=Tn(n);if((0,r.MkB)(e,o)){const l=Sn(t);return(0,r.OmN)(e,"".concat(l,"\n"),{at:[...n]}),(0,r.yai)(e,{at:o}),!0}return!1}(e,o,t)}function Bn(e,t,n,o){const a=Sn(t);return a.length>n.length?function(e,t,n,o){const a=t;let i=n.slice(a.length);i.startsWith("\n")&&(i=i.substring(1));const s={id:(0,$.x0)(),type:l.Zv,children:[{text:i}]};return(0,k.s)(e,s,{at:Tn(o)}),(0,r.OmN)(e,a,{at:[...o,0]}),!0}(e,n,a,o):Mn(e,o,n)}function On(e,t){return Sn(e)!==t}function An(e,t,n){let o=-1,l=-1;const a=(0,r.MkB)(e,n);if(!a)return!1;const i=function(e,t){const n=e.selection;return n?{anchor:Dn(e,t,n.anchor),focus:Dn(e,t,n.anchor)}:{anchor:void 0,focus:void 0}}(e,n);for(const r of a.children){o+=1,l+=1;const a=t[l]||"";if(On(r,a)){if(Bn(e,r,a,[...n,o]))return Ln(e,n,i),!0}}return!1}function _n(e){let t=!1;const n=[],r=[];for(const o of e)"\n"!==o||t?t?r.push(o):n.push(o):t=!0;return[n.join(""),r.join("")]}const Pn=L({name:"NORMALIZE_CODE_BLOCK_PLUGIN",elementType:l.ZV,acceptableSubElements:[l.Zv],plugin:e=>t=>{const[n,a]=t;if((0,r.kKo)(n)&&n.type===l.ZV){for(const n of(0,r.Eln)(e,a)){const[t,o]=n;if((0,r.kKo)(t)&&t.type!==l.Zv)return(0,r.LKm)(e,{at:o}),!0;if((0,r.GsE)(t))return(0,r.qEX)(e,{type:l.Zv,children:[]},{at:o}),!0}const t=function(e){return e.children.map(r.qcw).join("\n")}(n),i=function(e){let t=[];const n=(0,o.wS)(e).reduce(((e,n)=>{if(n.type===o.l1){let r=n.text;do{const n=_n(r),o=n[0];[,r]=n,t.push(o);const l=t.join("");e.push(l),t=[]}while(r.length>0)}else t.push(n.text);return e}),[]);return t.length&&n.push(t.join("")),n}(t);return i.length&&An(e,i,a)||(0,r.LKm)(e,{at:a}),!0}return!1}}),Vn=L({name:"NORMALIZE_COLUMNS_PLUGIN",elementType:l.VE,plugin:e=>t=>{const[n,o]=t;if((0,r.kKo)(n)&&n.type===l.VE){for(const t of(0,r.Eln)(e,o)){const[n,o]=t;if((0,r.GsE)(n)||(0,r.kKo)(n)&&n.type!==l.qu&&n.type!==l.g0)return(0,r.hmm)(e,{at:o}),!0}return 0===n.children.length&&(0,r.r4l)(e,{at:o}),1===n.children.length&&(0,r.LKm)(e,{at:o}),!0}return!1}}),Hn=L({name:"NORMALIZE_EDITOR_PLUGIN",plugin:e=>t=>{const[n,o]=t;if((0,r.hzc)(n)){if(!n.children.length)return(0,k.s)(e,{id:(0,$.x0)(),type:l.GD,children:[]},{at:[...o,0]}),!0;for(const t of(0,r.Eln)(e,o)){const[n,o]=t;if(0===o[0]){if((0,r.GsE)(n))return(0,r.qEX)(e,{id:(0,$.x0)(),type:l.GD,children:[]},{at:o}),!0;if((0,r.kKo)(n)&&n.type!==l.GD)return(0,r.LKm)(e,{at:o}),!0}else if((0,r.kKo)(n)&&n.type===l.GD)return(0,r.LKm)(e,{at:o}),!0;if((0,r.GsE)(n))return(0,r.qEX)(e,{id:(0,$.x0)(),type:l.JB,children:[]},{at:o}),!0;if((0,r.kKo)(n)&&!l.ht.includes(n.type))return(0,r.LKm)(e,{at:o}),!0}}return!1}}),Wn=(e,t,n)=>{for(const o of n){const[n,l]=o,{id:a}=n;a&&(t.has(a)&&(0,r.fLV)(e,{id:(0,$.x0)()},{at:l}),t.add(a)),Wn(e,t,(0,r.Ga5)(o))}},Kn="NORMALIZE_ELEMENT_ID_PLUGIN",Un=(0,l.p6)({key:Kn,plugins:[{key:"".concat(Kn,"_OVERRIDES"),withOverrides:(e=>t=>{const n=(0,x.x)(t,e,(()=>new Set)),{onChange:r}=t;let o=!1;return t.onChange=()=>{o||(o=!0,Wn(t,n,[[t,[]]])),r()},t})(Kn)},N({name:"".concat(Kn,"_NORMALIZER"),plugin:e=>t=>{let[n,o]=t;if((0,r.kKo)(n)&&!n.id){const t=(0,$.x0)();return console.log("assigning a missing id to",t,o),(0,r.fLV)(e,{id:t},{at:o}),!0}return!1}})]}),Xn=L({name:"NORMALIZE_IMAGE_PLUGIN",plugin:e=>t=>{const[n,o]=t;if((0,r.kKo)(n)&&n.type===l.IV){if(fe(e,t,["url","width","caption"]))return!0;if(!("url"in n)||""===(0,r.qcw)(n))return(0,r.LKm)(e,{at:o}),!0;for(const t of(0,r.Eln)(e,o)){const[n,o]=t;if((0,r.kKo)(n))return(0,r.LKm)(e,{at:o}),!0}}return!1}}),$n=L({name:"NORMALIZE_LINK_PLUGIN",plugin:e=>t=>{const[n,o]=t;if((0,r.kKo)(n)&&n.type===l.uJ){if(fe(e,t,["url"]))return!0;if(!("url"in n)||""===(0,r.qcw)(n))return(0,r.LKm)(e,{at:o}),!0;for(const t of(0,r.Eln)(e,o)){const[n,o]=t;if((0,r.kKo)(n))return(0,r.LKm)(e,{at:o}),!0}}return!1}}),qn=L({name:"NORMALIZE_LIST_PLUGIN",plugin:e=>t=>{const[n,o]=t;if((0,r.kKo)(n)&&(n.type===l.Ht||n.type===l.kN)){if(fe(e,t))return!0;for(const t of(0,r.Eln)(e,o)){const[n,o]=t;if((0,r.kKo)(n)&&n.type!==l.f8)return(0,r.LKm)(e,{at:o}),!0;if((0,r.GsE)(n))return(0,r.qEX)(e,{id:(0,$.x0)(),type:l.f8,children:[]},{at:o}),!0}}if((0,r.kKo)(n)&&n.type===l.f8){if(fe(e,t))return!0;const[n,a,...i]=(0,r.Eln)(e,o);if(!n)return(0,k.s)(e,{id:(0,$.x0)(),type:l.wl,children:[{text:""}]},{at:[...o,0]}),!0;const[s,c]=n;if((0,r.kKo)(s)&&s.type!==l.wl)return(0,r.LKm)(e,{at:c}),!0;if((0,r.GsE)(s))return(0,r.qEX)(e,{id:(0,$.x0)(),type:l.wl,children:[]},{at:c}),!0;if(a){const[t,n]=a;if(!(0,r.kKo)(t)||t.type!==l.Ht&&t.type!==l.kN)return(0,r.nXd)(e,{at:n}),!0;if(i.length){const t=i[0],[,n]=t;return(0,r.nXd)(e,{at:n}),!0}}}return!1}}),jn=[l.GD,l.oG,l.o3],Gn=L({name:"NORMALIZE_PLAIN_TEXT_BLOCK_PLUGIN",plugin:e=>t=>{const[n,o]=t;if((0,r.kKo)(n)&&jn.includes(n.type)){if(fe(e,t))return!0;if(we(e,(0,r.Eln)(e,o)))return!0}return!1}}),Fn=new Set([l.uJ,l.ee]),zn=L({name:"NORMALIZE_RICH_TEXT_BLOCK_PLUGIN",plugin:e=>t=>{const[n,o]=t;if((0,r.kKo)(n)&&new Set(an.vj).has(n.type))for(const l of(0,r.Eln)(e,o)){const[t,n]=l;if((0,r.kKo)(t)&&!Fn.has(t.type))return(0,r.LKm)(e,{at:n}),!0}return!1}}),Yn=L({name:"NORMALIZE_TEXT_PLUGIN",plugin:e=>t=>{const[n]=t;return!(!(0,r.GsE)(n)||!fe(e,t,Object.values(l.Bp)))}}),Jn={[l.lZ]:["tableData"],[l.aY]:["data-auth-url","data-contenttype","data-error","data-external-data-source-id","data-external-id","data-href","data-provider","data-varname"],[l.QC]:["title","colorScheme","sourceVarName","markType","xColumnName","yColumnName","sizeColumnName","colorColumnName","thetaColumnName"],[l.ji]:["value","variableName"],[l.cR]:["url","source"]},Qn=()=>"",er={[l.lZ]:{tableData:()=>({variableName:"table",columns:[]})},[l.aY]:{"data-auth-url":Qn,"data-contenttype":Qn,"data-error":Qn,"data-external-data-source-id":Qn,"data-external-id":Qn,"data-href":Qn,"data-provider":Qn,"data-varname":Qn},[l.QC]:{colorScheme:Qn,sourceVarName:Qn,markType:Qn,xColumnName:Qn,yColumnName:Qn,sizeColumnName:Qn,colorColumnName:Qn,thetaColumnName:Qn},[l.ji]:{value:Qn,variableName:Qn}},tr=(e,t,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ve(t);const[l,a]=t,i=Object.keys((0,r.uET)(l));let s={};for(const c of n)if(!i.includes(c)){if(!(c in o))return console.error("Element",l,"at path",a,"does not have mandatory property",c,"and we do not know how to initialize it. Deleting element."),(0,r.nXd)(e,{at:a}),!0;s={...s,[c]:o[c]()}}return(0,r.fLV)(e,s,{at:a}),!!Object.keys(s).length}(e,t,Jn[n.type],er[n.type]),nr=L({name:"NORMALIZE_VOID_PLUGIN",plugin:e=>t=>{const[n,o]=t;return!!((0,r.kKo)(n)&&Object.keys(Jn).includes(n.type)&&(((e,t,n)=>fe(e,t,Jn[n.type]))(e,t,n)||((e,t)=>{for(const n of(0,r.Eln)(e,t)){const[t,o]=n;if((0,r.kKo)(t)||(0,r.GsE)(t)&&""!==t.text)return(0,r.nXd)(e,{at:o}),!0}return!1})(e,o)||tr(e,t,n)))}});var rr=n(31052);const or=e=>{let{readOnly:t,notebookTitle:n="",onNotebookTitleChange:o=ue.ZT}=e;return{key:"ON_CHANGE_NOTEBOOK_TITLE_PLUGIN",withOverrides:e=>{const l=(0,et.debounce)(o,1e3),{onChange:a}=e;let i=n;return e.onChange=()=>{if(a(),!t)try{if((0,r.uEZ)(e,[0,0])){const[t]=(0,r.pj6)(e,[0,0]),n=(0,r.qcw)(t);n!==i&&(i=n,l(n))}}catch(n){console.error("Error in onChangeNotebookTitle",n)}},e},plugins:[I({name:"INTERCEPT_TITLE",elementTypes:[r.GDC],interceptor:(e,t,n)=>"on-enter"!==n.type||((0,rr.x)(e,t),!0)})()]}},lr="\n  color: green;\n",ar=B({name:"OPERATIONS_BLACKBOX_PLUGIN",plugin:(e,t)=>(console.debug("%cInitial Document:",lr,e.children),e=>{const{type:n}=e;return console.debug("%c".concat(n),lr,e),t(e)})}),ir=e=>"".concat(e.id,"/selection"),sr=B({name:"PLUGIN_PERSIST_SELECTION",plugin:(e,t)=>{const n=ir(e);return r=>{var o,l;return"set_selection"===r.type&&(o=n,(l={...e.selection,...r.properties,...r.newProperties})&&global.localStorage.setItem(o,JSON.stringify(l))),t(r)}}}),cr=e=>{const t=ir(e);try{const e=global.localStorage.getItem(t);if(e)return JSON.parse(e)}catch(n){console.warn("Error parsing selection: ".concat(n.message))}return null},dr=Xe((()=>Promise.all([n.e(2356),n.e(5145)]).then(n.bind(n,34098)))),ur=(0,l.p6)({key:l.QC,isElement:!0,component:dr,plugins:[I({name:"INTERCEPT_PLOT",elementTypes:[l.QC],interceptor:()=>!0})()]});var pr=n(26929),hr=n(96124);const gr=new Set(["+","-","*","/","^","mod","per","implicit*"]);function mr(e){const t=[],n=xr(e);for(;n.length;){var r;const l=n[0].offset;if(!n[0].followsWhitespace){n.shift();continue}br(n),yr(n);let a,i=n.shift();if("number"===(null===(r=i)||void 0===r?void 0:r.type)){e:do{var o;const t=i.offset+(null!==(o=i.text)&&void 0!==o?o:"").length;switch(fr(e.slice(l,t))){case"incomplete":continue;case!0:a={anchor:l,focus:t};break;case!1:break e}}while(i=n.shift());a&&t.push(a)}}return t}const br=e=>{var t,n;"identifier"===(null===(t=e.at(0))||void 0===t?void 0:t.type)&&"equalSign"===(null===(n=e.at(1))||void 0===n?void 0:n.type)&&(e.shift(),e.shift())},yr=e=>{for(;["minus","currency"].includes(null!==(t=null===(n=e.at(0))||void 0===n?void 0:n.type)&&void 0!==t?t:"");){var t,n;e.shift()}};function vr(e){switch(e.type){case"literal":return!0;case"ref":return function(e){const t=new Set(["second","month"]),n=(0,o.bS)(e);return!!n&&(t.has(n.baseQuantity)||"currency"===(null===n||void 0===n?void 0:n.superBaseQuantity))}(e.args[0]);case"function-call":{const t=e.args[0].args[0];return!!gr.has(t)&&e.args[1].args.every((e=>vr(e)))}case"assign":return vr(e.args[1]);default:return!1}}function fr(e){const{solution:t}=(0,o.fh)(e);if(t)return vr(t);const{solution:n}=(0,o.fh)("".concat(e," 1"));return!!n&&(!!vr(n)&&"incomplete")}function xr(e){return(0,o.wS)(e).flatMap(((e,t,n)=>{var r;if("ws"===e.type)return[];if("error"===e.type){const t=e.offset+1;return xr(e.text.slice(1)).map((e=>({...e,offset:e.offset+t})))}const o=0===t||"ws"===(null===(r=n.at(t-1))||void 0===r?void 0:r.type);return[{...e,followsWhitespace:o}]}))}const Cr=new Set(Object.values(l.Bp)),kr=(0,pr.B)((0,hr.n)((()=>e=>{let[t,n]=e;return(0,me.I)(t,l.JB),t.children.flatMap(((e,t)=>{if(!(0,r.GsE)(e)||(o=e,Object.keys(o).some((e=>Cr.has(e)))))return[];var o;const a=[...n,t];return mr(e.text).map((e=>{let{anchor:t,focus:n}=e;return{[l.h1]:!0,anchor:{path:a,offset:t},focus:{path:a,offset:n},location:{anchor:t,focus:n}}}))}))})),(e=>e[0].type===l.JB));const wr=(0,ze.css)({color:(0,Ae.g)("strongTextColor"),borderBottom:"1px dashed ".concat((0,Ae.g)("normalTextColor"))},";label:-PotentialFormulaHighlight--highlightStyles;"),Er={name:"1j5bgu--PotentialFormulaHighlight--activateStyles",styles:"text-decoration:underline;label:-PotentialFormulaHighlight--activateStyles;"},Sr=(0,ze.css)({display:"inline-flex",padding:"0 4px",alignItems:"center",justifyContent:"center",borderRadius:"6px",border:"1px solid ".concat(Gt.mK.rgb),background:Gt.gw.rgb,color:Gt.eC.rgb,margin:"0 2px"},";label:-PotentialFormulaHighlight--tabKeyStyles;"),Tr=(0,ze.css)({...Ye.KY},";label:-PotentialFormulaHighlight--tooltipContentStyles;"),Zr=(0,c.forwardRef)(((e,t)=>{let{attributes:n,onCommit:r=ue.ZT,tooltipOpen:o=!1,onClick:l,children:a}=e;return(0,g.tZ)("span",{"data-testid":"potential-formula",...n,css:wr,ref:t,onClick:l,children:(0,g.tZ)(Xt.u,{onClick:r,trigger:(0,g.tZ)("span",{children:a}),open:o,children:(0,g.BX)("span",{css:Tr,children:[(0,g.tZ)("button",{css:Er,children:"Click to activate"})," (or use"," ",(0,g.tZ)("kbd",{css:Sr,children:"TAB"}),")"]})})})}));var Ir=n(60046);function Dr(e,t){const n=(0,c.useContext)(a._d),o=(0,d.vt)(),[l,i]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{if(!o)return i(!1),ue.ZT;const l=(0,Ir.concat)((0,Ir.of)(void 0),n).subscribe((()=>{i(function(e,t){const n=(0,r.zbr)(e.selection)&&e.selection;if(n){const e=n.anchor.offset,{anchor:r,focus:o}=t.location;return e>=r&&e<=o}return!1}(e,t))}));return()=>l.unsubscribe()}),[e,o,n,t]),(0,c.useEffect)((()=>{if(!l)return ue.ZT;const e=e=>{"Escape"===e.key&&i(!1)};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}}),[e,o,n,l,t]),l}const Rr=e=>{let{attributes:t,children:n,text:o,leaf:i}=e;const s=(0,l.l3)(),d=(0,a.Iy)(),u=Dr(s,i),{openEditor:p}=(0,a.EL)(),h=(0,c.useContext)(Z.K),m=(0,c.useCallback)((()=>{const e=o&&(0,r.O$c)(s,o);if(!e||null===i||void 0===i||!i.location)return;const t=(0,T.J8)("SHADOW_CODE_LINES")?p:ue.ZT;Nr(s,d,e,i,"magic",t),h({type:"action",action:"number converted to code line"})}),[s,o,i,h,d,p]);return(0,c.useEffect)((()=>{if(!u)return ue.ZT;const e=e=>{"Tab"===e.key&&(e.preventDefault(),e.stopPropagation(),m())};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}}),[u,m]),(0,g.tZ)(Zr,{attributes:t,onCommit:m,tooltipOpen:u,children:n})},Nr=(e,t,n,a,i,s,c)=>{if(!(0,w.m)(e,{at:n,match:e=>(0,E.M)(e,l.JB)}))return;const d=(0,C.V)({id:c,varName:t.getAvailableIdentifier("Name",1),code:(0,r.qcw)(a)}),u={[l.Ee]:!0,text:(0,o.v5)(d.id)},p={type:l.ee,id:(0,$.x0)(),blockId:d.id,children:[{text:""}]},h="inline"===i?p:u,g={anchor:{path:n,offset:a.location.anchor},focus:{path:n,offset:a.location.focus}};(0,k.s)(e,h,{voids:!0,at:g});const m=(0,r.ZJ1)(e,[n[0]]);(0,k.s)(e,d,{at:m}),setTimeout((()=>{const t=(0,r.rwb)(e,u),n=null===t||void 0===t?void 0:t.querySelector("[data-number-id]"),o=null===n||void 0===n?void 0:n.dataset.numberId;o&&s({numberId:o,codeLineId:d.id,numberNode:u,codeLineNode:d})}),100)},Lr=e=>({key:l.h1,isLeaf:!0,component:Rr,decorate:e?void 0:kr}),Mr=M({name:"SELECTION_SHORTCUT_PLUGIN",plugin:e=>t=>{const{selection:n}=e;if((t.metaKey||t.ctrlKey)&&"a"===t.key){if(!n)return;const o=((e,t)=>{const n=(0,r.tVv)(e,{at:t,voids:!0,match:t=>(0,r.Lqh)(e,t)}),o=[];for(const r of n)o.push(r);return o})(e,n);if(1!==o.length)return;const l=(0,r.rxh)(e,o[0][1]);if(u.e6.equals(n,l))return;(0,r.Z5U)(e,l),t.preventDefault()}}});B({name:"SENTRY_BREADCRUMBS_PLUGIN",plugin:(e,t)=>e=>{(0,je.n_)({message:"Slate operation",data:{operation:e},timestamp:Date.now()}),t(e)}});var Br=n(28438);const Or=e=>{let{symbolName:t,defBlockId:n,errorMessage:r,isSelected:o,hasPreviousContent:l,hasNextContent:a}=e;return(0,g.BX)("span",{css:(i=!!l,s=!!a,(0,ze.css)({...i?{marginLeft:"1px"}:{},...s?{marginRight:"1px"}:{},cursor:"pointer",color:(0,Ae.g)("variableHighlightTextColor")},";label:-SmartRef--smartRefWrapperStyles;")),contentEditable:!1,"data-testid":"smart-ref",children:[t&&(0,g.tZ)(Ze.n,{defBlockId:n,isSelected:o,provideVariableDefLink:!0,children:t}),r&&(0,g.tZ)(Br.s,{message:r,url:"/docs"})]});var i,s},Ar=e=>(0,r.kKo)(e)&&e.type===l.bM,_r=M({name:"SMART_REF_KEYS_PLUGIN",plugin:e=>t=>{if((0,r.zbr)(e.selection))if("Backspace"!==t.key||t.altKey||t.ctrlKey){if("Delete"===t.key&&!t.altKey&&!t.ctrlKey){var n;const o=null===(n=e.selection)||void 0===n?void 0:n.focus;if(o){const n=(0,r.Mxs)(e,o);if(n&&(0,r.uEZ)(e,n.path)){const[,o]=(0,r.pj6)(e,n.path),l=(0,r.Ow4)(e,o);if(l){const[n,o]=l;if(Ar(n)){const n=(0,r.ZJ1)(e,o);(0,r.Z5U)(e,{focus:n,anchor:n}),t.stopPropagation(),t.preventDefault()}}}}}}else{var o;const n=null===(o=e.selection)||void 0===o?void 0:o.focus;if(n){const o=(0,r.T2j)(e,n);if(o&&(0,r.uEZ)(e,o.path)){const[,n]=(0,r.pj6)(e,o.path),l=(0,r.Ow4)(e,n);if(l){const[n,o]=l;if(Ar(n)){const n=(0,r.plg)(e,o);(0,r.Z5U)(e,{focus:n,anchor:n}),t.stopPropagation(),t.preventDefault()}}}}}return!1}}),Pr=(0,l.p6)({key:l.bM,type:l.bM,isInline:!0,isVoid:!0,isElement:!0,component:e=>{let{attributes:t,children:n,element:o}=e;(0,me.I)(o,l.bM);const i=(0,a.Dz)((e=>{var t,n,a,i;const s=null===(t=(0,r.Y_H)(e,{at:d.F3.findPath(e,o)}))||void 0===t?void 0:t[0],c=(0,r.GsE)(s)?(0,r.qcw)(s):"",u=null===(n=(0,r.Y_H)(e,{at:d.F3.findPath(e,o),match:e=>(0,r.kKo)(e)}))||void 0===n?void 0:n[0],p=c.length?/\w$/.test(c):(null===u||void 0===u?void 0:u.type)===l.bM,h=null===(a=(0,r.PoD)(e,{at:d.F3.findPath(e,o)}))||void 0===a?void 0:a[0],g=(0,r.GsE)(h)?(0,r.qcw)(h):"",m=null===(i=(0,r.PoD)(e,{at:d.F3.findPath(e,o),match:e=>(0,r.kKo)(e)}))||void 0===i?void 0:i[0];return{hasPrevious:p,hasNext:g.length?/^\w/.test(g):(null===m||void 0===m?void 0:m.type)===l.bM}}),{hasNext:!1,hasPrevious:!1}),s=(0,l.l3)(),u=(0,Fe.Z)(s,o,"lastSeenVariableName"),p=(0,a.Iy)(),h=p.getSymbolOrColumnName$.use(o.blockId),m=null==h&&"The variable ".concat(null!=o.lastSeenVariableName&&'"'.concat(o.lastSeenVariableName,'"')||""," is no longer defined")||void 0,b=(0,d.vt)();return(0,c.useEffect)((()=>{const e=p.getSymbolOrColumnName$.observe(o.blockId).pipe((0,Ir.debounceTime)(5e3)).pipe((0,Ir.filter)((e=>!!e))),t=e.subscribe((e=>{e!==o.lastSeenVariableName&&u(e)}));return()=>t.unsubscribe()}),[p,o.blockId,o.lastSeenVariableName,u]),(0,g.BX)("span",{...t,children:[(0,g.tZ)(Or,{defBlockId:o.blockId,symbolName:null!==h&&void 0!==h?h:o.lastSeenVariableName,errorMessage:m,isSelected:b,hasPreviousContent:null===i||void 0===i?void 0:i.hasPrevious,hasNextContent:null===i||void 0===i?void 0:i.hasNext}),n]})},plugins:[_r()]});var Vr=n(17410);const Hr=M({name:"SOFT_BREAK_PLUGIN",plugin:function(){let{rules:e=[{hotkey:"shift+enter"}]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>n=>{const o=(0,r.xmC)(t);o&&e.forEach((e=>{var l;let{hotkey:a,query:i}=e;(0,Vr.ZP)(a,{byKey:!0},n)&&(0,r.VqB)(o,{...i,filter:null===i||void 0===i||null===(l=i.filter)||void 0===l?void 0:l.call(i,t)})&&(n.preventDefault(),t.insertText("\n"))}))}}({rules:[{hotkey:"shift+enter",query:{exclude:[l.Zv,l.l7,l.$,l.qG,l.We]}}]})});var Wr=n(95974);const Kr=e=>{let{attributes:t,children:n,variant:r,error:o}=e;const l=(0,i.k5)(!0);return(0,g.tZ)("span",{...t,children:(0,g.tZ)(Wr.G,{hideError:!l,variant:r,error:o,children:n})})},Ur=(0,l.p6)({key:l.uX,isLeaf:!0,component:e=>(0,g.tZ)(Kr,{...e,variant:e.leaf.variant,error:e.leaf.error})}),Xr=M({name:"NAVIGATION_PLUGIN",plugin:e=>t=>{const{selection:n}=e;if(!n)return;const o=u.e6.start(n),a=(0,r.Ow4)(e,o);if(!a)return;const[i]=a;if(n.focus.offset===n.anchor.offset)if((0,E.M)(i,l.Zv)&&"Tab"===t.key)t.preventDefault(),e.insertText("  ");else if((0,E.M)(i,l.Cv)||(0,E.M)(i,l.Vx)||(0,E.M)(i,l.rN)){const n=(0,r.Zg$)(e,{at:o,match:e=>(0,r.kKo)(e)&&e.type===l.L7});if(!n)return;if("Tab"===t.key){t.preventDefault(),t.stopPropagation();try{(0,r.Y47)(e,{distance:1,unit:"line",reverse:t.shiftKey})}catch(s){}}else if("Enter"===t.key){t.preventDefault(),t.stopPropagation();const l=1,a=[...o.path];try{n[0].children.length>a[1]+1&&1===l?(a[1]+=l,(0,r.Ys)(e,a)):n[0].children[1].children.length-1>a[2]&&1===l&&(a[1]=2,a[2]+=l,(0,r.Ys)(e,a))}catch(s){}}}}});var $r=n(62425);const qr=e=>({key:"UPDATE_COMPUTER_PLUGIN",withOverrides:t=>{const{onChange:n}=t,r=async()=>{e.pushCompute(await(0,$r.I)(t,e))};return t.onChange=()=>{r(),n()},r(),t}}),jr=()=>({key:"WITH_DOC_SYNC_HISTORY_PLUGIN",handlers:{onKeyDown:e=>t=>{t.ctrlKey&&"z"===t.key&&(t.shiftKey?e.redo():e.undo())}}}),Gr=e=>B({name:"CREATE_USER_EVENTS_PLUGIN",plugin:(t,n)=>o=>{n(o);try{if("set_selection"!==o.type)if("insert_text"===o.type){const n=(0,r.Ow4)(t,o.path);if(!n)return;const l=t.children[n[1][0]],a=n[0];e({type:"checklist",props:{interaction:"interaction",element:a.type,parent:l.type,variant:"variant"in l?l.variant:void 0,text:a.children[0].text}})}else if("insert_node"===o.type)"id"in o.node&&e({type:"checklist",props:{interaction:"creation",element:o.node.type}});else if("set_node"===o.type&&"type"in o.newProperties){const t=o.newProperties.type;e({type:"checklist",props:{interaction:"creation",element:t}})}}catch(l){console.warn(l)}}})(),Fr=(0,l.p6)({key:l.g0,isElement:!0,isVoid:!0,component:S.sS,plugins:[I({name:"INTERCEPT_DISPLAY",elementTypes:[l.g0],interceptor:()=>!0})()],deserializeHtml:{rules:[{validNodeName:"div"}],getNode:()=>({id:(0,$.x0)(),type:l.g0,blockId:"",children:[{text:""}]})},serializeHtml:e=>{let{children:t}=e;return(0,g.tZ)("div",{"data-type":"display",children:t})}}),zr=(0,r.xje)({key:"PLUGIN_TRAILING_PARAGRAPH",withOverrides:e=>{const{normalizeNode:t}=e;return e.normalizeNode=n=>{let[o,a]=n;if(!a.length){const t=(0,r.wbn)(e,0),n=null===t||void 0===t?void 0:t[0];if(!n||n.type!==l.JB||(0,r.qcw)(n)){const n=t?u.y$.next(t[1]):[0];return void(0,r.VcW)(e,{type:l.JB,id:(0,$.x0)(),children:[{text:""}]},{at:n})}}return t([o,a])},e}}),Yr=(e,t)=>{let{level:n=0,defaultType:o=(0,r.bbC)(e,l.JB),query:a={},before:i}=t;if(!e.selection)return;const{queryEdge:s,isEdge:c,isStart:d}=((e,t)=>{let{start:n,end:o}=t,l=!1,a=!1,i=!1;return(n||o)&&(l=!0,n&&(0,r._YE)(e)&&(a=!0,i=!0),o&&(0,r.s7w)(e)&&(a=!0),a&&(0,r.ulk)(e.selection)&&e.deleteFragment()),{queryEdge:l,isEdge:a,isStart:i}})(e,a);if(d&&(i=!0),s&&!c)return;const p=(0,r.DWu)(e,e.selection);let h;return h=i?p.slice(0,n+1):u.y$.next(p.slice(0,n+1)),(0,r.VcW)(e,{type:o,children:[{text:""}],id:(0,$.x0)()},{at:h,select:!d}),!0},Jr=(0,r.xje)({key:"exitBreak",handlers:{onKeyDown:(e,t)=>{let{options:{rules:n=[]}}=t;return t=>{const o=(0,r.xmC)(e);o&&n.forEach((n=>{let{hotkey:l,...a}=n;(0,Vr.ZP)(l,t)&&(0,r.VqB)(o,a.query)&&Yr(e,a)&&(t.preventDefault(),t.stopPropagation())}))}}},options:{rules:[{hotkey:"mod+enter"},{hotkey:"mod+shift+enter",before:!0}]}}),Qr=new Map;global.deci={showStats:()=>{const e=[...Qr.entries()].map((e=>{let[t,n]=e;return{key:t,totalRenderCount:n.totalRenderCount,"totalTime\u03bcs":Math.round(1e3*n.totalTimeMs),"averageRenderTime\u03bcs":Math.round(1e3*n.totalTimeMs/n.totalRenderCount),"maxRenderTime\u03bcs":1e3*n.maxTimeMs}}));console.table(e,["key","totalRenderCount","totalTime\u03bcs","averageRenderTime\u03bcs","maxRenderTime\u03bcs"]),Qr.clear()}};const eo=(0,r.xje)({key:"PLUGIN_RENDER_PERFORMANCE_STATS",withOverrides:e=>e}),to=e=>{setTimeout((()=>{const t=e;if(!t.awareness)return to(e);t.awareness.on("update",(0,et.debounce)((()=>{const e=Array.from(t.awareness.getStates()).filter((e=>{var n;let[r]=e;return r!==(null===(n=t.sharedType.doc)||void 0===n?void 0:n.clientID)})).map((e=>{let[t,n]=e;const{anchor:r,focus:o}=n,l=(e=>U.wy[U.kV[e%U.kV.length]])(t);return{key:t,selection:{anchor:r,focus:o},data:{...n,style:{_backgroundColor:l,backgroundColor:l.rgb,width:2}}}})).filter((e=>e.selection.anchor&&e.selection.focus));_e.set.cursors(e)}),1e3))}),1e3)},no=()=>({key:"PLUGIN_REMOTE_CURSORS",then:to});function ro(e,t){In(e,{anchor:(0,r.plg)(e,t),focus:(0,r.ZJ1)(e,t)})}const oo=new Set([l.l7]);function lo(e){return M({name:"STRUCTURED_KEYBOARD_SHORTCUTS",plugin:t=>n=>{var o;const{selection:l}=t;if(!l)return!1;const a=[...l.anchor.path],i=l.anchor.offset,s=(0,r.MkB)(t,[a[0]]);if(!s||!oo.has(s.type))return!1;const c=function(e){switch(!0){case("Tab"===e.key||"Enter"===e.key)&&!e.shiftKey:return"move-right";case"Tab"===e.key&&e.shiftKey:return"move-left";case"ArrowUp"===e.key:return"move-up";case"ArrowDown"===e.key:return"move-down";case"Enter"===e.key&&e.shiftKey:return"new-element"}}(n);switch(c){case"move-left":case"move-right":if(n.preventDefault(),n.stopPropagation(),0===a[1]&&"move-right"===c||1===a[1]&&"move-left"===c)return a[1]="move-right"===c?1:0,ro(t,a),!0;a[0]+="move-right"===c?1:-1;const[,l]="move-right"===c?(0,r.t38)(t,[a[0]]):(0,r.DXT)(t,[a[0]]);return ro(t,l),!0;case"move-up":case"move-down":a[0]+="move-up"===c?-1:1;if(!oo.has((null===(o=(0,r.MkB)(t,[a[0]]))||void 0===o?void 0:o.type)||""))return!1;n.preventDefault(),n.stopPropagation();const s={offset:i,path:a};return In(t,{anchor:s,focus:s}),!0;case"new-element":return n.preventDefault(),n.stopPropagation(),(0,ce.Ah)(t,[a[0]],!1,e),!0}return!1}})()}const ao="DEDUPLICATE_ELEMENT_IDS_PLUGIN",io=()=>({needsDeduping:new Map,seenIds:new Set}),so=(0,l.p6)({key:ao,withOverrides:e=>{const{seenIds:t,needsDeduping:n}=(0,x.x)(e,ao,io),{apply:o,normalizeNode:l}=e,a=(e,t)=>{console.info("needs deduping",e),n.has(e)?(0,ue.m0)(n.get(e)).push(t):n.set(e,[t])};return e.apply=n=>{if(o(n),"insert_node"===n.type&&(0,r.kKo)(n.node)){const e=n.node;e.id&&t.has(e.id)&&a(e.id,n.node),t.add(e.id)}else if("set_node"===n.type&&"id"in n.newProperties&&n.newProperties.id)t.delete(n.newProperties.id);else if("remove_node"===n.type&&"id"in n.node&&n.node.id)t.delete(n.node.id);else if("split_node"===n.type&&"id"in n.properties&&n.properties.id){const t=n.properties.id,o=(0,r.DYv)(e,{match:e=>(0,r.kKo)(e)&&e.id===t});o&&(0,r.kKo)(o[0])&&a(n.properties.id,o[0])}},e.normalizeNode=t=>{const[o,a]=t;if(!(0,r.kKo)(o))return l(t);const i=n.get(o.id);if(!i)return l(t);i.includes(o)&&(console.info("fixing deduping",o.id),(0,r.fLV)(e,{id:(0,r.x0q)()},{at:a}),((e,t)=>{const r=(0,ue.m0)(n.get(e)),o=r.indexOf(t);r.splice(o,1),0===r.length&&n.delete(e)})(o.id,o))},e}})},55659:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>evalUnsafeCode});var _decipad_feature_flags__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47578);const evalUnsafeCode=async unsafeCode=>{if(!(0,_decipad_feature_flags__WEBPACK_IMPORTED_MODULE_0__.J8)("UNSAFE_JS_EVAL"))throw new Error("eval is only available for developers");const result=eval(unsafeCode);if("string"===typeof result)return result;if("object"===typeof result&&"then"in result){const e=result;return e.then((e=>{if("string"!==typeof e)throw new Error("Result should be a string");return e}))}throw new Error("Result should be a string")}},55604:(e,t,n)=>{"use strict";n.d(t,{M:()=>a,y:()=>l});var r=n(5216),o=n(1146);const l="smart-cell-result",a=e=>t=>{let{expression:n,computer:a,result:i}=t;return t=>{var s;if(e.dragging=l,(0,r.o)(t.dataTransfer,[n]),null!==(s=e.previewRef)&&void 0!==s&&s.current){const n=a.formatNumber(i.type,i.value);o.YS.previewText(n.asString),t.dataTransfer.setDragImage(e.previewRef.current,0,0)}e.setFragmentData(t.dataTransfer,"drag")}}},28209:(e,t,n)=>{"use strict";n.d(t,{pP:()=>V,iA:()=>Q,Rn:()=>oe,pj:()=>Ze,A6:()=>Re,xs:()=>he,SC:()=>ce,L1:()=>Te.L});var r=n(5594);var o={name:"1upciog--SmartRow--SmartRow",styles:"display:none;label:-SmartRow--SmartRow;"},l={name:"1almxnu--SmartRow--SmartRow",styles:"vertical-align:middle;label:-SmartRow--SmartRow;"};const a=e=>{let{smartCells:t}=e;return(0,r.BX)(r.HY,{children:[t.filter(((e,t)=>0!==t)).map(((e,t)=>(0,r.tZ)("th",{css:l,children:e},t))),(0,r.tZ)("th",{css:o})]})},i=e=>{let{columns:t,aggregationTypeNames:n,onAggregationTypeNameChange:o,element:l,...i}=e;return(0,r.tZ)(a,{...i,smartCells:t.map(((e,t)=>(0,r.tZ)(V,{...i,column:e,columnIndex:t,selectedAggregationTypeName:n[t],onAggregationTypeNameChange:e=>o(t,e),element:l},t)))})};var s=n(85663),c=n(1146),d=n(426),u=n(30969),p=n(57219),h=n(66840),g=n(79820),m=n(99072),b=n(11389),y=n(53393);const v={name:"10jniez--SmartColumnCell--resultWrapperStyles",styles:"user-select:all;cursor:grab;word-break:break-all;text-align:left;label:-SmartColumnCell--resultWrapperStyles;"},f={name:"14aqgli--SmartColumnCell--grabbingStyles",styles:"cursor:grabbing;label:-SmartColumnCell--grabbingStyles;"},x=(0,d.css)(b.z,{":empty":{display:"none"},":hover":{animation:"".concat(p.EY," 0.5s ease-in-out")},":hover:after":{backgroundColor:"blue",animation:"".concat(p.xg," 0.5s ease-in-out")},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"2px 8px",...(0,h.m)("currentTextColor",(0,h.g)("weakTextColor"))},";label:-SmartColumnCell--inlineResultStyles;"),C=(0,d.css)(g.vf,{color:(0,h.g)("normalTextColor"),display:"inline-flex",padding:"0 6px 0 10px",alignItems:"center",position:"relative",maxWidth:m.Bf,minWidth:m.gL,width:"100%",justifyContent:"space-between",marginTop:"".concat(m.ci)},";label:-SmartColumnCell--smartColumnCellStyles;");var k={name:"ibeb6--SmartColumnCell--SmartColumnCell",styles:"display:inline-flex;align-items:center;position:relative;label:-SmartColumnCell--SmartColumnCell;"};const w=e=>{let{aggregationTypeMenu:t,onDragStart:n,onDragEnd:o,result:l,element:a}=e;const[i,s]=(0,u.useState)(!1);return(0,r.BX)("div",{css:[C,";label:-SmartColumnCell--SmartColumnCell;"],children:[(0,r.tZ)("div",{css:k,children:t}),(0,r.tZ)("span",{css:[v,x,i&&f,";label:-SmartColumnCell--SmartColumnCell;"],draggable:!0,onDragStart:e=>{s(!0),n(e)},onDragEnd:e=>{s(!1),null===o||void 0===o||o(e)},children:l&&(0,r.tZ)(y.X,{variant:"inline",...l,element:a})},"result")]})};var E=n(8243),S=n(66165),T=n(91745),Z=n(71799),I=n(46011);const D={name:"b25xdh--Select--selectWrapperStyles",styles:"position:relative;label:-Select--selectWrapperStyles;"},R={name:"en7jjm--Select--menuListWrapperStyles",styles:"margin-left:auto;label:-Select--menuListWrapperStyles;"},N=(0,d.css)(g.vf,"text-align:right;white-space:nowrap;;label:-Select--itemStyles;"),L={name:"1oolhgl--Select--selectButtonStyles",styles:"display:flex;align-items:center;label:-Select--selectButtonStyles;"},M={name:"1o1fkle--Select--triggerStyles",styles:"display:grid;align-items:center;width:16px;label:-Select--triggerStyles;"};function B(e){let{options:t,value:n,onChange:o,label:l,caretColor:a="normal",clear:i=!1}=e;const[s,c]=(0,u.useState)(!1),d=(0,I.G)((0,u.useCallback)((()=>{c((e=>!e))}),[]));return(0,r.tZ)("div",{css:D,children:(0,r.tZ)("div",{css:R,children:(0,r.BX)(T.q,{root:!0,dropdown:!0,open:s,onChangeOpen:c,trigger:(0,r.BX)("button",{css:[L,"Calculate"===l?Z.XS:null,";label:-Select--Select;"],onClick:d,children:[l,(0,r.tZ)("span",{css:[M,Z.XS,";label:-Select--Select;"],children:(0,r.tZ)(S.F,{color:a,variant:"down"})})]}),children:[i&&(0,r.tZ)(E.s,{itemAlignment:"left",selected:null==n,onSelect:()=>o(void 0),children:(0,r.tZ)("span",{css:N,children:"Reset"})},"clear"),t.map(((e,t)=>(0,r.tZ)(E.s,{itemAlignment:"left",selected:n===e,onSelect:()=>o(e),children:(0,r.tZ)("span",{css:N,children:e})},t)))]})})})}var O=n(60046),A=n(90538),_=n(55604),P=n(26805);const V=e=>{var t;let{tableName:n,tablePath:o,column:l,columnIndex:a,selectedAggregationTypeName:i,onAggregationTypeNameChange:d,element:p}=e;const h=(0,s.l3)(),[g,m]=(0,u.useState)(),b=(0,A._0)({column:l,tablePath:o,columnIndex:a}),[y,v]=(0,u.useState)(null);(0,u.useEffect)((()=>{const e=null!=i&&(null===b||void 0===b?void 0:b.find((e=>e.name===i)))||void 0;m(e)}),[b,i]),(0,u.useEffect)((()=>{null==g&&v(null)}),[g]);const f=(0,u.useMemo)((()=>{if(l.name&&n){const e="".concat(n,".").concat(l.name);return null===g||void 0===g?void 0:g.expression(e,{sum:"sum(".concat(e,")")})}}),[l.name,g,n]),x=(0,c.Iy)();(0,u.useEffect)((()=>{const e=(f&&x.expressionResultFromText$(f)||O.EMPTY).subscribe((e=>{g&&v(e)}));return()=>e.unsubscribe()}),[x,f,g]);const C=(0,u.useCallback)((e=>{f&&y&&(0,_.M)(h)({computer:x,result:y,expression:f})(e)}),[x,h,f,y]),k=(0,P.GH)(),E=(null===b||void 0===b?void 0:b.length)>0;return(0,r.tZ)(w,{onDragStart:C,onDragEnd:k,result:y||void 0,aggregationTypeMenu:E&&(0,r.tZ)(B,{variant:"transparent",caretColor:"weak",label:(0,r.tZ)("span",{children:g&&(g.shortName||g.name)||"Calculate"},"name"),options:null!==(t=null===b||void 0===b?void 0:b.map((e=>e.name)))&&void 0!==t?t:[],value:null===g||void 0===g?void 0:g.name,clear:!!g,onChange:d},"selectaggregation"),element:p})};var H=n(94866),W=n(24217),K=n(96294),U=n(24988);var X=n(47962),$=n(57292),q=n(82302),j=n(16545);const G=(e,t,n)=>{let{dragItem:r,cell:o}=n;const l=(0,$.hR)(e,t,o),a=(0,$.hR)(e,t,r);if(!l)return;if(!a)return;return{column:l,dragItem:a,swapCtx:{editor:e,table:t,column:l}}};var F=n(74673);const z=e=>{let{editor:t,table:n,children:o}=e;const{onMoveColumn:l}=(0,$.Qc)(t,n),[a,i]=(0,u.useState)(null),s=null===a||void 0===a?void 0:a.direction,c={onCellHover:(0,u.useCallback)((e=>{const r=G(t,n,e);if(!r)return;const o=(0,$.nJ)(t,{monitor:e.monitor,element:e.cell,dragItem:e.dragItem});if(s!==o){const t=e.cell;i(o?{direction:o,element:t}:null)}const l=(0,$.pl)(r.swapCtx,r.dragItem,e.monitor);l&&((e,t,n)=>{(0,F.$Rk)(e);const r=(0,F.O$c)(e,t);if(!r)return;const o=[...r,1,n[1]];if((0,F.uEZ)(e,o)){const t=(0,F.plg)(e,o);(0,F.Z5U)(e,{focus:t,anchor:t})}})(t,n,l)}),[s,t,n]),onCellDrop:(0,u.useCallback)((e=>{const r=G(t,n,e);if(!r)return;const o=(0,$.pl)(r.swapCtx,r.dragItem,e.monitor);o&&l(...o)}),[t,l,n]),onCellDragEnd:(0,u.useCallback)((()=>{q.yW.set.isDragging(!1),t.isDragging=!1,i(null)}),[t]),columnDropLine:a};return(0,r.tZ)(j.p.Provider,{value:c,children:o})};var Y=n(96742),J=n(79568);const Q=e=>{var t,n;let{attributes:o,children:l,element:a}=e;(0,W.I)(a,s.L7);const[d,p]=(0,u.useState)(!1),h=(0,s.l3)(),{onDelete:g,onAddRow:m,onAddColumn:b,onChangeColumnAggregation:y,onSetCollapsed:v,onSetHideFormulas:f,onSaveColor:x,onSaveIcon:C}=(0,A.Qc)(h,a),k=(0,X.K)().get.selectedCells();(()=>{const e=(0,Y.vt)(),t=(0,F.CET)(),[n,r]=(0,X.K)().use.selectedCells();(0,u.useEffect)((()=>{e||r(null)}),[e,t,r]),(0,u.useEffect)((()=>{const e=(0,F.Cqx)(t,{format:"cell"});if(e.length>1){const t=e.map((e=>e[0]));(0,J.J)(t,n)||r(t)}else n&&r(null)}),[t,t.selection,n,r])})();const{name:w,columns:E,headers:S,rowCount:T}=(0,A.x6)(a),Z=a.id,I=(0,u.useMemo)((()=>({blockId:Z,cellTypes:E.map((e=>e.cellType)),columnBlockIds:E.map((e=>e.blockId))})),[Z,E]),D=(0,K.m)(a),R=E.length>=5,{color:N}=(0,c.xc)();return!d&&(0,r.tZ)(H.vL,{element:a,blockKind:R?"editorWideTable":"editorTable",onDelete:()=>{p(!0),g()},...o,suppressContentEditableWarning:!0,id:Z,dependencyId:Z,children:(0,r.tZ)(c.n0.Provider,{value:I,children:(0,r.tZ)(z,{editor:h,table:a,children:(0,r.tZ)(U.aW,{id:a.id,onChangeIcon:C,onChangeColor:x,onSetCollapsed:v,hideFormulas:a.hideFormulas,onSetHideFormulas:f,icon:null!==(t=a.icon)&&void 0!==t?t:"Table",color:null!==(n=a.color)&&void 0!==n?n:N,isCollapsed:a.isCollapsed,onAddRow:m,onAddColumn:b,columns:E,tableWidth:R?"WIDE":"SLIM",isSelectingCell:!!k,hiddenRowCount:a.isCollapsed?Math.max(0,T-10):0,smartRow:(0,r.tZ)(i,{onAggregationTypeNameChange:y,aggregationTypeNames:S.map((e=>e.aggregation)),tableName:w,tablePath:D,columns:E,element:a}),children:l})})})})||null};var ee=n(86928),te=n(89105),ne=n(68861),re=n(99034);const oe=e=>{let{element:t,attributes:n,children:o}=e;const l=(0,c.VY)();(0,W.I)(t,s.Kl);const a=(0,A.m8)(t),i=(0,s.l3)(),d=(0,F.O$c)(i,t),p=(0,F.Zg$)(i,{at:d,match:e=>(0,F.kKo)(e)&&e.type===s.L7}),h=t.children[0],g=(0,ee.xe)(h,null===p||void 0===p?void 0:p[0].id),m=(0,u.useCallback)((()=>{if(!p)return;const[e,n]=p;return d&&(0,re.o)(i,n,e.id,(0,F.qcw)((0,F.PfL)(t,0)))}),[i,t,p,d]),b=(0,r.tZ)("div",{...n,children:(0,r.tZ)(te.w,{readOnly:l,isForWideTable:a&&a>=5||!1,empty:0===(0,F.qcw)(t.children[0]).length,onAddDataViewButtonPress:m,showToggleCollapsedButton:!!p,children:o})});return g?(0,r.tZ)(ne.u,{side:"left",hoverOnly:!0,open:!0,trigger:b,children:g}):b};var le=n(1138),ae=n(55099),ie=n(60182),se=n(95523);const ce=e=>{let{attributes:t,children:n,element:o}=e;(0,W.I)(o,s.Rt);const l=(0,s.l3)(),a=(0,K.m)(o),{isCollapsed:i}=(0,u.useContext)(ae.dg),c=a&&(!i||a[a.length-1]<=11),d=a&&le.y$.parent(a),p=d&&(0,F.pj6)(l,d),h=null===p||void 0===p?void 0:p[0],{onRemoveRow:g}=(0,A.Qc)(l,h),{id:m}=o,b=(0,u.useRef)(null),y=(0,u.useRef)(null),{dragRef:v,dropLine:f,isDragging:x}=(0,q.eb)({type:"row",id:m,nodeRef:b,preview:{ref:y}}),C=(0,X.A)().set.dropLine(),k=(0,X.A)().set.rowWidth(),w=u.useRef(new ResizeObserver((e=>{e.forEach((e=>{k(e.contentRect.width)}))})));(0,u.useEffect)((()=>{const e=w.current;return C(f),b.current&&e.observe(b.current),()=>e.disconnect()}),[f,C,w]);return 1===(null===a||void 0===a?void 0:a[a.length-1])?(0,r.tZ)(ie.K,{attributes:t,readOnly:!1,children:n}):(0,r.tZ)(se.S,{attributes:t,readOnly:!1,onRemove:()=>g(o.id),onSelect:()=>a&&((e,t)=>{(0,F.Ys)(e,t)})(l,a),dragRef:v,previewRef:y,ref:b,isBeingDragged:x,isVisible:c,children:n})};var de=n(82915),ue=n(82623);const pe=(e,t)=>{const n=(0,u.useContext)(j.p),[{isDragging:r},o,l]=(0,q.cV)(e,{id:t.id,type:j.r,end:n.onCellDragEnd});return l(document.createElement("img"),{captureDraggingState:!0}),(0,u.useMemo)((()=>({isDragging:r,dragSource:o,dragPreview:l})),[r,o,l])},he=e=>{var t;let{attributes:n,children:o,element:l}=e;(0,W.I)(l,s.Vx);const a=(0,c.Iy)(),i=(0,s.l3)(),d=(0,K.m)(l),p=null===d||void 0===d?void 0:d[d.length-1],h=d&&le.y$.parent(le.y$.parent(d)),g=h&&(0,F.MkB)(i,h),{onChangeColumnType:m,onRemoveColumn:b}=(0,A.Qc)(i,g),y=(0,Y.vt)(),v=(0,c.VY)(),{dragSource:f,isDragging:x}=pe(i,l),[{isOver:C},k]=(0,A.zA)(i,l),w=(0,A.aR)(i,l),E=(0,u.useMemo)((()=>a.getUnitFromText.bind(a)),[a]),S=(0,u.useContext)(c._d),[T,Z]=(0,u.useState)([]),I=(0,ue.Z)(i,l,"cellType");(0,u.useEffect)((()=>{const e=(0,O.concat)((0,O.of)(void 0),S).subscribe((()=>{const e=i.children.filter((e=>e.type===s.qu&&"dropdown"===e.variant)).map((e=>{var t;return(0,W.I)(e,s.qu),{id:e.id,value:e.children[0].children[0].text,type:"string"===(null===(t=e.coerceToType)||void 0===t?void 0:t.kind)?"string":"number"}}));if("dropdown"===l.cellType.kind){const t=e.find((e=>{if("dropdown"===l.cellType.kind)return l.cellType.id===e.id}));(null===t||void 0===t?void 0:t.type)!==l.cellType.type&&t&&I({kind:"dropdown",id:t.id,type:t.type})}(0,J.J)(T,e)||Z(e)}));return()=>{e.unsubscribe()}}),[i.children,S,l.cellType,I,T]);const{type:D}=(0,A.cJ)(l);return(0,r.tZ)(de.Q,{attributes:n,readOnly:v,empty:0===(0,F.qcw)(l).length,focused:y,isFirst:0===p,onChangeColumnType:e=>null!=p&&m(p,e),onRemoveColumn:()=>b(l.id),onSelectColumn:()=>d&&((e,t)=>{const n=(0,F.Zg$)(e,{at:t,match:{type:s.L7}});if(!n)return;const r=t[t.length-1],[o,l]=n;(0,F.Ys)(e,{anchor:(0,F.plg)(e,[...l,2,r]),focus:(0,F.ZJ1)(e,[...l,o.children.length-1,r])})})(i,d),parseUnit:E,type:"anything"===(null===(t=l.cellType)||void 0===t?void 0:t.kind)?D:l.cellType,draggable:!0,dragSource:f,dropTarget:k,draggingOver:!x&&C,dropDirection:w,dropdownNames:T,children:o})};var ge=n(13986),me=n(68243),be=n(61294),ye=n(61408),ve=n(89203),fe=n(47475),xe=n(74407);const Ce=e=>{let{dropLine:t}=e;return(0,r.tZ)("div",{contentEditable:!1,css:(0,d.css)({position:"absolute",top:"top"===t?-xe.w/2-.5:void 0,left:0,bottom:"bottom"===t?-xe.w/2-1:void 0,width:"calc(100% + 1px)",zIndex:2},";label:-RowDropLine--RowDropLine;"),children:(0,r.tZ)(fe.s,{variant:"table"})})};var ke=n(3723),we=n(78090),Ee=n(75329),Se=n(26264),Te=n(61157);const Ze=e=>{var t,n;let{attributes:o,children:l,element:a}=e;const i=(0,s.l3)(),d=(0,A.B$)(a),p=(0,Y.vt)(),h=(0,F.zbr)((0,me.c)()),g=(0,X.K)().get.selectedCells(),m=(0,X.A)().get.dropLine(),[,b]=(0,A.zA)(i,a),v=(0,A.aR)(i,a),f=(0,X.K)().get.hoveredRowId(),x=(0,X.K)().set.hoveredRowId(),C=(0,X.K)().get.hoveredRowBottomId(),k=(0,X.K)().set.hoveredRowBottomId(),w=(0,F.YP0)(s.L7),E=(0,F.YP0)(s.Rt),S=f===E.id,T=w.children[w.children.length-1]===E,Z=C===E.id&&T,I=E.children[E.children.length-1].id===(null===a||void 0===a?void 0:a.id),D=(0,X.A)().get.rowWidth()||0;if(!(0,be.M)(a,s.Vx)&&!(0,be.M)(a,s.Cv))throw new Error("TableCell is meant to render table cells, not ".concat(null===a||void 0===a?void 0:a.type));const R=(0,ye.$)(a),N=(0,A.Wx)(a),L=(0,A.AX)(a),M=(0,u.useMemo)((()=>"series"===(null===N||void 0===N?void 0:N.kind)),[N]),B=(0,u.useMemo)((()=>{const e=(0,F.O$c)(i,a);return!e||2===e[e.length-2]||!M}),[i,a,M]),O=(0,u.useMemo)((()=>{const e=(0,F.O$c)(i,a);return M&&e&&2!==e[e.length-2]&&L}),[i,a,L,M]),_=(0,c.Iy)(),P=(0,F.qcw)(a),V=P.trim().length>0,H=!Number.isNaN(Number(P)),K="number"===(null===N||void 0===N?void 0:N.kind)&&null!==(t=N.unit)&&void 0!==t&&t.length&&V&&H?_.formatUnit(N.unit):void 0,U=_.getImperativeParseError$.useWithSelector((e=>null===e||void 0===e?void 0:e.error),a.id),$="string"===typeof U?U:null===U||void 0===U?void 0:U.message,q=(0,ve.k5)(Boolean(U)),j=(0,u.useCallback)((e=>{const t=(0,F.O$c)(i,a);t&&e&&(0,F.OmN)(i,e,{at:t})}),[i,a]),[G,z]=(0,u.useState)(!1);(0,u.useEffect)((()=>{L&&"anything"===(null===N||void 0===N?void 0:N.kind)&&z(!0),!L&&G&&z(!1)}),[null===N||void 0===N?void 0:N.kind,L,G]);const J=null===(n=_.getVarResult$.use(P))||void 0===n?void 0:n.result,Q=(0,u.useMemo)((()=>{if(!N||"dropdown"!==N.kind)return[];const e=i.children.find((e=>e.id===N.id));if(!e)return[];if((0,W.I)(e,s.qu),"dropdown"!==e.variant)return[];const{options:t}=e.children[1];return t.map((e=>({...e,focused:P===(0,ge.v5)(e.id)})))}),[N,i.children,P]),ee=(0,r.BX)(r.HY,{children:[!m&&(0,r.tZ)(Se.y,{onMouseEnter:()=>x(E.id),onMouseLeave:()=>x(null),onClick:()=>x(null),onAdd:()=>(0,A.LJ)(i,{cellElement:a}),show:S,isTable:!0,tableAdditionalProps:{isLastColumn:I,rowWidth:D}}),!m&&T&&(0,r.tZ)(Se.y,{onMouseEnter:()=>{k(E.id)},onMouseLeave:()=>{k(null)},onClick:()=>k(null),onAdd:()=>(0,A.LJ)(i,{offset:1,cellElement:a}),show:Z,isTable:!0,tableAdditionalProps:{isLastColumn:I,rowWidth:D},reverse:!0}),"top"===m&&(0,r.tZ)(Ce,{dropLine:m}),"left"===v&&(0,r.tZ)(ke.m,{dropDirection:v}),"right"===v&&(0,r.tZ)(ke.m,{dropDirection:v}),"bottom"===m&&(0,r.tZ)(Ce,{dropLine:m})]});return null!=R?(0,r.tZ)(we.B,{result:(0,r.tZ)(y.X,{...R,element:a}),resultType:R.type.kind,...o,selected:d,firstChildren:ee,children:l}):(0,r.tZ)(Ee.C,{isEditable:B,disabled:O,isUserContent:!0,as:"td",attributes:o,dropTarget:b,selected:d,focused:!(g&&g.length>1)&&p,collapsed:h,unit:K,type:N,value:P,onChangeValue:j,alignRight:G||(0,Te.L)(N),parseError:q?$:void 0,firstChildren:ee,dropdownOptions:{dropdownOptions:Q,dropdownResult:J},element:a,children:l})};var Ie=n(91920),De=n(74285);const Re=e=>{let{children:t,element:n}=e;(0,W.I)(n,s.We);const o=(0,A.Vq)(n,n.columnId),l=(0,c.Iy)().getBlockIdResult$.useWithSelector(Ne,n.columnId),a=(0,s.l3)(),i=(0,F.O$c)(a,n),d=(0,F.Zg$)(a,{at:i,match:e=>(0,be.M)(e,F.L7N)});return(0,H.QZ)(a,n,d[0]),(0,r.BX)(Ie.E,{variant:"table",result:l,element:n,children:[(0,r.BX)("span",{contentEditable:!1,children:[(0,r.tZ)(De.n,{type:{kind:"table-formula"},showTooltip:!1,children:o&&le.NB.string(o)})," ","="," "]}),t]})},Ne=e=>{var t;if("type-error"===(null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t.type.kind))return e.result}},16545:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,r:()=>o});var r=n(30969);const o="column",l=(0,r.createContext)({onCellHover(){},onCellDrop(){},onCellDragEnd(){},columnDropLine:null})},47962:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,K:()=>l});var r=n(74673),o=n(85663);const{useTableStore:l}=(0,r.CQF)({selectedCells:null,hoveredRowId:null,hoveredRowBottomId:null},{name:"table",scope:o.L7}),{useTableRowStore:a}=(0,r.CQF)({dropLine:"",rowWidth:null},{name:"tableRow",scope:o.Rt})},90538:(e,t,n)=>{"use strict";n.d(t,{Wf:()=>h,SA:()=>g,LJ:()=>m,Wx:()=>R,_0:()=>_,aR:()=>x,cJ:()=>D,zA:()=>f,B$:()=>Z,AX:()=>L,x6:()=>B,Qc:()=>b,m8:()=>S,Vq:()=>E});var r=n(85663),o=n(17525),l=n(67203),a=n(82623),i=n(25555),s=n(30969),c=n(74673),d=n(1146),u=n(90278),p=n(66329);const h=(e,t)=>{let{tablePath:n,cellType:l={kind:"anything"}}=t;const a=[...n,1],s=(0,c.pj6)(e,a)[0].children.length,d=(0,c.pj6)(e,n)[0],[,,...p]=d.children,h=(0,u.h0)(e,n,s+1);(0,c.kRc)(e,(()=>{(0,o.s)(e,{id:(0,i.x0)(),type:r.Vx,cellType:l,children:[{text:h}]},{at:[...n,1,s]}),p.forEach(((t,l)=>{(0,o.s)(e,{id:(0,i.x0)(),type:r.Cv,children:[{text:""}]},{at:[...n,l+2,s]})}))}))},g=(e,t,n)=>{const l=[...t,1],[a]=(0,c.pj6)(e,t),s=a.children.length,d=(0,c.pj6)(e,l)[0].children.length,u=Array.from({length:d},(()=>({id:(0,i.x0)(),type:r.Cv,children:[{text:""}]}))),p={id:(0,i.x0)(),type:r.Rt,children:u};(0,o.s)(e,p,{at:[...t,s],...n})},m=(e,t)=>{let{cellElement:n,offset:r=0}=t;const o=(0,c.O$c)(e,n);if(!o)return;const l=o.slice(0,o.length-1),a=l[l.length-1],i=l.slice(0,l.length-1);g(e,i,{at:[...i,a+r],select:!0})},b=(e,t)=>{const n=(0,s.useCallback)((()=>{(0,l.d)(e,t,(t=>{(0,c.kRc)(e,(()=>{(0,c.r4l)(e,{at:t})}))}))}),[e,t]),r=(0,s.useCallback)(((n,r)=>{(0,l.d)(e,t,(t=>{const o=[...t,1,n];(0,c.uEZ)(e,o)&&(0,c.OmN)(e,r,{at:t})}))}),[e,t]),o=(0,d.Iy)(),i=(0,s.useCallback)(((n,r)=>{(0,l.d)(e,t,(t=>{(0,c.kRc)(e,(()=>{(0,p.c)(e,t,r,n,o)}))}))}),[e,t,o]),u=(0,s.useCallback)(((n,r)=>{(0,l.d)(e,t,(t=>{const o=[...t,1,n];(0,c.uEZ)(e,o)&&(0,c.kRc)(e,(()=>{(0,c.fLV)(e,{aggregation:r},{at:o})}))}))}),[e,t]),m=(0,s.useCallback)((()=>{(0,l.d)(e,t,(t=>{(0,c.kRc)(e,(()=>{h(e,{tablePath:t})}))}))}),[e,t]),b=(0,a.Z)(e,t,"isCollapsed"),y=(0,a.Z)(e,t,"hideFormulas"),v=(0,a.Z)(e,t,"icon"),f=(0,a.Z)(e,t,"color");return{onDelete:n,onChangeColumnName:r,onChangeColumnType:i,onChangeColumnAggregation:u,onAddColumn:m,onRemoveColumn:(0,s.useCallback)((n=>{(0,l.d)(e,t,(t=>{const r=[...t,1],o=Array.from((0,c.Eln)(e,r)).findIndex((e=>{let[t]=e;return t.id===n}));o>=0&&(0,c.kRc)(e,(()=>{Array.from((0,c.Eln)(e,t)).forEach(((t,n)=>{let[,r]=t;if(0===n)return;const l=[...r,o];(0,c.r4l)(e,{at:l})}))}))}))}),[e,t]),onAddRow:(0,s.useCallback)((()=>{(0,l.d)(e,t,(t=>{(0,c.kRc)(e,(()=>{g(e,t)}))}))}),[e,t]),onRemoveRow:(0,s.useCallback)((n=>{(0,l.d)(e,t,(t=>{const[r]=(0,c.pj6)(e,t),o=r.children.findIndex((e=>e.id===n)),l=[...t,o];(0,c.uEZ)(e,l)&&(0,c.kRc)(e,(()=>{(0,c.r4l)(e,{at:l})}))}))}),[e,t]),onMoveColumn:(0,s.useCallback)(((n,r)=>{(0,l.d)(e,t,(t=>{(0,c.kRc)(e,(()=>{let o=-1;for(const l of(0,c.Eln)(e,t)){if(o+=1,o<1)continue;const l=[...t,o,n],a=[...t,o,r];(0,c.uEZ)(e,l)&&(0,c.uEZ)(e,a)&&(0,c.$45)(e,{at:l,to:a})}}))}))}),[e,t]),onSetCollapsed:b,onSetHideFormulas:y,onSaveIcon:v,onSaveColor:f}};var y=n(53559),v=n(16545);const f=(e,t)=>{const n=(0,s.useContext)(v.p);return(0,y.L)({accept:v.r,hover:(e,r)=>n.onCellHover({dragItem:e,monitor:r,cell:t}),drop:(e,r)=>n.onCellDrop({dragItem:e,monitor:r,cell:t}),collect:n=>({isOver:n.isOver(),overDirection:n.isOver()&&(0,u.nJ)(e,{monitor:n,element:t})||void 0})})},x=(e,t)=>{const{columnDropLine:n}=(0,s.useContext)(v.p);return(0,s.useMemo)((()=>((e,t)=>{let{dropLine:n,element:r}=t;if(!n)return;const o=(0,c.O$c)(e,r);if(!o)return;const{element:l}=n,a=(0,c.O$c)(e,l);return a&&a[a.length-1]===o[o.length-1]?n.direction:void 0})(e,{dropLine:n,element:t})),[n,e,t])},C=(e,t)=>{const n=(0,d.LU)((n=>{const r=(0,c.O$c)(n,e);if(r)return(0,c.Zg$)(n,{...t,at:r})}));return n&&n[0]};var k=n(24217);const w=e=>(0,c.kKo)(e)&&e.type===r.L7,E=(e,t)=>{const n=C(e,{match:w});if(n){(0,k.I)(n,r.L7);return n.children[1].children.find((e=>e.id===t))}},S=e=>{const t=C(e,{match:w});var n;if(t)return(0,k.I)(t,r.L7),null===(n=t.children[1])||void 0===n?void 0:n.children.length};var T=n(47962);const Z=e=>{const t=(0,T.K)().get.selectedCells();return(0,s.useMemo)((()=>null===t||void 0===t?void 0:t.includes(e)),[e,t])};var I=n(85996);const D=e=>{const t=(0,d.Iy)(),[n,r]=(0,s.useState)((()=>null===e||void 0===e?void 0:e.cellType)),o=(0,s.useCallback)((async n=>{var r;return e&&"anything"!==(null===(r=e.cellType)||void 0===r?void 0:r.kind)?e.cellType:e&&(0,I.$F)(t,((e,t)=>{const n=[],r=(0,c.O$c)(e,t);if(r){const t=null===r||void 0===r?void 0:r.slice(0,-2),o=r[r.length-1];let l=0,a=!1;for(;!a;){const r=[...t,l+2,o],i=(0,c.MkB)(e,r);i?n.push((0,c.qcw)(i)):a=!0,l+=1}}return n})(n,e),{userType:e.cellType})}),[t,e]),l=(0,s.useCallback)((async e=>{const t=await e;r(t)}),[]);return(0,d.Ab)(l,o),{type:n}},R=e=>{var t;const n=(0,d.LU)((t=>{const n=(0,c.O$c)(t,e);if(n){var r;const e=n[n.length-1],o=[...n.slice(0,-2),1,e];return null!==(r=(0,c.MkB)(t,o))&&void 0!==r?r:void 0}}));return null===(t=D(n))||void 0===t?void 0:t.type};var N=n(1138);const L=e=>(0,d.LU)((t=>{const{selection:n}=t;if(n&&(0,c.zbr)(n)){const r=(0,c.O$c)(t,e);if(r){const e=r.slice(0,-2);if(e.length){const t=n.anchor.path,o=t.slice(0,-3);if(N.y$.equals(o,e)){const n=t[e.length],o=r[r.length-1];return n>=2&&o===t[t.length-2]}}}}return!1})),M=(e,t)=>t.children[1].children.map((t=>((e,t)=>{const n=[],r=(0,c.O$c)(e,t);if(r){const t=null===r||void 0===r?void 0:r.slice(0,-2),o=r[r.length-1];let l=0,a=!1;for(;!a;){const r=[...t,l+2,o],i=(0,c.MkB)(e,r);i?n.push((0,c.qcw)(i)):a=!0,l+=1}}return n})(e,t))),B=e=>{const{types:t}=(e=>{const t=(0,d.Iy)(),[n,r]=(0,s.useState)((()=>e.children[1].children.map((e=>e.cellType)))),o=(0,s.useCallback)((n=>{const r=M(n,e),o=e.children[1].children;return Promise.all(r.map(((e,n)=>{var r;return(0,I.$F)(t,e,{userType:null===(r=o[n])||void 0===r?void 0:r.cellType})})))}),[t,e]),l=(0,s.useCallback)((async e=>{const t=await e;r(t)}),[]);return(0,d.Ab)(l,o),{types:n}})(e);return(0,d.LU)((()=>{var n,r,o,l;return{name:(0,c.qcw)(e.children[0].children[0]),headers:null!==(n=null===(r=e.children[1])||void 0===r?void 0:r.children)&&void 0!==n?n:[],columns:null!==(o=null===(l=e.children[1])||void 0===l?void 0:l.children.map(((e,n)=>{var r;return{blockId:e.id,name:(0,c.qcw)(e),cellType:null!==(r=t[n])&&void 0!==r?r:{kind:"nothing"}}})))&&void 0!==o?o:[],rowCount:e.children.length-2}}))};var O=n(61408),A=n(68439);const _=e=>{let{column:t,columnIndex:n}=e;const r=(0,O.a)(n);return(0,s.useMemo)((()=>(0,A.D)(r?r.type.cellType:t.cellType)),[t,r])}},57292:(e,t,n)=>{"use strict";n.d(t,{rh:()=>z.r,Dm:()=>F.Dm,SN:()=>G,hR:()=>F.hR,pl:()=>F.pl,nJ:()=>F.nJ,L1:()=>F.L1,Wx:()=>U.Wx,x6:()=>U.x6,Qc:()=>U.Qc});var r=n(85663),o=n(60058),l=n(25200),a=n(28209),i=n(24217),s=n(17525),c=n(12431),d=n(74673),u=n(25555);const p=e=>t=>n=>{const[o,l]=n;(0,i.I)(o,r.L7);const[a,p]=o.children,[,...h]=(null===a||void 0===a?void 0:a.children)||[],g=(null===p||void 0===p?void 0:p.children.filter((e=>{var t;return"table-formula"===(null===(t=e.cellType)||void 0===t?void 0:t.kind)})))||[],m=new Map;for(const e of g)m.set(e.id,e);for(const e of g){if(a.children.findIndex((t=>t.type===r.We&&t.columnId===e.id))<0){const n=[...l,0,a.children.length];return(0,s.s)(t,{id:(0,u.x0)(),type:r.We,columnId:e.id,children:[{text:""}]},{at:n}),!0}}for(const i of h){const n=[...l,0,a.children.indexOf(i)];if(!m.has(i.columnId)&&(0,d.uEZ)(t,n))return(0,d.nXd)(t,{at:n}),!0;for(const o of(0,d.Eln)(t,n)){const[n,l]=o;if((!(0,d.kKo)(n)||n.type===r.bM)&&(0,c.I)(n,l,t,e))return!0}}return!1},h=e=>(0,l.Kz)({name:"NORMALIZE_TABLE_FORMULA_PLUGIN",elementType:r.L7,plugin:p(e)});var g=n(55013),m=n(79568),b=n(85996);const y=e=>{const t=(0,u.x0)(),n=[{text:""}];return e?{id:t,type:r.Vx,children:n,cellType:{kind:"string"}}:{id:t,type:r.Cv,children:n}},v=(e,t,n,r,o)=>{let[l]=r;if("series"!==l.cellType.kind)return!1;const a=(0,d.Ga5)(n).slice(2),[i,...s]=a,c=(0,d.Ga5)(i)[o];if(!c)return!1;const u=(0,d.qcw)(c[0]).trim();if(!u)return!1;const{type:p,granularity:h,error:y}=(0,b.yb)(l.cellType.seriesType,u),v=c[0].id;if(y)return e.imperativelySetParseError(v,{elementId:v,error:y}),!1;e.hasImperativelySetParseError(v)&&e.imperativelyUnsetParseError(v);const f=(0,b.JO)(p,(0,g.m0)(h),u);for(const g of s){const e=(0,d.Ga5)(g)[o];if(e){const[n,r]=e,o=(0,d.qcw)(n).trim(),l=f.next().value;if(o!==l){const e=t.selection;return(0,d.OmN)(t,l,{at:r}),e&&!(0,m.J)(e,t.selection)&&(0,d.Z5U)(t,e),!0}}}return!1},f=e=>t=>n=>{const[o,l]=n;return!(!(0,d.kKo)(o)||o.type!==r.L7)&&(o.type===r.L7&&(((e,t)=>{let[n,o]=t;const[,l]=n.children;if(!(e=>{var t;let{children:[,n,...r]}=e;return(null===n||void 0===n||null===(t=n.children)||void 0===t?void 0:t.length)>0&&r.every((e=>{var t,r;return(null===(t=e.children)||void 0===t?void 0:t.length)===(null===(r=n.children)||void 0===r?void 0:r.length)}))})(n))return!1;const a=l.children.flatMap(((e,t)=>{var n;return"table-formula"===(null===(n=e.cellType)||void 0===n?void 0:n.kind)?[t]:[]}));if(0===a.length)return!1;if(0===a[0]){let t=!1;for(const[l,a]of(0,g.Rh)(n.children)){if(a.type!==r.Rt)continue;const n=[...o,l,0];if((0,d.uEZ)(e,n)){const o=y(a.children[0].type===r.Vx);(0,s.s)(e,[o],{at:n}),t=!0}}if(t)return!0}for(const[i,s]of(0,g.Rh)(n.children))if(s.type===r.Rt)for(const t of a){const n=s.children[t];if(n.type===r.Cv&&""!==(0,d.qcw)(n)){const n=[...o,i,t];return(0,d.OmN)(e,"",{at:n}),!0}}return!1})(t,[o,l])||((e,t,n)=>{const[,r]=(0,d.Ga5)(n),o=r;for(const[l,a]of(0,g.Rh)((0,d.Ga5)(o)))if(v(e,t,n,a,l))return!0;return!1})(e,t,[o,l])))},x=e=>(0,l.Kz)({name:"NORMALIZE_TABLE_FORMULA_AND_SERIES_CELLS_PLUGIN",plugin:f(e)});var C=n(61294),k=n(18021);const w=e=>({type:r.Kl,children:[{id:(0,u.x0)(),type:r.rN,children:[{text:""}]}],...e}),E=e=>{if("number"===e.kind&&(null!=(t=e.unit)&&"type"in t&&"args"in t&&"units"===t.type&&Array.isArray(t.args)))return{kind:"number",unit:e.unit.args};var t},S=(e,t,n)=>{if((0,d.GsE)(n))return(0,d.qEX)(e,{id:n.id,type:r.Vx,cellType:{kind:"string"},children:[n]},{at:t}),!0;if((0,d.kKo)(n)&&n.type!==r.Vx){const n={type:r.Vx};return(0,d.fLV)(e,n,{at:t}),!0}if(!n.cellType){const n={cellType:{kind:"string"}};return(0,d.fLV)(e,n,{at:t}),!0}if("string"===typeof n.cellType){const r={cellType:{kind:n.cellType}};return(0,d.fLV)(e,r,{at:t}),!0}if("number"===n.cellType.kind){const r=E(n.cellType);if(r)return(0,d.fLV)(e,{cellType:r},{at:t}),!0}let o=-1;for(const a of n.children||[]){if(o+=1,(0,d.kKo)(a)&&a.type===r.We)break;if(!(0,d.GsE)(a))return(0,d.LKm)(e,{at:[...t,o]}),!0}const[l]=(0,d.Ga5)([n,t]);return(0,k.y)(e,l)},T=(e,t)=>{let[n,o]=t;if((0,d.GsE)(n))return(0,d.qEX)(e,{id:n.id,type:r.Cv,children:[n]},{at:o}),!0;if(n.type!==r.Cv)return(0,d.fLV)(e,{type:r.Cv},{at:o}),!0;let l=-1;for(const r of n.children||[])if(l+=1,!(0,d.GsE)(r))return(0,d.LKm)(e,{at:[...o,l]}),!0;return!1},Z=(e,t)=>{let[,n]=t;for(const[r,o]of(0,d.Eln)(e,n))if(T(e,[r,o]))return!0;return!1},I=(e,t)=>((e,t)=>{let[n,o]=t;const[l,a,...i]=n.children;if(!l)return(0,s.s)(e,w({id:n.id}),{at:[...o,0]}),!0;if(l.type!==r.Kl)return(0,d.nXd)(e,{at:[...o,0]}),!0;if(!a)return(0,s.s)(e,{id:(0,u.x0)(),type:r.Rt,children:[{id:(0,u.x0)(),type:r.Vx,cellType:{kind:"string"},children:[{text:""}]}]},{at:[...o,1]}),!0;if(a.type!==r.Rt)return(0,d.nXd)(e,{at:[...o,1]}),!0;let c=-1;for(const s of i)c+=1,s.type!==r.Rt&&(0,d.nXd)(e,{at:[...o,2+c]});return!1})(e,t)||((e,t)=>{const[n]=(0,d.Ga5)(t);for(const[a,i]of(0,g.Rh)((0,d.Ga5)(n))){const[t,o]=i;if(0===a&&(0,d.kKo)(t)&&!(0,C.M)(t,r.rN))return(0,s.s)(e,{id:(0,u.x0)(),type:r.rN,children:[{text:""}]},{at:[...n[1],0]}),!0;if((0,d.GsE)(t))return(0,d.qEX)(e,{id:(0,u.x0)(),type:0===a?r.rN:r.We,children:[t]},{at:o}),!0}const[o]=(0,d.Ga5)(n),[l]=(0,d.Ga5)(o);return(0,k.y)(e,l)})(e,t)||((e,t)=>{let[n,o]=t;const l=n.children[1],a=[...o,1];if(l.type!==r.Rt)return(0,d.fLV)(e,{type:r.Rt},{at:a}),!0;let i=-1;for(const r of l.children){i+=1;const t=[...a,i];if(S(e,t,r))return!0}return!1})(e,t)||((e,t)=>{let[,n]=t;for(const[o,l]of Array.from((0,d.Eln)(e,n)).slice(2)){if(o.type!==r.Rt)return(0,d.fLV)(e,{type:r.Rt},{at:l}),!0;if(Z(e,[o,l]))return!0}return!1})(e,t)||((e,t)=>{let[,n]=t,o=-1,l=-1;for(const[i,c]of Array.from((0,d.Eln)(e,n)).slice(1)){var a;if(o+=1,!(0,d.kKo)(i))return!1;const t=null===(a=i.children)||void 0===a?void 0:a.length;if(0===o&&l<0)l=t;else if(l>=0){if(t>l){const t=[...c,l];return(0,d.nXd)(e,{at:t}),!0}if(t<l){const n=[...c,t];return(0,s.s)(e,{id:(0,u.x0)(),type:r.Cv,children:[{text:""}]},{at:n}),!0}}}return!1})(e,t)||((e,t)=>{let[,n]=t;for(const o of[2]){const t=[...n,o];if(!(0,d.uEZ)(e,t))return(0,s.s)(e,{id:(0,u.x0)(),type:r.Rt,children:[{id:(0,u.x0)(),type:r.Cv,children:[{text:""}]}]},{at:t}),!0}return!1})(e,t),D=(e,t)=>{const[n,o]=t,l=(e=>{const{tableData:t}=e,n=[];for(const i of t.columns)n.push({id:(0,u.x0)(),type:r.Vx,cellType:i.cellType,children:[{text:i.columnName}]});const o=[];if(t.columns.length>0){const e=t.columns.slice(1),[n]=t.columns;n.cells.forEach(((t,n)=>{const l=[t,...e.map((e=>e.cells[n]))];o.push({id:(0,u.x0)(),type:r.Rt,children:l.map((e=>({id:(0,u.x0)(),type:r.Cv,children:[{text:e}]})))})}))}const l={id:(0,u.x0)(),type:r.Rt,children:n},a={id:(0,u.x0)(),type:r.Kl,children:[{id:(0,u.x0)(),type:r.rN,children:[{text:t.variableName}]}]};return{id:e.id,type:r.L7,children:[a,l,...o]}})(n);(0,d.nXd)(e,{at:o}),(0,s.s)(e,l,{at:o})},R=(0,l.ot)({name:"NORMALIZE_TABLES_PLUGIN",plugin:e=>t=>{const[n,o]=t;return!(!(0,d.kKo)(n)||n.type!==r.lZ&&n.type!==r.L7)&&(n.type===r.lZ?(D(e,[n,o]),!0):n.type===r.L7&&I(e,[n,o]))}}),N=(0,l._L)({name:"PREVENT_ENTER_TO_CREATE_CELL_PLUGIN",plugin:e=>t=>{if("Enter"===t.code){const n=(0,d.xmC)(e);if(!n)return!1;const[o,l]=n;if(o.type===r.Cv||o.type===r.Vx){const n=(0,d.Mxs)(e,l);return n&&(0,d.Ys)(e,n),t.stopPropagation(),t.preventDefault(),!0}}return!1}});var L=n(1138);const M=(0,l._L)({name:"CREATE_PREVENT_DESTRUCTIVE_ON_TABLE_PLUGIN",plugin:e=>t=>{if("Delete"===t.code||"Backspace"===t.code){const n=(0,d.xmC)(e,{match:{type:r.L7}}),o=(0,d.xmC)(e,{match:{type:r.We}});if(!e.selection||!(0,d.zbr)(e.selection)||o||!n)return!1;const{focus:l}=e.selection,a="Delete"===t.code?(0,d.ZJ1)(e,l.path):(0,d.plg)(e,l.path);if(L.E9.equals(e.selection.focus,a))return t.stopPropagation(),t.preventDefault(),!0}return!1}});var B=n(66329);const O=(0,l._L)({name:"ARROW_CELL_FORMULA_SHORTCUT_PLUGIN",plugin:e=>t=>{if("="!==t.key)return!1;const n=(0,d.xmC)(e);if(!n)return!1;const[o,l]=n,a=o,i=(0,g.Z$)(l);if(null==i||0===i)return!1;if(a.type!==r.Cv)return!1;if(L.NB.string(a).trim())return!1;const s=A(l);return(0,B.c)(e,s,{kind:"table-formula"},i),!1}}),A=e=>e.slice(0,1);var _=n(19500),P=n(45202),V=n(37247),H=n(82302),W=n(55604);const K=e=>t=>{if(e.dragging===W.y){e.dragging=null,H.yW.set.isDragging(!1),t.preventDefault(),t.stopPropagation(),(0,P.v)(e)(t);const n=(0,V.r)(t.dataTransfer);if(!n)return;const o=[];n.forEach((t=>{var n;const l=null!==(n=(0,d.xmC)(e))&&void 0!==n?n:[],[a,i]=l;if(!a)return;const c=t;a.type===r.Zv||a.type===r.$?o.push({text:c}):a.type===r.JB||a.type===r.wl?o.push({text:c,[r.Ee]:!0}):((0,d.np2)(e,a)&&(0,d.r4l)(e,{at:i}),(0,s.s)(e,{id:(0,u.x0)(),type:r.Zv,children:[{text:c}]}))})),e.insertFragment(o)}};var U=n(90538);const X=()=>({type:r.Vx,cellType:{kind:"string"},children:[{text:""}]}),$=(e,t)=>{e=(0,d.nHm)(e),e=(0,d.wkd)(e),e=(0,d.Jes)(e,t),e=(0,d.eRT)(e,t),e=(0,d.w88)(e);const n=(0,r.iM)(e),{insertFragment:o}=n;return n.insertFragment=t=>{(0,d.zwG)(e,{match:{type:r.L7}})||(t=t.map((e=>{if((0,d.kKo)(e)&&e.type===r.L7){if(!e.children.length)return e;if(e.children[0].type!==r.Kl){if(!e.children[0].children.every((e=>e.type===r.Vx))){const t=Array.from({length:e.children[0].children.length},X);e.children.unshift({type:r.Rt,children:t})}e.children.unshift(w({id:e.id}))}}return e}))),o(t)},e};var q=n(17410);const j=(e,t)=>n=>{if((0,d.cpw)(e,t)(n),(0,q.ZP)("shift+enter",n)){const t=(0,d.DYv)(e,{match:{type:r.We}});if(t){n.preventDefault(),n.stopPropagation();const[,r]=t;(0,U.Wf)(e,{tablePath:L.y$.parent(L.y$.parent(r)),cellType:{kind:"table-formula"}}),(0,d.Y47)(e)}}},G=e=>({key:r.L7,isElement:!0,component:a.iA,deserializeHtml:{rules:[{validNodeName:"TABLE"}]},options:{insertColumn:(e,t)=>{let{fromCell:n}=t;const r=n.slice(0,-2);(0,U.Wf)(e,{tablePath:r})},insertRow:(e,t)=>{let{fromRow:n}=t;const r=n.slice(0,-1);(0,U.SA)(e,r)}},withOverrides:$,handlers:{onDrop:K,onKeyDown:j},plugins:[N(),M(),(0,_.I)(),O(),h(e),x(e),R(),{key:r.Kl,isElement:!0,component:a.Rn},{key:r.Rt,isElement:!0,component:a.SC,deserializeHtml:{rules:[{validNodeName:"TR"}]}},{key:r.Cv,isElement:!0,component:a.pj,deserializeHtml:{attributeNames:["rowspan","colspan"],rules:[{validNodeName:"TD"}]},props:e=>{var t,n;let{element:r}=e;return{nodeProps:{colSpan:null===r||void 0===r||null===(t=r.attributes)||void 0===t?void 0:t.colspan,rowSpan:null===r||void 0===r||null===(n=r.attributes)||void 0===n?void 0:n.rowspan}}}},{key:r.Vx,isElement:!0,component:a.xs,deserializeHtml:{attributeNames:["rowspan","colspan"],rules:[{validNodeName:"TH"}]},props:e=>{var t,n;let{element:r}=e;return{nodeProps:{colSpan:null===r||void 0===r||null===(t=r.attributes)||void 0===t?void 0:t.colspan,rowSpan:null===r||void 0===r||null===(n=r.attributes)||void 0===n?void 0:n.rowspan}}}},{key:r.We,isElement:!0,component:a.A6,decorate:(0,o.S)(r.We)},(0,l.NM)({name:"INTERCEPT_TABLE",elementTypes:[r.L7],interceptor:(e,t,n)=>"on-enter"!==n.type})()]});var F=n(90278),z=n(16545)},19500:(e,t,n)=>{"use strict";n.d(t,{I:()=>s,z:()=>c});var r=n(85663),o=n(85510),l=n(24568),a=n(74673);const i="CURSOR_FOCUS_PLUGIN",s=(0,r.p6)({key:i,withOverrides:e=>{const{onChange:t}=e,n=(0,o.x)(e,i,(()=>({})));return e.onChange=()=>{try{(()=>{var t;const r=null===(t=n.getPath)||void 0===t?void 0:t.call(n);r&&(0,a.uEZ)(e,r)&&(0,l.Y)(e,r)})()}finally{delete n.getPath,t()}},e}}),c=(e,t)=>{(0,o.x)(e,i,(()=>({}))).getPath=t}},66329:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var r=n(85663),o=n(24217),l=n(17525),a=n(37114),i=n(74673),s=n(25555),c=n(19500);const d=(e,t,n,d,u)=>{(0,i.kRc)(e,(()=>{"table-formula"===n.kind&&(0,c.z)(e,(()=>{const n=(0,i.MkB)(e,t);return n&&((e,t,n)=>{const o=e.children[1].children[n],l=e.children[0].children.findIndex((e=>e.type===r.We&&e.columnId===o.id));return l<0?null:[...t,0,l]})(n,t,d)}));const p=[...t,1,d];if((0,i.uEZ)(e,p)){var h;const[c]=(0,i.pj6)(e,p);if((0,o.I)(c,r.Vx),(0,i.fLV)(e,{cellType:n},{at:p}),"dropdown"===n.kind){let n=2,r=(0,i.pj6)(e,[...t,n,d]);for(;r;)r=(0,i.pj6)(e,[...t,n,d]),n+=1,r&&((0,o.I)(r[0],i.L7X),(0,i.OmN)(e,"",{at:[...t,n-1,d,0]}))}if("dropdown"===c.cellType.kind&&u){let n=2,r=(0,i.pj6)(e,[...t,n,d]);for(;r;){var g;if(r=(0,i.pj6)(e,[...t,n,d]),n+=1,!r)continue;(0,o.I)(r[0],i.L7X);const l=null===(g=u.getVarResult$.get(r[0].children[0].text))||void 0===g?void 0:g.result;if(!l)continue;const s=(0,a.jP)(l);(0,i.OmN)(e,s,{at:[...t,n-1,d,0]})}}const m=[...t,0],b=(0,i.MkB)(e,m);if(!b)return;const y=[...m,b.children.length],v=[...m,b.children.length-1],f=null===(h=(0,i.MkB)(e,p))||void 0===h?void 0:h.id;if(null==f)return;const x=(0,i.MkB)(e,v);"table-column-formula"===(null===x||void 0===x?void 0:x.type)&&(null===x||void 0===x?void 0:x.columnId)===f?(0,i.fLV)(e,{type:"table-column-formula"},{at:v}):(0,l.s)(e,{id:(0,s.x0)(),type:r.We,children:[{text:" "}],columnId:f},{at:y})}}))}},68439:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});const r={boolean:[{name:"Count true",expression:e=>"countif(".concat(e," == true)")},{name:"Count false",expression:e=>"countif(".concat(e," == false)")},{name:"Percent true",expression:e=>"countif(".concat(e," == true) / count(").concat(e,") in %")},{name:"Percent false",expression:e=>"countif(".concat(e," == false) / count(").concat(e,") in %")}],date:[{name:"Earliest",expression:e=>"min(".concat(e,")")},{name:"Latest",expression:e=>"max(".concat(e,")")},{name:"Time span",shortName:"Span",expression:e=>"max(".concat(e,") - min(").concat(e,")")}],number:[{name:"Sum",expression:e=>"sum(".concat(e,")")},{name:"Maximum value",shortName:"Max",expression:e=>"max(".concat(e,")")},{name:"Minimum value",shortName:"Min",expression:e=>"min(".concat(e,")")},{name:"Average",expression:e=>"average(".concat(e,")")},{name:"Median",expression:e=>"median(".concat(e,")")},{name:"Span",expression:e=>"max(".concat(e,") - min(").concat(e,")")},{name:"Count unique values",shortName:"Unique",expression:e=>"count(unique(".concat(e,"))")},{name:"% of total",shortName:"Percent",expression:(e,t)=>"sum(".concat(e,") / (").concat(t.sum,") in %")}],string:[{name:"Count unique values",shortName:"Unique",expression:e=>"count(unique(".concat(e,"))")}]},o=e=>{var t;const n="series"===e.kind?"date":e.kind;return null!==(t=r[n])&&void 0!==t?t:[]}},90278:(e,t,n)=>{"use strict";n.d(t,{Dm:()=>s.D,hR:()=>i,pl:()=>a,h0:()=>o,nJ:()=>l,L1:()=>c.L});var r=n(74673);const o=(e,t,n)=>{const o=((e,t)=>{const n=[...t,1];return new Set(Array.from((0,r.Eln)(e,n)).map((e=>(0,r.qcw)(e[0]))))})(e,t);let l=n;const a=()=>"Property".concat(l);let i=a();for(;o.has(i);)l+=1,i=a();return i},l=(e,t)=>{var n;let{monitor:o,element:l,dragItem:a,ref:i}=t;if(a&&l&&a.id===l.id)return;const s=l&&(0,r.rwb)(e,l);if(!s&&!i)return;const c=s?s.getBoundingClientRect():i&&(null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect());if(!c)return;const d=(c.right-c.left)/2,u=o.getClientOffset();if(!u)return;const p=u.x-c.left;return p<d?"left":p>=d?"right":void 0},a=(e,t,n,o)=>{let{editor:a,column:i,table:s}=e;const c=(0,r.O$c)(a,s);if(!c)return null;const d=Array.from((0,r.Eln)(a,c))[1];if(!d)return null;const u=Array.from((0,r.Eln)(a,d[1])),p=u.findIndex((e=>t.id===e[0].id)),h=u.findIndex((e=>i.id===e[0].id));if(p>=0&&h>=0){let e=[p,"right"===(o||l(a,{monitor:n,dragItem:t,element:i}))?h+1:h];return e[0]<e[1]&&(e=[e[0],e[1]-1]),e[0]===e[1]?null:e}return null},i=(e,t,n)=>{const o=(0,r.O$c)(e,t);if(!o)return null;const l=Array.from((0,r.Eln)(e,o)),a=l[1];if(!a)return null;const i={};Array.from((0,r.Eln)(e,a[1])).forEach(((e,t)=>{let[n]=e;i[t]=n}));const s=l.map((t=>{let[,o]=t;return Array.from((0,r.Eln)(e,o)).findIndex((e=>{let[t,r]=e;return t.id===n.id}))})).find((e=>e>=0));return null==s?null:i[s]};var s=n(68439),c=n(61157)},61157:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r=e=>(null===e||void 0===e?void 0:e.kind)&&["number","boolean","date"].includes(e.kind)},25211:(e,t,n)=>{"use strict";n.d(t,{Fn:()=>a,h1:()=>l,ju:()=>r,uX:()=>o});const r="decorate_code_variable",o="decorate_syntax_error",l="decorate_potential_formula",a="decorate_auto_complete_menu"},85663:(e,t,n)=>{"use strict";n.d(t,{Fn:()=>o.Fn,ju:()=>o.ju,h1:()=>o.h1,uX:()=>o.uX,ZV:()=>s.DEPRECATED_ELEMENT_CODE_BLOCK,ji:()=>s.DEPRECATED_ELEMENT_INPUT,lZ:()=>s.DEPRECATED_ELEMENT_TABLE_INPUT,ah:()=>s.ELEMENT_BLOCKQUOTE,SD:()=>s.ELEMENT_CALLOUT,Oo:()=>s.ELEMENT_CAPTION,Zv:()=>s.ELEMENT_CODE_LINE,l7:()=>s.ELEMENT_CODE_LINE_V2,$:()=>s.ELEMENT_CODE_LINE_V2_CODE,VE:()=>s.ELEMENT_COLUMNS,u8:()=>s.ELEMENT_DATA_VIEW,ro:()=>s.ELEMENT_DATA_VIEW_CAPTION,wB:()=>s.ELEMENT_DATA_VIEW_NAME,Ph:()=>s.ELEMENT_DATA_VIEW_TH,CN:()=>s.ELEMENT_DATA_VIEW_TR,g0:()=>s.ELEMENT_DISPLAY,if:()=>s.ELEMENT_DRAW,Ws:()=>s.ELEMENT_DROPDOWN,ZH:()=>s.ELEMENT_EVAL,oN:()=>s.ELEMENT_EXPRESSION,aY:()=>s.ELEMENT_FETCH,cl:()=>s.ELEMENT_FREEDRAW,GD:()=>s.ELEMENT_H1,oG:()=>s.ELEMENT_H2,o3:()=>s.ELEMENT_H3,cI:()=>s.ELEMENT_HR,IV:()=>s.ELEMENT_IMAGE,cR:()=>s.ELEMENT_IMPORT,ee:()=>s.ELEMENT_INLINE_NUMBER,f8:()=>s.ELEMENT_LI,wl:()=>s.ELEMENT_LIC,uJ:()=>s.ELEMENT_LINK,cL:()=>s.ELEMENT_LIVE_CONNECTION,YA:()=>s.ELEMENT_LIVE_CONNECTION_VARIABLE_NAME,vd:()=>s.ELEMENT_MEDIA_EMBED,kN:()=>s.ELEMENT_OL,JB:()=>s.ELEMENT_PARAGRAPH,QC:()=>s.ELEMENT_PLOT,TJ:()=>s.ELEMENT_SLIDER,bM:()=>s.ELEMENT_SMART_REF,tW:()=>s.ELEMENT_STRUCTURED_IN,DN:()=>s.ELEMENT_STRUCTURED_IN_CHILD,qG:()=>s.ELEMENT_STRUCTURED_VARNAME,L7:()=>s.ELEMENT_TABLE,Kl:()=>s.ELEMENT_TABLE_CAPTION,We:()=>s.ELEMENT_TABLE_COLUMN_FORMULA,rN:()=>s.ELEMENT_TABLE_VARIABLE_NAME,Cv:()=>s.ELEMENT_TD,Vx:()=>s.ELEMENT_TH,Rt:()=>s.ELEMENT_TR,Ht:()=>s.ELEMENT_UL,qu:()=>s.ELEMENT_VARIABLE_DEF,Qp:()=>l.Qpp,QM:()=>l.QMB,Kp:()=>l.KpV,mZ:()=>l.mZ5,Ee:()=>a,PO:()=>i,Vj:()=>l.Vjd,Sh:()=>l.ShV,jN:()=>f,VH:()=>v,Kt:()=>b,Y_:()=>g,p6:()=>m,uG:()=>y,iM:()=>d,Bp:()=>r,ht:()=>c,l3:()=>u,Bs:()=>p,Aj:()=>h});var r={};n.r(r),n.d(r,{MARK_BOLD:()=>l.Qpp,MARK_CODE:()=>l.QMB,MARK_HIGHLIGHT:()=>l.KpV,MARK_ITALIC:()=>l.mZ5,MARK_MAGICNUMBER:()=>a,MARK_SPOILER:()=>i,MARK_STRIKETHROUGH:()=>l.Vjd,MARK_UNDERLINE:()=>l.ShV});var o=n(25211),l=n(74673);const a="magicnumberz",i="spoiler";var s=n(51923);const c=[s.ELEMENT_H1,s.ELEMENT_H2,s.ELEMENT_H3,s.ELEMENT_HR,s.ELEMENT_PARAGRAPH,s.ELEMENT_CALLOUT,s.ELEMENT_BLOCKQUOTE,s.ELEMENT_IMAGE,s.DEPRECATED_ELEMENT_CODE_BLOCK,s.ELEMENT_CODE_LINE,s.ELEMENT_CODE_LINE_V2,s.ELEMENT_STRUCTURED_IN,s.ELEMENT_UL,s.ELEMENT_OL,s.DEPRECATED_ELEMENT_TABLE_INPUT,s.ELEMENT_TABLE,s.ELEMENT_DATA_VIEW,s.ELEMENT_FETCH,s.ELEMENT_PLOT,s.ELEMENT_COLUMNS,s.ELEMENT_EVAL,s.ELEMENT_VARIABLE_DEF,s.ELEMENT_LIVE_CONNECTION,s.ELEMENT_IMPORT,s.ELEMENT_DRAW],d=e=>(0,l.NUR)(e),u=()=>(0,l.CET)(),p=e=>(0,l.rO3)(e),h=e=>(0,l.U7P)(e),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.JIX)(e)},m=e=>(0,l.xje)(e),b=(e,t)=>(0,l.wQW)(e,t),y=Object.values(s),v=[s.ELEMENT_TABLE,s.ELEMENT_VARIABLE_DEF,s.ELEMENT_COLUMNS],f=Object.freeze(Object.values(y))},84951:(e,t,n)=>{"use strict";n.d(t,{CX:()=>c,Hu:()=>u,SE:()=>d,tN:()=>p,vj:()=>s});var r=n(85663),o=n(74673),l=n(25555),a=n(17525),i=n(64967);const s=[r.JB,r.wl,r.ah,r.SD],c=(e,t)=>!!t&&s.some((n=>((e,t,n)=>{const r=(0,i.zK)(e,t);if(!r)return!1;const l=(0,o.MkB)(e,r);if(!l)throw new Error("Cannot find node at the block path");return l.type===n})(e,t,n))),d=(e,t,n)=>{const r=(0,i.Nj)(e,t);(0,a.s)(e,{id:(0,l.x0)(),type:n,children:[{text:""}]},{at:r});const s=(0,o.PoD)(e,{at:r});if(s){const[,t]=s,n=(0,o.ZJ1)(e,t);(0,o.Z5U)(e,{anchor:n,focus:n})}},u=(e,t,n)=>{(0,a.s)(e,{id:(0,l.x0)(),type:n,children:[{text:""}]},{at:(0,i.Nj)(e,t)})},p=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";(0,a.s)(e,{id:(0,l.x0)(),type:r.IV,children:[{text:o}],url:n},{at:(0,i.Nj)(e,t)})}},72603:(e,t,n)=>{"use strict";n.d(t,{Ah:()=>s,PK:()=>c,sN:()=>i});var r=n(74673),o=n(48881),l=n(17525),a=n(64967);const i=(e,t,n)=>{const r=(0,o.b)({code:""});(0,l.s)(e,r,{at:(0,a.Nj)(e,t),select:n})},s=(e,t,n,r)=>{const i=(0,o.V)({varName:r("Name",1)});(0,l.s)(e,i,{at:(0,a.Nj)(e,t),select:n})},c=(e,t,n,o)=>{const l=(0,a.sK)(e,t),i=!(0,r.eNq)(e,l);s(e,l,n,o),i&&(0,r.nXd)(e,{at:l})}},48881:(e,t,n)=>{"use strict";n.d(t,{V:()=>i,b:()=>a});var r=n(25555),o=n(85663),l=n(47578);const a=e=>{let{id:t,varName:n="",code:l=""}=e;return{id:null!==t&&void 0!==t?t:(0,r.x0)(),type:o.Zv,children:[{text:n?"".concat(n," = ").concat(l):l}]}},i=e=>{let{id:t,varName:n="",code:i=""}=e;return(0,l.J8)("CODE_LINE_NAME_SEPARATED")?{id:null!==t&&void 0!==t?t:(0,r.x0)(),type:o.l7,children:[{type:o.qG,id:(0,r.x0)(),children:[{text:n}]},{type:o.$,id:(0,r.x0)(),children:[{text:i}]}]}:a({id:t,varName:n,code:i})}},60058:(e,t,n)=>{"use strict";n.d(t,{S:()=>m});var r=n(74673),o=n(85663),l=n(1138),a=n(13986),i=n(83557),s=n(10271),c=n(89347),d=n(61294),u=n(26929),p=n(84529),h=n(96124);const g=e=>!(0,i.Tj)(e.variableName),m=e=>(0,u.B)((0,h.w)((t=>{const n=(e,t)=>{let[,n]=e;const{error:r}=(0,a.fh)(t);return(0,c.K)(n,r)},i=e=>e.map((e=>({...e,[o.ju]:!0}))).filter(g),u=(e,n)=>{var a;let[,i]=e;const{selection:s}=t;if(null!==s&&void 0!==s&&null!==(a=s.focus)&&void 0!==a&&a.path&&l.y$.isCommon(i,s.focus.path)){const e=function(e,t){return t.find((t=>!t.isDeclaration&&l.e6.includes(t,e)))}(s.focus,n);if(null!=e){if(!function(e,t){return null!=e&&l.e6.includes(t,e)}((0,r.Mxs)(t,s.focus,{distance:1,unit:"character"}),e))return[{anchor:e.anchor,focus:e.anchor,variableInfo:e,[o.Fn]:!0}]}}return[]};return l=>{const[a,c]=l;if(a.type!==e)return[];const h=function(e,t){let[n,l]=t;if(n.type===o.We)return n.columnId;if(n.type===o.$){const t=(0,r.Zg$)(e,{at:l,match:e=>(0,d.M)(e,o.l7)});if(t)return t[0].id}return n.id}(t,l),g=(0,p.c)(a);if(!g.length)return[];const m=a.children.map((e=>(0,d.M)(e,o.bM)?"":(0,r.qcw)(e)));let b=!1;const y=m.flatMap(((e,t)=>{const n=[...c,t],r=(0,s.S)(e,n,h),o=[];for(const l of r)b&&l.isDeclaration||o.push(l),l.isDeclaration&&(b=!0);return o})),v=(e=>{const[t,n]=e;let o=0;return t.children.map(((e,t)=>{const l={start:o,path:[...n,t],length:(0,r.qcw)(e).length};return o+=(0,r.qcw)(e).length,l}))})(l),f=[...n(l,g).map((e=>((e,t)=>{const n=t.slice().reverse().find((t=>t.start<=e.anchor.offset));return n&&(e.anchor={path:n.path,offset:e.anchor.offset-n.start},e.focus={path:n.path,offset:e.focus.offset-n.start+n.length}),e})(e,v))),...i(y),...u(l,y)];return f}})),(t=>{let[n]=t;return n.type===e}))},26929:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});const r=(e,t)=>function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return n=>t(n)?e(...r)(n):[]}},24568:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var r=n(74673),o=n(96742);const l=(e,t)=>{const n=(0,r.MkB)(e,t);if(!n)return;if((0,r.njR)(e,n))return;const l=(0,r.ZJ1)(e,t);o.F3.focus(e),setTimeout((()=>(0,r.Z5U)(e,{focus:l,anchor:l})),0)}},76261:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(74673);const o=(e,t)=>{try{return(0,r.Zg$)(e,t)}catch(n){}}},37247:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});const r=e=>{const t=e.getData("application/x-slate-fragment");if(!t)return;const n=decodeURIComponent(window.atob(t));return JSON.parse(n)}},89347:(e,t,n)=>{"use strict";n.d(t,{K:()=>l});var r=n(13986),o=n(85663);function l(e,t){if(!t)return[];if((0,r.vq)(t)&&null!=t.token){const{token:n}=t;return[{anchor:{path:e,offset:n.offset},focus:{path:e,offset:n.offset+1},[o.uX]:!0,variant:void 0}]}if((0,r.Pk)(t)&&null!=(null===t||void 0===t?void 0:t.bracketError)){const{bracketError:n}=t;return[("mismatched-brackets"===n.type||"never-closed"===n.type)&&n.open,("mismatched-brackets"===n.type||"never-opened"===n.type)&&n.close].filter((e=>!!e)).map((t=>({anchor:{path:e,offset:t.offset},focus:{path:e,offset:t.offset+1},[o.uX]:!0,variant:n.type})))}return[]}},10271:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(13986);const o=(e,t,n)=>(0,r.FK)(e).map((e=>{const r=e.text;return{blockId:n,anchor:{path:t,offset:e.start},focus:{path:t,offset:e.end},variableName:r,isDeclaration:e.isDeclaration}}))},17525:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var r=n(22349),o=n(86789),l=n(74673);const a=e=>(Array.isArray(e)?e:[e]).filter(l.kKo),i=function(e,t){setTimeout((()=>{const e=(0,o.I)();if(e)for(const n of a(t))e.track("create notebook element",{type:n.type})}),0);for(var n=arguments.length,l=new Array(n>2?n-2:0),i=2;i<n;i++)l[i-2]=arguments[i];return(0,r.s2K)(e,t,...l)}},76132:(e,t,n)=>{"use strict";n.d(t,{ZX:()=>i,d3:()=>a});var r=n(74673),o=n(85663),l=n(25555);const a=(e,t)=>!!(0,r.Zg$)(e,{at:t,match:e=>(0,r.kKo)(e)&&e.type===o.VE}),i=(e,t)=>{a(e,t)||(0,r.qEX)(e,{id:(0,l.x0)(),type:o.VE},{at:t})}},96124:(e,t,n)=>{"use strict";n.d(t,{n:()=>o,w:()=>l});var r=n(1138);const o=e=>{const t=new WeakMap;return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];return r=>{const l=JSON.stringify({entry:r}),a=t.get(r[0]);if(a&&a.dedupeKey===l)return a.decoratorRet;const i=e(n,...o)(r);return t.set(r[0],{decoratorRet:i,dedupeKey:l}),i}}},l=e=>{const t=new WeakMap;return function(n){for(var o=arguments.length,l=new Array(o>1?o-1:0),a=1;a<o;a++)l[a-1]=arguments[a];return o=>{const a=null!=n.selection&&null!=r.e6.intersection(r.ML.range(n,o[1]),n.selection)?n.selection:null,i=JSON.stringify({selectionKey:a,entry:o}),s=t.get(o[0]);if(s&&s.dedupeKey===i)return s.decoratorRet;const c=e(n,...l)(o);return t.set(o[0],{decoratorRet:c,dedupeKey:i}),c}}}},18021:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(13986),o=n(74673);const l=(e,t)=>{var n;let[l,a]=t;const i=(0,o.qcw)(l),s=(null===(n=i.match(new RegExp(r.Rq)))||void 0===n?void 0:n.join(""))||"";return s!==i&&((0,o.OmN)(e,s,{at:a}),!0)}},12431:(e,t,n)=>{"use strict";n.d(t,{I:()=>c});var r=n(13986),o=n(85663),l=n(74673),a=n(25555),i=n(1138),s=n(17525);const c=(e,t,n,r)=>{const a=r.getNamesDefined().filter((e=>!!e.blockId)).filter((e=>"variable"===e.kind||"column"===e.kind)).map((e=>[e.name,e.blockId])),i=Object.fromEntries(a),s=Object.fromEntries(a.map((e=>[e[1],e[0]])));return(0,l.kKo)(e)?e.type===o.bM&&d(e,t,n,s):u(e,t,n,i)},d=(e,t,n,o)=>{const a=o[e.blockId];if(!a)return!1;const i=(0,l.PoD)(n,{at:t});if(i){var s;const[e,o]=i,c=(0,l.qcw)(e);if("equalSign"===(null===(s=(0,r.wS)(c).filter((e=>"ws"!==(null===e||void 0===e?void 0:e.type)))[0])||void 0===s?void 0:s.type))return(0,l.kRc)(n,(()=>{(0,l.OmN)(n,a,{at:{path:o,offset:0}}),(0,l.r4l)(n,{at:t})})),!0}return!1},u=(e,t,n,o)=>{const a=(0,l.qcw)(e),s=(0,r.FK)(a);for(const r of s)if(!r.isDeclaration&&!r.isBeforeDot){const e=o[r.text];if(e){const o={anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}};return(!n.selection||!i.e6.intersection(n.selection,o))&&(p(n,o,e),!0)}}return!1},p=(e,t,n)=>{const r={id:(0,a.x0)(),type:o.bM,blockId:n,children:[{text:""}]};(0,s.s)(e,[{text:""},r,{text:""}],{at:t})}},9727:(e,t,n)=>{"use strict";n.d(t,{Vj:()=>o,u4:()=>a,w1:()=>l});var r=n(1146);const o="smart-ref",l="text/x-block-id",a=e=>t=>{let{blockId:n,element:a,asText:i,computer:s,result:c}=t;return t=>{var d;e.dragging=o;const u=null!==(d=null===a||void 0===a?void 0:a.id)&&void 0!==d?d:n;var p;if(a&&(null!==(p=e.previewRef)&&void 0!==p&&p.current)){const n=s.formatNumber(c.type,c.value);r.YS.previewText(n.asString),t.dataTransfer.setDragImage(e.previewRef.current,0,0)}t.dataTransfer.dropEffect="link",t.dataTransfer.setData(l,u),t.dataTransfer.setData("text/plain",i)}}},64967:(e,t,n)=>{"use strict";n.d(t,{Nj:()=>i,sK:()=>a,zK:()=>l});var r=n(1138),o=n(74673);const l=(e,t)=>{var n;const r=(0,o.Lqh)(e,(0,o.pj6)(e,t)[0])?t:null===(n=(0,o.Zg$)(e,{at:t,match:t=>(0,o.Lqh)(e,t)}))||void 0===n?void 0:n[1];return null!==r&&void 0!==r?r:null},a=(e,t)=>{const n=l(e,t);if(!n)throw new Error("Cannot find block parent");return n},i=(e,t)=>r.y$.next(a(e,t))},85510:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});const r=Symbol("PLUGIN_STORE"),o=(e,t,n)=>{const o=(e=>{let t=e[r];return t||(t={},Object.defineProperty(e,r,{value:t,writable:!1,enumerable:!1})),t})(e);return((e,t,n)=>{let r=e[t];return r||(r=e[t]=n()),r})(o,t,n)}},17300:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(74673);const o=(e,t)=>!!(0,r.uEZ)(e,t)&&((0,r.kRc)(e,(()=>{(0,r.r4l)(e,{at:t})})),!0)},45202:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(74673);const o=e=>t=>{const n=(0,r.uZn)(e,t);n&&(0,r.Ys)(e,n)}},63312:(e,t,n)=>{"use strict";n.d(t,{K_:()=>l,U3:()=>o,aV:()=>a});var r=n(74673);const o=e=>{if(!e.selection)throw new Error("There is no selection");if((0,r.sCb)(e))throw new Error("The selection is expanded");return e.selection.anchor},l=e=>!e.selection||(0,r.sCb)(e)?null:e.selection.anchor,a=e=>{var t;return e.selection&&(null===(t=(0,r.pj6)(e,e.selection))||void 0===t?void 0:t[1])}},31052:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(74673);const o=(e,t)=>{var n;let[o,l]=t;const a=(0,r.qcw)(o);if((null===(n=e.selection)||void 0===n?void 0:n.anchor.offset)!==a.length)(0,r.Z5U)(e,{anchor:{offset:a.length,path:l},focus:{offset:a.length,path:l}});else for(let i=l;i.length>0;i.pop()){const t=(0,r.PoD)(e,{at:i});if(t){(0,r.Z5U)(e,{anchor:{offset:0,path:t[1]},focus:{offset:0,path:t[1]}});break}}}},5216:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});const r=(e,t)=>{const n=JSON.stringify(t),r=window.btoa(encodeURIComponent(n));e.setData("application/x-slate-fragment",r),e.setData("text","")}},82623:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(30969),o=n(74673);const l=(e,t,n,l)=>(0,r.useCallback)((r=>{const a=t&&(0,o.O$c)(e,t);if(!a)return;const i={[n]:r};try{(0,o.fLV)(e,i,{at:a}),null===l||void 0===l||l()}catch(s){if(console.error(s),!s.message.includes("Converting circular structure to JSON"))throw s}}),[e,t,n,l])},86928:(e,t,n)=>{"use strict";n.d(t,{xe:()=>p});var r=n(85663),o=n(1146),l=n(74673),a=n(96742),i=n(30969),s=n(60046),c=n(89203),d=n(55013),u=n(13986);function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Name";const a=(0,r.l3)(),d=(0,o.Iy)(),[u]=(0,i.useState)((()=>new s.BehaviorSubject(void 0)));return f(d,(0,i.useCallback)((()=>{const r=(0,l.O$c)(a,e),o=(0,l.qcw)(e),i=d.variableExists(o,t),s=b({varName:o,varExists:i}),c=null!=s;if(u.next(s),c&&r){const e=v(o).replace(/\d+$/,"")||n,t=d.getAvailableIdentifier(e,2);(0,l.OmN)(a,t,{at:r})}}),[a,e,t,u,n,d])),(0,c.VP)(u,y)}const h=e=>'"'.concat(e,'" already exists'),g="Variables must have names",m="Invalid variable name",b=e=>{let{varName:t,varExists:n}=e;return v(t)!==t?m:""===t?g:n?h(t):void 0},y=e=>e.pipe((0,s.switchMap)((async function*(e){yield e,await(0,d.Vs)(2e3),yield})));function v(e){var t;return(null===(t=e.match(new RegExp(u.Rq)))||void 0===t?void 0:t.join(""))||""}function f(e,t){const n=(0,a.vt)(),r=(0,i.useRef)(n);(0,i.useEffect)((()=>{n!==r.current&&(r.current=n,!1===n&&setTimeout(t,e.requestDebounceMs))}),[n,t,e])}},96294:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var r=n(85663),o=n(1146),l=n(74673);const a=e=>{const t=(0,r.l3)();return(0,o.LU)((()=>e&&(0,l.O$c)(t,e)))}},68243:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var r=n(1146),o=n(96742);const l=()=>{const e=(0,o.vt)();return(0,r.LU)((t=>e?t.selection:null))}},61408:(e,t,n)=>{"use strict";n.d(t,{$:()=>a,a:()=>i});var r=n(74673),o=n(85663),l=n(1146);function a(e){const t=(0,o.l3)(),n=(0,l.Iy)(),[r,a]=s(t,e),i=d(a);return n.getBlockIdResult$.useWithSelector((e=>{const t=c(null===e||void 0===e?void 0:e.result);if(t&&null!=r){const e=t.type.cellType,n=t.value.at(r);return e&&n&&{type:e,value:n}||void 0}}),i)}function i(e){var t;const n=(0,l.Iy)(),r=d(e);return c(null===(t=n.getBlockIdResult$.use(r))||void 0===t?void 0:t.result)}const s=(e,t)=>{const n=t&&(0,r.O$c)(e,t);if(!n)return[void 0,void 0];return[n[n.length-2]-2,n[n.length-1]]},c=e=>{if("column"===(null===e||void 0===e?void 0:e.type.kind))return e},d=e=>{var t;const{cellTypes:n,columnBlockIds:r}=(0,l.tZ)();return null!=e&&"table-formula"===(null===(t=n[e])||void 0===t?void 0:t.kind)?r.at(e):void 0}},67203:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(74673);const o=(e,t,n)=>{if(t){const o=(0,r.O$c)(e,t);o&&n(o)}}},49031:(e,t,n)=>{"use strict";n.d(t,{ML:()=>Ae,Q8:()=>Ke});var r,o=n(94866),l=n(1146),a=n(89203),i=n(38238),s=n.n(i),c=n(426),d=n(5594);const u=(0,c.keyframes)(r||(r=s()(["\n  0% {\n    opacity: 1;\n  }\n  40% {\n    opacity: 0.25;\n  }\n  60% {\n    opacity: 0.75;\n  }\n  80% {\n    opacity: 0.25;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),p=e=>{let{children:t,loading:n}=e;return(0,d.tZ)("div",{css:n&&{animation:"".concat(u," linear 1.5s infinite")},children:t})};var h=n(74673),g=n(1439),m=n(30969),b=n(71799);const y=(0,m.forwardRef)(((e,t)=>{let{children:n}=e;return(0,d.tZ)("div",{ref:t,style:{position:"relative"},css:(0,c.css)({"[data-slate-editor]":{maxWidth:b.cR,margin:"0 auto",zIndex:1}},";label:-EditorLayout--EditorLayout;"),"data-stop-animate-query":!0,children:n})}));var v=n(60046);var f=n(85663);const x=n(47591);var C=n(66840);const k=(0,c.css)({backgroundColor:"transparent",border:"none",display:"flex",alignItems:"center",height:"100%",borderRadius:"3px",padding:"0 8px",cursor:"pointer",transition:"background-color 0.2s ease-out","&:hover":{backgroundColor:"".concat((0,C.g)("highlightColor"))},"> div > svg > path":{transition:"stroke 0.2s ease-out"}},";label:-FloatingButton--floatingButtonStyles;"),w=(0,c.css)({"> div > svg > path":{stroke:"".concat((0,C.g)("normalTextColor")),strokeWidth:"2"}},";label:-FloatingButton--activeFloatingButtonStyles;"),E=e=>{let{isActive:t,...n}=e;return(0,d.tZ)("button",{css:[k,t&&w,";label:-FloatingButton--FloatingButton;"],...n})};const S={name:"8oxya0--divider--dividerStyle",styles:"background-color:#f0f0f2;margin:0 8px;height:30px;width:1px;label:-divider--dividerStyle;"},T=e=>{let{type:t,icon:n,divider:r}=e;const o=(0,f.l3)(),[a,i]=(0,m.useState)(!(null===o||void 0===o||!o.selection)&&(0,h.yw6)(o,t));return(0,l.Ab)((e=>{i(e)}),(()=>!(null===o||void 0===o||!o.selection)&&(0,h.yw6)(o,t))),(0,d.BX)(d.HY,{children:[r&&(0,d.tZ)("div",{css:S}),(0,d.tZ)(E,{className:"toggle",isActive:a,onMouseDown:e=>{o&&(i(!a),(0,h.lBo)(h.w9d,o,{key:t})(e))},children:n})]})};var Z=n(84951),I=n(63312);var D=n(57481);const R=(0,c.css)({background:(0,C.g)("backgroundColor"),boxShadow:"0px 2px 24px -4px ".concat((0,D.KZ)(D.lz,D.mV).rgba),borderRadius:"6px",border:"1px solid ".concat(D.Tu.rgb),height:"48px",display:"flex",alignItems:"center",padding:"6px",zIndex:2},";label:-wrapper--wrapperStyles;");var N=n(46011);const L=e=>{const t=(0,f.l3)(),n=(0,h.bbC)(t,f.uJ),r=!(null===t||void 0===t||!t.selection)&&(0,h.zwG)(t,{match:{type:n}});return(0,d.tZ)(E,{isActive:r,onMouseDown:(0,m.useCallback)((e=>{e.preventDefault()}),[]),onClick:(0,N.G)((0,m.useCallback)((()=>{var e;t&&((0,h.$Rk)(t,null!==(e=t.selection)&&void 0!==e?e:t.prevSelection),setTimeout((()=>{r?(0,h.Nxg)(t):(0,h.y3I)(t,{focused:!0})}),0))}),[t,r])),...e})};const M={name:"3bcj8s--Tooltip--iconWrapper",styles:"width:16px;height:16px;label:-Tooltip--iconWrapper;"},B=[{type:f.Qp,icon:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Bold,{})}),divider:!1},{type:f.mZ,icon:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Italic,{})}),divider:!1},{type:f.Sh,icon:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Underline,{})}),divider:!1},{type:f.Vj,icon:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Strikethrough,{})}),divider:!1},{type:f.Kp,icon:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Highlight,{})}),divider:!0},{type:f.QM,icon:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Code,{})}),divider:!1}],O=()=>{const{floating:e,style:t,open:n}=(()=>{const e=(0,f.Bs)(),t=(0,h.yHB)();return e&&((0,Z.CX)(e,(0,I.aV)(e))||(t.open=!1)),t})();return(0,l.VY)()||!n?null:(0,d.BX)("div",{ref:e,style:t,css:R,children:[B.map((e=>(0,d.tZ)(T,{...e},e.type))),(0,d.tZ)(L,{children:(0,d.tZ)("div",{css:M,children:(0,d.tZ)(x.Link,{})})})]})};var A=n(25200);const _=e=>{const t=A.dX.use.cursors();return(0,d.tZ)(h.MUX,{...e,cursors:t})};var P=n(49939);const V={name:"dmrl56--RemoteAvatarOverlay--remoteAvatarOverlayWrapperStyles",styles:"position:absolute;top:0;left:0;margin-top:0px;width:calc(100%);height:100%;label:-RemoteAvatarOverlay--remoteAvatarOverlayWrapperStyles;"},H=(0,c.css)({position:"relative",maxWidth:b.cR,margin:"0 auto",height:"100%",zIndex:0},";label:-RemoteAvatarOverlay--remoteAvatarOverlayStyles;"),W="@media (max-width: ".concat(P.cP.portrait.width,"px)"),K=(0,c.css)({[W]:{display:"none"}},";label:-RemoteAvatarOverlay--invisibleOnSmallScreens;"),U=e=>{let{children:t}=e;return(0,d.tZ)("div",{css:[K,V,";label:-RemoteAvatarOverlay--RemoteAvatarOverlay;"],children:(0,d.tZ)("div",{css:H,children:t})})};var X=n(74544),$=n(57219);const q="30px",j=(0,c.css)({position:"absolute",width:q,height:q,transition:"top ".concat($.Ju," ease-in-out")},";label:-RemoteAvatar--remoteAvatarStyles;"),G=e=>{let{name:t,email:n,top:r,left:o,backgroundColor:l}=e;const a=Math.max(Math.min(o,b.cR)-b.cR,0);return(0,d.tZ)("div",{css:[j,{top:"".concat(r,"px"),right:"calc((-".concat(q," - ").concat("5px"," - ").concat(a,"px))")},";label:-RemoteAvatar--RemoteAvatar;"],children:(0,d.tZ)(X.q,{name:t,email:n,backgroundColor:l})})},F=(e,t)=>1===t.length,z=new Set([h.L7N,f.u8,f.cL]),Y=e=>{var t,n,r,o;let{cursor:l,containerRef:a}=e;const{data:{user:i},selection:s}=l,c=(0,f.l3)(),u=Array.from((0,h.tVv)(c,{at:s.focus,block:!0,match:F}));if(!u.length)return null;const[[p]]=u,g=(0,h.rwb)(c,p);if(!g)return null;const{y:m=0}=null!==(t=null===(n=a.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{},{y:b,height:y,width:v}=g.getBoundingClientRect(),x=!(0,h.kKo)(p)||(C=p,!z.has(C.type));var C;return(null===i||void 0===i?void 0:i.name)&&(0,d.tZ)(G,{name:i.name,email:null!==(r=i.email)&&void 0!==r?r:void 0,top:x?b-m+y/2:b-m+50,left:v,backgroundColor:null===(o=l.data.style)||void 0===o?void 0:o._backgroundColor})||null},J=e=>{let{containerRef:t}=e;const n=A.dX.use.cursors();return(0,d.tZ)(U,{children:Object.entries(n).filter((e=>{let[t]=e;return"drag"!==t})).map((e=>{let[n,r]=e;return(0,d.tZ)(Y,{containerRef:t,cursor:r},n)}))})};var Q=n(27301),ee=n(57292),te=n(30879),ne=n(24988),re=n(95523),oe=n(82915),le=n(78090),ae=n(53393),ie=n(75329),se=n(61408);const ce=e=>{let{element:t,colIndex:n,children:r}=e;const o=(0,l.Iy)(),a=(0,se.$)(t),i=(0,ee.Wx)(t),s=(0,h.qcw)(t).trim(),c=""!==s,u=s===Number(s).toString(),p=(0,m.useMemo)((()=>{var e;return"number"===(null===i||void 0===i?void 0:i.kind)&&null!==(e=i.unit)&&void 0!==e&&e.length&&c&&u?o.formatUnit(i.unit):void 0}),[i,o,c,u]);return null!=a?(0,d.tZ)(le.B,{result:(0,d.tZ)(ae.X,{...a}),resultType:a.type.kind,hiddenCounter:0!==n,children:r}):(0,d.tZ)(ie.C,{showPlaceholder:0===n,isUserContent:!0,as:"td",unit:p,alignRight:(0,ee.L1)(i),children:r})},de=e=>{var t;let{thEntry:n,tableEntry:r,style:o}=e;const[,a]=n,[i]=r,s=a[a.length-1],c=(0,m.useMemo)((()=>{const e=[{type:"caption",children:[{text:""}]}];return i.children.forEach(((t,n)=>{t.children.forEach(((t,r)=>{0!==n&&r===s&&e.push(t)}))})),e}),[s,i.children]),{columns:u}=(0,ee.x6)(i),p=i.id,g=(0,m.useMemo)((()=>({blockId:p,cellTypes:u.map((e=>e.cellType)),columnBlockIds:u.map((e=>e.blockId)),isCollapsed:!1})),[p,u]);return(0,d.tZ)("div",{style:{...o,opacity:.7,zIndex:1},children:(0,d.tZ)(l.n0.Provider,{value:g,children:(0,d.tZ)(ne.aW,{columns:u,previewMode:!0,icon:null!==(t=i.icon)&&void 0!==t?t:"Table",color:i.color,children:c.map(((e,t)=>{const n=(0,h.qcw)(e);return(0,d.BX)(re.S,{previewMode:!0,children:[1===t&&(0,d.tZ)(oe.Q,{type:e.cellType,children:n}),t>1&&(0,d.tZ)(ce,{colIndex:s,element:e,children:n})]},e.id)}))})})})},ue=e=>{const{item:t}=e,n=(0,f.l3)(),r=(0,m.useMemo)((()=>(0,h.DYv)(n,{match:{id:t.id},at:[]})),[n,t.id]),o=(0,m.useMemo)((()=>r&&(0,h.xmC)(n,{match:{type:f.L7},at:r[1]})),[n,r]);return r&&o?(0,d.tZ)(de,{...e,thEntry:r,tableEntry:o}):null},pe=()=>{const e=(0,h.CET)(),t=(0,l.YO)().previewText(),n=(0,m.useRef)(null),r=(0,Q.uL)(),{display:o}=r;return(0,m.useEffect)((()=>{e.previewRef=n}),[e]),(0,d.BX)(d.HY,{children:[o&&r.itemType===ee.rh&&(0,d.tZ)(ue,{...r}),(0,d.tZ)("div",{ref:n,"data-testid":"preview-ref",style:{position:"absolute",top:-9999,left:-9999,zIndex:1e3},children:(0,d.tZ)("div",{css:[te.varStyles,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"2px 8px",backgroundColor:(0,C.g)("backgroundColor"),border:"1px solid ".concat((0,C.g)("borderColor")),borderRadius:"8px",...(0,C.m)("currentTextColor",(0,C.g)("weakTextColor"))},"transform:rotate(3deg);;label:-DndPreview--DndPreview;"],children:t})})]})};var he=n(68861),ge=n(25040),me=n(99780),be=n(79820);const ye=(0,c.css)({display:"flex",alignItems:"center",padding:"4px",gap:"4px",position:"fixed",height:"42px",boxShadow:"0px 2px 24px -4px ".concat(D.ip),borderRadius:"8px",bottom:"11px",zIndex:2},";label:-NotebookState--wrapperStyles;"),ve=(0,c.css)({width:"32px",height:"32px",backgroundColor:(0,C.g)("buttonHoverBackground"),borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},";label:-NotebookState--buttonStyles;"),fe={cursor:"default"},xe={cursor:"pointer"},Ce=(0,c.css)({backgroundColor:(0,C.g)("buttonHoverBackground"),":hover":{backgroundColor:(0,C.g)("buttonHoverBackgroundHover")}},";label:-NotebookState--activeButtonStyles;"),ke=(0,c.css)([be.s2,{display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"16px",paddingRight:"16px",gap:"4px",borderRadius:"6px",height:"32px",color:(0,C.g)("weakerTextColor"),backgroundColor:(0,C.g)("buttonHoverBackground"),":hover":{backgroundColor:(0,C.g)("buttonHoverBackgroundHover")}}],";label:-NotebookState--revertChangesStyles;"),we=(0,c.css)({color:(0,C.g)("normalTextColor"),":hover":{backgroundColor:(0,C.g)("buttonHoverBackgroundHover")}},";label:-NotebookState--activeRevertChangesStyles;"),Ee=e=>{const t=(e=>{switch(e){case"saved":return{background:(0,C.g)("notebookStateOkLight"),foreground:(0,C.g)("notebookStateOkHeavy")};case"unsaved":return{background:(0,C.g)("notebookStateWarningLight"),foreground:(0,C.g)("notebookStateWarningHeavy")};case"offline":return{background:(0,C.g)("notebookStateDisabledLight"),foreground:(0,C.g)("notebookStateDisabledHeavy")};case"error":return{background:(0,C.g)("notebookStateDangerLight"),foreground:(0,C.g)("notebookStateDangerHeavy")}}})(e);return(0,c.css)({width:"32px",height:"32px",borderRadius:"6px",display:"flex",justifyContent:"center",alignItems:"center",transition:"all 0.2s ease-in-out",backgroundColor:(0,C.g)("buttonHoverBackground"),":hover":{backgroundColor:t.background},":after":{content:'""',width:"6px",borderRadius:"6px",height:"6px",backgroundColor:t.foreground}},";label:-NotebookState--stateStyles;")},Se=(e,t,n)=>e?(0,d.BX)(d.HY,{children:[(0,d.tZ)("p",{children:"Play with this notebook \ud83d\udd79\ufe0f"}),(0,d.tZ)("p",{children:(0,d.BX)("span",{css:(0,c.css)({color:D.mK.rgb},";label:-NotebookState--getText;"),children:["Duplicate if you have an account. ",(0,d.tZ)("br",{})," Or sign up for early access."]})})]}):n?(0,d.BX)(d.HY,{children:[(0,d.tZ)("p",{children:"Offline \ud83c\udf10"}),(0,d.tZ)("p",{children:(0,d.BX)("span",{css:(0,c.css)({color:D.mK.rgb},";label:-NotebookState--getText;"),children:["We're saving your work and your changes will sync when you are back online. ",(0,d.tZ)("br",{})," If you think something is wrong contact support."]})})]}):t?(0,d.tZ)("p",{children:"Notebook saved"}):(0,d.BX)(d.HY,{children:[(0,d.tZ)("p",{children:"Changes not synced"}),(0,d.tZ)("p",{children:(0,d.tZ)("span",{css:(0,c.css)({color:D.mK.rgb},";label:-NotebookState--getText;"),children:"If this error persists contact support."})})]});var Te={name:"hodcol--NotebookState--NotebookState",styles:"margin-right:16px;border-radius:8px;label:-NotebookState--NotebookState;"},Ze={name:"pn4u0s--NotebookState--NotebookState",styles:"width:16px;height:16px;label:-NotebookState--NotebookState;"},Ie={name:"ptst9r--NotebookState--NotebookState",styles:"max-width:200px;label:-NotebookState--NotebookState;"};const De=e=>{let{undo:t,redo:n,revertChanges:r,canUndo:o,canRedo:l,readOnly:a,saved:i,isOffline:s,authed:c}=e;const u=s?"offline":a||!i?"unsaved":"saved";return(0,d.BX)("div",{css:[ye,b.XS,{right:c?"80px":"14px"},!o&&a&&{display:"none"},";label:-NotebookState--NotebookState;"],children:[(0,d.tZ)("div",{css:[ve,o&&Ce,";label:-NotebookState--NotebookState;"],children:(0,d.tZ)("button",{css:["width:24px;height:24px;",fe,o&&xe,";label:-NotebookState--NotebookState;"],onClick:t,title:o?"Undo \u2318 + Z":"",children:(0,d.tZ)(ge.p,{direction:"left",active:o})})}),(0,d.tZ)("div",{css:[ve,l&&Ce,";label:-NotebookState--NotebookState;"],children:(0,d.tZ)("button",{css:["width:24px;height:24px;",fe,l&&xe,";label:-NotebookState--NotebookState;"],onClick:n,title:l?"Redo \u2318 + SHIFT + Z":"",children:(0,d.tZ)(ge.p,{direction:"right",active:l})})}),a&&(0,d.BX)("button",{css:[ke,fe,o&&xe,o&&we,";label:-NotebookState--NotebookState;"],onClick:r,title:o?"":"Reset all changes to the document",children:[(0,d.tZ)("div",{css:Ze,children:(0,d.tZ)(me.z,{})}),"Reset Changes"]}),(0,d.tZ)(he.u,{trigger:(0,d.tZ)("div",{"aria-label":u,css:Ee(u)}),side:"top",hoverOnly:!0,wrapperStyles:Te,children:(0,d.tZ)("div",{css:Ie,children:Se(a,i,s)})})]})};var Re=n(68160);const Ne=e=>{var t,n,r,o;let{isSavedRemotely:a}=e;const[i,s]=(0,m.useState)(!0),c=(0,Re.useSession)();(0,m.useEffect)((()=>{const e=null===a||void 0===a?void 0:a.pipe((0,v.debounceTime)(2e3)).subscribe((e=>s(e)));return()=>null===e||void 0===e?void 0:e.unsubscribe()}),[a]);const u=(0,f.Aj)(),p=(0,l.VY)(),h=!(null===(t=u.undoManager)||void 0===t||null===(n=t.canUndo)||void 0===n||!n.call(t)),g=!(null===(r=u.undoManager)||void 0===r||null===(o=r.canRedo)||void 0===o||!o.call(r)),b=(0,m.useCallback)((()=>{for(;null!==(e=u.undoManager)&&void 0!==e&&null!==(t=e.canUndo)&&void 0!==t&&t.call(e);){var e,t;u.undo()}}),[u]),{isOffline:y}=(()=>{const[e,t]=(0,m.useState)(!1),n=(0,m.useCallback)((async()=>{if(navigator.onLine)t(!1);else{const e=await fetch(window.location.href);t(!e.ok)}}),[]);return(0,m.useEffect)((()=>("addEventListener"in global&&(global.addEventListener("online",n),global.addEventListener("offline",n)),()=>{"removeEventListener"in global&&(global.removeEventListener("online",n),global.removeEventListener("offline",n))})),[n]),{isOffline:e}})();return(0,d.tZ)(De,{undo:u.undo,redo:u.redo,revertChanges:b,canUndo:h,canRedo:g,readOnly:p,saved:i,isOffline:y,authed:"authenticated"===c.status})};var Le=n(64027);const Me=n(77282).browser&&"IntersectionObserver"in global;const Be=e=>{const[t,n]=(0,m.useState)(0),r=(0,m.useCallback)((()=>{n((e=>e+1));let t=!0;return()=>{if(t){t=!1;const{selection:r}=e;n((t=>{const n=t-1;return 0===n&&setTimeout((()=>{r&&(0,h.$Rk)(e,r)}),0),n}))}}}),[e]);return{isWritingLocked:t>0,lockWriting:r}},Oe=e=>{let{containerRef:t,children:n,readOnly:r}=e;return(()=>{const e=(0,f.l3)();(0,a.mR)("keydown",(0,m.useCallback)((t=>{(t.metaKey||t.ctrlKey)&&("z"!==t.key||t.shiftKey?("Z"===t.key||"z"===t.key&&t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.redo()):(t.preventDefault(),t.stopPropagation(),e.undo()))}),[e]))})(),(0,d.BX)(d.HY,{children:[(0,d.tZ)(O,{}),(0,d.tZ)(_,{containerRef:t}),(0,d.tZ)(J,{containerRef:t}),r?null:(0,d.tZ)(o.HE,{}),(0,d.tZ)(pe,{}),n]})},Ae=e=>{const{isSavedRemotely:t,editor:n,readOnly:r}=e,i=(0,m.useRef)(null),[s]=(0,m.useState)((()=>new v.Subject)),c=(0,m.useCallback)((()=>{setTimeout((()=>{s.next(void 0)}))}),[s]),{isWritingLocked:u,lockWriting:b}=Be(n),{onRefChange:f}=function(){let{easing:e=$.Ui,duration:t=$.X4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{onRefChange:(0,m.useCallback)((n=>{Me&&n.current instanceof HTMLElement&&(0,Le.ZP)(n.current,{easing:e,duration:t})}),[t,e])}}();return(0,a.mR)("dragstart",(e=>{r&&(e.preventDefault(),e.stopPropagation())}),!0),n?(0,d.tZ)(l.D8.Provider,{value:{readOnly:r||u,lockWriting:b},children:(0,d.tZ)(l.fQ,{changeSubject:s,children:(0,d.tZ)(p,{loading:u,children:(0,d.tZ)(l.W,{onRefChange:f,children:(0,d.tZ)(y,{ref:i,children:(0,d.tZ)(o.oG,{editor:n,children:(0,d.tZ)(o.DH,{editor:n,children:(0,d.BX)(h.hv7,{editor:n,onChange:c,readOnly:u,disableCorePlugins:{history:!0},children:[(0,d.tZ)(Oe,{...e,containerRef:i}),(0,d.tZ)(Ne,{isSavedRemotely:t})]})})})})})})})}):(0,d.tZ)(g.r,{})};var _e=n(86789),Pe=n(64753),Ve=n(20932),He=n(25555);const We=()=>{const e=(0,l.Iy)(),t=(0,m.useContext)(_e.K),n=(0,l.wr)(),r=(0,m.useRef)(null),a=(0,m.useMemo)((()=>(0,Pe.Gr)({computer:e,readOnly:!1,events:t,interactions:n})),[e,t,n]),[i]=(0,m.useState)((()=>(0,h.JIX)({plugins:a}))),[s]=(0,m.useState)((()=>new v.Subject)),c=(0,m.useCallback)((()=>{setTimeout((()=>{s.next(void 0)}))}),[s]),{isWritingLocked:u,lockWriting:g}=Be(i);return(0,d.tZ)(l.fQ,{changeSubject:s,children:(0,d.tZ)(l.D8.Provider,{value:{readOnly:u,lockWriting:g},children:(0,d.tZ)(p,{loading:u,children:(0,d.tZ)(y,{ref:r,children:(0,d.tZ)(o.oG,{editor:i,children:(0,d.tZ)(o.DH,{editor:i,children:(0,d.BX)(h.hv7,{editor:i,onChange:c,initialValue:"true"===window.localStorage.getItem("deciPopulatePlayground")?[{children:[{text:"\ud83e\udd84 Make sense of numbers today"}],type:"h1",id:(0,He.x0)()},{children:[{text:"\ud83c\udfb8 Play first, read later"}],type:"h2",id:(0,He.x0)()},{children:[{children:[{text:"You = 55 kg"}],type:"code_line",id:(0,He.x0)()},{children:[{text:"Feather = 0.008 g"}],type:"code_line",id:(0,He.x0)()},{children:[{text:"You in Feather"}],type:"code_line",id:(0,He.x0)()}],type:"code_block",id:(0,He.x0)()},{children:[{text:"\ud83e\udd14 What is Decipad"}],type:"h2",id:(0,He.x0)()},{type:"p",id:(0,He.x0)(),children:[{text:"From crypto to cashflows, everyone should be able to explore cool and interesting things with data. Decipad is an interactive notebook to gather information, build models in minutes and bring data-driven ideas to life."}]},{children:[{text:"Decipad is an interactive document to gather information, build models in minutes and bring data-driven ideas to life."}],type:"blockquote",id:(0,He.x0)()},{children:[{text:"Just start writing. No coding skills required."}],type:"p",id:(0,He.x0)()},{children:[{text:"\ud83e\udd29 What can I do with it?"}],type:"h3",id:(0,He.x0)()},{children:[{children:[{children:[{text:"Narrative to numbers, instantly",bold:!0},{text:": Supercharge your thoughts with live data, calculations and visuals; make all your documents interactive."}],type:"lic",id:(0,He.x0)()}],type:"li",id:(0,He.x0)()},{children:[{children:[{text:"Easy to use, fast to model",bold:!0},{text:": "},{text:"SUMIF",code:!0},{text:", "},{text:"B1 + B2",code:!0},{text:", "},{text:"VLOOKUP",code:!0},{text:"? Use human language to build models easily and quickly, that anyone can understand."}],type:"lic",id:(0,He.x0)()}],type:"li",id:(0,He.x0)()},{children:[{children:[{text:"Share your work, create collectively",bold:!0},{text:": Think bigger. Reuse and build upon concepts created by analysts, programmers, colleagues and creators."}],type:"lic",id:(0,He.x0)()}],type:"li",id:(0,He.x0)()},{children:[{children:[{text:"Unlimited potential, any skill set",bold:!0},{text:": Transition seamlessly between nifty low-code elements and our natural, yet powerful language."}],type:"lic",id:(0,He.x0)()}],type:"li",id:(0,He.x0)()}],type:"ol",id:(0,He.x0)()},{children:[{text:"\ud83d\udc4fWant to make better decisions?"}],type:"h2",id:(0,He.x0)()},{children:[{text:"Let's go! "}],type:"p",id:(0,He.x0)()},{children:[{text:"\u2139\ufe0f Decipad can be a bit intimidating at first. We are still working on making it easier for people to use. In the meantime, join us on Discord and we will be delighted to hear from you."}],type:"blockquote",id:(0,He.x0)()},{children:[{children:[{children:[{text:"\ud83c\udf0d "},{children:[{text:"Discord"}],type:"a",id:(0,He.x0)(),url:"https://discord.gg/CUtKEd3rBn"},{text:""}],type:"lic",id:(0,He.x0)()}],type:"li",id:(0,He.x0)()}],type:"ul",id:(0,He.x0)()},{children:[{text:"Let's learn to improve your runs with Decipad."}],type:"p",id:(0,He.x0)()},{children:[{children:[{text:"RunningGoal = 3 miles/day"}],type:"code_line",id:(0,He.x0)()},{children:[{text:"TargetFrequency = 5 days/week"}],type:"code_line",id:(0,He.x0)()},{children:[{text:"TargetDistance = RunningGoal * TargetFrequency"}],type:"code_line",id:(0,He.x0)()}],type:"code_block",id:(0,He.x0)()},{children:[{text:"Or if you are outside the united states:"}],type:"p",id:(0,He.x0)()},{children:[{children:[{text:"round(RunningGoal in km/day)"}],type:"code_line",id:(0,He.x0)()}],type:"code_block",id:(0,He.x0)()},{children:[{text:"And for those \ud83c\udf27 rainy days you have to stick to an indoor track:"}],type:"p",id:(0,He.x0)()},{children:[{children:[{text:"UsualRun = 3.2 miles"}],type:"code_line",id:(0,He.x0)()},{children:[{text:"IndoorTrack = 400 m"}],type:"code_line",id:(0,He.x0)()},{children:[{text:"round(UsualRun in IndoorTrack)"}],type:"code_line",id:(0,He.x0)()}],type:"code_block",id:(0,He.x0)()},{children:[{text:"Now let's list your top three favourite routes:"}],type:"p",id:(0,He.x0)()},{children:[{text:""}],type:"table-input",id:(0,He.x0)(),tableData:{variableName:"Routes",columns:[{columnName:"Name",cells:["\ud83c\udfdd Sandy Beach","\ud83c\udff0 Buckingham Palace","\ud83c\udfde Yosemite"],cellType:{kind:"string"}},{columnName:"Distance",cellType:{kind:"number",unit:[{unit:"miles",exp:(0,Ve.N)(1),multiplier:(0,Ve.N)(1),known:!0}]},cells:["3.2","5","12"]}]}},{children:[{text:"Some training books say you should aim to improve your runs no more than 10% week on week. Let's set the baseline speed you currently run at:"}],type:"p",id:(0,He.x0)()},{children:[{children:[{text:"Baseline = 5 miles/hour"}],id:(0,He.x0)(),type:"code_line"},{children:[{text:"Improvement = 5%"}],id:(0,He.x0)(),type:"code_line"}],type:"code_block",id:(0,He.x0)()},{children:[{text:"So you should aim for the following times:"}],type:"p",id:(0,He.x0)()},{children:[{children:[{text:"YourTrainingPlan = {\n  Period = [date(2022-03) .. date(2022-06) by month]\n  TargetSpeed = round(grow(Baseline, Improvement, YourTrainingPlan.Period), 2)\n  TargetTime = round(Routes.Distance / TargetSpeed in minutes)\n}"}],type:"code_line",id:(0,He.x0)()}],type:"code_block",id:(0,He.x0)()},{children:[{text:"Don't forget to keep having fun in your runs, and above all welcome to Decipad \ud83e\udd17"}],type:"p",id:(0,He.x0)()}]:[{type:"h1",id:(0,He.x0)(),children:[{text:""}]},{type:"p",id:(0,He.x0)(),children:[{text:""}]}],readOnly:u,children:[(0,d.tZ)(o.HE,{}),(0,d.tZ)(O,{})]})})})})})})})},Ke=()=>(0,d.tZ)(l.Au,{children:(0,d.tZ)(We,{})})},10268:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});var r=n(68685),o=n.n(r),l=n(5906);async function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={method:"GET",headers:{Referer:global.location.toString()}},r=await o()(e.toString(),n);return r.ok||await i(r),{contentType:r.headers.get("content-type"),statusCode:r.status,body:await(t?r.json():r.text())}}async function i(e){var t,n;const r=await e.text();let o;try{o=JSON.parse(r)}catch(a){}throw null!==(t=o)&&void 0!==t&&t.error?l.o.fromResponse(null===(n=o)||void 0===n?void 0:n.error):new Error(r)}},23058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(35016),o=n(76088);const l=function(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n)switch(n){case"gsheets":return o.hP.import(e,t,l);case"decipad":return o.p5.import()}return(0,r.I)(e,t,l)},a=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{identifyIslands:o,...a}=r;let i=await l(e,t,n,r);return 1===i.length&&o&&(i=await l(e,t,n,a)),i}},79749:(e,t,n)=>{"use strict";n.d(t,{C:()=>p});var r=n(13986),o=n(20932),l=n(55013),a=n(19015),i=n(17905),s=n(89822);function c(e){let t=e;switch("object"===typeof e&&"function"===typeof e.toString&&(t=e.toString()),t){case"Bool":case a.Dy.Bool:return{kind:"boolean"};case"Date":case"DateMillisecond":case"Date64<MILLISECOND>":case a.Dy.DateMillisecond:return{kind:"date",date:"millisecond"};case"Float":case"Float16":case"Float32":case"Float64":case a.Dy.Float:case a.Dy.Float16:case a.Dy.Float32:case a.Dy.Float64:return{kind:"number",unit:null};case"Dictionary<Int32, Utf8>":case"Utf8":case a.Dy.Utf8:return{kind:"string"};default:return{kind:"type-error",errorCause:{errType:"free-form",message:"Don't know how to convert from arrow type ".concat(t," to internal type")}}}}const d=e=>{const t=typeof e;if(null==e)return r.x4.UnknownValue.getData();if("number"===t)return(0,o.N)(e);if("boolean"===t||"string"===t)return e;if("object"===typeof e){if(e instanceof Date)return BigInt(e.getTime());if("toString"in e&&"function"===typeof e.toString)return e.toString()}return r.x4.UnknownValue.getData()},u=(e,t)=>{const n=[];for(let r=0;r<t.numCols;r+=1){const e=(0,l.m0)(t.getChildAt(r),"expected column at ".concat(r)),o=[];for(let t=0;t<e.length;t+=1)o.push(d(e.get(t)));n.push(o)}return n},p=async e=>{const t=await(0,i.p)(e),n=(e=>{const t=[],n=[];for(let o=0;o<e.numCols;o+=1){const a=e.schema.fields[o];try{const r=c((0,l.m0)(e.getChildAt(o)).type);t.push(r),n.push(a.name)}catch(r){return{kind:"type-error",errorCause:{errType:"free-form",message:"Error inferring type of column ".concat(a.name,": ").concat(r.message)}}}}return{kind:"table",indexName:n[0],columnTypes:t,columnNames:n}})(t);return"table"===n.kind?{type:n,value:u(0,t)}:"type-error"===n.kind?{type:n,value:r.x4.UnknownValue.getData()}:(0,s.T)("Unexpected result of type ".concat(n.kind))}},155:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var r=n(43121),o=n(85996),l=n(94800),a=n(19453);const i=async(e,t,n)=>{const i=await t.text();return new Promise(((t,s)=>{const c=[],d=(0,r.Qc)({cast:!0,trim:!0,delimiter:[",",";"],relax_quotes:!0,relax_column_count:!0,skip_empty_lines:!0});let u=!1;d.on("readable",(()=>{let e;for(;e=d.read();)u||c.push(e)})),d.once("end",(async()=>{u=!0;try{const i=(0,a.A)((r=c,{values:(0,l.j)(r)}));t(await(0,o.Z)(e,i,{...n,doNotTryExpressionNumbersParse:!0}))}catch(i){s(i)}var r})),d.once("error",s),d.end(i)}))}},35016:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var r=n(79749),o=n(155),l=n(21547);const a=async(e,t,n,a)=>{if(!t.ok)throw new Error("failed to fetch from ".concat(a," with response ").concat(t.status,": ").concat(t.statusText));const i=t.headers.get("content-type");let s;return s=null!==i&&void 0!==i&&i.startsWith("application/json")?(0,l.I)(await t.json(),n):null!==i&&void 0!==i&&i.startsWith("text/csv")?await(0,o.$)(e,t,n):null!==i&&void 0!==i&&i.startsWith("application/vnd.apache.arrow")?await(0,r.C)(t):{type:{kind:"string"},value:await t.text()},[{meta:{sourceUrl:a},result:s}]},i=(e,t,n)=>t instanceof URL?async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return a(e,await fetch(t),n,t)}catch(r){throw console.error("Error making request to ".concat(t),r),r}}(e,t,n):a(e,t,n)},21547:(e,t,n)=>{"use strict";n.d(t,{I:()=>d});var r=n(13986),o=n(20932),l=n(85996),a=n(89822),i=n(93291);const s=(e,t)=>{if(0===e.length)return{type:{kind:"anything"},value:r.x4.UnknownValue.getData()};if(e.some((e=>Array.isArray(e))))return((e,t)=>0===e.length?(0,a.T)("Don`t know how to import empty array"):c(Object.fromEntries(e.map(((e,t)=>[(0,l.PU)(t),e]))),t))(e,t);const n=e.map((e=>d(e,t)));return(0,i.N)(n.map((e=>{let{type:t}=e;return t})))?{type:{kind:"column",indexedBy:null,cellType:n[0].type,columnSize:"unknown"},value:n.map((e=>e.value))}:(0,a.T)("not all elements of array are of same type")},c=(e,t)=>{const n=Object.entries(e);if(n.length<0)return(0,a.T)("Don`t know how to import an empty object");const o=n.map(((e,t)=>{let[,n]=e;return[t,n]})).map((e=>{var n;let[r,o]=e;return d(o,t,null===(n=t.columnTypeCoercions)||void 0===n?void 0:n[r])})),l=o.map((e=>null==e.value?r.x4.UnknownValue.getData():"column"===e.type.kind||"type-error"===e.type.kind?e.value:[e.value])),i=Object.keys(e);return{type:{kind:"table",columnNames:i,columnTypes:o.map((e=>"column"===e.type.kind?e.type.cellType:e.type)),indexName:i[0]},value:l}},d=(e,t,n)=>{if(Array.isArray(e))return s(e,t);const a=typeof e;if("string"===(null===n||void 0===n?void 0:n.kind))return{type:{...n},value:e.toString()};if(("number"===a||"bigint"===a)&&"date"===(null===n||void 0===n?void 0:n.kind))return{type:{...n},value:BigInt(e)};if("number"===a||"bigint"===a||"string"===a&&"number"===(null===n||void 0===n?void 0:n.kind))return{type:{kind:"number",unit:null},value:(0,o.N)(e)};if("boolean"===a||"string"===a&&"boolean"===(null===n||void 0===n?void 0:n.kind))return{type:{kind:"boolean"},value:"boolean"===a?e:(0,l.gx)(e)};if("string"===a){const t=e.trim();if(t){if("date"===(null===n||void 0===n?void 0:n.kind)){const e=(0,l.sG)(t,n.date);if(e)return{type:{...n},value:BigInt(e.date.getTime())}}return{type:{kind:"string"},value:e}}return{type:{kind:"anything"},value:r.x4.UnknownValue.getData()}}return"object"===a&&null!=e?c(e,t):{type:{kind:"anything"},value:r.x4.UnknownValue.getData()}}},76885:(e,t,n)=>{"use strict";n.d(t,{Sj:()=>l.S,ZC:()=>o.Z,e1:()=>r.e});var r=n(24887),o=n(23058),l=n(11508)},24887:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var r=n(55013),o=n(76088),l=n(62312);const a=async e=>{let t;try{t=new URL(e.trim())}catch(a){return[!1,void 0]}const n=await(async e=>{var t;return null===(t=o.ZP.find((t=>{let{matchUrl:n}=t;try{return n(e)}catch(a){return!1}})))||void 0===t?void 0:t.name})((0,r.m0)(t));return n?[!0,n]:(0,l.a)((0,r.m0)(t))}},62312:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});const r=new Map([[".csv","csv"],[".arrow","arrow"],[".json","json"]]),o=new Map([["text/csv","csv"],["application/json","json"],["application/vnd.apache.arrow","arrow"]]),l=async e=>{const t=Array.from(r.keys()).find((t=>e.pathname.endsWith(t)));if(t)return[!0,r.get(t)];try{const{headers:t}=await fetch(e),n=t.get("Content-Type");if(n){const e=Array.from(o.keys()).find((e=>n.startsWith(e)));if(e)return[!0,o.get(e)]}}catch(n){}return[!1,void 0]}},11508:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(76088);const o=(e,t)=>"gsheets"===e?r.hP.parseSourceUrl(t):{isRange:!1,userUrl:t}},2747:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});const r={name:"decipad",matchUrl:e=>("localhost"===e.hostname||e.hostname.endsWith(".decipad.com"))&&e.pathname.startsWith("/n/"),import:()=>{throw new Error("Decipad notebooks are not meant to be imported statically. Use a live connection instead")}}},2121:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(36192),o=n(63477),l=n(45503);const a=(e,t,n,a)=>{var i,s;const{googleSheets:c}=(0,r.Z)(),d=(0,o.stringify)({majorDimension:"COLUMNS",valueRenderOption:"UNFORMATTED_VALUE",dateTimeRenderOption:"FORMATTED_STRING",key:c.apiKey}),u=null!==(i=n.sheets.find((e=>e.properties.sheetId===t||e.properties.sheetId===Number(t))))&&void 0!==i?i:n.sheets[Number(t)],p=((e,t)=>"".concat(e,"!").concat((0,l.J)(t.firstCol+1)).concat(t.firstRow+1,":").concat((0,l.J)(t.lastCol+1)).concat(t.lastRow+1))(null!==(s=null===u||void 0===u?void 0:u.properties.title)&&void 0!==s?s:"Sheet1",a);return new URL("https://content-sheets.googleapis.com/v4/spreadsheets/".concat(e,"/values/").concat(encodeURIComponent(p),"?").concat(d))}},24312:(e,t,n)=>{"use strict";n.d(t,{T:()=>l});var r=n(36192),o=n(63477);const l=(e,t,n)=>{var l,a;const{googleSheets:i}=(0,r.Z)(),s=(0,o.stringify)({majorDimension:"COLUMNS",valueRenderOption:"UNFORMATTED_VALUE",dateTimeRenderOption:"FORMATTED_STRING",key:i.apiKey}),c=null!==(l=n.sheets.find((e=>e.properties.sheetId===t||e.properties.sheetId===Number(t))))&&void 0!==l?l:n.sheets[Number(t)],d=null!==(a=(null===c||void 0===c?void 0:c.properties.title)&&encodeURIComponent(c.properties.title))&&void 0!==a?a:t;return new URL("https://content-sheets.googleapis.com/v4/spreadsheets/".concat(e,"/values/").concat(d,"?").concat(s))}},7244:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(63477),o=n(36192),l=n(10268);const a=async e=>{const{googleSheets:t}=(0,o.Z)(),n=(0,r.stringify)({key:t.apiKey}),a=new URL("https://sheets.googleapis.com/v4/spreadsheets/".concat(e,"?").concat(n));return(await(0,l.W)(a,!0)).body}},38560:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});const r=e=>"content-sheets.googleapis.com"===e.hostname?(e=>{const t=e.pathname.match(/^\/v4\/spreadsheets\/([^/]+)\/values\/([^/]+)/);if(!t)throw new Error("Could not extract request data from ".concat(e));const[,n,r]=t;return{sheetId:n,gid:r}})(e):(e=>{var t;const n=e.pathname.match(/^\/spreadsheets\/d\/([^/]+)\/edit/);if(!n)throw new Error("Could not extract sheet id from ".concat(e));const[,r]=n;if(!r)throw new Error("Could not extract sheet id from ".concat(e));const o=e.hash.match(/gid=([0-9]+)/);return{sheetId:r,gid:null!==(t=o&&o[1])&&void 0!==t?t:""}})(e)},25310:(e,t,n)=>{"use strict";n.d(t,{P:()=>y});var r=n(13986),o=n(85996),l=n(55013),a=n(7244),i=n(38560),s=n(24312),c=n(19453),d=n(18779);const u=(e,t)=>e+t.length,p=e=>({result:{type:{kind:"type-error",errorCause:{errType:"free-form",message:e}},value:r.x4.UnknownValue.getData()}}),h=async(e,t,n)=>{const{identifyIslands:r=!1,maxCellCount:l}=n,a=await t.json();if(l){if(a.values.reduce(u,0)>l)return p("Too many cells to import. maximum is ".concat(l)).result}const i=r?a:(0,c.A)(a);return(0,o.Z)(e,i,{...n,doNotTryExpressionNumbersParse:!0})},g=async(e,t,n)=>{const{sheetId:r}=(0,i.p)(t),o=await(0,a.h)(r),l=((e,t)=>async n=>h(e,await fetch(n),t))(e,n),c=[];for(const a of o.sheets){const e=(0,s.T)(o.spreadsheetId,a.properties.sheetId,o);try{const t=await l(e),n={title:a.properties.title,importedAt:new Date,sourceUrl:e,sheetId:r,gid:a.properties.sheetId,sourceMeta:o};c.push({meta:n,result:t})}catch(d){c.push(p(d.message))}}return c},m=async(e,t,n)=>(await g(e,t,n)).flatMap((e=>{var t;return(0,d.M)((0,l.m0)(null===(t=e.meta)||void 0===t?void 0:t.gid).toString(),e)})),b=async(e,t,n)=>{const{sheetId:r,gid:o}=(0,i.p)(t),l=await(0,a.h)(r),c=(0,s.T)(r,o,l);let d;try{d=await fetch(c)}catch(g){return[p(g.message)]}if(!d.ok)return[p(d.statusText||await d.text())];const u=await h(e,d,n);return[{meta:{title:l.properties.title,importedAt:new Date},result:u}]},y=async(e,t,n)=>(n.identifyIslands?m:b)(e,t,n)},60230:(e,t,n)=>{"use strict";n.d(t,{h:()=>l});var r=n(25310),o=n(78084);const l={name:"gsheets",matchUrl:e=>"docs.google.com"===e.hostname,import:r.P,parseSourceUrl:o.D}},78084:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(38560);const o=e=>{const{sheetId:t,gid:n}=(0,r.p)(new URL(e)),o=n.indexOf("!"),l=n.substring(0,o)||"0",a=o>0,i=decodeURIComponent(n.slice(o+1)||"").split(":"),s=((e,t)=>"https://docs.google.com/spreadsheets/d/".concat(encodeURIComponent(e),"/edit#gid=").concat(encodeURIComponent(t)))(t,l);return{isRange:a,range:i,subsheetName:l,userUrl:s}}},76088:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,hP:()=>r.h,p5:()=>o.p});var r=n(60230),o=n(2747);const l=[r.h,o.p]},5906:(e,t,n)=>{"use strict";n.d(t,{o:()=>l});var r=n(26290),o=n.n(r);class l extends Error{constructor(e,t){super(e),o()(this,"code",500),this.code=Number(t)}static fromResponse(e){let{message:t,code:n}=e;return new l(t,n)}}},89822:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(13986);const o=e=>({type:{kind:"type-error",errorCause:{errType:"free-form",message:e}},value:r.x4.UnknownValue.getData()})},95335:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});const r=(e,t,n)=>{const r=Array.from({length:e});for(let o=0;o<e;o+=1)r[o]=Array.from({length:t}).fill(n);return r}},94800:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});const r=e=>{const t=[];for(const n of e)n.forEach(((e,n)=>{const r=t[n]||[];r.push(e),t[n]=r}));return t}},93291:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(79568);const o=e=>{if(0===e.length)return!0;const t=e[0];for(const n of e.slice(1))if(!(0,r.J)(n,t))return!1;return!0}},45503:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});const r=e=>{let t,n="",r=Math.floor(Math.abs(e));for(;r>0;)t=(r-1)%26,n=String.fromCharCode(65+t)+n,r=parseInt("".concat((r-t)/26),10);return n}},18779:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var r=n(55013),o=n(79568),l=n(2121),a=n(95335);const i=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],s=(e,t)=>{if("table"!==t.result.type.kind)return[];const n=t.result,s=n.type.columnTypes.length,c=Math.max(...n.value.map((e=>e.length))),d=(0,a.p)(s,c,!1),{value:u}=n,p=new Set,h=(e,t,n)=>{const r=((e,t,n)=>({...e,firstCol:Math.min(t,e.firstCol),lastCol:Math.max(t,e.lastCol),firstRow:Math.min(n,e.firstRow),lastRow:Math.max(n,e.lastRow)}))(e,t,n);return(0,o.J)(e,r)?e:r},g=(e,t)=>{const n=u[e][t];return null!=n&&("string"===typeof n?n.trim().length>0:"number"===typeof n)},m=(e,t,n)=>{for(const l of i){const a=e+l[0],i=t+l[1];o=i,(r=a)>=0&&r<s&&o>=0&&o<c&&!d[a][i]&&g(a,i)&&n.push({col:a,row:i})}var r,o},b=(e,t,n)=>{let o=((e,t,n)=>({sheetName:e,firstCol:t,lastCol:t,firstRow:n,lastRow:n}))(e,t,n);const l=[{col:t,row:n}];do{const{col:e,row:t}=(0,r.m0)(l.pop());!d[e][t]&&g(e,t)&&(d[e][t]=!0,o=h(o,e,t),m(e,t,l))}while(l.length>0);return o};for(let r=0;r<s;r+=1)for(let t=0;t<c;t+=1)if(!d[r][t]&&g(r,t)){const n=b(e,r,t);p.add(n)}const y=[...p].map((e=>{const o=(e=>t=>({type:{...e.type,columnNames:e.type.columnNames.slice(t.firstCol,t.lastCol+1),columnTypes:e.type.columnTypes.slice(t.firstCol,t.lastCol+1)},value:e.value.filter(((e,n)=>n>=t.firstCol&&n<=t.lastCol)).map((e=>e.slice(t.firstRow,t.lastRow+1)))}))(n)(e),a=(0,r.m0)(t.meta),{sheetId:i}=a;return{result:o,meta:{...a,sourceUrl:(0,l.D)((0,r.m0)(i),e.sheetName,(0,r.m0)(a.sourceMeta),e)}}}));return y},c=(e,t)=>s(e,t)},19453:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const r=e=>"string"===typeof e&&0===e.trim().length,o=e=>null!=e.find((e=>!r(e))),l=e=>{let t=!1,n=0,o=0;for(const l of e){const e=r(l);t?e?o+=1:o=0:e?n+=1:o=0,e||(t=!0)}return{trimTopRowCount:n,trimBottomRowCount:o,finalRowCount:e.length-n-o}},a=e=>{const t=e.values.filter(o),n=t.map(l),r=(e=>{let{finalTrimTopRowCount:t,finalTrimBottomRowCount:n,finalRowCount:r}=e;return e=>((e,t,n,r)=>{let o=e.slice(t);n>0&&(o=o.slice(0,-n));const l=r-o.length;if(l)for(let a=0;a<l;a+=1)o.push("");return o})(e,t,n,r)})({finalTrimTopRowCount:Math.min(...n.map((e=>e.trimTopRowCount))),finalTrimBottomRowCount:Math.min(...n.map((e=>e.trimBottomRowCount))),finalRowCount:Math.max(...n.map((e=>e.finalRowCount)))});return{values:t.map(r)}}},85996:(e,t,n)=>{"use strict";n.d(t,{PU:()=>O,Wg:()=>q,$F:()=>L,Z:()=>H,O3:()=>Z,gx:()=>l,B1:()=>$,sG:()=>y,yb:()=>j,JO:()=>z,zI:()=>Y});var r=n(55013);const o=e=>{switch(e.toLowerCase().trim()){case"true":case"yes":return"true";default:return"false"}},l=e=>{switch(e.toLowerCase()){case"true":case"yes":return!0}return!1},a=e=>{switch(e.toLowerCase()){case"true":case"false":return{type:{kind:"boolean"},coerced:o(e)}}};var i=n(93492),s=n(25151),c=n(20856);const d=new Map(Object.entries({year:1,month:2,day:3,hour:4,minute:5,second:6,millisecond:6})),u=function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(const l of r){const n=d.get(l);n&&n>t&&(t=n,e=l)}return e},p=(e,t)=>{const n=[];for(const r of e)for(const e of t)n.push("".concat(r," ").concat(e));return n},h=["dd-MM-yyyy","yyyy-MM-dd","dd/MM/yyyy","yyyy/MM/dd","P","PP","PPP"],g=["HH:mm","HHmm","h:m aaa","hh:mm aaa","hhmm aaa"],m=["s","ss"],b={year:["yy","yyyy"],month:["yyyy-MM","MM-yyyy","yyyy/MM","MM/yyyy","MMM yyyy","MMMM yyyy","MMM/yyyy","MMMM/yyyy","MMM-yyyy","MMMM-yyyy"],day:h,hour:p(h,["HH"]),minute:p(h,g),second:p(p(h,g),m),millisecond:p(p(p(h,g),m),["S","SS","SSS","SSSS"])},y=(e,t,n)=>{const r=n&&t?{[t]:n}:t?(e=>Object.fromEntries(Object.entries(b).filter((t=>{let[n]=t;return e===n}))))(t):b;for(const l of Object.keys(r)){const t=r[l];for(const n of t){const t=(0,c.Z)(e,n,new Date);if(null!=(o=t)&&!Number.isNaN(o.valueOf()))return{format:n,specificity:l,date:t}}}var o},v=(e,t)=>{if(!(0,i.Z)(e))throw new Error("invalid date");switch(t){case"year":return"date(".concat((0,s.Z)(e,"yyyy"),")");case"month":return"date(".concat((0,s.Z)(e,"yyyy-MM"),")");case"day":return"date(".concat((0,s.Z)(e,"yyyy-MM-dd"),")");case"hour":return"date(".concat((0,s.Z)(e,"yyyy-MM-dd HH"),")");case"minute":return"date(".concat((0,s.Z)(e,"yyyy-MM-dd HH:mm"),")");default:return"date(".concat((0,s.Z)(e,"yyyy-MM-dd HH:mm:ss"),")")}},f=(e,t,n)=>{const r=y(e,t,n);if(r)return{type:{kind:"date",date:r.specificity},coerced:v(r.date,r.specificity)}};var x=n(13986);const C=e=>JSON.stringify(e),k=e=>({type:{kind:"string"},coerced:C(e)}),w=e=>{const t=Number(e);if(!Number.isNaN(t))return{type:{kind:"number",unit:null},coerced:e}},E=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.doNotTryExpressionNumbersParse)return w(t);if((0,r.zg)(t))try{const n=(0,x.s$)(t),r=await e.expressionType(n);if("number"===(await r).kind)return{type:r,coerced:t}}catch(o){}},S=(e,t)=>({type:{kind:"type-error",errorCause:{errType:"free-form",message:t?"Cannot parse ".concat(t,' out of "').concat(e,'"'):'Cannot parse "'.concat(e,'"')}},coerced:e}),T=async(e,t,n)=>{var o,l,i,s,c,d;let u=null!==(o=null!==(l=null!==(i=null!==(s=null!==(c=null!==(d=f(t,"month"))&&void 0!==d?d:f(t,"day"))&&void 0!==c?c:a(t))&&void 0!==s?s:await E(e,t,n))&&void 0!==i?i:f(t))&&void 0!==l?l:n.doNotTryExpressionNumbersParse?void 0:await(async(e,t)=>{try{const n=(0,x.s$)(t),r=await e.expressionType(n);if("noop"!==n.type)return{type:r,coerced:t}}catch{}})(e,t))&&void 0!==o?o:{type:{kind:"string"},coerced:t};return"number"!==u.type.kind||(0,r.zg)(t)||(u={type:{kind:"string"},coerced:t}),u},Z=async function(e,t){var n,r,o,l;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=t.trim(),{type:c}=i;switch(null===c||void 0===c?void 0:c.kind){case"boolean":return null!==(n=a(s))&&void 0!==n?n:S(s,c.kind);case"date":return null!==(r=f(s))&&void 0!==r?r:S(s,c.kind);case"number":return null!==(o=await E(e,s,i))&&void 0!==o?o:S(s,c.kind);case"string":return null!==(l=k(s))&&void 0!==l?l:S(s,c.kind);case"anything":case"nothing":case void 0:return s?T(e,s,i):{type:{kind:"anything"},coerced:s};default:return{type:null!==c&&void 0!==c?c:S(s)}}};var I=n(79568),D=n(50096);const R={isEqual:(e,t)=>e instanceof x.ar&&t instanceof x.ar?e===t:(0,I.J)(e,t),maxSize:1e4},N=(e,t)=>(0,D.Z)(e,{...R,...t}),L=N((async function(e,t){var n,o;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=l.userType;if(a&&"anything"!==(null===(n=a)||void 0===n?void 0:n.kind))return a;const i=e=>{const t="type-error"===e.kind?{kind:"string"}:e;if("anything"!==t.kind&&"nothing"!==t.kind)if(a&&"anything"!==a.kind&&"nothing"!==a.kind)if(t.kind!==a.kind)a={kind:"string"};else if("date"===t.kind){const e=a;if(t.date!==e.date){const n=u(e.date,t.date);n&&(a={kind:"date",date:n})}}else"number"===t.kind&&("number"!==a.kind?a={kind:"string"}:!a.unit&&t.unit?a=t:t.unit&&a.unit&&!(0,x.or)(t.unit,a.unit)&&(a={kind:"string"}));else a=t};for(const s of t.slice(0,100))switch(typeof s){case"boolean":i({kind:"boolean"});break;case"number":"string"!==typeof s||(0,r.zg)(s)?i({kind:"number",unit:null}):i({kind:"string"});break;case"string":i((await Z(e,s,l)).type);break;case"undefined":case"object":null==s&&i({kind:"nothing"});break;default:throw new Error("Unexpected type of value: ".concat(typeof s))}return null!==(o=a)&&void 0!==o?o:{kind:"string"}}),{maxSize:1e3}),M="ABCDEFGHIJKLMNOPQRSTUVWXYZ",B=M.length;function O(e){const t=M[e%M.length];if(e>=B){return O(Math.floor(e/B)-1)+t}return t}var A=n(20932);const _=e=>{if("number"===typeof e||"bigint"===typeof e)return e;const t=Number(e.replaceAll(/[^.0-9]/g,""));if(!Number.isNaN(t))return t;console.warn('"'.concat(t,'" was not parsable to a number'))},P=e=>{var t;const n=_(e);if(null==n)return[0,void 0];if(Math.floor(Number(n.valueOf()))===Number(n.valueOf()))return[0,void 0];const r=n.toString(10);if(r.indexOf("e")>=0){const e=r.split("e"),[t,n]=P(Number(e[0]));return[-Number(e[1])+t,n]}const o=r.split(".");return[(null===(t=o[1])||void 0===t?void 0:t.length)||0,o.join("")]};function V(e,t){return t.map(((t,n)=>{const r=e[n];return t.map((e=>{var t,n,o;switch(null===r||void 0===r?void 0:r.kind){case"number":return(e=>{if("string"===typeof e&&e.length<1)return A.xE;const[t,n]=P(e);try{return"string"===typeof n&&n.length<1?A.xE:0===t?(0,A.N)(_(e)):(0,A.N)(_(null!==n&&void 0!==n?n:""),BigInt(10**t))}catch(r){throw console.error("Error trying to convert to number",e,[t,n],r),r}})(e);case"date":return BigInt(null!==(t=null===(n=y(e))||void 0===n?void 0:n.date.getTime())&&void 0!==t?t:0);case"string":return null!==(o=e)&&void 0!==o?o:"";default:return e.toString()}}))}))}const H=async(e,t,n)=>{const{columnNames:o,columnValues:l}=((e,t)=>t.useFirstRowAsHeader?{columnNames:e.values.map((e=>{var t;return(0,r.pG)((null!==(t=e[0])&&void 0!==t?t:"_").toString())})),columnValues:e.values.map((e=>e.slice(1)))}:{columnNames:e.values.map(((e,t)=>O(t))),columnValues:e.values})(t,n),a=await Promise.all(l.map((async(t,r)=>{var o,l,a;return null!==(o=null===(l=n.columnTypeCoercions)||void 0===l?void 0:l[r])&&void 0!==o?o:L(e,t,{doNotTryExpressionNumbersParse:n.doNotTryExpressionNumbersParse,userType:null===(a=n.columnTypeCoercions)||void 0===a?void 0:a[r]})})));return{type:{kind:"table",columnTypes:a,columnNames:o,indexName:o[0]},value:V(a,l)}};var W=n(37114);const K=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{type:e,args:n}},U=(e,t)=>{const n=[];return n.push("year",BigInt(t.getUTCFullYear())),"date"===e.kind&&"year"===e.date||(n.push("month",BigInt(t.getUTCMonth()+1)),"date"===e.kind&&"month"===e.date||(n.push("day",BigInt(t.getUTCDate())),"date"===e.kind&&"day"===e.date||(n.push("hour",BigInt(t.getUTCHours())),n.push("minute",BigInt(t.getUTCMinutes()))))),K("date",...n)},X="en-US";const $=N((async(e,t,n)=>{if("table-formula"===t.kind||"series"===t.kind||"dropdown"===t.kind||!n.trim())return null;try{return await(async(e,t,n,o)=>{const l=await Z(e,n,{type:t});if("type-error"===l.type.kind)return new Error((0,W.Z)(X,l.type.errorCause));if(!l.coerced)return null;const a=(0,x.fh)(l.coerced);if(a.error)return new Error(a.error.message);if(!a.solution||!(0,x.UT)(a.solution))return new Error("is not a valid expression");"literal"===a.solution.type&&"number"===t.kind&&"percentage"===t.numberFormat&&"number"===a.solution.args[0]&&"percentage"!==a.solution.args[2]&&(a.solution.args[2]="percentage",a.solution.args[1]=a.solution.args[1].div((0,A.N)("100")));let i=await e.expressionResult(a.solution);if("type-error"===i.type.kind)return new Error((0,W.Z)(X,i.type.errorCause));if(t.kind&&"anything"!==t.kind&&t.kind!==i.type.kind)return new Error('Could not parse "'.concat(n,'" into a ').concat(t.kind));"number"!==i.type.kind||(0,r.zg)(n)||(i={type:{kind:"string"},value:n});try{return o(i)}catch(s){return s}})(e,t,n,(async e=>{const{type:r}=e;switch(r.kind){case"number":{if(function(e,t){if(e.kind&&e.kind!==t)throw new Error("Expected input of type ".concat(t))}(t,"number"),!t.unit&&r.unit)return new Error("unexpected unit in number");const n=t.unit&&(e=>e.map((e=>({...e,multiplier:(0,A.N)(e.multiplier),exp:(0,A.N)(e.exp)}))))(t.unit);if(r.unit&&n){if(!(0,x.or)(r.unit,n))return new Error("cannot convert ".concat((0,W.Ac)("en-US",r.unit)," to ").concat((0,W.Ac)("en-US",n)," "));e.value=(0,x.kc)((0,x.WR)(e.value,r.unit,n),n)}if(r.numberFormat)return K("literal","number",(0,A.N)(e.value),r.numberFormat);const o=K("literal","number",(0,A.N)(e.value)),l=(e=>{if(null==e)return null;const t=(0,W.KP)(e),n=(0,x.IX)(t).solution;return n&&n.args.length>0?n.args[0]:null})(n);return null==l?o:K("function-call",K("funcref","implicit*"),K("argument-list",o,l))}case"date":return U(t,new Date(Number(e.value)));case"boolean":return K("literal","boolean","true"===n||"yes"===n);case"string":return K("literal","string",n)}return new Error("Could not parse a ".concat(t.kind,' out of "').concat(n,'"'))}))}catch(o){throw console.error("error parsing cell:",o),o}})),q=e=>"date"===e.kind?U(e,new Date("2020-01-01")):"number"===e.kind?K("literal","number",A.xE):"boolean"===e.kind?K("literal","boolean",!1):"dropdown"===e.kind&&"number"===e.type?K("literal","number",A.xE):K("literal","string",""),j=(e,t)=>{if("date"===e){const n=y(t);return n?{type:e,granularity:n.specificity,value:BigInt(n.date.getTime())}:{type:e,error:"Could not parse date"}}throw new Error("unknown series type ".concat(e))};var G=n(53445);const F={year:{years:1},month:{months:1},day:{days:1},hour:{hours:1},minute:{minutes:1},second:{seconds:1},millisecond:{seconds:.001}},z=(e,t,n)=>{if(null==t)throw new Error("Date series requires granularity");if("date"===e)return((e,t)=>{const n=y(t,e);if(!n)throw new Error("Could not parse date ".concat(t));const{format:r}=n;let o=n.date;const l=F[e];return{next:()=>(o=(0,G.Z)(o,l),{value:(0,s.Z)(o,r)})}})(t,n)},Y=e=>{switch(e.type.kind){case"boolean":return(e=>e.value?"true":"false")(e);case"date":return(e=>v(new Date(Number(e.value)),e.type.date))(e);case"number":return(e=>{let t=(0,A.N)(e.value).toFraction();return/^-?[0-9.]+$/.test(t)||(t="(".concat(t,")")),e.type.unit&&(t="".concat(t," ").concat((0,W.KP)(e.type.unit))),t})(e);case"string":return JSON.stringify(e.value);default:throw new Error("cannot textify ".concat(e.type.kind))}}},28438:(e,t,n)=>{"use strict";n.d(t,{s:()=>b});var r=n(86789),o=n(426),l=n(30969),a=n(68861),i=n(17813),s=n(66840),c=n(57481),d=n(22605),u=n(5594);const p=(0,o.css)({...(0,s.m)("iconBackgroundColor",c.M6.rgb),...(0,s.m)("currentTextColor",c.Zo.rgb),display:"inline-flex","> svg":{height:"16px",width:"16px"},verticalAlign:"middle",cursor:"pointer"},";label:-CodeError--iconWrapperStyles;"),h={name:"qh4sx--CodeError--messageStyles",styles:"text-align:center;label:-CodeError--messageStyles;"},g={name:"14yaspr--CodeError--urlStyles",styles:"text-decoration:underline;label:-CodeError--urlStyles;"},m=e=>{switch(e.type){case"never-opened":return'Closed a bracket "'.concat(e.close.text,'" that was never opened');case"mismatched-brackets":return'Mismatched brackets "'.concat(e.open.text,'" and "').concat(e.close.text,'"');case"never-closed":return'Bracket "'.concat(e.open.text,'" was opened but it is not being closed')}},b=e=>{let{message:t,detailMessage:n,url:o,bracketError:s,defaultDocsMessage:c="Check our docs"}=e;const b=(0,l.useContext)(r.K);return(0,u.BX)(a.u,{trigger:(0,u.tZ)("span",{css:p,title:t,children:(0,u.tZ)(i.v,{})}),children:[(0,u.tZ)("p",{css:h,children:t}),n&&(0,u.tZ)("p",{css:h,children:n}),s&&(0,u.tZ)("p",{css:h,children:m(s)}),(0,u.tZ)(d.e,{css:g,href:o,onClick:()=>b({type:"action",action:"notebook code error docs link clicked"}),children:c})]})}},3723:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var r=n(426),o=n(47475),l=n(5594);const a={name:"1hexsmj--ColumnDropLine--dropStyles",styles:"position:absolute;top:0;height:calc(100% + 1px);label:-ColumnDropLine--dropStyles;"},i=(0,r.css)({left:-1},";label:-ColumnDropLine--leftDropStyles;"),s={name:"h154l5--ColumnDropLine--rightDropStyles",styles:"right:0;label:-ColumnDropLine--rightDropStyles;"},c=e=>{let{dropDirection:t}=e;return(0,l.tZ)("div",{css:[a,"left"===t&&i,"right"===t&&s,";label:-ColumnDropLine--ColumnDropLine;"],contentEditable:!1,children:(0,l.tZ)(o.s,{variant:"inline"})})}},47475:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(426),o=n(66840),l=n(74407),a=n(5594);const i=(0,r.css)({backgroundColor:(0,o.g)("droplineColor"),zIndex:1},";label:-DropLine--dropLineCommonStyles;"),s=(0,r.css)({height:"".concat(l.w,"px"),border:"none",borderRadius:"4px",backgroundColor:(0,o.g)("droplineColor")},";label:-DropLine--dropLineBlockStyles;"),c={name:"swu5e2--DropLine--dropLineTableStyles",styles:"border-radius:unset;label:-DropLine--dropLineTableStyles;"},d=function(){let{variant:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.css)(["table"!==e?{position:"absolute"}:null,{height:"100%",left:"0",top:"0",width:"".concat(l.w,"px")}],";label:-DropLine--dropLineVerticalStyles;")},u=function(){let{variant:e="block"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["block","table"].includes(e)?(0,a.tZ)("div",{contentEditable:!1,role:"presentation","aria-label":"Drop Line",css:[i,s,"table"===e&&c,";label:-DropLine--DropLine;"]}):(0,a.tZ)("span",{contentEditable:!1,role:"presentation","aria-label":"Drop",css:[i,d({variant:e}),";label:-DropLine--DropLine;"],children:"\xa0"})}},96770:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var r=n(426),o=n(30969),l=n(79820),a=n(5594);const i="calc(".concat(l.sK.fontSize," * ").concat(l.sK.lineHeight,")"),s=(0,r.css)({paddingTop:i,"&[data-type^=heading] + *":{paddingTop:"calc(".concat(i," / 2)")},"&[data-type^=heading] + [data-type=divider] + *":{paddingTop:"calc(".concat(i," / 2)")},"&[data-type=paragraph] + [data-type=list]":{paddingTop:"8px"},"&[data-type=list] [data-type=list]":{paddingTop:0},"&[data-type=codeLine] + [data-type=codeLine]":{paddingTop:0},"&[data-type=structured] + [data-type=structured]":{paddingTop:0},"&[data-type$=Table]":{paddingTop:"40px"},"&[data-type$=Table] + *":{paddingTop:"40px"},"&[data-type$=columns]":{paddingTop:0}},";label:-EditorBlock--spacingStyles;"),c=(0,o.forwardRef)(((e,t)=>{let{blockKind:n,children:r,...o}=e;return(0,a.tZ)("div",{...o,css:["position:relative;",s,";label:-EditorBlock--EditorBlock;"],"data-type":n,ref:t,children:r})}))},55575:(e,t,n)=>{"use strict";n.d(t,{_:()=>g});var r=n(25555),o=n(30969),l=n(426),a=n(55013),i=n(30879),s=n(66840),c=n(5594);const d={name:"1aur6ms--Label--labelContainerStyles",styles:"display:flex;flex-wrap:nowrap;gap:4px;label:-Label--labelContainerStyles;"},u=(0,l.css)({backgroundColor:(0,s.g)("strongHighlightColor")},";label:-Label--hoveredBubbleStyles;"),p=(0,l.css)(i.variableStyles,{padding:"4px 8px",borderRadius:"8px",backgroundColor:(0,s.g)("highlightColor"),border:"solid 1px ".concat((0,s.g)("strongerHighlightColor")),":hover":{...u}},";label:-Label--bubbleStyles;"),h={name:"2zh258--Label--baseLabelStyles",styles:"white-space:nowrap;line-height:calc(1.5em + 1px);label:-Label--baseLabelStyles;"},g=e=>{let{children:t,onHover:n=a.ZT,renderContent:l}=e;const i="label-".concat((0,o.useState)(r.x0)[0]),[s,g]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{n(s)}),[s,n]),(0,c.BX)("div",{css:d,onMouseEnter:(0,o.useCallback)((()=>g(!0)),[]),onMouseLeave:(0,o.useCallback)((()=>g(!1)),[]),children:[(0,c.tZ)("label",{css:h,htmlFor:i,children:t}),(0,c.tZ)("div",{css:[p,s&&u,";label:-Label--Label;"],children:l(i)})]})}},26264:(e,t,n)=>{"use strict";n.d(t,{y:()=>m});var r=n(426),o=n(30969),l=n(10248),a=n(66840),i=n(79820),s=n(5594);const c={name:"1617mud--NewElementLine--parentWrapper",styles:"position:absolute;width:100%;height:0;top:0;z-index:1;label:-NewElementLine--parentWrapper;"},d=(0,r.css)({left:0,top:-5},";label:-NewElementLine--tableStyles;"),u={name:"mudejw--NewElementLine--tableReverseStyles",styles:"left:0;top:auto;bottom:5px;label:-NewElementLine--tableReverseStyles;"},p={name:"s1pef7--NewElementLine--addElementLineWrapper",styles:"width:100%;height:10px;padding-top:4px;padding-bottom:4px;justify-content:center;align-items:center;display:flex;opacity:0;transition:all 0.2s ease;&:hover{opacity:1;}position:relative;label:-NewElementLine--addElementLineWrapper;"},h=(0,r.css)({width:"100%",height:2,backgroundColor:(0,a.g)("droplineGreyColor")},";label:-NewElementLine--addElementLine;"),g={name:"165oa5g--NewElementLine--iconWrapperStyles",styles:"height:16px;width:16px;label:-NewElementLine--iconWrapperStyles;"},m=e=>{let{onAdd:t,show:n=!0,isTable:m,tableAdditionalProps:b,reverse:y,onMouseLeave:v,onMouseEnter:f,onClick:x,hasPreviousSibling:C}=e;const[k,w]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{k&&setTimeout((()=>w(!1)),1e3)}),[k]),n||m?(0,s.tZ)("div",{css:[c,k?{opacity:0}:{},m&&d,y&&u,";label:-NewElementLine--NewElementLine;"],contentEditable:!1,onMouseEnter:f,onMouseLeave:v,onClick:x,children:(0,s.BX)("div",{css:[p,m&&n&&{opacity:1},C&&{marginTop:"-5px"},";label:-NewElementLine--NewElementLine;"],children:[(!m||m&&(null===b||void 0===b?void 0:b.isLastColumn))&&(0,s.BX)(s.HY,{children:[(0,s.tZ)("span",{css:h}),(0,s.tZ)("button",{style:b&&{position:"absolute",right:"".concat(Math.round((b.rowWidth-32)/2)-20,"px")},css:(E=!!C,(0,r.css)(i.t5,{cursor:"pointer",display:"flex",gap:"6px",padding:E?"2px":"7px",borderRadius:"6px",backgroundColor:(0,a.g)("highlightColor"),border:"1px solid ".concat((0,a.g)("strongHighlightColor"))},";label:-NewElementLine--buttonStyles;")),onClick:()=>{w(!0),void 0!==t&&t()},children:(0,s.tZ)("span",{css:g,children:(0,s.tZ)(l.Q,{})})}),(0,s.tZ)("span",{css:h})]}),m&&!0!==(null===b||void 0===b?void 0:b.isLastColumn)&&(0,s.tZ)("span",{css:h}),(0,s.tZ)("span",{})]})}):(0,s.tZ)(s.HY,{});var E}},38643:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var r=n(426),o=n(66840),l=n(5594);const a={name:"1l0n650--Spinner--spinnerWrapperStyles",styles:"display:block;position:relative;height:25px;width:100px;label:-Spinner--spinnerWrapperStyles;"},i={name:"1o49al0--Spinner--spinnerStyles",styles:"animation:rotate 2s linear infinite;z-index:2;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;width:25px;height:25px;label:-Spinner--spinnerStyles;"},s=(0,r.css)({stroke:(0,o.g)("normalTextColor"),strokeLinecap:"round",animation:"dash 1.5s ease-in-out infinite","@keyframes rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes dash":{"0%":{strokeDasharray:"1, 150",strokeDashoffset:0},"50%":{strokeDasharray:"90, 150",strokeDashoffset:-35},"100%":{strokeDasharray:"90, 150",strokeDashoffset:-124}}},";label:-Spinner--circleStyles;"),c=()=>(0,l.tZ)("span",{css:a,children:(0,l.tZ)("svg",{css:i,viewBox:"0 0 25 25",children:(0,l.tZ)("circle",{css:s,cx:"12.5",cy:"12.5",r:"10",fill:"none",strokeWidth:"2.5"})})})},75329:(e,t,n)=>{"use strict";n.d(t,{C:()=>S});var r=n(55013),o=n(426),l=n(30969),a=n(72080),i=n(7392),s=n(95974),c=n(79820),d=n(66840),u=n(57481),p=n(99072),h=n(49758),g=n(5594);const m=(0,o.css)(c.yw,{position:"relative",alignItems:"center",background:(0,d.g)("backgroundColor"),minHeight:p.XH,minWidth:p.gL,maxWidth:p.Bf,whiteSpace:"break-spaces",cursor:"default",verticalAlign:"middle",paddingTop:p.a2,paddingBottom:p.a2},";label:-TableData--tdBaseStyles;"),b=(0,o.css)({position:"relative",minWidth:"0","&:first-of-type":{paddingLeft:"34px"},"&:first-of-type::before":{...(0,d.m)("normalTextColor",(0,d.g)("weakTextColor")),...c.KY,backgroundColor:"transparent",counterIncrement:h.j,content:"counter(".concat(h.j,")"),position:"absolute",right:"calc(100% - ".concat("22px",")"),top:"50%",transform:"translateY(-50%)",fontVariantNumeric:"tabular-nums",userSelect:"none"}},";label:-TableData--tdPlaceholderStyles;"),y={},v={name:"1dnf2s6--TableData--editableStyles",styles:"padding-left:12px;padding-right:12px;label:-TableData--editableStyles;"},f=(0,o.css)({...(0,d.m)("normalTextColor",(0,d.g)("weakerTextColor"))},";label:-TableData--tdDisabledStyles;"),x={name:"7p3ztc--TableData--alignRightStyles",styles:"text-align:right;label:-TableData--alignRightStyles;"},C=(0,o.css)({background:(0,u.KZ)(u.SA,.4).rgba},";label:-TableData--liveResultStyles;"),k=(0,o.css)({backgroundColor:(0,d.g)("tableSelectionBackgroundColor")},";label:-TableData--selectedStyles;"),w=(0,o.css)({boxShadow:"0 0 0 2px ".concat((0,d.g)("tableFocusColor")," inset")},";label:-TableData--focusedStyles;"),E={name:"s5eea4--TableData--draggableStyles",styles:":hover{.drag-handle{display:block;}};label:-TableData--draggableStyles;"},S=(0,l.forwardRef)(((e,t)=>{let{as:n="div",isEditable:o=!1,isUserContent:l=!1,isLiveResult:c=!1,attributes:d,showPlaceholder:u=!0,draggable:p,grabbing:h,selected:S,focused:T,collapsed:Z,dropTarget:I,rowSpan:D,disabled:R=!1,lastBeforeMoreRowsHidden:N=!1,type:L,unit:M,value:B,onChangeValue:O=r.ZT,alignRight:A,children:_,parseError:P,firstChildren:V,dropdownOptions:H,element:W,...K}=e;const U=d&&"ref"in d?d.ref:void 0,X=(0,a.Y)(U,t,I),$=o?{}:{contentEditable:!1};return(0,g.BX)(n,{...d,...$,ref:X,rowSpan:D,css:[l&&v,m,y,u&&b,R&&f,S&&k,T&&w,A&&x,c&&C,p&&E,";label:-TableData--TableData;"],...K,children:[V,(0,g.tZ)(i.Y,{focused:T,type:L,value:B,unit:M,onChangeValue:O,parentType:"table",element:W,...H,children:(0,g.tZ)(s.G,{variant:"custom",error:P,hideError:!P,children:_})})]})}))},14966:(e,t,n)=>{"use strict";n.d(t,{x:()=>T});var r=n(1146),o=n(426),l=n(30969),a=n(72080),i=n(33062),s=n(79820),c=n(49939),d=n(57481),u=n(66840),p=n(99072),h=n(74029),g=n(55099),m=n(3723),b=n(5594);const y=(0,o.css)(s.t5,{position:"relative",minHeight:p.xB,paddingLeft:p.PI,paddingRight:"8px"},";label:-TableHeader--columnStyles;"),v={name:"1bbk5in--TableHeader--headerWrapperStyles",styles:"display:flex;align-items:center;min-height:30px;gap:6px;position:relative;label:-TableHeader--headerWrapperStyles;"},f={name:"2kx25p--TableHeader--columnTypeStyles",styles:"display:inline-block;width:16px;height:16px;label:-TableHeader--columnTypeStyles;"},x=(0,o.css)(f,"svg{width:16px;height:16px;};label:-TableHeader--iconTypeStyles;"),C={name:"16y6y6p--TableHeader--childrenWrapperStyles",styles:"white-space:nowrap;overflow:hidden;text-align:left;min-width:5px;padding:0 4px;border-radius:6px;mix-blend-mode:luminosity;label:-TableHeader--childrenWrapperStyles;"},k={name:"9xoc6i--TableHeader--dragHandleStyles",styles:"width:8px;height:9px;transform:translateY(50%);display:block;margin:auto;cursor:grab;pointer-events:all;margin-top:0;mix-blend-mode:luminosity;svg > rect{fill:transparent;};label:-TableHeader--dragHandleStyles;"},w=()=>(0,b.tZ)("button",{css:k,contentEditable:!1,children:(0,b.tZ)(i.D,{})}),E=(0,l.forwardRef)(((e,t)=>{let{draggingOver:n,onSelectColumn:r}=e;return(0,b.tZ)("div",{css:(0,o.css)([f,{pointerEvents:n?"all":"none",height:"18px",width:"18px",display:"flex",alignItems:"center",borderRadius:"6px",":hover":{background:c.G0}}],";label:-TableHeader--DropSourceAndTarget;"),ref:t,contentEditable:!1,onClick:r,children:(0,b.tZ)(w,{})})})),S=(e,t,n)=>(0,o.css)({backgroundColor:e?(0,d.KZ)(n[e],d.L9).rgba:(0,u.g)("strongHighlightColor"),'&:hover, &:focus-within, &[data-highlight="true"]':{backgroundColor:e&&(0,h.VT)(t)[e].rgb},boxShadow:e&&"inset 0px -2px 0px ".concat(n[e].rgb)},";label:-TableHeader--thStyles;"),T=e=>{let{children:t,highlight:n=!1,type:o=(0,g.jD)(),menu:i,attributes:s,isEditable:c=!1,showIcon:d=!0,draggable:u=!1,draggingOver:p=!1,dragSource:f,dropTarget:k,dropDirection:w,onSelectColumn:T}=e;const Z=(0,g.aX)(o),[I]=(0,r.yt)(),{color:D}=(0,l.useContext)(g.dg),R=(0,h.VT)(I),N=(0,a.Y)(null===s||void 0===s?void 0:s.ref,k);return(0,b.BX)("th",{...s,css:[y,S(D,I,R),";label:-TableHeader--TableHeader;"],ref:N,"data-highlight":n,contentEditable:c,children:[c&&"left"===w&&(0,b.tZ)(m.m,{dropDirection:w}),(0,b.BX)("div",{css:v,children:[c&&u&&f&&(0,b.tZ)(E,{ref:f,draggingOver:p,onSelectColumn:T}),d&&"anything"!==o.kind&&(0,b.tZ)("span",{contentEditable:!1,css:x,children:(0,b.tZ)(Z,{})}),(0,b.tZ)("div",{css:[C,";label:-TableHeader--TableHeader;"],spellCheck:!1,children:t}),i]}),c&&"right"===w&&(0,b.tZ)(m.m,{dropDirection:w})]})}},72080:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});const r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>{"function"===typeof t?t(e):t&&"object"===typeof t&&(t.current=e)}))}},7392:(e,t,n)=>{"use strict";n.d(t,{Y:()=>T});var r=n(89203),o=n(30969),l=n(86933),a=n(79820),i=n(5594);const s={name:"kmfcm5--BooleanEditor--wrapperStyles",styles:"display:flex;gap:6px;align-items:center;padding:0px 6px 0px 8px;label:-BooleanEditor--wrapperStyles;"},c={name:"1cpj7ey--BooleanEditor--hiddenChildrenStyles",styles:"display:none;label:-BooleanEditor--hiddenChildrenStyles;"},d=e=>{let{children:t,value:n="false",onChangeValue:r,parentType:o="input"}=e;return(0,i.BX)("div",{contentEditable:!1,css:s,children:[(0,i.tZ)(l.Z,{active:"false"!==n&&""!==n.trim(),onChange:e=>r(e?"true":"false"),parentType:o}),(0,i.tZ)("span",{css:"input"===o?a.tN:a.KY,children:"input"!==o?"":"true"===n?"On":"Off"}),(0,i.tZ)("div",{css:c,children:t})]})};var u=n(20856),p=n(25151),h=n(53942);n(1264);const g={year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd",hour:"yyyy-MM-dd HH",minute:"yyyy-MM-dd HH:mm",second:"yyyy-MM-dd HH:mm:ss",millisecond:"yyyy-MM-dd HH:mm:ss"};const m={name:"163toub--DateEditor--unitStyles",styles:"&::after{content:attr(data-unit);margin-left:0.25rem;};label:-DateEditor--unitStyles;"},b={hour:!0,minute:!0,second:!0,millisecond:!0},y=e=>{let{open:t,children:n,value:l="",unit:a,onChangeValue:s,type:c}=e;const d=(0,o.useMemo)((()=>c&&"date"===c.kind&&(e=>{if("date"!==(null===e||void 0===e?void 0:e.kind))throw new Error("expected date");return g[e.date]})(c)),[c]),y=(0,o.useMemo)((()=>{if(d){const e=(0,u.Z)(l,d,new Date);return null==e||Number.isNaN(e.valueOf())?void 0:e}}),[d,l]),v=(0,o.useCallback)((e=>{null!=e&&d&&s((0,p.Z)(e,d))}),[s,d]),f=(0,o.useCallback)((e=>{t&&e.stopPropagation()}),[t]);return(0,i.tZ)("span",{onClick:f,className:"mydateeditorwrapper",children:(0,i.tZ)(h.ZP,{open:t&&"date"===(null===c||void 0===c?void 0:c.kind),dateFormat:d||"yyyy-MM-dd",selected:y,onChange:v,customInput:(0,i.tZ)("span",{"data-unit":null!==a&&void 0!==a?a:"",css:a&&m,children:n}),showTimeSelect:"date"===(null===c||void 0===c?void 0:c.kind)&&b[c.date],showMonthYearPicker:"date"===(null===c||void 0===c?void 0:c.kind)&&"month"===c.date,showYearPicker:"date"===(null===c||void 0===c?void 0:c.kind)&&"year"===c.date,portalId:(0,r.DK)()?"date-picker-portal":void 0,todayButton:"Today",timeClassName:()=>"deci-datepicker-selectable"})})};var v=n(13986),f=n(66165),x=n(12548),C=n(53393);const k={name:"yy5xrw--DropdownEditor--dropdownPill",styles:"display:flex;align-items:center;label:-DropdownEditor--dropdownPill;"};var w={name:"15newmj--DropdownEditor--DropdownEditor",styles:"width:16px;height:16px;margin-left:auto;label:-DropdownEditor--DropdownEditor;"},E={name:"t9356v--DropdownEditor--DropdownEditor",styles:"display:none;label:-DropdownEditor--DropdownEditor;"};const S=e=>{let{children:t,onChangeValue:n,dropdownResult:r,dropdownOptions:l,element:a}=e;const[s,c]=(0,o.useState)(!1);return(0,i.tZ)("div",{contentEditable:!1,"aria-roledescription":"dropdown-editor",children:(0,i.tZ)(x.h,{open:s,isReadOnly:!0,setOpen:c,items:(null===l||void 0===l?void 0:l.map((e=>({item:e.value,focused:e.focused}))))||[],onExecute:e=>{const t=null===l||void 0===l?void 0:l.find((t=>t.value===e));t&&(n((0,v.v5)(t.id)),c(!1))},children:(0,i.BX)("div",{onClick:()=>c(!s),css:k,children:[r&&(0,i.tZ)(C.X,{...r,variant:"inline",element:a}),(0,i.tZ)("div",{css:w,children:(0,i.tZ)(f.F,{variant:s?"up":"down"})}),(0,i.tZ)("div",{css:E,children:t})]})})})},T=e=>{let{focused:t=!1,value:n,type:l,unit:a,onChangeValue:s,children:c,dropdownOptions:u,dropdownResult:p,parentType:h="input",element:g}=e;const[m,b]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{setTimeout((()=>{b((e=>!e))}),0)}),[]);(0,o.useEffect)((()=>{!t&&m&&v()}),[t,m,v]);const f=(0,o.useCallback)((e=>{s(e),b(!1)}),[s]),x=(0,o.useCallback)((e=>{if("Escape"===e.key)m&&(b(!1),e.stopPropagation(),e.preventDefault())}),[m]),C=(0,o.useRef)(null),k=(0,o.useCallback)((e=>{var t;const{target:n}=e;n&&null!==(t=n.getAttribute("class"))&&void 0!==t&&t.includes("datepicker")||m&&v()}),[m,v]);(0,r.mR)("keydown",x,!0),(0,r.mR)("click",k,!0);const w=(0,o.useCallback)((e=>{var t;null!==(t=e.currentTarget.getAttribute("class"))&&void 0!==t&&t.includes("datepicker")?e.stopPropagation():v()}),[v]),E=(0,o.useMemo)((()=>"dropdown"===(null===l||void 0===l?void 0:l.kind)?S:l&&{boolean:d,date:y,dropdown:S}[l.kind]||y),[l]);return(0,i.tZ)("div",{ref:C,onClick:w,className:"mycelleditorwrapper",children:(0,i.tZ)(E,{open:m,type:l,value:n,unit:a,onChangeValue:f,parentType:h,dropdownOptions:u,dropdownResult:p,element:g,children:c})})}},74285:(e,t,n)=>{"use strict";n.d(t,{n:()=>k});var r=n(426),o=n(50576),l=n(30969),a=n(55013),i=n(1146),s=n(68861),c=n(79820),d=n(53393),u=n(5594);const p=(0,r.css)(c.cp,";label:-CodeVariableTooltip--goToDefStyles;"),h=e=>{let{variableMissing:t=!1,children:n,defBlockId:r,provideDefinitionLink:o,onGoToDefinition:l=a.ZT}=e;const c=(0,i.Iy)().getBlockIdResult$.useWithSelector((e=>{var t;return null!=(null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t.value)}),r)&&(0,u.tZ)(g,{defBlockId:null!==r&&void 0!==r?r:""}),d=o&&r&&(0,u.tZ)("a",{css:p,href:"#".concat(r),onClick:l,children:"Go to definition \u2192"}),h=!t&&(c||d);return(0,u.BX)(s.u,{trigger:(0,u.tZ)("span",{children:n}),open:!!h&&void 0,children:[c,d]})},g=e=>{var t,n;let{defBlockId:r}=e;const{type:o,value:l}=null!==(t=null===(n=(0,i.Iy)().getBlockIdResult$.use(r))||void 0===n?void 0:n.result)&&void 0!==t?t:{};return null==o||null==l?(0,u.tZ)(u.HY,{}):(0,u.tZ)(d.X,{type:o,value:l,variant:"inline",tooltip:!1})};var m=n(66840),b=n(30879),y=n(55099);const v=(0,r.css)({color:(0,m.g)("weakTextColor")},";label:-CodeVariable--localVarStyles;"),f={name:"182aslw--CodeVariable--iconStyles",styles:"display:inline-block;vertical-align:text-top;height:16px;width:16px;margin-right:4px;label:-CodeVariable--iconStyles;"},x=(0,r.css)({borderWidth:"1px",borderStyle:"solid",borderColor:(0,m.g)("weakerTextColor"),color:(0,m.g)("weakTextColor"),backgroundColor:(0,m.g)("backgroundColor")},";label:-CodeVariable--typeStyles;"),C=(0,r.css)({backgroundColor:(0,m.g)("bubbleBackground"),color:(0,m.g)("bubbleColor")},";label:-CodeVariable--selectedStyles;"),k=e=>{let{children:t,showTooltip:n=!0,provideVariableDefLink:r=!1,onClick:a=o.noop,type:i,variableScope:s="global",variableMissing:c=!1,defBlockId:d,onGoToDefinition:p,isSelected:g=!1}=e;const m=(0,l.useMemo)((()=>i&&(0,y.aX)(i)),[i]),k=(0,u.BX)("span",{onClick:a,css:c?null:[b.varStyles,i&&x,"local"===s&&v,g&&C],children:[m&&(0,u.tZ)("span",{css:f,contentEditable:!1,children:(0,u.tZ)(m,{})}),t]});return n?(0,u.tZ)(h,{variableMissing:c,defBlockId:d,provideDefinitionLink:r,onGoToDefinition:p,children:k}):k}},89105:(e,t,n)=>{"use strict";n.d(t,{w:()=>D});var r=n(1146),o=n(426),l=n(30969),a=n(47591),i=n(90072),s=n(57258),c=n(86550),d=n(71799),u=n(5594);const p={name:"1tsm479--TableButton--showMoreButtonWrapperStyles",styles:"display:flex;flex-direction:row;padding-bottom:5px;div > button > span > svg{height:8px;}padding:5px;label:-TableButton--showMoreButtonWrapperStyles;"},h=e=>{let{isInState:t,setState:n,onClick:r,captions:o,isExpandButton:a=!1}=e;const h=(0,l.useCallback)((()=>{null===r||void 0===r||r(),null===n||void 0===n||n(!t)}),[t,r,n]),g=o[1]?t&&a?o[0]:o[1]:o[0];return(0,u.tZ)("div",{css:[p,d.XS,";label:-TableButton--TableButton;"],"data-testid":"table-button-".concat(o.map((e=>e.replace(/\W/g,"").toLocaleLowerCase())).join("-")),contentEditable:!1,children:(0,u.tZ)(i.q,{text:g,onClick:h,iconPosition:"left",children:a?(0,u.tZ)(s.T,{type:t&&a?"expand":"collapse"}):(0,u.tZ)(c.b,{})})})};var g=n(66840);const m=(0,o.css)({border:"1px solid ".concat((0,g.g)("borderColor")),borderRadius:"10px",margin:"4px 0 16px",padding:"6px 0"},";label:-FormulasDrawer--formulasDrawerStyles;"),b=e=>{let{children:t}=e;return(0,u.tZ)("div",{children:(0,u.tZ)("section",{css:(0,o.css)(m,";label:-FormulasDrawer--FormulasDrawer;"),spellCheck:!1,children:(0,u.tZ)("pre",{children:t})})})};var y=n(79820),v=n(49939),f=n(55099),x=n(89663);const C=(0,o.css)({maxWidth:"".concat(d.wW,"px")},";label:-EditableTableCaption--tableCaptionWideStyles;"),k=(0,o.css)({maxWidth:"".concat(d.cR,"px")},";label:-EditableTableCaption--tableCaptionSlimStyles;"),w={name:"19qtz1m--EditableTableCaption--tableCaptionInnerStyles",styles:"align-items:center;display:flex;justify-content:space-between;gap:9px;line-break:unset;label:-EditableTableCaption--tableCaptionInnerStyles;"},E={name:"5xyiwl--EditableTableCaption--tableTitleWrapperStyles",styles:"display:flex;align-items:center;gap:8px;label:-EditableTableCaption--tableTitleWrapperStyles;"},S={name:"we8lh9--EditableTableCaption--tableIconSizeStyles",styles:"display:grid;width:16px;height:16px;label:-EditableTableCaption--tableIconSizeStyles;"},T=(0,o.css)(y.ts,{cursor:"text",display:"flex","&::before":{...y.jf,...y.ts,...(0,g.m)("currentTextColor",(0,g.g)("weakTextColor")),pointerEvents:"none",content:"attr(aria-placeholder)",opacity:v.RR}},";label:-EditableTableCaption--placeholderStyles;"),Z=(0,o.css)(y.ts,";label:-EditableTableCaption--editableTableCaptionStyles;");var I={name:"15zfuun--EditableTableCaption--EditableTableCaption",styles:"display:inline-flex;label:-EditableTableCaption--EditableTableCaption;"};const D=e=>{let{empty:t,formulaEditor:n=!0,isForWideTable:o=!1,readOnly:i=!1,onAddDataViewButtonPress:s,children:c,showToggleCollapsedButton:d=!1}=e;const{color:p,icon:g,isCollapsed:m,hideFormulas:y,setIcon:v,setColor:D,setCollapsed:R,setHideFormulas:N,hideAddDataViewButton:L}=(0,l.useContext)(f.dg),M=a[g],[B,...O]=l.Children.toArray(c);return(0,u.BX)("div",{css:o?C:k,children:[(0,u.BX)("div",{css:[w,k,";label:-EditableTableCaption--EditableTableCaption;"],children:[(0,u.BX)("div",{css:E,children:[(0,u.tZ)("div",{contentEditable:!1,css:S,children:(0,r.VY)()?(0,u.tZ)(M,{}):(0,u.tZ)(x.e,{color:p,trigger:(0,u.tZ)("button",{children:(0,u.tZ)(M,{})}),onChangeIcon:v,onChangeColor:D})}),(0,u.tZ)("div",{"aria-placeholder":t?"Name your table":"","aria-roledescription":"table name",css:[Z,T,";label:-EditableTableCaption--EditableTableCaption;"],spellCheck:!1,children:B})]}),(0,u.BX)("div",{css:I,children:[d&&R?(0,u.tZ)(h,{setState:R,isInState:m,captions:["Show table","Hide table"],isExpandButton:!0}):null,!L&&N?(0,u.tZ)(h,{setState:N,isInState:y,captions:["Show formulas","Hide formulas"],isExpandButton:!0}):null,L||i?null:(0,u.tZ)(h,{onClick:s,captions:["Create view"]})]})]}),n&&!m&&O.length>0&&(0,u.tZ)("div",{css:y?{display:"none"}:{display:"block"},children:(0,u.tZ)(b,{children:O})})]})}},78090:(e,t,n)=>{"use strict";n.d(t,{B:()=>y});var r=n(426),o=n(89203),l=n(79820),a=n(66840),i=n(99072),s=n(49758),c=n(5594);const d="22px",u=(0,r.css)(l.yw,{alignItems:"center",backgroundColor:(0,a.g)("tintedBackgroundColor"),minHeight:i.XH,verticalAlign:"middle",cursor:"default",caretColor:"transparent",position:"relative"},";label:-TableFormulaCell--tdBaseStyles;"),p=(0,r.css)({"&:first-of-type":{paddingLeft:d},"&:first-of-type::before":{...(0,a.m)("normalTextColor",(0,a.g)("weakTextColor")),...l.KY,backgroundColor:(0,a.g)("backgroundColor"),counterIncrement:s.j,content:"counter(".concat(s.j,")"),position:"absolute",right:"calc(100% - ".concat(d,")"),top:"50%",transform:"translateY(-50%)",fontVariantNumeric:"tabular-nums"}},";label:-TableFormulaCell--tdCounterStyles;"),h=e=>{let{attributes:t,className:n,children:r,hiddenCounter:o}=e;return(0,c.tZ)("td",{...t,css:[u,!o&&p,";label:-TableFormulaCell--TableFormulaCell;"],className:n,children:r})};const g=(0,r.css)(l.yw,"margin-left:12px;;label:-FormulaTableData--tdLineStyles;"),m=(0,r.css)({backgroundColor:(0,a.g)("tableSelectionBackgroundColor")},";label:-FormulaTableData--selectedStyles;"),b={name:"1tq1w50--FormulaTableData--noEditingStyles",styles:"display:none;label:-FormulaTableData--noEditingStyles;"},y=e=>{let{children:t,selected:n,result:r,resultType:l,firstChildren:a,...i}=e;const s="nothing"===l||"type-error"===l,d=(0,o.tp)((0,c.tZ)("span",{css:"table"!==l?g:null,contentEditable:!1,children:r}),s);return(0,c.BX)(h,{...i,css:[n?m:null,";label:-FormulaTableData--FormulaTableData;"],children:[a,(0,c.tZ)("span",{css:b,contentEditable:!1,children:t}),d]})}},95974:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(426),o=n(68861),l=n(57481),a=n(5594);const i=(0,r.css)({borderBottom:"1px dotted ".concat(l.PT.rgb),color:l.PT.rgb},";label:-SyntaxErrorHighlight--highlightStyles;"),s=e=>{var t;let{children:n,variant:r,error:l,hideError:s}=e;return s?(0,a.tZ)(o.u,{trigger:(0,a.tZ)("span",{css:[";label:-SyntaxErrorHighlight--SyntaxErrorHighlight;"],children:n}),open:!1}):(0,a.BX)(o.u,{trigger:(0,a.tZ)("span",{css:i,children:n}),children:["never-closed"===r&&"Did you forget to close this bracket?","never-opened"===r&&"Did you forget the opening bracket?","mismatched-brackets"===r&&"This bracket does not match the other one.",null!==(t="custom"===r&&l)&&void 0!==t?t:"Unknown error",null==r&&"This character is invalid here"]})}},60182:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(426),o=n(99072),l=n(5594);const a=e=>{let{children:t,readOnly:n=!1,attributes:a}=e;return(0,l.BX)("tr",{...a,children:[!n&&(0,l.tZ)("th",{contentEditable:!1,css:(0,r.css)({width:o.IT,border:"none !important"},";label:-TableHeaderRow--TableHeaderRow;")}),t]})}},95523:(e,t,n)=>{"use strict";n.d(t,{S:()=>S});var r=n(426),o=n(30969),l=n(60046),a=n(72080),i=n(77683),s=n(6442),c=n(20548),d=n(8243),u=n(68861),p=n(33062),h=n(73768),g=n(57219),m=n(79820),b=n(66840),y=n(71799),v=n(99072),f=n(91745),x=n(5594);const C=(0,c.IHq)((()=>(0,r.css)({display:"grid",gridTemplate:'\n      ".                          handle                             " '.concat(y.bX(),'\n      "menu                       .                                  " auto\n      /minmax(max-content, 144px) ').concat(y.s1(),"\n    "),justifyContent:"end"},";label:-TableCellControls--gridStyles;"))),k=(0,o.forwardRef)(((e,t)=>{let{readOnly:n,onSelect:l,onRemove:a}=e;const[i,s]=(0,o.useState)(!1),c=(0,x.tZ)("button",{onClick:()=>(l&&l(),void s(!i)),css:v.vr,children:(0,x.tZ)(p.D,{})});return(0,x.tZ)("th",{contentEditable:!1,ref:t,css:(0,r.css)({opacity:i?1:0,"*:hover > &":{opacity:"unset"},transition:"opacity ".concat(g.Ju," ease-in-out ").concat(g.DL),verticalAlign:"middle"},";label:-TableCellControls--TableCellControls;"),children:!n&&(0,x.BX)("div",{css:C(),children:[(0,x.tZ)(f.q,{root:!0,open:i,onChangeOpen:s,trigger:c,dropdown:!0,children:a&&(0,x.tZ)(d.s,{icon:(0,x.tZ)(h.r,{}),onSelect:()=>a(),selected:!1,children:"Delete row"})}),(0,x.tZ)(u.u,{trigger:c,side:"left",children:(0,x.BX)("span",{css:(0,r.css)(m.vf,(0,b.m)("currentTextColor",(0,b.g)("backgroundColor")),"white-space:nowrap;text-align:center;;label:-TableCellControls--TableCellControls;"),children:[(0,x.tZ)("strong",{css:(0,r.css)([m.KY,(0,b.m)("currentTextColor",(0,b.g)("backgroundColor"))],";label:-TableCellControls--TableCellControls;"),children:"Drag"})," ","to move",(0,x.tZ)("br",{}),(0,x.tZ)("strong",{css:(0,r.css)([m.KY,(0,b.m)("currentTextColor",(0,b.g)("backgroundColor"))],";label:-TableCellControls--TableCellControls;"),children:"Click"})," ","for options"]})})]})})}));const w=e=>(0,r.css)({opacity:e?i.w:"unset","&:not(:last-child) > td":{borderBottom:s.p}},";label:-TableRow--tableRowStyles;"),E={name:"yvxf2x--TableRow--invisibleTableRowStyles",styles:"display:none;label:-TableRow--invisibleTableRowStyles;"},S=(0,o.forwardRef)(((e,t)=>{let{attributes:n,children:r,onRemove:o=l.noop,onSelect:i,readOnly:s=!1,dragRef:c,previewMode:d,previewRef:u,isBeingDragged:p=!1,isVisible:h=!0,tableCellControls:g}=e;const m=(0,a.Y)(null===n||void 0===n?void 0:n.ref,t,u);return(0,x.BX)("tr",{...n,ref:m,css:[w(p),!h&&E,";label:-TableRow--TableRow;"],children:[!d&&!1!==g&&!s&&(g||(0,x.tZ)(k,{ref:c,readOnly:s,onSelect:i,onRemove:o})),r]})}))},3039:(e,t,n)=>{"use strict";n.d(t,{D:()=>B});var r=n(89203),o=n(426),l=n(79568),a=n(30969),i=n(55013),s=n(49830),c=n(3724),d=n(52047),u=n(48760),p=n(69656),h=n(66840),g=n(57481),m=n(79820),b=n(5594);const y=e=>(0,o.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px",":hover":{backgroundColor:(0,h.g)("highlightColor"),borderRadius:"6px"},...e&&{backgroundColor:(0,h.g)("highlightColor"),borderRadius:"6px"}},";label:-AutoCompleteMenuItem--wrapperStyles;"),v={name:"cyhl9o--AutoCompleteMenuItem--styles",styles:"width:100%;display:grid;grid-template-columns:auto 1fr;align-items:center;column-gap:4px;label:-AutoCompleteMenuItem--styles;"},f=(0,o.css)((0,h.m)("currentTextColor",g.ng.rgb),"width:16px;height:16px;display:grid;border-radius:6px;;label:-AutoCompleteMenuItem--iconStyles;"),x={name:"ie94ju--AutoCompleteMenuItem--textStyles",styles:"display:grid;text-align:start;label:-AutoCompleteMenuItem--textStyles;"},C=e=>{let{identifier:t,type:n,focused:l=!1,onExecute:h=i.ZT}=e;const g=(0,a.useRef)(null),C=(0,a.useCallback)((e=>{"Enter"!==e.key&&"Tab"!==e.key||e.shiftKey||l&&(h(),e.stopPropagation(),e.preventDefault())}),[h,l]);var k;((0,r.mR)("keydown",C,!0),l)&&(null===(k=g.current)||void 0===k||k.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}));return(0,b.tZ)("div",{css:y(l),children:(0,b.BX)("button",{role:"menuitem",css:v,onMouseDown:e=>{h(),e.stopPropagation(),e.preventDefault()},ref:g,children:[(0,b.tZ)("span",{css:f,children:{number:(0,b.tZ)(s.M,{}),string:(0,b.tZ)(c.x,{}),date:(0,b.tZ)(d.f,{}),table:(0,b.tZ)(u.i,{}),function:(0,b.tZ)(p.S,{})}[n]||(0,b.tZ)(s.M,{})}),(0,b.tZ)("div",{css:x,children:(0,b.tZ)("strong",{css:(0,o.css)(m.yw,";label:-AutoCompleteMenuItem--AutoCompleteMenuItem;"),children:t})})]})})};var k=n(9479);const w={name:"1ejsyad--AutoCompleteMenuGroup--styles",styles:"display:grid;gap:4px;label:-AutoCompleteMenuGroup--styles;"},E=(0,o.css)(m.t5,{padding:"8px 8px 0px",color:(0,h.g)("weakerTextColor")},";label:-AutoCompleteMenuGroup--titleStyles;"),S={name:"1w7b3sp--AutoCompleteMenuGroup--itemsStyles",styles:"display:grid;label:-AutoCompleteMenuGroup--itemsStyles;"},T=e=>{let{title:t,children:n}=e;return(0,b.BX)("div",{css:w,role:"group",children:[t&&(0,b.tZ)("div",{css:E,children:t}),(0,b.tZ)("div",{css:S,children:a.Children.map(n,(e=>{if(null==e)return null;if((0,k.isElement)(e)&&e.type===C)return e;throw console.error("Received child that is not an auto complete menu item",e),new Error("Expected all children to be auto complete menu items")}))})]})};const Z=(0,o.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",borderRadius:"6px",padding:"0 6px",border:"1px ".concat((0,h.g)("strongerHighlightColor")," solid"),backgroundColor:(0,h.g)("backgroundColor"),color:(0,h.g)("weakTextColor")},";label:-AutoCompleteMenu--hotKeyStyle;"),I=(0,o.css)(m.t5,{padding:"6px 0px 8px 16px",width:"100%",bottom:"0px",height:"32px",lineHeight:"24px",background:(0,h.g)("highlightColor"),boxShadow:"0px -1px 0px ".concat((0,h.g)("borderColor")),margin:"0px 0px",display:"flex",alignItems:"center",gap:"4px"},(0,h.m)("currentTextColor",(0,h.g)("weakTextColor")),";label:-AutoCompleteMenu--footerStyles;"),D={name:"1gs8r62--AutoCompleteMenu--resultStyles",styles:"display:block;max-width:244px;min-width:149px;margin-top:8px;label:-AutoCompleteMenu--resultStyles;"},R=e=>(0,o.css)({display:"flex",flexDirection:"column",alignItems:"flex-start",overflowX:"hidden",top:e?"26px":"0px",left:0,userSelect:"none",backgroundColor:(0,h.g)("backgroundColor"),border:"1px solid ".concat((0,h.g)("borderColor")),borderRadius:"12px",boxShadow:"0px 3px 24px -4px ".concat(g.ip.rgba),position:"absolute",width:"280px",boxSizing:"border-box",zIndex:2},";label:-AutoCompleteMenu--styles;"),N={name:"1e2psm5--AutoCompleteMenu--mainStyles",styles:"padding:6px;width:100%;label:-AutoCompleteMenu--mainStyles;"},L=(e,t)=>e.blockId&&null!==t&&void 0!==t&&t.blockId?e.blockId===t.blockId:e.identifier===(null===t||void 0===t?void 0:t.identifier);var M={name:"qu9bv8--AutoCompleteMenu--AutoCompleteMenu",styles:"position:relative;z-index:3;label:-AutoCompleteMenu--AutoCompleteMenu;"};const B=e=>{let{search:t="",identifiers:n,onExecuteItem:i,top:s=!0,result:c=""}=e;const d=""!==c,u=(0,a.useMemo)((()=>[{title:"Variables",items:n.filter((e=>"variable"===e.kind||"function"===e.kind)).map((e=>({identifier:e.identifier,blockId:e.blockId,kind:"variable",type:e.type,focused:d&&"variable"===e.kind&&e.identifier===c})))}]),[n,d,c]),p=(0,a.useMemo)((()=>u.map((e=>{let{items:n,title:r,...o}=e;const l=n.filter((e=>{let{identifier:n}=e;return[n].some((e=>e.toLowerCase().includes(t.toLowerCase())))}));return 1===u.length?{...o,matchingItems:l}:{...o,title:r,matchingItems:l}}))),[t,u]),[h,g]=(0,a.useState)(p.flatMap((e=>{let{matchingItems:t}=e;return t})).map((e=>{let{identifier:t,blockId:n}=e;return{identifier:t,blockId:n}})));(0,a.useEffect)((()=>{g((e=>{const t=p.flatMap((e=>{let{matchingItems:t}=e;return t})).map((e=>{let{identifier:t,blockId:n}=e;return{identifier:t,blockId:n}}));return(0,l.J)(e,t)?e:t}))}),[t,p]);const[m,y]=(0,a.useState)(),v=p.flatMap((e=>e.matchingItems)),f=(0,a.useCallback)((e=>{var t,n;switch(!0){case"ArrowDown"===e.key&&!e.shiftKey:const r=null!==(t=h[(m?h.findIndex((e=>L(e,m))):-1)+1])&&void 0!==t?t:h[0];y(r),e.stopPropagation(),e.preventDefault();break;case"ArrowUp"===e.key&&!e.shiftKey:y(null!==(n=h[(m?h.findIndex((e=>L(e,m))):h.length)-1])&&void 0!==n?n:h.slice(-1)[0]),e.stopPropagation(),e.preventDefault()}}),[m,h]);return(0,r.mR)("keydown",f,!0),(0,a.useEffect)((()=>{h.length>0&&!d&&y(h[0])}),[d,h]),v.length?(0,b.tZ)("span",{css:M,className:"test-auto-complete-menu",children:(0,b.BX)("div",{contentEditable:!1,role:"menu","aria-orientation":"vertical",css:[R(s),d&&D,";label:-AutoCompleteMenu--AutoCompleteMenu;"],children:[(0,b.tZ)("div",{css:[N,v.length>5&&{height:"200px",overflowY:"scroll"},";label:-AutoCompleteMenu--AutoCompleteMenu;"],children:p.map(((e,t)=>{let{matchingItems:n,...r}=e;return n.length?(0,b.tZ)(T,{...r,children:n.map((e=>{var t;let{...n}=e;return(0,o.createElement)(C,{...n,key:null!==(t=n.blockId)&&void 0!==t?t:n.identifier,focused:L(n,m)||n.focused,onExecute:()=>null===i||void 0===i?void 0:i(n)})}))},t):null}))}),(0,b.BX)("div",{css:I,"data-testid":"autocomplete-tooltip",children:["Press ",(0,b.tZ)("span",{css:Z,children:d?"Enter":"Esc"})," to",d?" select":" dismiss"]})]})}):null}},91920:(e,t,n)=>{"use strict";n.d(t,{E:()=>Z,q:()=>I});var r=n(89203),o=n(426),l=n(30969),a=n(53393),i=n(28438),s=n(66840),c=n(49939),d=n(79820),u=n(57219),p=n(30879),h=n(11389),g=n(59336),m=n(46011),b=n(5594);const{lineHeight:y}=p,v={borderColor:(0,s.g)("borderHighlightColor")},f=(e,t,n)=>(0,o.css)({..."standalone"===e?{border:"1px solid ".concat((0,s.g)("borderColor")),backgroundColor:(0,s.g)("highlightColor"),padding:"6px 12px"}:{padding:"0px 12px"},...n?{}:{borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},...t?{}:{borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px"},":hover":v,position:"relative",..."standalone"===e?{display:"grid",gridGap:"0 16px",gridTemplate:'\n  "code            inline-res  " 1fr\n  "expanded-res    expanded-res" auto\n  /minmax(0, 66%) 1fr\n'}:{display:"grid",gridGap:"0 16px",gridTemplateAreas:'"code inline-res"',gridTemplateColumns:"minmax(0, 90%) 1fr"}},";label:-CodeLine--codeLineStyles;"),x=(0,o.css)({gridArea:"inline-res",maxWidth:"100%",display:"flex",justifySelf:"end",alignSelf:"flex-start",padding:"5px 0",userSelect:"all",[c.a$]:{gridArea:"expanded-res",width:"100%"}},";label:-CodeLine--inlineStyles;"),C=(0,o.css)(d.TU,{gridArea:"code",...(0,s.m)("currentTextColor",(0,s.g)("strongTextColor")),lineHeight:y,whiteSpace:"pre-wrap",[c.a$]:{gridArea:"1 / span 2"}},";label:-CodeLine--codeStyles;"),k=(0,o.css)(C,{opacity:.4,pointerEvents:"none",[c.a$]:{position:"absolute",left:"12px"}},";label:-CodeLine--placeholderStyles;"),w=e=>(0,o.css)(d.rC,e&&h.z,{":empty":{display:"none"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"2px 8px",...(0,s.m)("currentTextColor",(0,s.g)("weakTextColor")),...!e&&{paddingTop:"4px",display:"flex",alignItems:"center"},[c.a$]:{width:"100%"}},";label:-CodeLine--inlineResultStyles;"),E=(0,o.css)(d.yw,"grid-area:expanded-res;display:grid;margin-top:4px;overflow-x:auto;;label:-CodeLine--expandedResultStyles;"),S=(0,o.css)({cursor:"grab",":hover":{animation:"".concat(u.EY," 0.5s ease-in-out")},":hover:after":{backgroundColor:"blue",animation:"".concat(u.xg," 0.5s ease-in-out")}},";label:-CodeLine--canGrabStyles;"),T={name:"bh2mu3--CodeLine--grabbingStyles",styles:"cursor:grabbing;label:-CodeLine--grabbingStyles;"},Z=e=>{let{variant:t="standalone",children:n,highlight:o=!1,result:a,placeholder:i,syntaxError:s,isEmpty:c=!1,onDragStartInlineResult:d,onDragStartCell:u,onDragEnd:p,onClickedResult:h,hasNextSibling:g,hasPreviousSibling:m,element:y}=e;const[w,E]=(0,l.useState)(!1),Z=I({result:a,syntaxError:s,onDragStartCell:u,onClickedResult:h,element:y}),{inline:D,expanded:R}=(0,r.tp)(Z,!0===Z.errored);return(0,b.BX)("div",{css:[f(t,g,m),o&&v,";label:-CodeLine--CodeLine;"],spellCheck:!1,"data-testid":"code-line",children:[(0,b.tZ)("code",{css:C,children:n}),i&&c&&(0,b.tZ)("span",{css:k,contentEditable:!1,children:i}),!c&&(0,b.tZ)("div",{css:[x,(d||u||h)&&S,w&&T,";label:-CodeLine--CodeLine;"],contentEditable:!1,draggable:!0,onDragStart:e=>{null===d||void 0===d||d(e),E(!0)},onDragEnd:e=>{null===p||void 0===p||p(e),E(!1)},children:D}),!c&&R]})};function I(e){let{variant:t,result:n,syntaxError:r,onDragStartCell:o,onDragEnd:s,onClickedResult:c,element:d}=e;const u=(0,m.G)((0,l.useCallback)((()=>{c&&n&&c(n)}),[c,n]));return r?r.isEmptyExpressionError?{inline:(0,b.tZ)("output",{css:w("inline"!==t),children:(0,b.tZ)(i.s,{...r,message:"There is an empty variable"})}),errored:!0}:{inline:(0,b.tZ)("output",{css:w("inline"!==t),children:(0,b.tZ)(i.s,{...r})}),errored:!0}:n&&"nothing"!==n.type.kind?(0,g.u)(n.type)?{expanded:(0,b.tZ)("output",{contentEditable:!1,css:E,children:(0,b.tZ)(a.X,{...n,variant:"block",onDragStartCell:o,onDragEnd:s,element:d})})}:{inline:(0,b.tZ)("output",{css:w("inline"!==t),onClick:u,children:(0,b.tZ)(a.X,{...n,variant:"inline",element:d})}),errored:"type-error"===n.type.kind}:{}}},53393:(e,t,n)=>{"use strict";n.d(t,{X:()=>J});var r=n(20932),o=n(426),l=n(55013),a=n(30969),i=n(6442),s=n(75329),c=n(14966),d=n(33062),u=n(60182),p=n(95523),h=n(66840),g=n(99072),m=n(59336),b=n(55099),y=n(24988),v=n(82915),f=n(5594);const x=e=>{if("table"===e.type.kind){const{type:t,value:n}=e;if(null==n)return 0;const r=Math.max(...n.map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0})));return Math.max(...(0,l.$R)(t.columnTypes,n).map((e=>{let[t,n]=e;return null==n?0:x({type:t,value:n[0]})})))*r}if("column"===e.type.kind){const{type:t,value:n}=e;return x({type:t.cellType,value:n[0]})*n.length}return 1},C={name:"1kece9k--TableResult--liveTableWrapperStyles",styles:"left:20px;label:-TableResult--liveTableWrapperStyles;"},k=(0,o.css)({minWidth:"calc(((100vw - 700px) / 2) - (".concat(g.IT," * -2))")},";label:-TableResult--liveTableOverflowStyles;"),w={name:"1h3zy4o--TableResult--liveTableEmptyCellStyles",styles:"border:0;label:-TableResult--liveTableEmptyCellStyles;"};var E={name:"6r392a--TableResult--Cell",styles:"width:8px;height:9px;transform:translateY(50%);display:block;margin:auto;cursor:grab;label:-TableResult--Cell;"};const S=e=>{var t,n;let{parentType:r,type:l,value:S,onDragStartCell:T,onDragEnd:Z,tooltip:I=!0,isLiveResult:D=!1,firstTableRowControls:R,onChangeColumnType:N,element:L}=e;const[M,B]=(0,a.useState)(!1),{columnNames:O,columnTypes:A}=l,_=A&&"string"===(null===(t=A[0])||void 0===t?void 0:t.kind);if(S.length!==O.length)throw new Error("There are ".concat(O.length," column names. Expected values for ").concat(O.length," columns, but received values for ").concat(S.length," columns."));const P=null===(n=S.at(0))||void 0===n?void 0:n.length,V=(0,a.useMemo)((()=>x({type:l,value:S})),[l,S]),H=(0,a.useMemo)((()=>(0,m.u)(r)),[r]),W=(0,a.useMemo)((()=>{if(H||M||!P)return 0;if(V<=g.ZO)return 0;if(V===P)return P-g.ZO;const e=(V-g.ZO)/V;return Math.floor(P*e)}),[H,P,M,V]);if(null==P)return null;const K=P-W,U=e=>{let{cellValue:t,colIndex:n,rowIndex:r}=e;const i=(0,a.useRef)(null);return(0,f.tZ)(s.C,{ref:i,as:"td",isEditable:!1,isLiveResult:D,showPlaceholder:!1,lastBeforeMoreRowsHidden:W>0&&r===K-1,css:(0,o.css)({...g.Zv},";label:-TableResult--Cell;"),draggable:!!T&&_,firstChildren:(0,f.tZ)("div",{draggable:!0,onDragStart:e=>{null===T||void 0===T||T({tableName:l.indexName,columnName:O[n],cellValue:S[0][r]},{previewRef:i,result:{type:A[n],value:t}})(e)},onDragEnd:Z,className:T&&"drag-handle",css:(0,o.css)({display:"none",position:"absolute",top:8,right:4,zIndex:2,height:18,width:18,borderRadius:6,":hover":{background:(0,h.g)("highlightColor")}},";label:-TableResult--Cell;"),children:(0,f.tZ)("button",{css:E,children:(0,f.tZ)(d.D,{})})}),element:L,children:(0,f.tZ)("div",{css:[(0,o.css)(g.v4(A[n]),";label:-TableResult--Cell;"),0===n&&g.YE,";label:-TableResult--Cell;"],children:(0,f.tZ)(J,{parentType:l,type:A[n],value:t,variant:"block",tooltip:I,isLiveResult:D,element:L})})},n)};return(0,f.BX)("div",{css:[D&&y._k,D&&C,";label:-TableResult--TableResult;"],children:[(0,f.tZ)("div",{css:[D&&y.Mc,D&&k,";label:-TableResult--TableResult;"],contentEditable:!1}),(0,f.tZ)(i.i,{columnCount:O.length,border:H?"inner":"all",hiddenRowCount:W,isReadOnly:!D,isLiveResult:D,handleSetShowALlRowsButtonPress:()=>{B(!0)},head:(0,f.tZ)(u.K,{readOnly:!D,children:null===O||void 0===O?void 0:O.map(((e,t)=>D?(0,f.tZ)(v.Q,{type:(0,b.Jt)(A[t]),isFirst:0===t,isForImportedColumn:D,onChangeColumnType:e=>null===N||void 0===N?void 0:N(t,e),children:e},t):(0,f.tZ)(c.x,{type:(0,b.Jt)(A[t]),isEditable:!D,showIcon:D,children:e},t)))}),body:(0,f.tZ)(f.HY,{children:Array.from({length:K},((e,t)=>(0,f.BX)(p.S,{readOnly:!D||t>0,tableCellControls:D&&0===t&&R||D&&(0,f.tZ)("th",{})||!1,children:[D&&t>0&&(0,f.tZ)("th",{css:w}),S.map(((e,n)=>(0,f.tZ)(U,{cellValue:e[t],rowIndex:t,colIndex:n},n)))]},t)))})})]})};var T=n(1146),Z=n(13986);const I=(0,o.css)(g.YE,{...(0,h.m)("currentTextColor",(0,h.g)("weakTextColor")),color:(0,h.g)("currentTextColor"),display:"inline-block",lineHeight:1.2},";label:-ColumnResult--rowLabelStyles;"),D=e=>{let{type:t,value:n,element:r}=e;const l=(0,T.Iy)().explainDimensions$.use({type:t,value:n});return l?(0,f.tZ)(i.i,{isReadOnly:!0,columnCount:l[0].dimensionLength,body:(0,f.tZ)(f.HY,{children:Array.from((0,Z.YB)(l,{type:t,value:n})).map(((e,n)=>(0,f.BX)(p.S,{readOnly:!0,children:[e.labelInfo.map(((e,n)=>{var a;return e.indexesOfRemainingLengthsAreZero?(0,f.tZ)(s.C,{as:"td",rowSpan:e.productOfRemainingLengths,showPlaceholder:!1,element:r,children:(0,f.tZ)("span",{css:[(0,o.css)(g.v4(t.cellType),";label:-ColumnResult--ColumnResult;"),!l&&g.YE,I,";label:-ColumnResult--ColumnResult;"],children:null!==(a=e.label)&&void 0!==a?a:e.indexAtThisDimension+1})},n):null})),(0,f.tZ)(s.C,{as:"td",showPlaceholder:!1,element:r,children:(0,f.tZ)("span",{css:I,children:(0,f.tZ)(J,{type:e.result.type,value:e.result.value,element:r})})})]},n)))})}):null},R=e=>{let{value:t,type:n,element:r}=e;const{cellType:o}=n;if(!o)return null;const l=t;return(0,f.tZ)("span",{children:null===l||void 0===l?void 0:l.map(((e,t)=>(0,f.BX)(a.Fragment,{children:[(0,f.tZ)(J,{value:e,variant:"inline",type:o,element:r}),t<l.length-1&&", "]},t)))})},N=e=>{let{parentType:t,type:n,value:r,element:l}=e;const{rowCellNames:a,rowCellTypes:d}=n;return(0,f.tZ)(i.i,{isReadOnly:!0,columnCount:1,border:(0,m.u)(t)?"inner":"all",head:(0,f.tZ)(u.K,{readOnly:!0,children:a.map(((e,t)=>(0,f.tZ)(c.x,{type:(0,b.Jt)(d[t]),showIcon:!1,children:e},t)))}),body:(0,f.tZ)(p.S,{readOnly:!0,children:r.map(((e,t)=>(0,f.tZ)(s.C,{as:"td",showPlaceholder:!1,element:l,children:(0,f.tZ)("div",{css:[(0,o.css)(g.v4(d[t]),";label:-RowResult--RowResult;"),0===t&&g.YE,";label:-RowResult--RowResult;"],children:(0,f.tZ)(J,{parentType:n,type:d[t],value:e,variant:"block",element:l})})},t)))})})},L=e=>{let{value:t,type:n,tooltip:r=!0,element:o}=e;const{rowCellTypes:l}=n;return(0,f.tZ)("span",{children:t.map(((e,n)=>(0,f.BX)(a.Fragment,{children:[(0,f.tZ)(J,{value:e,variant:"inline",type:l[n],tooltip:r,element:o}),n<t.length-1&&", "]},n)))})},M=e=>{let{type:{rangeOf:t},value:n,variant:r,element:o}=e;return t?(0,f.BX)("span",{"data-highlight-changes":!0,children:[(0,f.tZ)(J,{type:t,value:n[0],variant:r,element:o})," ","\u2192"," ",(0,f.tZ)(J,{type:t,value:n[1],variant:r,element:o})]}):null};var B=n(68861);const O={name:"1v8yueb--NumberResult--numberResultStyles",styles:'text-overflow:ellipsis;overflow:hidden;display:inline;vertical-align:baseline;line-height:1.2;font-feature-settings:"tnum";label:-NumberResult--numberResultStyles;'},A=e=>{let{type:t,value:n,tooltip:r=!0}=e;const o=(0,T.Iy)().formatNumber(t,n),l=(0,f.tZ)("span",{css:O,children:o.asString}),a=(0,f.tZ)("span",{"data-testid":"number-result:".concat(o.asString),"data-highlight-changes":!0,css:O,children:l});return r&&o.asString!==o.asStringPrecise?(0,f.tZ)(B.u,{trigger:a,stopClickPropagation:!0,children:o.asStringPrecise}):a};var _=n(14102),P=n(96300);const V={name:"3vf8jr--BooleanResult--booleanResultStyles",styles:"text-overflow:ellipsis;overflow:hidden;> svg{width:16px;height:16px;};label:-BooleanResult--booleanResultStyles;"},H=e=>{let{value:t}=e;return(0,f.tZ)("span",{"data-highlight-changes":!0,css:V,contentEditable:!1,children:t?(0,f.tZ)(_.G,{}):(0,f.tZ)(P.P,{})})};var W=n(67005);const K=e=>{let{type:t,value:n}=e;const r=new Date(Number(n));let o,l=!1;switch(t.date){case"year":o="yyyy";break;case"month":o="MMM yyyy";break;case"day":o="MMM d yyyy";break;default:0===r.getUTCSeconds()&&0===r.getUTCMilliseconds()&&(l=!0,o="MMM d yyyy HH:mm")}const a=o?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return W.ou.fromMillis(e.valueOf()).toUTC().toFormat(t)+(n?" UTC":"")}(r,o,l):r.toISOString();return(0,f.tZ)("span",{"data-highlight-changes":!0,children:a})},U=()=>(0,f.tZ)("span",{children:"\u0192"});const X={name:"16l7eol--AnyResult--numberResultStyles",styles:"text-overflow:ellipsis;overflow:hidden;display:inline;vertical-align:baseline;line-height:1.2;label:-AnyResult--numberResultStyles;"},$=()=>{const e=(0,f.tZ)("span",{"data-highlight-changes":!0,css:X,children:"?"});return(0,f.tZ)(B.u,{trigger:e,children:"Unknown value"})};var q=n(86789),j=n(28438);const G=e=>{let{type:t,element:n}=e;const r=(0,T.Iy)(),{url:o}=new Z.du(t.errorCause),l=r.formatError(t.errorCause),i=(0,a.useContext)(q.K);return(0,a.useEffect)((()=>{i({type:"action",action:"user code error",props:{errorType:t.errorCause.errType,elementType:null===n||void 0===n?void 0:n.type,message:l,url:o}})}),[i,null===n||void 0===n?void 0:n.type,l,t.errorCause.errType,o]),(0,f.tZ)(j.s,{message:l,url:o})},F=e=>{let{value:t}=e;return(0,f.tZ)("span",{children:String(null!==t&&void 0!==t?t:"")})},z=()=>(0,f.tZ)("span",{children:"Table"});function Y(e){var t,n;return(null!==(t=null===(n=[{component:A,match:e=>{let{type:t,value:n}=e;return"number"===t.kind&&(0,r.V)(n)}},{component:H,match:e=>{let{type:t,value:n}=e;return"boolean"===t.kind&&"boolean"===typeof n}},{component:K,match:e=>{let{type:t}=e;return"date"===t.kind}},{component:S,match:e=>{let{type:t,variant:n}=e;return"table"===t.kind&&"block"===n}},{component:z,match:e=>{let{type:t,variant:n}=e;return"table"===t.kind&&"inline"===n}},{component:D,match:e=>{let{type:t,variant:n}=e;return"column"===t.kind&&"block"===n}},{component:R,match:e=>{let{type:t,variant:n}=e;return"column"===t.kind&&"inline"===n}},{component:N,match:e=>{let{type:t,variant:n}=e;return"row"===t.kind&&"block"===n}},{component:L,match:e=>{let{type:t,variant:n}=e;return"row"===t.kind&&"inline"===n}},{component:U,match:e=>{let{type:t}=e;return"function"===t.kind}},{component:M,match:e=>{let{type:t}=e;return"range"===t.kind}},{component:G,match:e=>{let{type:t,variant:n}=e;return"type-error"===t.kind&&"inline"===n}},{component:$,match:e=>{let{type:t}=e;return"anything"===t.kind||"nothing"===t.kind}}].find((t=>{let{match:n}=t;return n(e)})))||void 0===n?void 0:n.component)&&void 0!==t?t:F)||null}function J(e){const{type:t,value:n,variant:r="block",element:o}=e,l=Y({value:n,variant:r,type:t,element:o});return null==n&&"type-error"!==t.kind?null:(0,f.tZ)(l,{...e})}},77683:(e,t,n)=>{"use strict";n.d(t,{v:()=>ne,w:()=>j});var r=n(426),o=n(1146),l=n(30969),a=n(55013),i=n(20548),s=n(8243),c=n(68861),d=n(33062),u=n(759),p=n(65394),h=n(85038),g=n(10663),m=n(51551),b=n(78342),y=n(91745),v=n(17813),f=n(57481),x=n(79820),C=n(66840),k=n(57219),w=n(5594);var E={name:"1v1yd34--DeleteWithDepsMenuItem--DeleteWithDepsMenuItem",styles:"text-align:center;max-width:170px;label:-DeleteWithDepsMenuItem--DeleteWithDepsMenuItem;"},S={name:"1v1yd34--DeleteWithDepsMenuItem--DeleteWithDepsMenuItem",styles:"text-align:center;max-width:170px;label:-DeleteWithDepsMenuItem--DeleteWithDepsMenuItem;"};const T=e=>{let{blockInfo:t,onSelect:n=a.ZT}=e;const r=t.usedInBlockId[0],i=t.usedInBlockId.length,[d]=(0,o.yt)(),u=d?f.$9:f.$u,p=15,h=(0,l.useCallback)((e=>{const t=[{boxShadow:"".concat((0,f.KZ)(u,.4).rgba," 0px ").concat(20,"px 2px -").concat(p,"px, ").concat((0,f.KZ)(u,.3).rgba," 0px ").concat(25,"px 2px -").concat(p,"px, ").concat((0,f.KZ)(u,.2).rgba," 0px ").concat(30,"px 2px -").concat(p,"px, ").concat((0,f.KZ)(u,.1).rgba," 0px ").concat(35,"px 2px -").concat(p,"px, ").concat((0,f.KZ)(u,.04).rgba," 0px ").concat(40,"px 2px -").concat(p,"px"),zIndex:999},{boxShadow:"unset",zIndex:1},{zIndex:"unset"}],n={duration:2e3,iterations:1};if("string"===typeof r){const o=document.getElementById(r);null===o||void 0===o||o.scrollIntoView({behavior:"smooth",block:"center"}),null===o||void 0===o||o.focus(),setTimeout((()=>null===o||void 0===o?void 0:o.animate(t,n)),500),e.preventDefault(),e.stopPropagation()}}),[r,u]);return(0,w.tZ)(s.s,{icon:(0,w.tZ)(v.v,{}),onSelect:n,children:(0,w.BX)(c.u,{trigger:(0,w.BX)("div",{css:I,children:[(0,w.tZ)("span",{children:"Delete"}),(0,w.tZ)("a",{href:"#".concat(r),css:Z,onClick:h,children:i})]}),children:[(0,w.BX)("p",{css:S,children:["Deleting this block will affect ",i," other places. \ud83d\ude22"]}),(0,w.BX)("p",{css:E,children:["Remove references before deleting by clicking the",(0,w.tZ)("div",{css:[Z,"margin:0 4px;display:inline-block;;label:-DeleteWithDepsMenuItem--DeleteWithDepsMenuItem;"],children:i}),"."]})]})})},Z=(0,r.css)(x.KY,{borderRadius:4,backgroundColor:(0,C.g)("notebookStateDangerLight"),color:(0,C.g)("notebookStateDangerHeavy"),border:"1px solid ".concat((0,C.g)("notebookStateDangerHeavy")),cursor:"pointer",width:17,height:17,textAlign:"center",":hover":{animation:"".concat(k.EY," 0.5s ease-in-out,\n").concat((0,k.Lm)("background-color",(0,C.g)("notebookStateDangerLight"),(0,C.g)("notebookStateWarningLight"))," 0.5s ease-in-out")},":hover:after":{backgroundColor:"blue",animation:"".concat(k.xg," 0.5s ease-in-out")}},";label:-DeleteWithDepsMenuItem--deleteWithDepsMenuItemStyles;"),I={name:"1185re4--DeleteWithDepsMenuItem--deleteWithDepsWrapperStyles",styles:"display:flex;justify-content:space-between;align-items:center;label:-DeleteWithDepsMenuItem--deleteWithDepsWrapperStyles;"};var D=n(71799),R=n(46011);const N=(0,i.IHq)((()=>(0,r.css)({display:"grid",gridTemplate:'\n      ".                          plus handle                             " '.concat(D.bX(),'\n      "menu                       .    .                                  " auto\n      /minmax(max-content, 144px) ').concat(D.s1(),"\n    "),justifyContent:"end"},";label:-BlockDragHandle--gridStyles;"))),L=(0,r.css)({borderRadius:"6px",":hover":{background:(0,C.g)("highlightColor")}},";label:-BlockDragHandle--handleButtonStyle;"),M=(0,r.css)(L,"height:20px;width:20px;padding:2px;display:flex;align-items:center;justify-content:center;> svg{height:100%;};label:-BlockDragHandle--eyeLabelStyles;"),B=(0,r.css)(L,"grid-area:handle;cursor:grab;height:20px;width:20px;margin-left:2px;;label:-BlockDragHandle--handleStyle;"),O=(0,r.css)(L,"grid-area:plus;cursor:pointer;height:20px;width:20px;;label:-BlockDragHandle--plusStyle;");var A={name:"1i43swr--BlockDragHandle--BlockDragHandle",styles:"white-space:nowrap;text-align:center;label:-BlockDragHandle--BlockDragHandle;"},_={name:"f19k8e--BlockDragHandle--menuButton",styles:"padding:5px;label:-BlockDragHandle--menuButton;"};const P=e=>{let{children:t,menuOpen:n=!1,isHidden:o=!1,onShowHide:i=a.ZT,showEyeLabel:v=!1,onMouseDown:f,showAddBlock:k=!0,onChangeMenuOpen:E=a.ZT,onPlus:S=a.ZT,onDelete:Z=a.ZT,onDuplicate:I=a.ZT,onCopyHref:L,dependenciesForBlock:M}=e;const[P,H]=(0,l.useState)(!1),W=(0,l.useCallback)((()=>i("show")),[i]),K=(0,l.useCallback)((()=>i("hide")),[i]),U=(0,l.useCallback)((()=>H(!0)),[H]),X=(0,l.useCallback)((()=>H(!1)),[H]),$=(0,l.useCallback)((()=>{"none"!==Z&&E(!n)}),[n,E,Z]),q=Array.isArray(M)&&0!==M.length,j=v&&!P,G=(0,w.tZ)("div",{"data-testid":"drag-handle",onMouseEnter:U,onMouseLeave:X,onClick:$,css:[B,!j&&_,";label:-BlockDragHandle--menuButton;"],children:j?(0,w.tZ)(V,{}):(0,w.tZ)(d.D,{})}),F=o?(0,w.tZ)(s.s,{icon:(0,w.tZ)(u.d,{}),onSelect:W,children:"Show to reader"}):(0,w.tZ)(s.s,{icon:(0,w.tZ)(p.c,{}),onSelect:K,children:"Hide from reader"}),z=(0,w.tZ)("button",{onClick:(0,R.G)(S),css:O,children:(0,w.tZ)(h.v,{})});return(0,w.BX)("div",{css:[N(),D.XS,";label:-BlockDragHandle--BlockDragHandle;"],onMouseDown:f,children:[k&&(0,w.tZ)(c.u,{trigger:z,side:"bottom",hoverOnly:!0,children:(0,w.BX)("span",{css:A,children:[(0,w.tZ)("strong",{children:"Click"})," to add block below"]})}),n&&(0,w.BX)(y.q,{root:!0,open:n,onChangeOpen:E,trigger:G,dropdown:!0,side:"left",children:[F,(0,w.tZ)(s.s,{icon:(0,w.tZ)(g.F,{}),onSelect:I,children:"Duplicate"}),L&&(0,w.tZ)(s.s,{icon:(0,w.tZ)(m.r,{}),onSelect:L,children:"Copy reference"}),t,(0,w.tZ)(s.s,{disabled:!0,children:(0,w.tZ)("hr",{css:(0,r.css)({color:(0,C.g)("highlightColor")},";label:-BlockDragHandle--BlockDragHandle;")})}),q?(0,w.tZ)(T,{blockInfo:M[0],onSelect:"function"===typeof Z?Z:a.ZT}):"function"===typeof Z?(0,w.tZ)(s.s,{icon:(0,w.tZ)(b.H,{}),onSelect:Z,children:"Delete"}):null]}),(0,w.tZ)(c.u,{trigger:G,side:"bottom",hoverOnly:!0,children:(0,w.BX)("span",{css:(0,r.css)([x.vf,(0,C.m)("currentTextColor",(0,C.g)("backgroundColor")),{whiteSpace:"nowrap",textAlign:"center"}],";label:-BlockDragHandle--BlockDragHandle;"),children:[(0,w.tZ)("strong",{css:(0,r.css)([x.KY,(0,C.m)("currentTextColor",(0,C.g)("backgroundColor"))],";label:-BlockDragHandle--BlockDragHandle;"),children:"Drag"})," ","to move",(0,w.tZ)("br",{}),(0,w.tZ)("strong",{css:(0,r.css)([x.KY,(0,C.m)("currentTextColor",(0,C.g)("backgroundColor"))],";label:-BlockDragHandle--BlockDragHandle;"),children:"Click"})," ","for options"]})})]})},V=()=>(0,w.tZ)("div",{css:M,contentEditable:!1,children:(0,w.tZ)(p.c,{})});var H=n(47475),W=n(96770),K=n(72209),U=n(26264),X=n(99780),$=n(168);const q=16+D.hS,j=.4,G={name:"1hhkn7a--DraggableBlock--horizontalDropLineStyle",styles:"position:absolute;width:100%;z-index:2;label:-DraggableBlock--horizontalDropLineStyle;"},F={name:"184bd48--DraggableBlock--topDropLineStyle",styles:"top:4px;label:-DraggableBlock--topDropLineStyle;"},z={name:"ot6vwh--DraggableBlock--bottomDropLineStyle",styles:"bottom:-6px;label:-DraggableBlock--bottomDropLineStyle;"},Y={name:"peip3l--DraggableBlock--verticalDropLineStyle",styles:"position:absolute;width:auto;height:100%;top:0;z-index:2;label:-DraggableBlock--verticalDropLineStyle;"},J=(0,r.css)({left:"-6px"},";label:-DraggableBlock--leftDropLineStyle;"),Q={name:"1khqdto--DraggableBlock--rightDropLineStyle",styles:"right:-6px;label:-DraggableBlock--rightDropLineStyle;"},ee={name:"1x5r4n0--DraggableBlock--hiddenEditorBlockStyle",styles:"opacity:.5;transition:opacity .2s ease;label:-DraggableBlock--hiddenEditorBlockStyle;"},te={name:"hnjeif--DraggableBlock--hiddenFocusedStyle",styles:"opacity:1;filter:unset;label:-DraggableBlock--hiddenFocusedStyle;"},ne=e=>{let{isSelected:t=!1,isHidden:n=!1,isBeingDragged:a=!1,dropLine:i,dragSource:c,blockRef:d,previewRef:u,draggableCss:p,onMouseDown:h,onDelete:g,onDuplicate:m,onAdd:b,onPlus:v,showLine:f=!0,onShowHide:x,onCopyHref:C,dependenciesForBlock:E,onTurnInto:S,turnInto:T,blockKind:Z,children:I,disableDrag:R=!1,isCentered:N=!1,hasPreviousSibling:L,...M}=e;const[B,O]=(0,l.useState)(!1),A=B?o.Xy:l.Fragment,{typography:_}=$[Z],V=n&&!B,ne=(0,w.tZ)("div",{contentEditable:!1,css:["top"===i&&[G,F],"bottom"===i&&[G,z],"left"===i&&[Y,J],"right"===i&&[Y,Q],";label:-DraggableBlock--dropLineEl;"],children:(0,w.tZ)(H.s,{variant:"left"===i||"right"===i?"inline":"block"})});return(0,w.tZ)(W.V,{blockKind:Z,ref:d,...M,children:(0,w.BX)("div",{css:(0,r.css)({display:"grid",gridTemplateColumns:"".concat(16,"px auto"),gridColumnGap:"".concat(D.hS,"px"),marginLeft:"-".concat(q,"px"),transition:"margin-left ".concat(k.Ju," ease-out")},";label:-DraggableBlock--DraggableBlock;"),children:[(0,w.tZ)("div",{contentEditable:!1,ref:c,css:[V?{}:{opacity:B?"unset":0,"*:hover > &":{opacity:"unset"}},{transition:"opacity ".concat(k.Ju," ease-in-out ").concat(k.DL),paddingTop:_?"calc((\n                  ".concat(_.lineHeight," * ").concat(_.fontSize,"\n                  -\n                  ").concat(D.bX(),"\n                ) / 2\n              )"):0,height:0},N&&{display:"flex",alignItems:"center",height:"100%",marginLeft:"-32px"},p,";label:-DraggableBlock--DraggableBlock;"],children:!R&&(0,w.tZ)(P,{menuOpen:B,isHidden:n,dependenciesForBlock:E,onMouseDown:h,onChangeMenuOpen:O,onPlus:v,onDelete:g,onDuplicate:m,onShowHide:x,showEyeLabel:V,showAddBlock:!n,onCopyHref:C,children:null!=T&&T.length>0&&(0,w.tZ)(y.q,{itemTrigger:(0,w.tZ)(K.e,{icon:(0,w.tZ)(X.z,{}),children:"Turn into"}),children:T.map((e=>(0,w.tZ)(s.s,{onSelect:()=>null===S||void 0===S?void 0:S(e.value),children:e.title},e.value)))})})}),(0,w.BX)("div",{css:[a?{opacity:j}:{},n?ee:{},t||B?te:{},{maxWidth:D.cR,width:"100%"},";label:-DraggableBlock--DraggableBlock;"],ref:u,children:[("top"===i||"left"===i)&&ne,(0,w.tZ)(U.y,{onAdd:b,show:f,hasPreviousSibling:L}),(0,w.tZ)(A,{children:I}),("bottom"===i||"right"===i)&&ne]})]})})}},12548:(e,t,n)=>{"use strict";n.d(t,{h:()=>P});var r=n(89203),o=n(55013),l=n(426),a=n(73649),i=n(25555),s=n(30969),c=n(85038),d=n(66840),u=n(79820),p=n(57481),h=n(17813),g=n(68861),m=n(5594);const b=(0,l.css)({paddingRight:"6px",display:"flex",alignItems:"center",backgroundColor:(0,d.g)("highlightColor"),borderRadius:"6px"},";label:-DropdownOption--wrapperStyles;"),y=(0,l.css)(u.t5,{marginTop:"2px",padding:"6px 6px 6px 8px",width:"100%",height:"32px",backgroundColor:(0,d.g)("highlightColor"),borderRadius:"6px",display:"flex",alignItems:"center"},";label:-DropdownOption--inputOptionStyles;");var v={name:"14lcuxb--DropdownOption--DropdownOption",styles:"width:16px;height:16px;label:-DropdownOption--DropdownOption;"};const f=e=>{let{value:t,setValue:n,error:r=!1}=e;return(0,m.BX)("div",{css:b,children:[(0,m.tZ)("input",{autoFocus:!0,value:t,onChange:e=>n(e.target.value),placeholder:"Type here",css:y,onClick:e=>e.stopPropagation()}),r&&(0,m.BX)(g.u,{trigger:(0,m.tZ)("div",{css:v,children:(0,m.tZ)(h.v,{})}),children:[(0,m.tZ)("p",{css:u.KY,children:(0,m.tZ)("strong",{children:"Option already exists"})}),(0,m.tZ)("p",{css:[u.vf,{color:p.mK.rgb},";label:-DropdownOption--DropdownOption;"],children:"Specify another option"})]})]})};var x=n(2699),C=n(73768),k=n(46011);const w=(0,l.css)({width:"100%",overflow:"hidden",height:"32px",display:"flex",paddingLeft:"4px",paddingRight:"4px",alignItems:"center",justifyContent:"space-between",":not(:hover) aside:last-child":{display:"none"},"&:hover":{backgroundColor:(0,d.g)("highlightColor"),borderRadius:"6px","aside:last-child":{display:"flex"}}},";label:-SelectItem--wrapper;"),E=(0,l.css)(u.yw,"text-align:start;overflow:hidden;white-space:nowrap;flex-grow:0;;label:-SelectItem--textStyles;"),S={name:"24oo2u--SelectItem--iconWrapper",styles:"align-items:center;gap:4px;label:-SelectItem--iconWrapper;"},T={name:"1wkc17x--SelectItem--iconStyles",styles:"cursor:pointer;width:24px;height:24px;label:-SelectItem--iconStyles;"};var Z={name:"d7vnc1--SelectItem--SelectItem",styles:"display:flex;gap:4px;max-width:100%;label:-SelectItem--SelectItem;"},I={name:"1oegic6--SelectItem--SelectItem",styles:"width:16px;height:16px;label:-SelectItem--SelectItem;"};const D=e=>{let{item:t,onExecute:n,isEditAllowed:l=!1,onRemoveOption:a=o.ZT,onEditOption:i=o.ZT}=e;const[c,u]=(0,s.useState)(t.item),[p,h]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),y=(0,s.useCallback)((e=>{if(("Enter"===e.key||"Escape"===e.key)&&p){e.preventDefault(),e.stopPropagation();i(t.item,c)?h(!1):b(!0)}}),[i,p,t,c]);(0,r.mR)("keydown",y,!0);const v=(0,s.useCallback)((()=>{"column"===t.type?n(t.blockId||t.item,"column"):n(t.item)}),[n,t.item,t.type,t.blockId]),D=(0,k.G)((0,s.useCallback)((()=>{h(!0)}),[h])),R=(0,k.G)((0,s.useCallback)((()=>{a(t.item)}),[t.item,a]));return p?(0,m.tZ)(f,{value:c,setValue:u,error:g}):(0,m.BX)("div",{css:[w,t.focused&&{backgroundColor:(0,d.g)("highlightColor"),borderRadius:"6px"},";label:-SelectItem--SelectItem;"],onClick:v,"aria-roledescription":"dropdownOption",children:[(0,m.BX)("div",{css:Z,children:[t.icon&&(0,m.tZ)("div",{css:I,children:t.icon}),(0,m.tZ)("span",{css:E,children:t.item})]}),l&&(0,m.BX)("aside",{css:[S,";label:-SelectItem--SelectItem;"],children:[(0,m.tZ)("div",{css:T,onClick:D,"aria-roledescription":"dropdown-edit",children:(0,m.tZ)(x.I,{})}),(0,m.tZ)("div",{css:[T,"width:14px;height:14px;;label:-SelectItem--SelectItem;"],onClick:R,"aria-roledescription":"dropdown-delete",children:(0,m.tZ)(C.r,{})})]})]})};var R={name:"mtrynm--DropdownMenuGroup--DropdownMenuGroup",styles:"padding:4px 4px;label:-DropdownMenuGroup--DropdownMenuGroup;"};const N=e=>{let{items:t,title:n,isEditingAllowed:r=!1,...o}=e;return(0,m.BX)("div",{css:R,children:[n&&(0,m.tZ)("p",{css:[u.yw,{color:(0,d.g)("weakTextColor")},";label:-DropdownMenuGroup--DropdownMenuGroup;"],children:n}),t.map((e=>(0,m.tZ)(D,{item:e,isEditAllowed:r,...o},e.item)))]})};const L=(0,l.css)({display:"flex",flexDirection:"column",alignItems:"flex-start",overflowX:"hidden",marginTop:"8px",backgroundColor:(0,d.g)("backgroundColor"),border:"1px solid ".concat((0,d.g)("borderColor")),borderRadius:"12px",boxShadow:"0px 3px 24px -4px ".concat(p.ip.rgba),width:"100%",maxWidth:"244px",minWidth:"244px",boxSizing:"border-box"},";label:-DropdownMenu--styles;"),M={name:"xb29hd--DropdownMenu--mainStyles",styles:"padding:6px;margin-top:2px;margin-bottom:2px;width:100%;overflow-y:auto;max-height:300px;label:-DropdownMenu--mainStyles;"},B=(0,l.css)(u.t5,{padding:"6px 0px 8px 16px",width:"100%",bottom:"0px",height:"32px",lineHeight:"24px",background:(0,d.g)("highlightColor"),boxShadow:"0px -1px 0px ".concat((0,d.g)("borderColor")),display:"flex",alignItems:"center",gap:"4px"},(0,d.m)("currentTextColor",(0,d.g)("weakTextColor")),";label:-DropdownMenu--footerStyles;"),O=(0,l.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",borderRadius:"6px",padding:"0 6px",border:"1px ".concat((0,d.g)("strongerHighlightColor")," solid"),backgroundColor:(0,d.g)("backgroundColor"),color:(0,d.g)("weakTextColor")},";label:-DropdownMenu--hotKeyStyle;");var A={name:"19powys--DropdownMenu--DropdownMenu",styles:"width:100%;label:-DropdownMenu--DropdownMenu;"},_={name:"5qbpwk--DropdownMenu--DropdownMenu",styles:"width:16px;height:16px;label:-DropdownMenu--DropdownMenu;"};const P=e=>{let{open:t,setOpen:n,isReadOnly:l,items:d,otherItems:u=[],addOption:p=o.ZT,onExecute:h,onEditOption:g,onRemoveOption:b,children:y}=e;const v=(0,s.useRef)(null),[x,C]=(0,s.useState)(""),[k,w]=(0,s.useState)(!1),[E,S]=(0,s.useState)(!1),[T,Z]=(0,s.useState)(-1),I=0===d.length||k,D=(0,s.useCallback)((e=>{if(t)switch(!0){case"ArrowDown"===e.key&&!e.shiftKey:Z(T===d.length-1?0:T+1);break;case"ArrowUp"===e.key&&!e.shiftKey:Z(0===T?d.length-1:T-1);break;case"Enter"===e.key&&x.length>0&&I:d.some((e=>e.item===x))?S(!0):(p(x),C(""),w(!1),e.preventDefault(),e.stopPropagation());break;case"Enter"===e.key&&!I:{const e=d[T];e&&h(e.item);break}case"Escape"===e.key:n(!1)}}),[t,p,x,d,T,I,n,h]);return(0,r.mR)("keydown",D),(0,s.useEffect)((()=>{var e;I&&t&&(null===(e=v.current)||void 0===e||e.focus())}),[I,t]),(0,s.useEffect)((()=>{E&&!d.some((e=>e.item===x))&&S(!1)}),[E,x,d]),(0,m.BX)(a.fC,{open:t,onOpenChange:n,children:[(0,m.tZ)(a.xz,{css:A,children:y}),(0,m.tZ)(a.VY,{children:(0,m.BX)("div",{css:L,children:[(0,m.BX)("div",{css:M,children:[u.length>0&&u.map((e=>(0,m.tZ)(N,{items:e.items,onExecute:h,title:e.title,onEditOption:g,onRemoveOption:b},(0,i.x0)()))),d.length>0&&(0,m.tZ)(N,{items:d,onExecute:h,onEditOption:g,onRemoveOption:b,isEditingAllowed:!l},(0,i.x0)()),!l&&I&&(0,m.tZ)(f,{value:x,setValue:C,error:E})]}),!l&&(0,m.tZ)("div",{css:B,onClick:()=>{k?(p(x),C(""),w(!1)):w(!0)},children:k?(0,m.BX)(m.HY,{children:["Press ",(0,m.tZ)("span",{css:O,children:"Enter"})," to save"]}):(0,m.BX)(m.HY,{children:[(0,m.tZ)("div",{css:_,children:(0,m.tZ)(c.v,{})}),"Add new"]})})]})})]})}},24988:(e,t,n)=>{"use strict";n.d(t,{aW:()=>H,Mc:()=>A,_k:()=>B});var r=n(1146),o=n(55013),l=n(426),a=n(30969),i=n(6442),s=n(27012),c=n(10248),d=n(79820),u=n(66840),p=n(99072),h=n(5594);const g=(0,l.css)(d.t5,{cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",width:"auto",padding:"6px ".concat(p.PI),marginTop:"".concat(p.ci),borderRadius:"6px",backgroundColor:(0,u.g)("highlightColor")},";label:-AddTableRowButton--buttonStyles;"),m={name:"12k7067--AddTableRowButton--hiddenStyles",styles:"visibility:hidden;label:-AddTableRowButton--hiddenStyles;"},b={name:"1739p30--AddTableRowButton--iconWrapperStyles",styles:"height:16px;width:16px;label:-AddTableRowButton--iconWrapperStyles;"};var y={name:"156w2of--AddTableRowButton--AddTableRowButton",styles:"height:36px;label:-AddTableRowButton--AddTableRowButton;"};const v=e=>{let{onAddRow:t=o.ZT,mouseOver:n=!1}=e;return(0,h.BX)(h.HY,{children:[(0,h.tZ)("th",{}),(0,h.tZ)("th",{css:y,children:(0,h.BX)("button",{css:[g,!n&&m,";label:-AddTableRowButton--AddTableRowButton;"],onClick:t,children:[(0,h.tZ)("span",{css:b,children:(0,h.tZ)(c.Q,{})}),(0,h.tZ)("span",{children:"Add row"})]})},"firstcol")]})};var f=n(49939),x=n(71799),C=n(55099),k=n(46011);const w="".concat(Math.round(x.cR/2),"px"),E="".concat(x.wW-x.cR,"px"),S="60px",T="calc(".concat("50vw"," - ").concat(w," - ").concat(E,")"),Z="calc(".concat("100vw"," - ").concat(T," - ").concat(S," - ").concat(S,")"),I="(((100vw - 610px) / 2) + ".concat(p.IT,")"),D={name:"rnplig--EditorTable--wrapperStyles",styles:"margin:0;label:-EditorTable--wrapperStyles;"},R=(0,l.css)({width:"100%",minWidth:x.cR,maxWidth:Z,display:"inline-block",[f.a$]:{maxWidth:"calc(100vw - ".concat(S,")"),minWidth:"0"}},";label:-EditorTable--tableCaptionWrapperStyles;"),N=(0,l.css)({position:"relative",transform:"translateX(calc((((100vw - 580px) / 2) + ".concat(p.IT,") * -1 ))"),left:p.IT},";label:-EditorTable--tableWrapperTransformStyles;"),L=(0,l.css)({left:"-".concat(p.IT)},";label:-EditorTable--tableWrapperDraggingStyles;"),M=(0,l.css)({width:"100vw",minWidth:x.cR,overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",position:"relative",whiteSpace:"nowrap",display:"flex","&:hover":{scrollbarWidth:"inherit",msOverflowStyle:"inherit","&::-webkit-scrollbar-thumb":{backgroundColor:(0,u.g)("highlightColor")}},"&::-webkit-scrollbar":{width:"100px",height:"8px"},"&::-webkit-scrollbar-thumb":{width:"3px",height:"3px",backgroundColor:"transparent",borderRadius:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent",height:"3px"},"&::-webkit-scrollbar-button":{width:"calc((100vw - 580px)/4)"},"&::-ms-scrollbar-thumb":{width:"3px",height:"3px",backgroundColor:(0,u.g)("highlightColor"),borderRadius:"8px"},"&::-ms-scrollbar-track":{backgroundColor:"transparent",height:"3px"},"&::-ms-scrollbar-button":{width:"calc((100vw - 580px)/4)"},[f.a$]:{maxWidth:"calc(100vw - ".concat(S,")"),transform:"translateX(-40px)",minWidth:"0"}},";label:-EditorTable--tableWrapperDefaultStyles;"),B=(0,l.css)([N,M],";label:-EditorTable--tableWrapperStyles;"),O=(0,l.css)({paddingRight:"calc(".concat(I,")"),[f.a$]:{paddingRight:"0px"}},";label:-EditorTable--tableScroll;"),A=(0,l.css)({display:"inline-block",height:"20px",minWidth:"calc(((100vw - 580px) / 2) - ".concat(p.IT,")")},";label:-EditorTable--tableOverflowStyles;"),_=(0,l.css)({width:"40px",minWidth:"40px",paddingLeft:"8px",position:"relative",marginLeft:"calc(".concat(I," *-1)"),[f.a$]:{marginLeft:"0px"}},";label:-EditorTable--tableAddColumnButtonWrapperStyles;"),P=(0,l.css)({width:"40px",minWidth:"40px",backgroundColor:(0,u.g)("highlightColor"),borderRadius:"8px",padding:"8px",position:"absolute",top:0,bottom:0,visibility:"hidden"},";label:-EditorTable--tableAddColumnButtonStyles;"),V={name:"51womu--EditorTable--mouseOverAddColumnButtonStyles",styles:"visibility:unset;label:-EditorTable--mouseOverAddColumnButtonStyles;"},H=e=>{let{id:t,onAddRow:n,onAddColumn:l,columns:c,children:d,dropRef:u,icon:p,color:g,isCollapsed:m,hideFormulas:b,tableWidth:y,isSelectingCell:f,onChangeIcon:x=o.ZT,onChangeColor:w=o.ZT,onSetCollapsed:E=o.ZT,onSetHideFormulas:S=o.ZT,hiddenRowCount:T=0,smartRow:Z,previewMode:I}=e;const[B,H,...W]=a.Children.toArray(d);(0,r.YO)().previewText();const{color:K}=(0,r.xc)(),U=(0,a.useMemo)((()=>({icon:p,color:null!==g&&void 0!==g?g:K,isCollapsed:m,hideFormulas:b,setIcon:x,setColor:w,setCollapsed:E,setHideFormulas:S})),[g,K,p,m,b,w,x,E,S]),[X,$]=(0,a.useState)(!1),q=(0,a.useCallback)((()=>$(!0)),[]),j=(0,a.useCallback)((()=>$(!1)),[]),G=(0,k.G)(l),F=(0,r.YO)().draggingId()===t;return(0,h.tZ)(C.dg.Provider,{value:U,children:(0,h.tZ)("div",{css:D,children:(0,h.BX)("div",{children:[!I&&(0,h.tZ)("div",{css:R,children:B}),m?null:(0,h.BX)("div",{css:[F?L:N,M,";label:-EditorTable--EditorTable;"],children:[!F&&(0,h.tZ)("div",{css:A,contentEditable:!1}),(0,h.tZ)("div",{css:O,children:(0,h.tZ)(i.i,{isReadOnly:!1,columnCount:c.length,dropRef:u,tableWidth:y,isSelectingCell:f,hiddenRowCount:T,head:H,body:W,previewMode:I,addTable:(0,h.tZ)(v,{mouseOver:X,onAddRow:n}),smartRow:Z,onMouseOver:$})}),!I&&(0,h.tZ)("div",{css:_,onMouseEnter:q,onMouseLeave:j,children:(0,h.tZ)("button",{onClick:G,css:[P,X&&V,";label:-EditorTable--EditorTable;"],title:"Add Column",children:(0,h.tZ)(s.m,{})})})]})]})})})}},6442:(e,t,n)=>{"use strict";n.d(t,{i:()=>M,p:()=>y});var r=n(55013),o=n(426),l=n(74125),a=n.n(l),i=n(30969),s=n(90072),c=n(64027),d=n(57219);const u=n(77282).browser&&"IntersectionObserver"in global;var p=n(86550),h=n(66840),g=n(99072),m=n(49758),b=n(5594);const y="1px solid ".concat((0,h.g)("borderTable")),v="1px solid ".concat((0,h.g)("borderTable")),f="8px",x=(0,o.css)({borderCollapse:"inherit",borderSpacing:"0",tableLayout:"auto",counterReset:m.j,display:"inline-table",backgroundColor:(0,h.g)("backgroundColor"),"tr td":{borderBottom:y},td:{borderLeft:y},"td:last-child":{borderRight:y},table:{marginBottom:0,"tr:last-child td":{borderBottom:0},"tr td:first-of-type":{borderLeft:0},"tr td:last-child":{borderRight:0}}},";label:-Table--tableBaseStyles;"),C={name:"1wkqjue--Table--nestedStyles",styles:"border-bottom:0;tr:last-child td{border-bottom:0;}td:first-of-type{border-left:0;};label:-Table--nestedStyles;"},k={name:"21xfru--Table--readOnlyTableStyles",styles:"width:100%;margin-bottom:12px;label:-Table--readOnlyTableStyles;"},w={name:"1mzf4bc--Table--wideTableStyles",styles:"width:initial;max-width:initial;label:-Table--wideTableStyles;"},E=(0,o.css)({"> thead > tr > th:nth-of-type(2), > tbody:not(thead + tbody) > tr:nth-of-type(2) > td:nth-of-type(2)":{borderTopLeftRadius:f},"> thead > tr > th:last-of-type, > tbody:not(thead + tbody) > tr:nth-of-type(2) > td:last-of-type":{borderTopRightRadius:f},"> tbody > tr:last-of-type > td:first-of-type":{borderBottomLeftRadius:f},"> tbody > tr:last-of-type > td:last-of-type":{borderBottomRightRadius:f}},";label:-Table--borderRadiusStyles;"),S={name:"6aop1o--Table--hiddenSelectionStyles",styles:"*::selection{background:none;};label:-Table--hiddenSelectionStyles;"},T=(0,o.css)({"> thead > tr > th":{borderTop:v},"> thead > tr > th:last-of-type, > tbody > tr > td:last-of-type, > tfoot > tr > td:last-of-type":{borderRight:v},"> tbody > tr:last-of-type > td":{borderBottom:v}},";label:-Table--liveResultStyles;"),Z={name:"1c23veq--Table--showAllRowsWrapperStyle",styles:"position:relative;label:-Table--showAllRowsWrapperStyle;"},I=(0,o.css)({position:"absolute",height:"calc(".concat(g.XH," * 1.5)"),left:0,right:0,bottom:"57px",background:"linear-gradient(180deg, transparent, ".concat((0,h.g)("backgroundColor"),")"),border:"1px solid ref"},";label:-Table--thinVeilAtTheEndStyles;"),D={name:"8vh604--Table--showMoreWrapperStyles",styles:"width:100%;position:relative;padding-bottom:20px;margin-top:10px;display:flex;justify-content:center;label:-Table--showMoreWrapperStyles;"},R={name:"1t86wtk--Table--showMoreButtonWrapperStyles",styles:"display:flex;flex-direction:row;label:-Table--showMoreButtonWrapperStyles;"},N=e=>{let{columnCount:t,hiddenRowCount:n,handleSetShowALlRowsButtonPress:r,isReadOnly:l,isLiveResult:i}=e;return(0,b.BX)("tr",{children:[!l&&(0,b.tZ)("td",{contentEditable:!1,style:{border:0}}),(0,b.tZ)("td",{colSpan:l?t:t+1,contentEditable:!1,css:(c=i?v:y,(0,o.css)({borderBottom:c},";label:-Table--showAllRowsTdStyles;")),style:{borderRight:0},children:(0,b.BX)("div",{css:Z,children:[(0,b.tZ)("div",{css:I}),(0,b.tZ)("div",{css:D,children:(0,b.tZ)("div",{css:R,children:(0,b.tZ)(s.q,{text:"View ".concat(n," more ").concat(a()("result",n)),onClick:r,children:(0,b.tZ)(p.b,{})})})})]})})]});var c};var L={name:"1u8u4y4--Table--Table",styles:"position:relative;label:-Table--Table;"};const M=e=>{let{head:t,body:n,smartRow:l,addTable:a,previewMode:s=!0,border:p="all",columnCount:h=1,dropRef:g,tableWidth:m,isSelectingCell:f,hiddenRowCount:Z=0,handleSetShowALlRowsButtonPress:I=r.ZT,isReadOnly:D=!1,isLiveResult:R=!1,onMouseOver:M=r.ZT}=e;const[B]=function(){let{easing:e=d.Ui,duration:t=d.X4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{n.current instanceof HTMLElement&&u&&(0,c.ZP)(n.current,{easing:e,duration:t})}),[n,e,t]),[n]}(),O=R?v:y,A=(0,i.useCallback)((()=>M(!0)),[M]),_=(0,i.useCallback)((()=>M(!1)),[M]);return(0,b.BX)("table",{ref:g,css:[x,"all"===p&&!D&&[E,(P=O,V=y,(0,o.css)({"":{borderRight:V,borderBottom:V},"> thead > tr > th, > tbody:not(thead + tbody) > tr:nth-of-type(2) > td":{borderTop:V},"> thead > tr > th:nth-of-type(2), > tbody > tr > td:nth-of-type(1), > tfoot > tr > td:nth-of-type(1)":{borderLeft:P}},";label:-Table--allBorderStyles;"))],"WIDE"===m&&w,f&&S,R&&T,"inner"===p&&C,D&&k,!t&&{borderTop:O},";label:-Table--Table;"],onMouseEnter:A,onMouseLeave:_,children:[t&&(0,b.tZ)("thead",{children:t}),(0,b.BX)("tbody",{ref:B,children:[n,Z>0&&(0,b.tZ)(N,{columnCount:h,hiddenRowCount:Z,handleSetShowALlRowsButtonPress:I,isReadOnly:D,isLiveResult:R})]}),(0,b.tZ)("tfoot",{children:s&&(0,b.BX)("tr",{contentEditable:!1,css:[L,";label:-Table--Table;"],children:[a,l]})})]});var P,V}},82915:(e,t,n)=>{"use strict";n.d(t,{Q:()=>G});var r=n(426),o=n(30969),l=n(13986),a=(n(16976),n(20932)),i=n(1146),s=n(55013),c=n(72209),d=n(8243),u=n(12907),p=n(99312),h=n(49830),g=n(89039),m=n(69656),b=n(24016),y=n(3724),v=n(76444),f=n(52047),x=n(54999),C=n(73768),k=n(91745),w=n(66840),E=n(79820),S=n(47472),T=n(5594);const Z=(0,r.css)({background:(0,w.g)("backgroundColor"),border:"1px solid ".concat((0,w.g)("borderColor")),borderRadius:"6px",":hover, :focus-within":{borderColor:"".concat((0,w.g)("strongerHighlightColor"))},display:"flex",margin:"calc(-1 * ".concat(S.x,")")},";label:-UnitMenuItem--menuItemStyles;"),I=(0,r.css)(E.t5,{...(0,w.m)("currentTextColor",(0,w.g)("weakTextColor")),":focus-within":{...(0,w.m)("currentTextColor",(0,w.g)("normalTextColor"))},background:(0,w.g)("highlightColor"),borderRadius:"6px",padding:"6px 12px",width:0,flex:"1 1 0px"},";label:-UnitMenuItem--inputStyles;"),D=(0,r.css)(E.KY,{":hover, :focus":{background:(0,w.g)("strongHighlightColor")},borderRadius:"6px",margin:"2px",padding:"4px 8px"},";label:-UnitMenuItem--buttonStyles;"),R={text:"",unit:null};function N(e,t){switch(t.type){case"text":return{...e,text:t.value};case"unit":return{...e,unit:t.value}}}const L=e=>{let{onSelect:t=s.ZT,parseUnit:n=(()=>Promise.resolve(null)),placeholder:r="Create a custom unit"}=e;const[l,a]=(0,o.useReducer)(N,R);(0,o.useEffect)((()=>{l.text.length>0&&(async()=>{try{const e=await n(l.text);a({type:"unit",value:e})}catch{a({type:"unit",value:null})}})()}),[l.text,n]);const i=(0,o.useRef)(null);return(0,T.tZ)(d.s,{onSelect:()=>t(l.unit),onFocus:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.focus()},children:(0,T.BX)("div",{css:Z,children:[(0,T.tZ)("input",{css:I,defaultValue:"",onClick:e=>{e.stopPropagation()},ref:i,onChange:e=>{a({type:"text",value:e.target.value})},onMouseLeave:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.focus()},onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key&&e.stopPropagation()},placeholder:r}),null!=l.unit&&(0,T.tZ)("button",{css:D,onClick:()=>t(l.unit),children:"Add new"})]})})};var M=n(55099);const B={name:"zwsuja--TableColumnMenu--tableColumnMenuStyles",styles:"margin-left:auto;mix-blend-mode:luminosity;label:-TableColumnMenu--tableColumnMenuStyles;"},O=l.Yv.filter((e=>!!e.pretty&&e.pretty.length<=3)),A=(e,t)=>{if(!e||1!==e.length)return!1;const n=e[0];return n.unit===t.name&&(0,a.N)(n.exp).equals(a.ry)&&(0,a.N)(n.multiplier).equals(a.ry)&&n.baseSuperQuantity===t.superBaseQuantity};var _={name:"13r6nbz--TableColumnMenu--TableColumnMenu",styles:"min-width:132px;label:-TableColumnMenu--TableColumnMenu;"},P={name:"13r6nbz--TableColumnMenu--TableColumnMenu",styles:"min-width:132px;label:-TableColumnMenu--TableColumnMenu;"},V={name:"1r86vgj--TableColumnMenu--TableColumnMenu",styles:"margin-left:2px;label:-TableColumnMenu--TableColumnMenu;"},H={name:"ka37nt--TableColumnMenu--TableColumnMenu",styles:"min-width:116px;label:-TableColumnMenu--TableColumnMenu;"},W={name:"ka37nt--TableColumnMenu--TableColumnMenu",styles:"min-width:116px;label:-TableColumnMenu--TableColumnMenu;"},K={name:"ka37nt--TableColumnMenu--TableColumnMenu",styles:"min-width:116px;label:-TableColumnMenu--TableColumnMenu;"};const U=e=>{let{open:t,onChangeOpen:n,onChangeColumnType:r=s.ZT,onRemoveColumn:l=s.ZT,parseUnit:w,isFirst:E=!1,trigger:S,type:Z,isForImportedColumn:I=!1,dropdownNames:D=[]}=e;const R=(0,i.Iy)(),N=(0,i.tZ)(),{length:U}=N.cellTypes,[X,$]=(0,o.useState)(null),q=e=>{$(e===X?null:e)};return(0,T.tZ)("div",{contentEditable:!1,css:B,children:(0,T.BX)(k.q,{root:!0,dropdown:!0,open:t,onChangeOpen:n,trigger:S,children:[(0,T.BX)(k.q,{itemTrigger:(0,T.tZ)(c.e,{icon:(0,T.tZ)(u.j,{}),children:(0,T.tZ)("div",{css:_,children:"Change type"})}),children:["number"===Z.kind&&null!=Z.unit&&(j=Z.unit,!(j&&1===j.length&&"currency"===j[0].baseSuperQuantity))&&(0,T.tZ)(d.s,{icon:(0,T.tZ)(p.o,{}),selected:!0,children:R.formatUnit(Z.unit,(0,a.N)(1))},"all"),(0,T.tZ)(d.s,{icon:(0,T.tZ)(h.M,{}),onSelect:()=>r((0,M.RH)()),selected:"number"===Z.kind&&null==Z.unit,children:"Number"},"number"),(0,T.tZ)(k.q,{itemTrigger:(0,T.tZ)(c.e,{icon:(0,T.tZ)(g.R,{}),children:(0,T.tZ)("div",{css:P,children:"Currency"})}),open:"currency"===X,onChangeOpen:()=>q("currency"),children:O.map(((e,t)=>{var n;return(0,T.tZ)(d.s,{icon:(0,T.tZ)("span",{children:null!==(n=e.pretty)&&void 0!==n?n:e.name}),onSelect:()=>r((0,M.RH)([{exp:a.ry,multiplier:a.ry,known:!0,unit:e.name,baseSuperQuantity:e.superBaseQuantity,baseQuantity:e.name}])),selected:"number"===Z.kind&&A(Z.unit,e),itemAlignment:"center",children:(0,T.tZ)("span",{css:V,children:e.baseQuantity})},t)}))},"currency"),!I&&!E&&(0,T.tZ)(d.s,{icon:(0,T.tZ)(m.S,{}),onSelect:()=>r((0,M.$3)()),selected:"table-formula"===Z.kind,children:"Formula"},"table-formula"),(0,T.tZ)(d.s,{icon:(0,T.tZ)(b.d,{}),onSelect:()=>r((0,M.W1)()),selected:"boolean"===Z.kind,children:"Checkbox"},"boolean"),(0,T.tZ)(d.s,{icon:(0,T.tZ)(y.x,{}),onSelect:()=>r((0,M.jD)()),selected:"string"===Z.kind,children:"Text"},"string"),!E&&D.length>0&&(0,T.tZ)(k.q,{itemTrigger:(0,T.tZ)(c.e,{icon:(0,T.tZ)(v.d,{}),selected:"date"===Z.kind,children:(0,T.tZ)("div",{css:H,children:"Categories"})}),open:"dropdowns"===X,onChangeOpen:()=>q("dropdowns"),children:D.map(((e,t)=>(0,T.tZ)(d.s,{icon:(0,T.tZ)(v.d,{}),onSelect:()=>r({kind:"dropdown",id:e.id,type:e.type}),selected:!1,children:e.value},t)))},"dropdown-tables"),(0,T.BX)(k.q,{itemTrigger:(0,T.tZ)(c.e,{icon:(0,T.tZ)(f.f,{}),selected:"date"===Z.kind,children:(0,T.tZ)("div",{css:W,children:"Date"})}),open:"date"===X,onChangeOpen:()=>q("date"),children:[(0,T.tZ)(d.s,{icon:(0,T.tZ)(f.f,{}),onSelect:()=>r((0,M.u9)("year")),selected:"date"===Z.kind&&"year"===Z.date,children:"Year"},"year"),(0,T.tZ)(d.s,{icon:(0,T.tZ)(f.f,{}),onSelect:()=>r((0,M.u9)("month")),selected:"date"===Z.kind&&"month"===Z.date,children:"Month"},"month"),(0,T.tZ)(d.s,{icon:(0,T.tZ)(f.f,{}),onSelect:()=>r((0,M.u9)("day")),selected:"date"===Z.kind&&"day"===Z.date,children:"Day"},"day"),(0,T.tZ)(d.s,{icon:(0,T.tZ)(f.f,{}),onSelect:()=>r((0,M.u9)("minute")),selected:"date"===Z.kind&&"minute"===Z.date,children:"Time"},"minute")]},"dates"),!I&&(0,T.tZ)(k.q,{itemTrigger:(0,T.tZ)(c.e,{icon:(0,T.tZ)(x.B,{}),selected:"series"===Z.kind,children:(0,T.tZ)("div",{css:K,children:"Series"})}),open:"series"===X,onChangeOpen:()=>q("series"),children:(0,T.tZ)(d.s,{icon:(0,T.tZ)(f.f,{}),onSelect:()=>r((0,M.Ne)("date")),selected:"series"===Z.kind&&"date"===Z.seriesType,children:"Date"})},"series"),(0,T.tZ)(L,{placeholder:"create custom",onSelect:e=>{r({kind:"number",unit:e})},parseUnit:w})]}),U>1?(0,T.tZ)(d.s,{icon:(0,T.tZ)(C.r,{}),onSelect:()=>l(),children:"Delete column"},"delete column"):null]})});var j};var X=n(14966),$=n(66165),q=n(99072);const j=(0,r.css)({display:"grid",alignItems:"center",width:"16px",minHeight:q.xB},";label:-TableColumnHeader--rightSlotStyles;"),G=e=>{let{onChangeColumnType:t,onRemoveColumn:n,parseUnit:r,isFirst:l,type:a=(0,M.jD)(),readOnly:i=!1,isForImportedColumn:s=!1,children:c,dropdownNames:d=[],...u}=e;const[p,h]=(0,o.useState)(!1);return(0,T.tZ)(X.x,{...u,isEditable:!i,menu:!i&&(0,T.tZ)(U,{trigger:(0,T.tZ)("button",{css:j,children:(0,T.tZ)($.F,{variant:"down"})}),open:p,onChangeOpen:h,onChangeColumnType:t,onRemoveColumn:n,parseUnit:r,isFirst:l,type:a,isForImportedColumn:s,dropdownNames:d}),highlight:p,type:a,children:c})}},37753:(e,t,n)=>{"use strict";n.d(t,{h:()=>G});var r=n(30969),o=n(426),l=n(50576),a=n(1146),i=n(96742),s=n(55013),c=n(47578),d=n(16976),u=n(3359),p=n(72209),h=n(8243),g=n(91745),m=n(68861),b=n(66840),y=n(79820),v=n(57481),f=n(47472),x=n(5594);const C=(0,o.css)({...(0,b.m)("currentTextColor",(0,b.g)("weakTextColor")),background:(0,b.g)("backgroundColor"),alignItems:"center",display:"flex",gap:"6px",margin:"calc(-1 * ".concat(f.x,")"),padding:"0 ".concat(f.x),cursor:"initial"},";label:-InputMenuItem--menuItemStyles;"),k={name:"11lmwy0--InputMenuItem--labelStyles",styles:"flex:1 1 0px;label:-InputMenuItem--labelStyles;"},w=(0,o.css)(y.t5,{...(0,b.m)("currentTextColor",(0,b.g)("weakTextColor")),":focus-within":{...(0,b.m)("currentTextColor",(0,b.g)("normalTextColor"))},border:"1px solid ".concat((0,b.g)("borderColor")),borderRadius:"6px","*:hover > &, :focus":{borderColor:"".concat((0,b.g)("strongerHighlightColor"))},padding:"4px 12px",margin:"2px 0",width:0,flex:"0 1 100%",background:(0,b.g)("highlightColor")},";label:-InputMenuItem--inputStyles;"),E=(0,o.css)({borderColor:v._$.rgb,"*:hover > &, :focus":{borderColor:v._$.rgb}},";label:-InputMenuItem--errorInputStyles;"),S=e=>{let{error:t,label:n,onChange:r=s.ZT,pattern:o,placeholder:l,type:a="text",value:i}=e;const c=(0,x.tZ)("input",{css:[w,t&&E,";label:-InputMenuItem--input;"],onClick:e=>{e.stopPropagation()},onChange:e=>r(e.target.value),pattern:o,placeholder:l,type:a,value:i});return(0,x.tZ)(h.s,{onPointerMove:e=>{e.preventDefault()},children:(0,x.BX)("div",{css:C,children:[n&&(0,x.tZ)("span",{css:k,children:n}),(0,x.tZ)(m.u,{open:!!t&&void 0,trigger:c,children:(0,x.tZ)("p",{children:t})})]})})};var T=n(12907),Z=n(49830),I=n(3724),D=n(48760),R=n(52047),N=n(55099);var L={name:"1p0a2h3--VariableEditorMenu--VariableEditorMenu",styles:"min-width:132px;label:-VariableEditorMenu--VariableEditorMenu;"},M={name:"1p0a2h3--VariableEditorMenu--VariableEditorMenu",styles:"min-width:132px;label:-VariableEditorMenu--VariableEditorMenu;"},B={name:"zu4ryq--VariableEditorMenu--VariableEditorMenu",styles:"min-width:165px;label:-VariableEditorMenu--VariableEditorMenu;"};const O=e=>{let{onChangeMax:t,onChangeMin:n,onChangeStep:o,onCopy:l=s.ZT,onDelete:a=s.ZT,type:i,onChangeType:m=s.ZT,max:b,min:y,step:v,trigger:f,variant:C="expression",smartSelection:k=!1}=e;const w=(0,r.useCallback)((()=>{m("smart-selection")}),[m]);return(0,x.BX)(g.q,{root:!0,dropdown:!0,trigger:f,children:["slider"===C&&[(0,x.tZ)(S,{error:null!=b&&null!=y&&Number(y)>Number(b)?"Must be lower than ".concat(b):void 0,label:"Minimum",onChange:n,pattern:d.PH.main.number.match.source,value:y},"min"),(0,x.tZ)(S,{error:null!=b&&null!=y&&Number(b)<Number(y)?"Must be bigger than ".concat(y):void 0,label:"Maximum",onChange:t,pattern:d.PH.main.number.match.source,value:b},"max"),(0,x.tZ)(S,{error:null!=b&&null!=y&&null!=v?Math.abs(Number(y)-Number(b))<Number(v)?"Must be lower than ".concat(Math.abs(Number(y)-Number(b))):Number(v)<=0?"Must be bigger than 0":void 0:void 0,label:"Step",onChange:o,pattern:d.PH.main.number.match.source,value:v},"step"),(0,x.tZ)(u.C,{},"sep")],"expression"===C||"dropdown"===C?(0,x.BX)(g.q,{itemTrigger:(0,x.tZ)(p.e,{icon:(0,x.tZ)(T.j,{}),children:(0,x.tZ)("div",{css:L,children:"Change type"})}),children:[(0,x.tZ)(h.s,{icon:(0,x.tZ)(Z.M,{}),onSelect:()=>m((0,N.RH)()),selected:"number"===(null===i||void 0===i?void 0:i.kind)&&null==i.unit&&!k,children:"Number"}),(0,x.tZ)(h.s,{icon:(0,x.tZ)(I.x,{}),onSelect:()=>m((0,N.jD)()),selected:"string"===(null===i||void 0===i?void 0:i.kind)&&!k,children:"Text"}),"dropdown"===C&&(0,x.tZ)(h.s,{icon:(0,x.tZ)(D.i,{}),onSelect:w,selected:k,children:"Smart Selection"})]}):"date"===C&&(0,x.BX)(g.q,{itemTrigger:(0,x.tZ)(p.e,{icon:(0,x.tZ)(T.j,{}),children:(0,x.tZ)("div",{css:M,children:"Change type"})}),children:[(0,x.tZ)(h.s,{icon:(0,x.tZ)(R.f,{}),onSelect:()=>m((0,N.u9)("year")),selected:"date"===(null===i||void 0===i?void 0:i.kind)&&"year"===i.date,children:"Year"}),(0,x.tZ)(h.s,{icon:(0,x.tZ)(R.f,{}),onSelect:()=>m((0,N.u9)("month")),selected:"date"===(null===i||void 0===i?void 0:i.kind)&&"month"===i.date,children:"Month"}),(0,x.tZ)(h.s,{icon:(0,x.tZ)(R.f,{}),onSelect:()=>m((0,N.u9)("day")),selected:"date"===(null===i||void 0===i?void 0:i.kind)&&"day"===i.date,children:"Day"}),(0,x.tZ)(h.s,{icon:(0,x.tZ)(R.f,{}),onSelect:()=>m((0,N.u9)("minute")),selected:"date"===(null===i||void 0===i?void 0:i.kind)&&"minute"===i.date,children:"Time"})]}),(0,c.J8)("INPUT_COPY")&&(0,x.tZ)(h.s,{onSelect:l,children:"Copy"}),(0,x.tZ)(h.s,{onSelect:a,children:(0,x.tZ)("div",{css:B,children:"Delete"})})]})};var A=n(86302),_=n(96377),P=n(7392),V=n(49939),H=n(74029);const W=(e,t)=>{let{variant:n}=e;const r=(0,b.g)("backgroundColor"),l="display"===n?v.ZP.rgb:t,a=(0,b.g)("borderColor"),i="linear-gradient(".concat(r,", ").concat(r,"), linear-gradient(to right, ").concat(l," 0%, ").concat(a," 18.71%)");return(0,o.css)({border:"1px solid transparent",borderRadius:"8px",backgroundImage:i,backgroundOrigin:"border-box",backgroundClip:"content-box, border-box",boxShadow:"0px 2px 20px ".concat((0,v.KZ)(v.ou,.04).rgba,",\n     0px 2px 8px ").concat((0,v.KZ)(v.lz,.02).rgba,",\n     -").concat(6,"px 0px ").concat(t),marginLeft:"".concat(6,"px"),maxWidth:"262px",minWidth:"175px",width:"100%"},";label:-VariableEditor--wrapperStyles;")},K={name:"r2gy5y--VariableEditor--widgetWrapperStyles",styles:"align-items:center;display:grid;gap:8px;padding:8px 8px 16px;label:-VariableEditor--widgetWrapperStyles;"},U={name:"s07oo5--VariableEditor--headerWrapperStyles",styles:"position:relative;display:inline-flex;grid-auto-columns:auto;min-width:0;gap:4px;label:-VariableEditor--headerWrapperStyles;"},X=e=>{let{variant:t}=e;return(0,o.css)((0,b.m)("currentTextColor",(0,b.g)("weakTextColor")),{display:"grid",height:"20px",width:"20px",flexShrink:0,..."display"===t&&{position:"absolute",top:0,right:0},[V.a$]:{height:"16px",width:"16px"}},";label:-VariableEditor--iconWrapperStyles;")},$=e=>{let{variant:t}=e;return(0,o.css)({padding:"2px",flexShrink:0,":hover":{backgroundColor:(0,b.g)("highlightColor"),borderRadius:"50%"},..."display"===t&&{position:"absolute",top:0,right:0,width:"20px",height:"20px"}},";label:-VariableEditor--buttonWrapperStyles;")},q=e=>{let{variant:t}=e;return(0,o.css)({alignSelf:"start",flexGrow:2,minWidth:0,position:"relative","::after":{display:"block",height:"100%",width:"24px",content:'""',right:0,top:0,position:"absolute",pointerEvents:"none",..."display"!==t&&{color:"white",background:"linear-gradient(\n      90deg,\n      ".concat((0,v.KZ)(v.ix,0).rgba,",\n      ").concat((0,b.g)("backgroundColor"),"\n    )")}}},";label:-VariableEditor--variableNameStyles;")};var j={name:"12ejcj7--VariableEditor--VariableEditor",styles:"display:flex;flex-direction:column;gap:4px;label:-VariableEditor--VariableEditor;"};const G=e=>{let{children:t,readOnly:n=!1,color:o="Sulu",type:s,onChangeType:c=l.noop,value:d,onChangeValue:u=l.noop,element:p,...h}=e;const g=r.Children.toArray(t),[m]=(0,a.yt)(),b=(0,H.VT)(m),y=(0,r.useMemo)((()=>{var e;return null!==(e=s&&(0,N.aX)(s,!0))&&void 0!==e?e:A.C}),[s]),v=(0,i.vt)();return(0,x.tZ)("div",{css:W({variant:h.variant},"display"===h.variant?"#FFFFFF":b[o].rgb),children:(0,x.BX)("div",{css:K,children:[(0,x.tZ)("div",{css:[U,"display"===h.variant&&{gap:0},";label:-VariableEditor--VariableEditor;"],children:(0,x.BX)(x.HY,{children:[(0,x.tZ)("div",{css:q({variant:h.variant}),children:g[0]}),!n&&"display"!==h.variant&&(0,x.tZ)("span",{contentEditable:!1,css:X({variant:h.variant}),children:(0,x.tZ)(y,{})}),(0,x.tZ)("div",{contentEditable:!1,css:X({variant:h.variant}),children:!n&&(0,x.tZ)(O,{...h,trigger:(0,x.tZ)("button",{css:$({variant:h.variant}),children:(0,x.tZ)(_.m,{})}),type:s,onChangeType:c})})]})}),"display"!==h.variant&&g.length>1&&(0,x.tZ)(P.Y,{type:s,value:d,onChangeValue:u,focused:v,element:p,children:(0,x.tZ)("div",{css:j,children:g.slice(1)})})]})})}},168:(e,t,n)=>{"use strict";n.r(t),n.d(t,{blockquote:()=>a,callout:()=>i,codeLine:()=>p,columns:()=>f,divider:()=>y,dividerBlock:()=>v,draw:()=>x,editorTable:()=>h,editorWideTable:()=>g,heading1:()=>c,heading2:()=>d,interactive:()=>b,list:()=>u,media:()=>s,paragraph:()=>l,plot:()=>m,structured:()=>C,title:()=>o});var r=n(79820);const o={typography:r.jf},l={typography:r.sK},a={typography:r.sK},i={typography:r.yw},s={typography:r.yw},c={typography:r.h1},d={typography:r.h2},u={typography:r.sK},p={},h={typography:r.h2},g={typography:r.h2},m={},b={typography:r.sK},y={typography:r.cp},v={},f={spacingTop:"0",spacingBottom:"0"},x={},C={}},30879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{lineHeight:()=>a,structuredVariableStyles:()=>c,varStyles:()=>s,variableStyles:()=>i});var r=n(426),o=n(79820),l=n(66840);const a="36px",i={...o.TU,...(0,l.m)("currentTextColor",(0,l.g)("variableHighlightTextColor")),backgroundColor:(0,l.g)("variableHighlightColor"),fontWeight:500,fontSize:"13px"},s=(0,r.css)(i,"padding:4px 6px;border-radius:6px;font-size:13px;;label:-code-block--varStyles;"),c={...o.rC}},74407:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});const r=2},11389:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(66840);const o={":empty":{display:"none"},borderRadius:8,backgroundColor:(0,r.g)("backgroundColor"),border:"1px solid ".concat((0,r.g)("borderColor")),filter:"drop-shadow(0px 1px 0px ".concat((0,r.g)("borderColor"),")"),"@media print":{backgroundColor:"unset",border:"unset",filter:"unset"}}},99072:(e,t,n)=>{"use strict";n.d(t,{Bf:()=>d,IT:()=>a,PI:()=>p,XH:()=>s,YE:()=>g,ZO:()=>v,Zv:()=>m,a2:()=>u,ci:()=>h,gL:()=>c,v4:()=>y,vr:()=>b,xB:()=>i});var r=n(426),o=n(66840),l=n(59336);const a="20px",i="32px",s="36px",c="120px",d="240px",u="8px",p="12px",h="5px",g=(0,r.css)({paddingLeft:p,paddingRight:p},";label:-table--cellLeftPaddingStyles;"),m={name:"n6dtti--table--tableParentStyles",styles:"padding:0;overflow:hidden;table{width:100%;};label:-table--tableParentStyles;"},b=(0,r.css)({gridArea:"handle",cursor:"grab",width:"18px",height:"18px",borderRadius:"6px",...(0,o.m)("currentTextColor",(0,o.g)("weakTextColor")),padding:"5px",":hover":{background:(0,o.g)("highlightColor")}},";label:-table--importTableDragHandleStyles;"),y=e=>({padding:(0,l.u)(e)?void 0:"".concat(u," ").concat(p)}),v=10},49758:(e,t,n)=>{"use strict";n.d(t,{j:()=>o,u:()=>r});const r="list-item",o="table-row"},59336:(e,t,n)=>{"use strict";function r(e){return null!=e&&("column"===e.kind||"row"===e.kind||"table"===e.kind)}n.d(t,{u:()=>r})},55099:(e,t,n)=>{"use strict";n.d(t,{$3:()=>f,Jt:()=>C,Ne:()=>b,RH:()=>y,W1:()=>v,aX:()=>g,dg:()=>k,jD:()=>x,u9:()=>m});var r=n(30969),o=n(52047),l=n(24016),a=n(49830),i=n(89039),s=n(99312),c=n(69656),d=n(3724),u=n(32321),p=n(17813);const h=e=>1===(null===e||void 0===e?void 0:e.length)&&"currency"===e[0].baseSuperQuantity;function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e.kind){case"date":case"series":return o.f;case"boolean":return l.d;case"number":return null==e.unit?a.M:h(e.unit)?i.R:s.o;case"table-formula":return c.S;case"dropdown":return"number"===e.type?a.M:d.x;case"anything":return t?u.E:"span";case"type-error":return p.v;default:return d.x}}function m(e){return{kind:"date",date:e}}function b(e){return{kind:"series",seriesType:e}}function y(e){return{kind:"number",unit:null!==e&&void 0!==e?e:null}}function v(){return{kind:"boolean"}}function f(){return{kind:"table-formula"}}function x(){return{kind:"string"}}function C(e){switch(e.kind){case"number":case"string":case"date":case"boolean":return e;default:return}}const k=(0,r.createContext)({icon:"Table",color:void 0,hideAddDataViewButton:!1,isCollapsed:!1,hideFormulas:!1,setIcon:()=>{throw new Error("No way to change the icon provided")},setColor:()=>{throw new Error("No way to change the color provided")},setCollapsed:()=>{throw new Error("No way to set collapsed")},setHideFormulas:()=>{throw new Error("No way to set hide formulas")}})},1264:()=>{},96374:()=>{},38217:()=>{}};
//# sourceMappingURL=8112.874783fa.chunk.js.map