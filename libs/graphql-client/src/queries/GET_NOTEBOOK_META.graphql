fragment UserAccessMeta on UserAccess {
  user {
    id
    name
    email
    image
  }
  permission
  canComment
}

fragment WorkspaceSubscriptionWithData on WorkspaceSubscription {
  id
  paymentStatus
  credits
  queries
  seats
  editors
  readers
  storage
}

fragment NotebookMetaData on Pad {
  id
  name
  status
  myPermissionType
  isPublic
  userConsentToFeatureOnGallery
  createdAt
  initialState
  gist
  canPublicDuplicate
  aliases {
    id
    alias
    annotations {
      id
      content
      meta
    }
    events {
      id
      name
      created_at
      meta
    }
  }
  workspace {
    id
    name
    isPremium
    plan
    myPermissionType
    access {
      id
      users {
        ...UserAccessMeta
      }
    }
    membersCount
    resourceUsages {
      id
      resourceType
      consumption
    }
    workspaceSubscription {
      ...WorkspaceSubscriptionWithData
    }
  }
  snapshots {
    snapshotName
    createdAt
    updatedAt
    version
  }
  archived
  access {
    id
    users {
      ...UserAccessMeta
    }
  }
}

fragment NotebookWorkspacesData on Workspace {
  id
  name
}

query GetNotebookMeta($id: ID!) {
  getPadById(id: $id) {
    ...NotebookMetaData
  }
  workspaces {
    ...NotebookWorkspacesData
  }
}
