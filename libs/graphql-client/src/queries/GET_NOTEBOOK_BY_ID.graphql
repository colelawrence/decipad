fragment NotebookSnapshot on PadSnapshot {
  snapshotName
  createdAt
  updatedAt
  data
  version
}

fragment Collaborator on User {
  id
  image
  name
  email
  username
  onboarded
  emailValidatedAt
}

fragment WorkspaceExecutedQueryData on WorkspaceExecutedQuery {
  queryCount
  quotaLimit
}

fragment EditorNotebook on Pad {
  id
  name
  myPermissionType
  icon
  status
  isPublic
  createdAt
  archived
  access {
    users {
      user {
        ...Collaborator
      }
      permission
    }
  }
  workspace {
    id
    name
    isPremium
    workspaceExecutedQuery {
      ...WorkspaceExecutedQueryData
    }
    ...WorkspaceMembers
  }
  padConnectionParams {
    url
    token
  }
  initialState
  snapshots {
    ...NotebookSnapshot
  }
}

query GetNotebookById($id: ID!, $snapshotName: String) {
  getPadById(id: $id, snapshotName: $snapshotName) {
    ...EditorNotebook
  }
}
