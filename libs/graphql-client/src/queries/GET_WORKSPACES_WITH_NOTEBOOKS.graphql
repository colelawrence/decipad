fragment WorkspaceNotebook on Pad {
  id
  name
  icon
  status
  createdAt
  archived
  isPublic
  section {
    id
    name
  }
  myPermissionType
}

fragment WorkspaceSection on Section {
  id
  name
  color
  pads {
    ...WorkspaceNotebook
  }
  createdAt
}

fragment WorkspaceMembers on Workspace {
  access {
    users {
      permission
      user {
        id
        name
        email
        image
        emailValidatedAt
      }
    }
    roles {
      permission
      role {
        id
        users {
          id
          name
          email
          image
          emailValidatedAt
        }
      }
    }
  }
}

fragment WorkspaceSubscriptionWithData on WorkspaceSubscription {
  paymentStatus
}

fragment WorkspaceExecutedQueryData on WorkspaceExecutedQuery {
  queryCount
  quotaLimit
}

fragment DashboardWorkspace on Workspace {
  id
  name
  isPremium
  pads(page: { maxItems: 10000 }) {
    items {
      ...WorkspaceNotebook
    }
  }
  workspaceSubscription {
    ...WorkspaceSubscriptionWithData
  }
  workspaceExecutedQuery {
    ...WorkspaceExecutedQueryData
  }
  membersCount
  sections {
    ...WorkspaceSection
  }
  ...WorkspaceMembers
}

query GetWorkspaces {
  workspaces {
    ...DashboardWorkspace
  }

  padsSharedWithMe(page: { maxItems: 10000 }) {
    items {
      ...WorkspaceNotebook
    }
  }
}
