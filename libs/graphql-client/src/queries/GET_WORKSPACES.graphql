fragment WorkspaceSection on Section {
  id
  name
  color
  createdAt
}

fragment WorkspaceMembers on Workspace {
  access {
    id
    users {
      permission
      user {
        id
        name
        email
        image
        emailValidatedAt
      }
    }
    roles {
      permission
      role {
        id
      }
    }
  }
}

fragment WorkspaceSubscriptionWithData on WorkspaceSubscription {
  id
  paymentStatus
  credits
  queries
  seats
  editors
  readers
  storage
}

fragment WorkspaceExecutedQueryData on WorkspaceExecutedQuery {
  queryCount
  quotaLimit
}

fragment ShallowWorkspace on Workspace {
  id
  name
  isPremium
  plan
  createdAt
  workspaceSubscription {
    ...WorkspaceSubscriptionWithData
  }
  workspaceExecutedQuery {
    ...WorkspaceExecutedQueryData
  }
  membersCount
  sections {
    ...WorkspaceSection
  }
  ...WorkspaceMembers
  resourceUsages {
    id
    resourceType
    consumption
    originalAmount
  }
  myPermissionType
}

query GetWorkspacesWithoutNotebooks {
  workspaces {
    ...ShallowWorkspace
  }
}

query GetWorkspacesWithSharedNotebooks {
  workspaces {
    ...ShallowWorkspace
  }

  padsSharedWithMe(page: { maxItems: 10000 }) {
    items {
      ...WorkspaceNotebook
    }
  }
}
