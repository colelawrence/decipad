fragment WorkspaceNotebook on Pad {
  id
  name
  icon
  status
  createdAt
  archived
  isPublic
  sectionId
  section {
    id
    name
  }
  myPermissionType
}

fragment WorkspaceSection on Section {
  id
  name
  color
  pads {
    ...WorkspaceNotebook
  }
  createdAt
}

fragment WorkspaceMembers on Workspace {
  access {
    id
    users {
      permission
      user {
        id
        name
        email
        image
        emailValidatedAt
      }
    }
    roles {
      permission
      role {
        id
      }
    }
  }
}

fragment WorkspaceSubscriptionWithData on WorkspaceSubscription {
  id
  paymentStatus
  credits
  queries
  seats
  storage
}

fragment WorkspaceExecutedQueryData on WorkspaceExecutedQuery {
  queryCount
  quotaLimit
}

fragment DashboardWorkspace on Workspace {
  id
  name
  isPremium
  plan
  createdAt
  myPermissionType
  pads(page: { maxItems: 10000 }) {
    items {
      ...WorkspaceNotebook
    }
  }
  workspaceSubscription {
    ...WorkspaceSubscriptionWithData
  }
  workspaceExecutedQuery {
    ...WorkspaceExecutedQueryData
  }
  membersCount
  sections {
    ...WorkspaceSection
  }
  ...WorkspaceMembers
  resourceUsages {
    id
    resourceType
    consumption
    originalAmount
  }
}

fragment ShallowWorkspace on Workspace {
  id
  name
  isPremium
  plan
  createdAt
  workspaceSubscription {
    ...WorkspaceSubscriptionWithData
  }
  workspaceExecutedQuery {
    ...WorkspaceExecutedQueryData
  }
  membersCount
  sections {
    ...WorkspaceSection
  }
  ...WorkspaceMembers
  resourceUsages {
    id
    resourceType
    consumption
  }
}

query GetWorkspacesWithoutNotebooks {
  workspaces {
    ...ShallowWorkspace
  }
}

query GetWorkspacesWithNotebooks {
  workspaces {
    ...DashboardWorkspace
  }

  padsSharedWithMe(page: { maxItems: 10000 }) {
    items {
      ...WorkspaceNotebook
    }
  }
}
